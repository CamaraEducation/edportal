var ContentBuilder=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e={exports:{}};e.exports=function(){var t="object",e="function",i="undefined",n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],r=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function l(i,n){var o=typeof i[n];return o==e||!(o!=t||!i[n])||"unknown"==o}function a(e,i){return!(typeof e[i]!=t||!e[i])}function d(t,e){return typeof t[e]!=i}function c(t){return function(e,i){for(var n=i.length;n--;)if(!t(e,i[n]))return!1;return!0}}var u=c(l),p=c(a),h=c(d);function g(t){return t&&u(t,r)&&h(t,s)}function m(t){return a(t,"body")?t.body:t.getElementsByTagName("body")[0]}var f,b,v=[].forEach?function(t,e){t.forEach(e)}:function(t,e){for(var i=0,n=t.length;i<n;++i)e(t[i],i)},y={},x=typeof window!=i&&typeof document!=i,w={isHostMethod:l,isHostObject:a,isHostProperty:d,areHostMethods:u,areHostObjects:p,areHostProperties:h,isTextRange:g,getBody:m,forEach:v},S={version:"1.3.0",initialized:!1,isBrowser:x,supported:!0,util:w,features:{},modules:y,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==i||rangyAutoInitialize}};function _(t){typeof console!=i&&l(console,"log")&&console.log(t)}function C(t,e){x&&e?alert(t):_(t)}function k(t){S.initialized=!0,S.supported=!1,C("Rangy is not supported in this environment. Reason: "+t,S.config.alertOnFail)}function E(t){C("Rangy warning: "+t,S.config.alertOnWarn)}S.fail=k,S.warn=E,{}.hasOwnProperty?(w.extend=f=function(t,e,i){var n,o;for(var s in e)e.hasOwnProperty(s)&&(n=t[s],o=e[s],i&&null!==n&&"object"==typeof n&&null!==o&&"object"==typeof o&&f(n,o,!0),t[s]=o);return e.hasOwnProperty("toString")&&(t.toString=e.toString),t},w.createOptions=function(t,e){var i={};return f(i,e),t&&f(i,t),i}):k("hasOwnProperty not supported"),x||k("Rangy can only run in a browser"),function(){var t;if(x){var e=document.createElement("div");e.appendChild(document.createElement("span"));var i=[].slice;try{1==i.call(e.childNodes,0)[0].nodeType&&(t=function(t){return i.call(t,0)})}catch(t){}}t||(t=function(t){for(var e=[],i=0,n=t.length;i<n;++i)e[i]=t[i];return e}),w.toArray=t}(),x&&(l(document,"addEventListener")?b=function(t,e,i){t.addEventListener(e,i,!1)}:l(document,"attachEvent")?b=function(t,e,i){t.attachEvent("on"+e,i)}:k("Document does not have required addEventListener or attachEvent method"),w.addListener=b);var A=[];function L(t){return t.message||t.description||String(t)}function q(){if(x&&!S.initialized){var t,e=!1,i=!1;l(document,"createRange")&&(t=document.createRange(),u(t,o)&&h(t,n)&&(e=!0));var s=m(document);if(s&&"body"==s.nodeName.toLowerCase())if(s&&l(s,"createTextRange")&&g(t=s.createTextRange())&&(i=!0),e||i){var r;for(var a in S.initialized=!0,S.features={implementsDomRange:e,implementsTextRange:i},y)(r=y[a])instanceof B&&r.init(r,S);for(var d=0,c=A.length;d<c;++d)try{A[d](S)}catch(t){_("Rangy init listener threw an exception. Continuing. Detail: "+L(t))}}else k("Neither Range nor TextRange are available");else k("No body element found")}}function T(t,e,i){i&&(t+=" in module "+i.name),S.warn("DEPRECATED: "+t+" is deprecated. Please use "+e+" instead.")}function M(t,e,i,n){t[e]=function(){return T(e,i,n),t[i].apply(t,w.toArray(arguments))}}w.deprecationNotice=T,w.createAliasForDeprecatedMethod=M,S.init=q,S.addInitListener=function(t){S.initialized?t(S):A.push(t)};var O=[];function R(t){t=t||window,q();for(var e=0,i=O.length;e<i;++e)O[e](t)}function B(t,e,i){this.name=t,this.dependencies=e,this.initialized=!1,this.supported=!1,this.initializer=i}function N(t,e,i){var n=new B(t,e,(function(e){if(!e.initialized){e.initialized=!0;try{i(S,e),e.supported=!0}catch(e){_("Module '"+t+"' failed to load: "+L(e)),e.stack&&_(e.stack)}}}));return y[t]=n,n}function I(){}function $(){}S.addShimListener=function(t){O.push(t)},x&&(S.shim=S.createMissingNativeApi=R,M(S,"createMissingNativeApi","shim")),B.prototype={init:function(){for(var t,e,i=this.dependencies||[],n=0,o=i.length;n<o;++n){if(e=i[n],!((t=y[e])&&t instanceof B))throw new Error("required module '"+e+"' not found");if(t.init(),!t.supported)throw new Error("required module '"+e+"' not supported")}this.initializer(this)},fail:function(t){throw this.initialized=!0,this.supported=!1,new Error(t)},warn:function(t){S.warn("Module "+this.name+": "+t)},deprecationNotice:function(t,e){S.warn("DEPRECATED: "+t+" in module "+this.name+" is deprecated. Please use "+e+" instead")},createError:function(t){return new Error("Error in Rangy "+this.name+" module: "+t)}},S.createModule=function(t){var e,i;2==arguments.length?(e=arguments[1],i=[]):(e=arguments[2],i=arguments[1]);var n=N(t,i,e);S.initialized&&S.supported&&n.init()},S.createCoreModule=function(t,e,i){N(t,e,i)},S.RangePrototype=I,S.rangePrototype=new I,S.selectionPrototype=new $,S.createCoreModule("DomUtil",[],(function(t,e){var i="undefined",n=t.util,o=n.getBody;n.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||e.fail("document missing a Node creation method"),n.isHostMethod(document,"getElementsByTagName")||e.fail("document missing getElementsByTagName method");var s=document.createElement("div");n.areHostMethods(s,["insertBefore","appendChild","cloneNode"]||!n.areHostObjects(s,["previousSibling","nextSibling","childNodes","parentNode"]))||e.fail("Incomplete Element implementation"),n.isHostProperty(s,"innerHTML")||e.fail("Element is missing innerHTML property");var r=document.createTextNode("test");n.areHostMethods(r,["splitText","deleteData","insertData","appendData","cloneNode"]||!n.areHostObjects(s,["previousSibling","nextSibling","childNodes","parentNode"])||!n.areHostProperties(r,["data"]))||e.fail("Incomplete Text Node implementation");var l=function(t,e){for(var i=t.length;i--;)if(t[i]===e)return!0;return!1};function a(t){var e;return typeof t.namespaceURI==i||null===(e=t.namespaceURI)||"http://www.w3.org/1999/xhtml"==e}function d(t){var e=t.parentNode;return 1==e.nodeType?e:null}function c(t){for(var e=0;t=t.previousSibling;)++e;return e}function u(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}}function p(t,e){var i,n=[];for(i=t;i;i=i.parentNode)n.push(i);for(i=e;i;i=i.parentNode)if(l(n,i))return i;return null}function h(t,e,i){for(var n=i?e:e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}function g(t,e){return h(t,e,!0)}function m(t,e,i){for(var n,o=i?t:t.parentNode;o;){if((n=o.parentNode)===e)return o;o=n}return null}function f(t){var e=t.nodeType;return 3==e||4==e||8==e}function b(t){if(!t)return!1;var e=t.nodeType;return 3==e||8==e}function v(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t}function y(t,e,i){var n=t.cloneNode(!1);if(n.deleteData(0,e),t.deleteData(e,t.length-e),v(n,t),i)for(var o,s=0;o=i[s++];)o.node==t&&o.offset>e?(o.node=n,o.offset-=e):o.node==t.parentNode&&o.offset>c(t)&&++o.offset;return n}function x(t){if(9==t.nodeType)return t;if(typeof t.ownerDocument!=i)return t.ownerDocument;if(typeof t.document!=i)return t.document;if(t.parentNode)return x(t.parentNode);throw e.createError("getDocument: no document found for node")}function w(t){var n=x(t);if(typeof n.defaultView!=i)return n.defaultView;if(typeof n.parentWindow!=i)return n.parentWindow;throw e.createError("Cannot get a window object for node")}function S(t){if(typeof t.contentDocument!=i)return t.contentDocument;if(typeof t.contentWindow!=i)return t.contentWindow.document;throw e.createError("getIframeDocument: No Document object found for iframe element")}function _(t){if(typeof t.contentWindow!=i)return t.contentWindow;if(typeof t.contentDocument!=i)return t.contentDocument.defaultView;throw e.createError("getIframeWindow: No Window object found for iframe element")}function C(t){return t&&n.isHostMethod(t,"setTimeout")&&n.isHostObject(t,"document")}function k(t,e,i){var o;if(t?n.isHostProperty(t,"nodeType")?o=1==t.nodeType&&"iframe"==t.tagName.toLowerCase()?S(t):x(t):C(t)&&(o=t.document):o=document,!o)throw e.createError(i+"(): Parameter must be a Window object or DOM node");return o}function E(t){for(var e;e=t.parentNode;)t=e;return t}function A(t,i,n,o){var s,r,l,a,d;if(t==n)return i===o?0:i<o?-1:1;if(s=m(n,t,!0))return i<=c(s)?-1:1;if(s=m(t,n,!0))return c(s)<o?-1:1;if(!(r=p(t,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((l=t===r?r:m(t,r,!0))===(a=n===r?r:m(n,r,!0)))throw e.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=r.firstChild;d;){if(d===l)return-1;if(d===a)return 1;d=d.nextSibling}}var L,q=!1;function T(t){try{return t.parentNode,!1}catch(t){return!0}}function M(t){if(!t)return"[No node]";if(q&&T(t))return"[Broken node]";if(f(t))return'"'+t.data+'"';if(1==t.nodeType){var e=t.id?' id="'+t.id+'"':"";return"<"+t.nodeName+e+">[index:"+c(t)+",length:"+t.childNodes.length+"]["+(t.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return t.nodeName}function O(t){for(var e,i=x(t).createDocumentFragment();e=t.firstChild;)i.appendChild(e);return i}function R(t,e,i){var n=o(t),s=t.createElement("div");s.contentEditable=""+!!i,e&&(s.innerHTML=e);var r=n.firstChild;return r?n.insertBefore(s,r):n.appendChild(s),s}function B(t){return t.parentNode.removeChild(t)}function N(t){this.root=t,this._next=t}function I(t){return new N(t)}function $(t,e){this.node=t,this.offset=e}function D(t){this.code=this[t],this.codeName=t,this.message="DOMException: "+this.codeName}!function(){var e=document.createElement("b");e.innerHTML="1";var i=e.firstChild;e.innerHTML="<br />",q=T(i),t.features.crashyTextNodes=q}(),typeof window.getComputedStyle!=i?L=function(t,e){return w(t).getComputedStyle(t,null)[e]}:typeof document.documentElement.currentStyle!=i?L=function(t,e){return t.currentStyle?t.currentStyle[e]:""}:e.fail("No means of obtaining computed style properties found"),N.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var t,e,i=this._current=this._next;if(this._current)if(t=i.firstChild)this._next=t;else{for(e=null;i!==this.root&&!(e=i.nextSibling);)i=i.parentNode;this._next=e}return this._current},detach:function(){this._current=this._next=this.root=null}},$.prototype={equals:function(t){return!!t&&this.node===t.node&&this.offset==t.offset},inspect:function(){return"[DomPosition("+M(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},D.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},D.prototype.toString=function(){return this.message},t.dom={arrayContains:l,isHtmlNamespace:a,parentElement:d,getNodeIndex:c,getNodeLength:u,getCommonAncestor:p,isAncestorOf:h,isOrIsAncestorOf:g,getClosestAncestorIn:m,isCharacterDataNode:f,isTextOrCommentNode:b,insertAfter:v,splitDataNode:y,getDocument:x,getWindow:w,getIframeWindow:_,getIframeDocument:S,getBody:o,isWindow:C,getContentDocument:k,getRootContainer:E,comparePoints:A,isBrokenNode:T,inspectNode:M,getComputedStyleProperty:L,createTestElement:R,removeNode:B,fragmentFromNodeChildren:O,createIterator:I,DomPosition:$},t.DOMException=D})),S.createCoreModule("DomRange",["DomUtil"],(function(t,e){var i=t.dom,n=t.util,o=i.DomPosition,s=t.DOMException,r=i.isCharacterDataNode,l=i.getNodeIndex,a=i.isOrIsAncestorOf,d=i.getDocument,c=i.comparePoints,u=i.splitDataNode,p=i.getClosestAncestorIn,h=i.getNodeLength,g=i.arrayContains,m=i.getRootContainer,f=t.features.crashyTextNodes,b=i.removeNode;function v(t,e){return 3!=t.nodeType&&(a(t,e.startContainer)||a(t,e.endContainer))}function y(t){return t.document||d(t.startContainer)}function x(t){return m(t.startContainer)}function w(t){return new o(t.parentNode,l(t))}function S(t){return new o(t.parentNode,l(t)+1)}function _(t,e,n){var o=11==t.nodeType?t.firstChild:t;return r(e)?n==e.length?i.insertAfter(t,e):e.parentNode.insertBefore(t,0==n?e:u(e,n)):n>=e.childNodes.length?e.appendChild(t):e.insertBefore(t,e.childNodes[n]),o}function C(t,e,i){if(X(t),X(e),y(e)!=y(t))throw new s("WRONG_DOCUMENT_ERR");var n=c(t.startContainer,t.startOffset,e.endContainer,e.endOffset),o=c(t.endContainer,t.endOffset,e.startContainer,e.startOffset);return i?n<=0&&o>=0:n<0&&o>0}function k(t){for(var e,i,n,o=y(t.range).createDocumentFragment();i=t.next();){if(e=t.isPartiallySelectedSubtree(),i=i.cloneNode(!e),e&&(n=t.getSubtreeIterator(),i.appendChild(k(n)),n.detach()),10==i.nodeType)throw new s("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}function E(t,e,n){var o,s,r,l;for(n=n||{stop:!1};r=t.next();)if(t.isPartiallySelectedSubtree()){if(!1===e(r))return void(n.stop=!0);if(E(l=t.getSubtreeIterator(),e,n),l.detach(),n.stop)return}else for(o=i.createIterator(r);s=o.next();)if(!1===e(s))return void(n.stop=!0)}function A(t){for(var e;t.next();)t.isPartiallySelectedSubtree()?(A(e=t.getSubtreeIterator()),e.detach()):t.remove()}function L(t){for(var e,i,n=y(t.range).createDocumentFragment();e=t.next();){if(t.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),i=t.getSubtreeIterator(),e.appendChild(L(i)),i.detach()):t.remove(),10==e.nodeType)throw new s("HIERARCHY_REQUEST_ERR");n.appendChild(e)}return n}function q(t,e,i){var n,o=!(!e||!e.length),s=!!i;o&&(n=new RegExp("^("+e.join("|")+")$"));var l=[];return E(new M(t,!1),(function(e){if((!o||n.test(e.nodeType))&&(!s||i(e))){var a=t.startContainer;if(e!=a||!r(a)||t.startOffset!=a.length){var d=t.endContainer;e==d&&r(d)&&0==t.endOffset||l.push(e)}}})),l}function T(t){return"["+(void 0===t.getName?"Range":t.getName())+"("+i.inspectNode(t.startContainer)+":"+t.startOffset+", "+i.inspectNode(t.endContainer)+":"+t.endOffset+")]"}function M(t,e){if(this.range=t,this.clonePartiallySelectedTextNodes=e,!t.collapsed){this.sc=t.startContainer,this.so=t.startOffset,this.ec=t.endContainer,this.eo=t.endOffset;var i=t.commonAncestorContainer;this.sc===this.ec&&r(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==i||r(this.sc)?p(this.sc,i,!0):this.sc.childNodes[this.so],this._last=this.ec!==i||r(this.ec)?p(this.ec,i,!0):this.ec.childNodes[this.eo-1])}}M.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var t=this._current=this._next;return t&&(this._next=t!==this._last?t.nextSibling:null,r(t)&&this.clonePartiallySelectedTextNodes&&(t===this.ec&&(t=t.cloneNode(!0)).deleteData(this.eo,t.length-this.eo),this._current===this.sc&&(t=t.cloneNode(!0)).deleteData(0,this.so))),t},remove:function(){var t,e,i=this._current;!r(i)||i!==this.sc&&i!==this.ec?i.parentNode&&b(i):(t=i===this.sc?this.so:0)!=(e=i===this.ec?this.eo:i.length)&&i.deleteData(t,e-t)},isPartiallySelectedSubtree:function(){return v(this._current,this.range)},getSubtreeIterator:function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse(!1);else{t=new ft(y(this.range));var e=this._current,i=e,n=0,o=e,s=h(e);a(e,this.sc)&&(i=this.sc,n=this.so),a(e,this.ec)&&(o=this.ec,s=this.eo),mt(t,i,n,o,s)}return new M(t,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var O=[1,3,4,5,7,8,10],R=[2,9,11],B=[5,6,10,12],N=[1,3,4,5,7,8,10,11],I=[1,3,4,5,7,8];function $(t){return function(e,i){for(var n,o=i?e:e.parentNode;o;){if(n=o.nodeType,g(t,n))return o;o=o.parentNode}return null}}var D=$([9,11]),P=$(B),z=$([6,10,12]);function H(t,e){if(z(t,e))throw new s("INVALID_NODE_TYPE_ERR")}function F(t,e){if(!g(e,t.nodeType))throw new s("INVALID_NODE_TYPE_ERR")}function U(t,e){if(e<0||e>(r(t)?t.length:t.childNodes.length))throw new s("INDEX_SIZE_ERR")}function W(t,e){if(D(t,!0)!==D(e,!0))throw new s("WRONG_DOCUMENT_ERR")}function j(t){if(P(t,!0))throw new s("NO_MODIFICATION_ALLOWED_ERR")}function G(t,e){if(!t)throw new s(e)}function V(t,e){return e<=(r(t)?t.length:t.childNodes.length)}function Y(t){return!!t.startContainer&&!!t.endContainer&&!(f&&(i.isBrokenNode(t.startContainer)||i.isBrokenNode(t.endContainer)))&&m(t.startContainer)==m(t.endContainer)&&V(t.startContainer,t.startOffset)&&V(t.endContainer,t.endOffset)}function X(t){if(!Y(t))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+t.inspect()+")")}var Z=document.createElement("style"),K=!1;try{Z.innerHTML="<b>x</b>",K=3==Z.firstChild.nodeType}catch(t){}t.features.htmlParsingConforms=K;var Q=K?function(t){var e=this.startContainer,n=d(e);if(!e)throw new s("INVALID_STATE_ERR");var o=null;return 1==e.nodeType?o=e:r(e)&&(o=i.parentElement(e)),(o=null===o||"HTML"==o.nodeName&&i.isHtmlNamespace(d(o).documentElement)&&i.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(!1)).innerHTML=t,i.fragmentFromNodeChildren(o)}:function(t){var e=y(this).createElement("body");return e.innerHTML=t,i.fragmentFromNodeChildren(e)};function J(t,e){X(t);var i=t.startContainer,n=t.startOffset,o=t.endContainer,s=t.endOffset,a=i===o;r(o)&&s>0&&s<o.length&&u(o,s,e),r(i)&&n>0&&n<i.length&&(i=u(i,n,e),a?(s-=n,o=i):o==i.parentNode&&s>=l(i)&&s++,n=0),t.setStartAndEnd(i,n,o,s)}function tt(t){X(t);var e=t.commonAncestorContainer.parentNode.cloneNode(!1);return e.appendChild(t.cloneContents()),e.innerHTML}var et=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],it=0,nt=1,ot=2,st=3,rt=0,lt=1,at=2,dt=3;function ct(t){t.START_TO_START=it,t.START_TO_END=nt,t.END_TO_END=ot,t.END_TO_START=st,t.NODE_BEFORE=rt,t.NODE_AFTER=lt,t.NODE_BEFORE_AND_AFTER=at,t.NODE_INSIDE=dt}function ut(t){ct(t),ct(t.prototype)}function pt(t,e){return function(){X(this);var i,n=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,r=new M(this,!0);n!==s&&(n=(i=S(p(n,s,!0))).node,o=i.offset),E(r,j),r.reset();var l=t(r);return r.detach(),e(this,n,o,n,o),l}}function ht(e,i){function o(t,e){return function(i){F(i,O),F(m(i),R);var n=(t?w:S)(i);(e?s:a)(this,n.node,n.offset)}}function s(t,e,n){var o=t.endContainer,s=t.endOffset;e===t.startContainer&&n===t.startOffset||(m(e)==m(o)&&1!=c(e,n,o,s)||(o=e,s=n),i(t,e,n,o,s))}function a(t,e,n){var o=t.startContainer,s=t.startOffset;e===t.endContainer&&n===t.endOffset||(m(e)==m(o)&&-1!=c(e,n,o,s)||(o=e,s=n),i(t,o,s,e,n))}var d=function(){};d.prototype=t.rangePrototype,e.prototype=new d,n.extend(e.prototype,{setStart:function(t,e){H(t,!0),U(t,e),s(this,t,e)},setEnd:function(t,e){H(t,!0),U(t,e),a(this,t,e)},setStartAndEnd:function(){var t=arguments,e=t[0],n=t[1],o=e,s=n;switch(t.length){case 3:s=t[2];break;case 4:o=t[2],s=t[3]}i(this,e,n,o,s)},setBoundary:function(t,e,i){this["set"+(i?"Start":"End")](t,e)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(t){X(this),t?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(t){H(t,!0),i(this,t,0,t,h(t))},selectNode:function(t){H(t,!1),F(t,O);var e=w(t),n=S(t);i(this,e.node,e.offset,n.node,n.offset)},extractContents:pt(L,i),deleteContents:pt(A,i),canSurroundContents:function(){X(this),j(this.startContainer),j(this.endContainer);var t=new M(this,!0),e=t._first&&v(t._first,this)||t._last&&v(t._last,this);return t.detach(),!e},splitBoundaries:function(){J(this)},splitBoundariesPreservingPositions:function(t){J(this,t)},normalizeBoundaries:function(){X(this);var t,e=this.startContainer,n=this.startOffset,o=this.endContainer,s=this.endOffset,a=function(t){var e=t.nextSibling;e&&e.nodeType==t.nodeType&&(o=t,s=t.length,t.appendData(e.data),b(e))},d=function(t){var i=t.previousSibling;if(i&&i.nodeType==t.nodeType){e=t;var r=t.length;if(n=i.length,t.insertData(0,i.data),b(i),e==o)s+=n,o=e;else if(o==t.parentNode){var a=l(t);s==a?(o=t,s=r):s>a&&s--}}},c=!0;if(r(o))s==o.length?a(o):0==s&&(t=o.previousSibling)&&t.nodeType==o.nodeType&&(s=t.length,e==o&&(c=!1),t.appendData(o.data),b(o),o=t);else{if(s>0){var u=o.childNodes[s-1];u&&r(u)&&a(u)}c=!this.collapsed}if(c){if(r(e))0==n?d(e):n==e.length&&(t=e.nextSibling)&&t.nodeType==e.nodeType&&(o==t&&(o=e,s+=e.length),e.appendData(t.data),b(t));else if(n<e.childNodes.length){var p=e.childNodes[n];p&&r(p)&&d(p)}}else e=o,n=s;i(this,e,n,o,s)},collapseToPoint:function(t,e){H(t,!0),U(t,e),this.setStartAndEnd(t,e)}}),ut(e)}function gt(t){t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset,t.commonAncestorContainer=t.collapsed?t.startContainer:i.getCommonAncestor(t.startContainer,t.endContainer)}function mt(t,e,n,o,s){t.startContainer=e,t.startOffset=n,t.endContainer=o,t.endOffset=s,t.document=i.getDocument(e),gt(t)}function ft(t){this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=0,this.document=t,gt(this)}n.extend(t.rangePrototype,{compareBoundaryPoints:function(t,e){var i,n,o,s;X(this),W(this.startContainer,e.startContainer);var r=t==st||t==it?"start":"end",l=t==nt||t==it?"start":"end";return i=this[r+"Container"],n=this[r+"Offset"],o=e[l+"Container"],s=e[l+"Offset"],c(i,n,o,s)},insertNode:function(t){if(X(this),F(t,N),j(this.startContainer),a(t,this.startContainer))throw new s("HIERARCHY_REQUEST_ERR");var e=_(t,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){var t,e;if(X(this),this.collapsed)return y(this).createDocumentFragment();if(this.startContainer===this.endContainer&&r(this.startContainer))return(t=this.startContainer.cloneNode(!0)).data=t.data.slice(this.startOffset,this.endOffset),(e=y(this).createDocumentFragment()).appendChild(t),e;var i=new M(this,!0);return t=k(i),i.detach(),t},canSurroundContents:function(){X(this),j(this.startContainer),j(this.endContainer);var t=new M(this,!0),e=t._first&&v(t._first,this)||t._last&&v(t._last,this);return t.detach(),!e},surroundContents:function(t){if(F(t,I),!this.canSurroundContents())throw new s("INVALID_STATE_ERR");var e=this.extractContents();if(t.hasChildNodes())for(;t.lastChild;)t.removeChild(t.lastChild);_(t,this.startContainer,this.startOffset),t.appendChild(e),this.selectNode(t)},cloneRange:function(){X(this);for(var t,e=new ft(y(this)),i=et.length;i--;)e[t=et[i]]=this[t];return e},toString:function(){X(this);var t=this.startContainer;if(t===this.endContainer&&r(t))return 3==t.nodeType||4==t.nodeType?t.data.slice(this.startOffset,this.endOffset):"";var e=[],i=new M(this,!0);return E(i,(function(t){3!=t.nodeType&&4!=t.nodeType||e.push(t.data)})),i.detach(),e.join("")},compareNode:function(t){X(this);var e=t.parentNode,i=l(t);if(!e)throw new s("NOT_FOUND_ERR");var n=this.comparePoint(e,i),o=this.comparePoint(e,i+1);return n<0?o>0?at:rt:o>0?lt:dt},comparePoint:function(t,e){return X(this),G(t,"HIERARCHY_REQUEST_ERR"),W(t,this.startContainer),c(t,e,this.startContainer,this.startOffset)<0?-1:c(t,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Q,toHtml:function(){return tt(this)},intersectsNode:function(t,e){if(X(this),m(t)!=x(this))return!1;var i=t.parentNode,n=l(t);if(!i)return!0;var o=c(i,n,this.endContainer,this.endOffset),s=c(i,n+1,this.startContainer,this.startOffset);return e?o<=0&&s>=0:o<0&&s>0},isPointInRange:function(t,e){return X(this),G(t,"HIERARCHY_REQUEST_ERR"),W(t,this.startContainer),c(t,e,this.startContainer,this.startOffset)>=0&&c(t,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(t){return C(this,t,!1)},intersectsOrTouchesRange:function(t){return C(this,t,!0)},intersection:function(t){if(this.intersectsRange(t)){var e=c(this.startContainer,this.startOffset,t.startContainer,t.startOffset),i=c(this.endContainer,this.endOffset,t.endContainer,t.endOffset),n=this.cloneRange();return-1==e&&n.setStart(t.startContainer,t.startOffset),1==i&&n.setEnd(t.endContainer,t.endOffset),n}return null},union:function(t){if(this.intersectsOrTouchesRange(t)){var e=this.cloneRange();return-1==c(t.startContainer,t.startOffset,this.startContainer,this.startOffset)&&e.setStart(t.startContainer,t.startOffset),1==c(t.endContainer,t.endOffset,this.endContainer,this.endOffset)&&e.setEnd(t.endContainer,t.endOffset),e}throw new s("Ranges do not intersect")},containsNode:function(t,e){return e?this.intersectsNode(t,!1):this.compareNode(t)==dt},containsNodeContents:function(t){return this.comparePoint(t,0)>=0&&this.comparePoint(t,h(t))<=0},containsRange:function(t){var e=this.intersection(t);return null!==e&&t.equals(e)},containsNodeText:function(t){var e=this.cloneRange();e.selectNode(t);var i=e.getNodes([3]);if(i.length>0){e.setStart(i[0],0);var n=i.pop();return e.setEnd(n,n.length),this.containsRange(e)}return this.containsNodeContents(t)},getNodes:function(t,e){return X(this),q(this,t,e)},getDocument:function(){return y(this)},collapseBefore:function(t){this.setEndBefore(t),this.collapse(!1)},collapseAfter:function(t){this.setStartAfter(t),this.collapse(!0)},getBookmark:function(e){var n=y(this),o=t.createRange(n);e=e||i.getBody(n),o.selectNodeContents(e);var s=this.intersection(o),r=0,l=0;return s&&(o.setEnd(s.startContainer,s.startOffset),l=(r=o.toString().length)+s.toString().length),{start:r,end:l,containerNode:e}},moveToBookmark:function(t){var e=t.containerNode,i=0;this.setStart(e,0),this.collapse(!0);for(var n,o,s,r,l=[e],a=!1,d=!1;!d&&(n=l.pop());)if(3==n.nodeType)o=i+n.length,!a&&t.start>=i&&t.start<=o&&(this.setStart(n,t.start-i),a=!0),a&&t.end>=i&&t.end<=o&&(this.setEnd(n,t.end-i),d=!0),i=o;else for(s=(r=n.childNodes).length;s--;)l.push(r[s])},getName:function(){return"DomRange"},equals:function(t){return ft.rangesEqual(this,t)},isValid:function(){return Y(this)},inspect:function(){return T(this)},detach:function(){}}),ht(ft,mt),n.extend(ft,{rangeProperties:et,RangeIterator:M,copyComparisonConstants:ut,createPrototypeRange:ht,inspect:T,toHtml:tt,getRangeDocument:y,rangesEqual:function(t,e){return t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset}}),t.DomRange=ft})),S.createCoreModule("WrappedRange",["DomRange"],(function(t,e){var i,n,o=t.dom,s=t.util,r=o.DomPosition,l=t.DomRange,a=o.getBody,d=o.getContentDocument,c=o.isCharacterDataNode;if(t.features.implementsDomRange&&function(){var n,r,c=l.rangeProperties;function u(t){for(var e,i=c.length;i--;)t[e=c[i]]=t.nativeRange[e];t.collapsed=t.startContainer===t.endContainer&&t.startOffset===t.endOffset}function p(t,e,i,n,o){var s=t.startContainer!==e||t.startOffset!=i,r=t.endContainer!==n||t.endOffset!=o,l=!t.equals(t.nativeRange);(s||r||l)&&(t.setEnd(n,o),t.setStart(e,i))}i=function(t){if(!t)throw e.createError("WrappedRange: Range must be specified");this.nativeRange=t,u(this)},l.createPrototypeRange(i,p),(n=i.prototype).selectNode=function(t){this.nativeRange.selectNode(t),u(this)},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(t){this.nativeRange.surroundContents(t),u(this)},n.collapse=function(t){this.nativeRange.collapse(t),u(this)},n.cloneRange=function(){return new i(this.nativeRange.cloneRange())},n.refresh=function(){u(this)},n.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");a(document).appendChild(h);var g=document.createRange();g.setStart(h,0),g.setEnd(h,0);try{g.setStart(h,1),n.setStart=function(t,e){this.nativeRange.setStart(t,e),u(this)},n.setEnd=function(t,e){this.nativeRange.setEnd(t,e),u(this)},r=function(t){return function(e){this.nativeRange[t](e),u(this)}}}catch(t){n.setStart=function(t,e){try{this.nativeRange.setStart(t,e)}catch(i){this.nativeRange.setEnd(t,e),this.nativeRange.setStart(t,e)}u(this)},n.setEnd=function(t,e){try{this.nativeRange.setEnd(t,e)}catch(i){this.nativeRange.setStart(t,e),this.nativeRange.setEnd(t,e)}u(this)},r=function(t,e){return function(i){try{this.nativeRange[t](i)}catch(n){this.nativeRange[e](i),this.nativeRange[t](i)}u(this)}}}n.setStartBefore=r("setStartBefore","setEndBefore"),n.setStartAfter=r("setStartAfter","setEndAfter"),n.setEndBefore=r("setEndBefore","setStartBefore"),n.setEndAfter=r("setEndAfter","setStartAfter"),n.selectNodeContents=function(t){this.setStartAndEnd(t,0,o.getNodeLength(t))},g.selectNodeContents(h),g.setEnd(h,3);var m=document.createRange();m.selectNodeContents(h),m.setEnd(h,4),m.setStart(h,2),-1==g.compareBoundaryPoints(g.START_TO_END,m)&&1==g.compareBoundaryPoints(g.END_TO_START,m)?n.compareBoundaryPoints=function(t,e){return t==(e=e.nativeRange||e).START_TO_END?t=e.END_TO_START:t==e.END_TO_START&&(t=e.START_TO_END),this.nativeRange.compareBoundaryPoints(t,e)}:n.compareBoundaryPoints=function(t,e){return this.nativeRange.compareBoundaryPoints(t,e.nativeRange||e)};var f=document.createElement("div");f.innerHTML="123";var b=f.firstChild,v=a(document);v.appendChild(f),g.setStart(b,1),g.setEnd(b,2),g.deleteContents(),"13"==b.data&&(n.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},n.extractContents=function(){var t=this.nativeRange.extractContents();return u(this),t}),v.removeChild(f),v=null,s.isHostMethod(g,"createContextualFragment")&&(n.createContextualFragment=function(t){return this.nativeRange.createContextualFragment(t)}),a(document).removeChild(h),n.getName=function(){return"WrappedRange"},t.WrappedRange=i,t.createNativeRange=function(t){return(t=d(t,e,"createNativeRange")).createRange()}}(),t.features.implementsTextRange){var u=function(t){var e=t.parentElement(),i=t.duplicate();i.collapse(!0);var n=i.parentElement();(i=t.duplicate()).collapse(!1);var s=i.parentElement(),r=n==s?n:o.getCommonAncestor(n,s);return r==e?r:o.getCommonAncestor(e,r)},p=function(t){return 0==t.compareEndPoints("StartToEnd",t)},h=function(t,e,i,n,s){var l=t.duplicate();l.collapse(i);var a=l.parentElement();if(o.isOrIsAncestorOf(e,a)||(a=e),!a.canHaveHTML){var d=new r(a.parentNode,o.getNodeIndex(a));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=o.getDocument(a).createElement("span");u.parentNode&&o.removeNode(u);for(var p,h,g,m,f,b=i?"StartToStart":"StartToEnd",v=s&&s.containerElement==a?s.nodeIndex:0,y=a.childNodes.length,x=y,w=x;w==y?a.appendChild(u):a.insertBefore(u,a.childNodes[w]),l.moveToElementText(u),0!=(p=l.compareEndPoints(b,t))&&v!=x;){if(-1==p){if(x==v+1)break;v=w}else x=x==v+1?v:w;w=Math.floor((v+x)/2),a.removeChild(u)}if(f=u.nextSibling,-1==p&&f&&c(f)){var S;if(l.setEndPoint(i?"EndToStart":"EndToEnd",t),/[\r\n]/.test(f.data)){var _=l.duplicate(),C=_.text.replace(/\r\n/g,"\r").length;for(S=_.moveStart("character",C);-1==(p=_.compareEndPoints("StartToEnd",_));)S++,_.moveStart("character",1)}else S=l.text.length;m=new r(f,S)}else h=(n||!i)&&u.previousSibling,m=(g=(n||i)&&u.nextSibling)&&c(g)?new r(g,0):h&&c(h)?new r(h,h.data.length):new r(a,o.getNodeIndex(u));return o.removeNode(u),{boundaryPosition:m,nodeInfo:{nodeIndex:w,containerElement:a}}},g=function(t,e){var i,n,s,r,l=t.offset,d=o.getDocument(t.node),u=a(d).createTextRange(),p=c(t.node);return p?n=(i=t.node).parentNode:(i=l<(r=t.node.childNodes).length?r[l]:null,n=t.node),(s=d.createElement("span")).innerHTML="&#feff;",i?n.insertBefore(s,i):n.appendChild(s),u.moveToElementText(s),u.collapse(!e),n.removeChild(s),p&&u[e?"moveStart":"moveEnd"]("character",l),u};(n=function(t){this.textRange=t,this.refresh()}).prototype=new l(document),n.prototype.refresh=function(){var t,e,i,n=u(this.textRange);p(this.textRange)?e=t=h(this.textRange,n,!0,!0).boundaryPosition:(t=(i=h(this.textRange,n,!0,!1)).boundaryPosition,e=h(this.textRange,n,!1,!1,i.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(e.node,e.offset)},n.prototype.getName=function(){return"WrappedTextRange"},l.copyComparisonConstants(n);var m=function(t){if(t.collapsed)return g(new r(t.startContainer,t.startOffset),!0);var e=g(new r(t.startContainer,t.startOffset),!0),i=g(new r(t.endContainer,t.endOffset),!1),n=a(l.getRangeDocument(t)).createTextRange();return n.setEndPoint("StartToStart",e),n.setEndPoint("EndToEnd",i),n};if(n.rangeToTextRange=m,n.prototype.toTextRange=function(){return m(this)},t.WrappedTextRange=n,!t.features.implementsDomRange||t.config.preferTextRange){var f=Function("return this;")();void 0===f.Range&&(f.Range=n),t.createNativeRange=function(t){return t=d(t,e,"createNativeRange"),a(t).createTextRange()},t.WrappedRange=n}}t.createRange=function(i){return i=d(i,e,"createRange"),new t.WrappedRange(t.createNativeRange(i))},t.createRangyRange=function(t){return t=d(t,e,"createRangyRange"),new l(t)},s.createAliasForDeprecatedMethod(t,"createIframeRange","createRange"),s.createAliasForDeprecatedMethod(t,"createIframeRangyRange","createRangyRange"),t.addShimListener((function(e){var i=e.document;void 0===i.createRange&&(i.createRange=function(){return t.createRange(i)}),i=e=null}))})),S.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(t,e){t.config.checkSelectionRanges=!0;var i,n,o="boolean",s="number",r=t.dom,l=t.util,a=l.isHostMethod,d=t.DomRange,c=t.WrappedRange,u=t.DOMException,p=r.DomPosition,h=t.features,g="Control",m=r.getDocument,f=r.getBody,b=d.rangesEqual;function v(t){return"string"==typeof t?/^backward(s)?$/i.test(t):!!t}function y(t,i){if(t){if(r.isWindow(t))return t;if(t instanceof Y)return t.win;var n=r.getContentDocument(t,e,i);return r.getWindow(n)}return window}function x(t){return y(t,"getWinSelection").getSelection()}function w(t){return y(t,"getDocSelection").document.selection}function S(t){var e=!1;return t.anchorNode&&(e=1==r.comparePoints(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)),e}var _=a(window,"getSelection"),C=l.isHostObject(document,"selection");h.implementsWinGetSelection=_,h.implementsDocSelection=C;var k=C&&(!_||t.config.preferTextRange);if(k)i=w,t.isSelectionValid=function(t){var e=y(t,"isSelectionValid").document,i=e.selection;return"None"!=i.type||m(i.createRange().parentElement())==e};else{if(!_)return e.fail("Neither document.selection or window.getSelection() detected."),!1;i=x,t.isSelectionValid=function(){return!0}}t.getNativeSelection=i;var E=i();if(!E)return e.fail("Native selection was null (possibly issue 138?)"),!1;var A=t.createNativeRange(document),L=f(document),q=l.areHostProperties(E,["anchorNode","focusNode","anchorOffset","focusOffset"]);h.selectionHasAnchorAndFocus=q;var T=a(E,"extend");h.selectionHasExtend=T;var M=typeof E.rangeCount==s;h.selectionHasRangeCount=M;var O=!1,R=!0,B=T?function(e,i){var n=d.getRangeDocument(i),o=t.createRange(n);o.collapseToPoint(i.endContainer,i.endOffset),e.addRange(H(o)),e.extend(i.startContainer,i.startOffset)}:null;l.areHostMethods(E,["addRange","getRangeAt","removeAllRanges"])&&typeof E.rangeCount==s&&h.implementsDomRange&&function(){var e=window.getSelection();if(e){for(var i=e.rangeCount,n=i>1,o=[],s=S(e),l=0;l<i;++l)o[l]=e.getRangeAt(l);var a=r.createTestElement(document,"",!1),d=a.appendChild(document.createTextNode("   ")),c=document.createRange();if(c.setStart(d,1),c.collapse(!0),e.removeAllRanges(),e.addRange(c),R=1==e.rangeCount,e.removeAllRanges(),!n){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)O=!1;else{var p=c.cloneRange();c.setStart(d,0),p.setEnd(d,3),p.setStart(d,2),e.addRange(c),e.addRange(p),O=2==e.rangeCount}}for(r.removeNode(a),e.removeAllRanges(),l=0;l<i;++l)0==l&&s?B?B(e,o[l]):(t.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),e.addRange(o[l])):e.addRange(o[l])}}(),h.selectionSupportsMultipleRanges=O,h.collapsedNonEditableSelectionsSupported=R;var N,I,$=!1;function D(t,e,i){var n=i?"end":"start",o=i?"start":"end";t.anchorNode=e[n+"Container"],t.anchorOffset=e[n+"Offset"],t.focusNode=e[o+"Container"],t.focusOffset=e[o+"Offset"]}function P(t){var e=t.nativeSelection;t.anchorNode=e.anchorNode,t.anchorOffset=e.anchorOffset,t.focusNode=e.focusNode,t.focusOffset=e.focusOffset}function z(t){t.anchorNode=t.focusNode=null,t.anchorOffset=t.focusOffset=0,t.rangeCount=0,t.isCollapsed=!0,t._ranges.length=0}function H(e){var i;return e instanceof d?((i=t.createNativeRange(e.getDocument())).setEnd(e.endContainer,e.endOffset),i.setStart(e.startContainer,e.startOffset)):e instanceof c?i=e.nativeRange:h.implementsDomRange&&e instanceof r.getWindow(e.startContainer).Range&&(i=e),i}function F(t){if(!t.length||1!=t[0].nodeType)return!1;for(var e=1,i=t.length;e<i;++e)if(!r.isAncestorOf(t[0],t[e]))return!1;return!0}function U(t){var i=t.getNodes();if(!F(i))throw e.createError("getSingleElementFromRange: range "+t.inspect()+" did not consist of a single element");return i[0]}function W(t){return!!t&&void 0!==t.text}function j(t,e){var i=new c(e);t._ranges=[i],D(t,i,!1),t.rangeCount=1,t.isCollapsed=i.collapsed}function G(e){if(e._ranges.length=0,"None"==e.docSelection.type)z(e);else{var i=e.docSelection.createRange();if(W(i))j(e,i);else{e.rangeCount=i.length;for(var n,o=m(i.item(0)),s=0;s<e.rangeCount;++s)(n=t.createRange(o)).selectNode(i.item(s)),e._ranges.push(n);e.isCollapsed=1==e.rangeCount&&e._ranges[0].collapsed,D(e,e._ranges[e.rangeCount-1],!1)}}}function V(t,i){for(var n=t.docSelection.createRange(),o=U(i),s=m(n.item(0)),r=f(s).createControlRange(),l=0,a=n.length;l<a;++l)r.add(n.item(l));try{r.add(o)}catch(t){throw e.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),G(t)}function Y(t,e,i){this.nativeSelection=t,this.docSelection=e,this._ranges=[],this.win=i,this.refresh()}function X(t){t.win=t.anchorNode=t.focusNode=t._ranges=null,t.rangeCount=t.anchorOffset=t.focusOffset=0,t.detached=!0}L&&a(L,"createControlRange")&&(N=L.createControlRange(),l.areHostProperties(N,["item","add"])&&($=!0)),h.implementsControlRange=$,n=q?function(t){return t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset}:function(t){return!!t.rangeCount&&t.getRangeAt(t.rangeCount-1).collapsed},a(E,"getRangeAt")?I=function(t,e){try{return t.getRangeAt(e)}catch(t){return null}}:q&&(I=function(e){var i=m(e.anchorNode),n=t.createRange(i);return n.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&n.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),n}),Y.prototype=t.selectionPrototype;var Z=[];function K(t,e){for(var i,n,o=Z.length;o--;)if(n=(i=Z[o]).selection,"deleteAll"==e)X(n);else if(i.win==t)return"delete"==e?(Z.splice(o,1),!0):n;return"deleteAll"==e&&(Z.length=0),null}var Q=function(t){if(t&&t instanceof Y)return t.refresh(),t;var e=K(t=y(t,"getNativeSelection")),n=i(t),o=C?w(t):null;return e?(e.nativeSelection=n,e.docSelection=o,e.refresh()):(e=new Y(n,o,t),Z.push({win:t,selection:e})),e};t.getSelection=Q,l.createAliasForDeprecatedMethod(t,"getIframeSelection","getSelection");var J,tt=Y.prototype;function et(t,i){for(var n,o=m(i[0].startContainer),s=f(o).createControlRange(),r=0,l=i.length;r<l;++r){n=U(i[r]);try{s.add(n)}catch(t){throw e.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}s.select(),G(t)}if(!k&&q&&l.areHostMethods(E,["removeAllRanges","addRange"])){tt.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),z(this)};var it=function(t,e){B(t.nativeSelection,e),t.refresh()};tt.addRange=M?function(e,i){if($&&C&&this.docSelection.type==g)V(this,e);else if(v(i)&&T)it(this,e);else{var o;O?o=this.rangeCount:(this.removeAllRanges(),o=0);var s=H(e).cloneRange();try{this.nativeSelection.addRange(s)}catch(t){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(t.config.checkSelectionRanges){var r=I(this.nativeSelection,this.rangeCount-1);r&&!b(r,e)&&(e=new c(r))}this._ranges[this.rangeCount-1]=e,D(this,e,nt(this.nativeSelection)),this.isCollapsed=n(this)}else this.refresh()}}:function(t,e){v(e)&&T?it(this,t):(this.nativeSelection.addRange(H(t)),this.refresh())},tt.setRanges=function(t){if($&&C&&t.length>1)et(this,t);else{this.removeAllRanges();for(var e=0,i=t.length;e<i;++e)this.addRange(t[e])}}}else{if(!(a(E,"empty")&&a(A,"select")&&$&&k))return e.fail("No means of selecting a Range or TextRange was found"),!1;tt.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var t;if(this.anchorNode)t=m(this.anchorNode);else if(this.docSelection.type==g){var e=this.docSelection.createRange();e.length&&(t=m(e.item(0)))}t&&(f(t).createTextRange().select(),this.docSelection.empty())}}catch(t){}z(this)},tt.addRange=function(e){this.docSelection.type==g?V(this,e):(t.WrappedTextRange.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,D(this,e,!1))},tt.setRanges=function(t){this.removeAllRanges();var e=t.length;e>1?et(this,t):e&&this.addRange(t[0])}}if(tt.getRangeAt=function(t){if(t<0||t>=this.rangeCount)throw new u("INDEX_SIZE_ERR");return this._ranges[t].cloneRange()},k)J=function(e){var i;t.isSelectionValid(e.win)?i=e.docSelection.createRange():(i=f(e.win.document).createTextRange()).collapse(!0),e.docSelection.type==g?G(e):W(i)?j(e,i):z(e)};else if(a(E,"getRangeAt")&&typeof E.rangeCount==s)J=function(e){if($&&C&&e.docSelection.type==g)G(e);else if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var i=0,o=e.rangeCount;i<o;++i)e._ranges[i]=new t.WrappedRange(e.nativeSelection.getRangeAt(i));D(e,e._ranges[e.rangeCount-1],nt(e.nativeSelection)),e.isCollapsed=n(e)}else z(e)};else{if(!q||typeof E.isCollapsed!=o||typeof A.collapsed!=o||!h.implementsDomRange)return e.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;J=function(t){var e,i=t.nativeSelection;i.anchorNode?(e=I(i,0),t._ranges=[e],t.rangeCount=1,P(t),t.isCollapsed=n(t)):z(t)}}tt.refresh=function(t){var e=t?this._ranges.slice(0):null,i=this.anchorNode,n=this.anchorOffset;if(J(this),t){var o=e.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=i||this.anchorOffset!=n)return!0;for(;o--;)if(!b(e[o],this._ranges[o]))return!0;return!1}};var nt,ot=function(t,e){var i=t.getAllRanges();t.removeAllRanges();for(var n=0,o=i.length;n<o;++n)b(e,i[n])||t.addRange(i[n]);t.rangeCount||z(t)};function st(t,e){if(t.win.document!=m(e))throw new u("WRONG_DOCUMENT_ERR")}function rt(e){return function(i,n){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(e?"Start":"End")](i,n):(o=t.createRange(this.win.document)).setStartAndEnd(i,n),this.setSingleRange(o,this.isBackward())}}function lt(t){var e=[],i=new p(t.anchorNode,t.anchorOffset),n=new p(t.focusNode,t.focusOffset),o="function"==typeof t.getName?t.getName():"Selection";if(void 0!==t.rangeCount)for(var s=0,r=t.rangeCount;s<r;++s)e[s]=d.inspect(t.getRangeAt(s));return"["+o+"(Ranges: "+e.join(", ")+")(anchor: "+i.inspect()+", focus: "+n.inspect()+"]"}tt.removeRange=$&&C?function(t){if(this.docSelection.type==g){for(var e=this.docSelection.createRange(),i=U(t),n=m(e.item(0)),o=f(n).createControlRange(),s=!1,r=0,l=e.length;r<l;++r)e.item(r)!==i||s?o.add(e.item(r)):s=!0;o.select(),G(this)}else ot(this,t)}:function(t){ot(this,t)},!k&&q&&h.implementsDomRange?(nt=S,tt.isBackward=function(){return nt(this)}):nt=tt.isBackward=function(){return!1},tt.isBackwards=tt.isBackward,tt.toString=function(){for(var t=[],e=0,i=this.rangeCount;e<i;++e)t[e]=""+this._ranges[e];return t.join("")},tt.collapse=function(e,i){st(this,e);var n=t.createRange(e);n.collapseToPoint(e,i),this.setSingleRange(n),this.isCollapsed=!0},tt.collapseToStart=function(){if(!this.rangeCount)throw new u("INVALID_STATE_ERR");var t=this._ranges[0];this.collapse(t.startContainer,t.startOffset)},tt.collapseToEnd=function(){if(!this.rangeCount)throw new u("INVALID_STATE_ERR");var t=this._ranges[this.rangeCount-1];this.collapse(t.endContainer,t.endOffset)},tt.selectAllChildren=function(e){st(this,e);var i=t.createRange(e);i.selectNodeContents(e),this.setSingleRange(i)},tt.deleteFromDocument=function(){if($&&C&&this.docSelection.type==g){for(var t,e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),r.removeNode(t);this.refresh()}else if(this.rangeCount){var i=this.getAllRanges();if(i.length){this.removeAllRanges();for(var n=0,o=i.length;n<o;++n)i[n].deleteContents();this.addRange(i[o-1])}}},tt.eachRange=function(t,e){for(var i=0,n=this._ranges.length;i<n;++i)if(t(this.getRangeAt(i)))return e},tt.getAllRanges=function(){var t=[];return this.eachRange((function(e){t.push(e)})),t},tt.setSingleRange=function(t,e){this.removeAllRanges(),this.addRange(t,e)},tt.callMethodOnEachRange=function(t,e){var i=[];return this.eachRange((function(n){i.push(n[t].apply(n,e||[]))})),i},tt.setStart=rt(!0),tt.setEnd=rt(!1),t.rangePrototype.select=function(t){Q(this.getDocument()).setSingleRange(this,t)},tt.changeEachRange=function(t){var e=[],i=this.isBackward();this.eachRange((function(i){t(i),e.push(i)})),this.removeAllRanges(),i&&1==e.length?this.addRange(e[0],"backward"):this.setRanges(e)},tt.containsNode=function(t,e){return this.eachRange((function(i){return i.containsNode(t,e)}),!0)||!1},tt.getBookmark=function(t){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[t])}},tt.moveToBookmark=function(e){for(var i,n,o=[],s=0;i=e.rangeBookmarks[s++];)(n=t.createRange(this.win)).moveToBookmark(i),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},tt.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},tt.restoreRanges=function(t){this.removeAllRanges();for(var e,i=0;e=t.ranges[i];++i)this.addRange(e,t.backward&&0==i)},tt.toHtml=function(){var t=[];return this.eachRange((function(e){t.push(d.toHtml(e))})),t.join("")},h.implementsTextRange&&(tt.getNativeTextRange=function(){var i;if(i=this.docSelection){var n=i.createRange();if(W(n))return n;throw e.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return t.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw e.createError("getNativeTextRange: selection contains no range")}),tt.getName=function(){return"WrappedSelection"},tt.inspect=function(){return lt(this)},tt.detach=function(){K(this.win,"delete"),X(this)},Y.detachAll=function(){K(null,"deleteAll")},Y.inspect=lt,Y.isDirectionBackward=v,t.Selection=Y,t.selectionPrototype=tt,t.addShimListener((function(t){void 0===t.getSelection&&(t.getSelection=function(){return Q(t)}),t=null}))}));var D=!1,P=function(t){D||(D=!0,!S.initialized&&S.config.autoInitialize&&q())};return x&&("complete"==document.readyState?P():(l(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",P,!1),b(window,"load",P))),S}();var i=e.exports;class n{constructor(t){this.builder=t,this.dom=this.builder.dom}cellSelected(){return this.builder.doc.querySelector(".cell-active")}rowSelected(){return this.builder.doc.querySelector(".row-active")}builderStuff(){return document.querySelector("#_cbhtml")}cellNext(t){const e=this.dom;let i=t.nextElementSibling;return i?e.hasClass(i,"is-row-tool")||e.hasClass(i,"is-col-tool")||e.hasClass(i,"is-rowadd-tool")||e.hasClass(i,"is-row-overlay")?null:i:null}out(t){if(this.builder){let e=this.builder.opts.lang[t];return e||(this.builder.checkLang&&console.log(t),t)}return t}confirm(t,e,i,n){const o=this.dom;let s="";s=`<div class="is-modal is-confirm" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content" style="padding-bottom:20px;">\n                <div style="margin: 20px 0 30px;font-size: 14px;">${t}</div>\n                <button title="${this.out("Delete")}" class="input-ok classic focus-warning">${this.out("Delete")}</button>\n            </div>\n        </div>`,i&&(s=`<div class="is-modal is-confirm" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="padding-bottom:20px;">\n                    <div style="margin: 20px 0 30px;font-size: 14px;">${t}</div>\n                    <button title="${this.out("Cancel")}" class="input-cancel classic-secondary">${this.out("Cancel")}</button>\n                    <button title="${n}" class="input-ok classic-primary">${n}</button>\n                </div>\n            </div>`);const r=this.builder.builderStuff;let l=r.querySelector(".is-confirm");l||(o.appendHtml(r,s),l=r.querySelector(".is-confirm")),this.showModal(l,!1,(()=>{l.parentNode.removeChild(l),e(!1)}),!0);let a=l.querySelector(".is-confirm .input-ok");o.addEventListener(a,"click",(()=>{this.hideModal(l),l.parentNode.removeChild(l),e(!0)}));let d=l.querySelector(".is-confirm .input-cancel");o.addEventListener(d,"click",(t=>{this.hideModal(l),l.parentNode.removeChild(l),e(!1),t.preventDefault(),t.stopImmediatePropagation()}))}showRtePop(t,e,i){const n=this.dom;t.style.display="flex",e&&e(),n.removeClass(t,"deactive"),n.addClass(t,"active");const o=e=>{t.contains(e.target)||i.contains(e.target)||e.target.closest(".pickcolormore")||(this.hideRtePop(t),t.removeEventListener("keydown",s),document.removeEventListener("click",o),this.builder.iframeDocument&&this.builder.doc.removeEventListener("click",o))},s=e=>{27===e.keyCode&&(this.hideRtePop(t),t.removeEventListener("keydown",s),document.removeEventListener("click",o),this.builder.iframeDocument&&this.builder.doc.removeEventListener("click",o))};t.addEventListener("keydown",s),document.addEventListener("click",o),this.builder.iframeDocument&&this.builder.doc.addEventListener("click",o)}hideRtePop(t){const e=this.dom;t.style.display="",e.removeClass(t,"active"),e.addClass(t,"deactive")}clearAllEventListener(t){for(let e=0;e<10;e++)t.removeEventListener("keydown",this.handlePopKeyDown),document.removeEventListener("click",this.handlePopClickOut),this.builder.iframeDocument&&this.builder.doc.removeEventListener("click",this.handlePopClickOut)}showPop(t,e,i){const n=this.dom;let o=document.querySelectorAll(".is-pop.active");Array.prototype.forEach.call(o,(e=>{e!==t&&(e.style.display="",n.removeClass(e,"active"),e.setAttribute("aria-hidden",!0))})),this.clearAllEventListener(t),t.style.display="flex",n.addClass(t,"active"),t.setAttribute("aria-hidden",!1),this.setupTabKeys(t),t.focus({preventScroll:!0}),this.handlePopClickOut=n=>{t.contains(n.target)||i.contains(n.target)||(this.hidePop(t),e&&e())},this.handlePopKeyDown=i=>{27===i.keyCode&&(this.hidePop(t),e&&e())},t.addEventListener("keydown",this.handlePopKeyDown),document.addEventListener("click",this.handlePopClickOut),this.builder.iframeDocument&&this.builder.doc.addEventListener("click",this.handlePopClickOut)}hidePop(t){const e=this.dom;t.style.display="",e.removeClass(t,"active"),t.setAttribute("aria-hidden",!0),this.clearAllEventListener(t)}setupTabKeys(t){let e=t.querySelectorAll('a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]):not([tabindex="-1"]), iframe, object, embed, *[tabindex]:not([tabindex="-1"])');if(0===e.length)return;let i=e[0],n=e[e.length-1];n.addEventListener("keydown",(n=>{9!==n.which||n.shiftKey||(n.preventDefault(),e=t.querySelectorAll('a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]):not([tabindex="-1"]), iframe, object, embed, *[tabindex]:not([tabindex="-1"])'),i=e[0],i.focus())})),i.addEventListener("keydown",(t=>{9===t.which&&t.shiftKey&&(t.preventDefault(),n.focus())}));t.querySelectorAll("iframe").forEach((t=>{t.addEventListener("focus",(()=>{const e=t.contentWindow.document.querySelectorAll('a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]):not([tabindex="-1"]), iframe, object, embed, *[tabindex]:not([tabindex="-1"])');if(0===e.length)return;let i=e[0];i&&i.focus()}))}))}showModal(t,e,i,n){const o=this.dom;o.addClass(t,"active"),t.setAttribute("aria-hidden",!1);const s=e=>{if(27===e.keyCode){o.hasClass(t,"active")&&this.hideModal(t),t.removeEventListener("keydown",s);const e=t.querySelector(".is-modal-close");e&&e.removeEventListener("click",d),i&&i()}};t.addEventListener("keydown",s);let r=t.querySelector(".is-tab-content.active");r?(r.focus(),this.builder.tabs.setupTabKey(r)):(this.setupTabKeys(t),t.focus());let l=!1;if(this.builder?this.builder.opts.animateModal&&(l=!0,n||(l=!1)):n&&(l=!0),l&&this.builder){const t=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(t,(t=>{t.style.transform=`scale(${this.builder.opts.zoom-.02})`,t.style.WebkitTransform=`scale(${this.builder.opts.zoom-.02})`,t.style.MozTransform=`scale(${this.builder.opts.zoom-.02})`,t.setAttribute("scaled-down","1")}))}const a=t.querySelector(".is-modal-overlay");if(a&&a.parentNode.removeChild(a),!t.querySelector(".is-modal-overlay")){let n;if(n=e?'<div class="is-modal-overlay overlay-stay"></div>':'<div class="is-modal-overlay"></div>',t.insertAdjacentHTML("afterbegin",n),!e){let e=t.querySelector(".is-modal-overlay");o.addEventListener(e,"click",(()=>{this.hideModal(t),t.removeEventListener("keydown",s);const e=t.querySelector(".is-modal-close");e&&e.removeEventListener("click",d),i&&i()}))}}const d=()=>{o.hasClass(t,"active")&&this.hideModal(t),t.removeEventListener("keydown",s);const e=t.querySelector(".is-modal-close");e&&e.removeEventListener("click",d),i&&i()},c=t.querySelector(".is-modal-close");c&&o.addEventListener(c,"click",d)}_hideModal(t){let e=t.querySelector(".is-modal-overlay");e?e.classList.contains("overlay-stay")?(this.hideModal(t),t.dispatchEvent(new KeyboardEvent("keydown",{key:"e",keyCode:27,code:"KeyE",which:27,shiftKey:!1,ctrlKey:!1,metaKey:!1}))):e.click():(this.hideModal(t),t.dispatchEvent(new KeyboardEvent("keydown",{key:"e",keyCode:27,code:"KeyE",which:27,shiftKey:!1,ctrlKey:!1,metaKey:!1})))}hideModal(t){if(t.setAttribute("aria-hidden",!0),this.builder){const t=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(t,(t=>{t.getAttribute("scaled-down")&&(t.style.transform=`scale(${this.builder.opts.zoom})`,t.style.WebkitTransform=`scale(${this.builder.opts.zoom})`,t.style.MozTransform=`scale(${this.builder.opts.zoom})`,t.removeAttribute("scaled-down"))}))}this.dom.removeClass(t,"active")}refreshModuleLayout(t){let e=decodeURIComponent(t.getAttribute("data-html"));e=e.replace(/{id}/g,this.builder.util.makeId()),t.innerHTML="";let i=document.createRange();i.setStart(t,0),t.appendChild(i.createContextualFragment(e));let n=t.querySelectorAll("[data-subblock]");var o=1;Array.prototype.forEach.call(n,(e=>{t.getAttribute("data-html-"+o)&&(e.innerHTML=decodeURIComponent(t.getAttribute("data-html-"+o)),e.contentEditable=!0),o++}))}fixLayout(t){const e=this.dom;let i=!1,n=!1;Array.from(t.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-col-tool")||t.classList.contains("is-rowadd-tool")||(t.style.width="",t.style.flex="",t.classList.contains("sm-hidden")&&(i=!0),t.classList.contains("md-hidden")&&(n=!0))})),i?t.classList.add("sm-autofit"):t.classList.remove("sm-autofit"),n?t.classList.add("md-autofit"):t.classList.remove("md-autofit");let o=3;t.querySelector(".is-row-overlay")&&(o=4);const s=t.childElementCount-o,r=this.builder.opts.row;let l=this.builder.opts.cols;const a=this.builder.opts.colequal;if(a.length>0){return e.elementChildren(t).forEach((t=>{if(!(e.hasClass(t,"is-row-tool")||e.hasClass(t,"is-col-tool")||e.hasClass(t,"is-rowadd-tool")||e.hasClass(t,"is-row-overlay"))){for(let i=0;i<=l.length-1;i++)e.removeClass(t,l[i]);for(let i=0;i<=a.length-1;i++)if(a[i].length===s){e.addClass(t,a[i][0]);break}1===s&&e.addClass(t,l[l.length-1])}})),void Array.from(t.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.getAttribute("data-module")&&this.refreshModuleLayout(t)}))}if(""!==r&&l.length>0){let i=0;e.elementChildren(t).forEach((t=>{if(!(e.hasClass(t,"is-row-tool")||e.hasClass(t,"is-col-tool")||e.hasClass(t,"is-rowadd-tool")||e.hasClass(t,"is-row-overlay"))){-1!==t.className.indexOf("col-md-")||(-1!==t.className.indexOf("col-sm-")?l=["col-sm-1","col-sm-2","col-sm-3","col-sm-4","col-sm-5","col-sm-6","col-sm-7","col-sm-8","col-sm-9","col-sm-10","col-sm-11","col-sm-12"]:-1!==t.className.indexOf("col-xs-")?l=["col-xs-1","col-xs-2","col-xs-3","col-xs-4","col-xs-5","col-xs-6","col-xs-7","col-xs-8","col-xs-9","col-xs-10","col-xs-11","col-xs-12"]:-1!==t.className.indexOf("col-lg-")?l=["col-lg-1","col-lg-2","col-lg-3","col-lg-4","col-lg-5","col-lg-6","col-lg-7","col-lg-8","col-lg-9","col-lg-10","col-lg-11","col-lg-12"]:-1!==t.className.indexOf("col-xl-")?l=["col-xl-1","col-xl-2","col-xl-3","col-xl-4","col-xl-5","col-xl-6","col-xl-7","col-xl-8","col-xl-9","col-xl-10","col-xl-11","col-xl-12"]:-1!==t.className.indexOf("col-xxl-")&&(l=["col-xxl-1","col-xxl-2","col-xxl-3","col-xxl-4","col-xxl-5","col-xxl-6","col-xxl-7","col-xxl-8","col-xxl-9","col-xxl-10","col-xxl-11","col-xxl-12"])),i++;for(var n=0;n<=l.length-1;n++)e.removeClass(t,l[n]);1===s&&e.addClass(t,l[11]),2===s&&e.addClass(t,l[5]),3===s&&e.addClass(t,l[3]),4===s&&e.addClass(t,l[2]),5===s&&(5===i?e.addClass(t,l[3]):e.addClass(t,l[1])),6===s&&e.addClass(t,l[1]),7===s&&(i>=6?e.addClass(t,l[0]):e.addClass(t,l[1])),8===s&&(i>=5?e.addClass(t,l[0]):e.addClass(t,l[1])),9===s&&(i>=4?e.addClass(t,l[0]):e.addClass(t,l[1])),10===s&&(i>=3?e.addClass(t,l[0]):e.addClass(t,l[1])),11===s&&(i>=2?e.addClass(t,l[0]):e.addClass(t,l[1])),12===s&&e.addClass(t,l[0])}}))}Array.from(t.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.getAttribute("data-module")&&this.refreshModuleLayout(t)}))}addContent(t,e,i){const n=this.dom;this.builder.opts.onAdd&&(t=this.builder.opts.onAdd(t));const o=this.cellSelected();let s;if(o)s=o.parentNode;else{if(s=this.builder.doc.querySelector(".row-active"),!s)return;e="row"}if("cell"===e||"cell-left"===e||"cell-right"===e){let r=4;this.builder.maxColumns&&(r=this.builder.maxColumns);let l,a=3;if(s.querySelector(".is-row-overlay")&&(a=4),s.childElementCount>=r+a)return alert(this.out("You have reached the maximum number of columns")),!1;if(this.builder.uo.saveForUndo(),""===this.builder.opts.row){let e=this.builder.opts.cellFormat,i=e.indexOf("</");t=e.substring(0,i)+t+e.substring(i),l=this.createElementFromHTML(t)}else{l=o.cloneNode(!0),l.removeAttribute("data-noedit"),l.removeAttribute("data-protected"),l.removeAttribute("data-module"),l.removeAttribute("data-module-desc"),l.removeAttribute("data-dialog-width"),l.removeAttribute("data-html"),l.removeAttribute("data-settings");for(let t=1;t<=20;t++)l.removeAttribute("data-html-"+t);l.removeAttribute("data-noedit"),n.removeClass(l,"cell-active"),n.removeClass(l,"is-light-text"),n.removeClass(l,"is-dark-text"),n.removeClass(l,"padding-0"),n.removeClass(l,"p-0"),l.removeAttribute("data-click"),l.removeAttribute("style"),i&&l.setAttribute(i,""),l.innerHTML=t}s.insertBefore(l,o),"cell"!==e&&"cell-right"!==e||n.moveAfter(l,o);let d=this.builder.doc.querySelector(".builder-active");d&&this.builder.applyBehaviorOn(d),this.fixLayout(s),l.click()}if("row"===e){let e,o;if(this.builder.uo.saveForUndo(),""===this.builder.opts.row){e=this.htmlToElement(this.builder.opts.rowFormat);let s=this.builder.opts.cellFormat,r=s.indexOf("</");t=s.substring(0,r)+t+s.substring(r);let l=n.elementChildren(e);for(;l.length>0&&(l=l[0],n.elementChildren(l).length>0);)l=n.elementChildren(l);l.innerHTML=t,o=l.firstChild,i&&o.setAttribute(i,"")}else o=n.createElement("div"),n.addClass(o,this.builder.opts.cols[this.builder.opts.cols.length-1]),o.innerHTML=t,i&&o.setAttribute(i,""),e=n.createElement("div"),n.addClass(e,this.builder.opts.row),n.appendChild(e,o);s.parentNode.insertBefore(e,s),n.moveAfter(e,s);let r=this.builder.doc.querySelector(".builder-active");r&&this.builder.applyBehaviorOn(r),o.click()}if("elm"===e){let e=this.builder.activeElement;if(!e)return;this.builder.uo.saveForUndo();let i=e;i.insertAdjacentHTML("afterend",t);let n=this.builder.doc.querySelector(".builder-active");n&&this.builder.applyBehaviorOn(n);let o=i.nextElementSibling;if("img"===o.tagName.toLowerCase()){let t=setInterval((()=>{o.complete&&(o.click(),clearInterval(t))}),30)}else o.click();let s=this.builder.builderStuff.querySelector(".quickadd");this.hidePop(s)}if(this.builder.useCssClasses){let t=this.builder.doc.querySelector(".builder-active");t&&n.contentReformat(t,this.builder.cssClasses)}this.builder.opts.onChange(),this.builder.opts.onRender()}htmlToElement(t){var e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content.firstChild}addSnippet(t,e,i){this.builder.uo.saveForUndo();const n=this.dom;let o,s,r,l=!1;const a=this.builder.builderStuff.querySelector(".quickadd").getAttribute("data-mode");if(!e||"cell"!==a&&"cell-left"!==a&&"cell-right"!==a){if(e&&"row"===a){let e;if(r=document.createElement("div"),r.className=this.builder.opts.cols[this.builder.opts.cols.length-1],r.innerHTML=t,i&&r.setAttribute("data-noedit",""),o=document.createElement("div"),o.className=this.builder.opts.row,o.appendChild(r),s=this.builder.cellSelected(),s?e=s.parentNode:(e=this.builder.doc.querySelector(".row-active"),e||(l=!0)),l){const t=this.builder.doc.querySelectorAll(".is-builder"),i=t[t.length-1],o=n.elementChildren(i);e=o[o.length-1]}e.parentNode.insertBefore(o,e),n.moveAfter(o,e);let a=this.builder.doc.querySelector(".builder-active");a&&this.builder.applyBehaviorOn(a),r.click(),o.className=o.className.replace("row-outline",""),this.builder.util.hideColumnTool()}else{if(e)return void(i?this.addContent(t,a,"data-noedit"):this.addContent(t,a));{var d=document.createElement("div");d.innerHTML=t;var c=d.querySelectorAll("[data-html]");if(Array.prototype.forEach.call(c,(e=>{t=(t=(t=decodeURIComponent(e.getAttribute("data-html"))).replace(/{id}/g,this.makeId())).replace(/<script>/g,""+(this.builder.nonce?`<script nonce="${this.builder.nonce}">`:"<script>"));for(var i=1;i<=20;i++)t=t.replace("[%HTML"+i+"%]",void 0===e.getAttribute("data-html-"+i)?"":decodeURIComponent(e.getAttribute("data-html-"+i)));e.innerHTML=t})),1===d.childNodes.length&&1===d.childNodes[0].childNodes.length&&("cell"===a||"cell-left"===a||"cell-right"===a)){const t=this.cellSelected();let e=t.parentNode,i=4;if(this.builder.maxColumns&&(i=this.builder.maxColumns),e.querySelector(".is-row-overlay")){if(e.childElementCount>=i+4)return alert(this.out("You have reached the maximum number of columns")),!1}else if(e.childElementCount>=i+3)return alert(this.out("You have reached the maximum number of columns")),!1;this.builder.uo.saveForUndo();let n=d.childNodes[0].childNodes[0];var u=document.createRange();t.parentNode.insertBefore(u.createContextualFragment(n.outerHTML),t),"cell"!==a&&"cell-right"!==a||(t.parentNode.insertBefore(t.previousElementSibling,t),t.parentNode.insertBefore(t,t.previousElementSibling));let o=this.builder.doc.querySelector(".builder-active");return o||(o=this.builder.doc.querySelector(".is-builder")),this.builder.applyBehaviorOn(o),this.fixLayout(e),"cell"===a||"cell-right"===a?t.nextElementSibling.click():t.previousElementSibling.click(),this.builder.opts.onChange(),void this.builder.opts.onRender()}let e;if(s=this.builder.activeCol,s?e=s.parentNode:(e=this.builder.doc.querySelector(".row-active"),e||(l=!0)),l){const t=this.builder.doc.querySelectorAll(".is-builder"),i=t[t.length-1],o=n.elementChildren(i);e=o[o.length-1]}u=document.createRange(),e.parentNode.insertBefore(u.createContextualFragment(d.innerHTML),e.nextSibling),o=d.childNodes[0],o=e.nextElementSibling;let i=this.builder.doc.querySelector(".builder-active");i||(i=this.builder.doc.querySelector(".is-builder")),this.builder.applyBehaviorOn(i),r=o.querySelector("div"),r&&r.click(),o.className=o.className.replace("row-outline",""),this.builder.util.hideColumnTool()}}if(this.builder.useCssClasses){let t=this.builder.doc.querySelector(".builder-active");t&&n.contentReformat(t,this.builder.cssClasses)}this.builder.opts.onChange(),this.builder.opts.onRender()}else i?this.addContent(t,a,"data-noedit"):this.addContent(t,a)}clearActiveCell(){const t=this.builder.builderStuff;if(!t)return;if(t.getAttribute("preventDevault"))return void setTimeout((()=>{t.removeAttribute("preventDevault")}),30);let e=this.builder.doc.getElementsByClassName("cell-active");for(;e.length;)e[0].classList.remove("cell-active");for(e=this.builder.doc.getElementsByClassName("row-outline");e.length;)e[0].classList.remove("row-outline");for(e=this.builder.doc.getElementsByClassName("row-active");e.length;)e[0].classList.remove("row-active");for(e=this.builder.doc.getElementsByClassName("builder-active");e.length;)e[0].classList.remove("builder-active");this.builder.activeCol=null,this.builder.dom.removeClass(this.builder.doc.body,"content-edit")}clearAfterUndoRedo(){const t=this.dom,e=this.builder.builderStuff;let i=e.querySelectorAll(".is-tool");Array.prototype.forEach.call(i,(e=>{e.style.display="",t.removeClass(e,"active")})),this.builder.iframe&&(i=this.builder.contentStuff.querySelectorAll(".is-tool"),Array.prototype.forEach.call(i,(e=>{e.style.display="",t.removeClass(e,"active")}))),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none",this.builder.activeSpacer=null,this.builder.activeCodeBlock=null,this.builder.activeLink=null,this.builder.activeLinkButton=null,this.builder.activeButton=null,this.builder.activeIframe=null,this.builder.activeTd=null,this.builder.activeTable=null,this.builder.activeModule=null;const n=this.builder.doc.querySelectorAll(".icon-active");Array.prototype.forEach.call(n,(e=>{t.removeClass(e,"icon-active")})),this.builder.activeIcon=null;let o=e.querySelector(".is-rte-tool").querySelectorAll("button");Array.prototype.forEach.call(o,(e=>{t.removeClass(e,"on")})),o=e.querySelector(".is-elementrte-tool").querySelectorAll("button"),Array.prototype.forEach.call(o,(e=>{t.removeClass(e,"on")}));let s=e.querySelectorAll(".is-pop");Array.prototype.forEach.call(s,(t=>{t.style.display=""}))}hidePops(){const t=this.dom,e=this.builder.builderStuff;let i=e.querySelectorAll(".is-tool");Array.prototype.forEach.call(i,(e=>{e.style.display="",t.removeClass(e,"active")}));let n=e.querySelectorAll(".is-pop.active");Array.prototype.forEach.call(n,(e=>{e.style.transition="all 200ms ease",setTimeout((()=>{e.style.opacity="0"}),10),setTimeout((()=>{e.style.display="",t.removeClass(e,"active"),e.style.opacity="",e.style.transition=""}),200)})),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}hideControls(){const t=this.dom;let e=this.builder.builderStuff.querySelectorAll(".is-tool");Array.prototype.forEach.call(e,(e=>{e.style.display="",t.removeClass(e,"active")})),this.builder.iframe&&(e=this.builder.contentStuff.querySelectorAll(".is-tool"),Array.prototype.forEach.call(e,(e=>{e.style.display="",t.removeClass(e,"active")}))),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}clearActiveElement(t){const e=this.dom,i=this.builder.builderStuff,n=this.builder.doc.querySelectorAll(".icon-active");Array.prototype.forEach.call(n,(t=>{e.removeClass(t,"icon-active")}));let o=this.builder.doc.querySelectorAll(".elm-inspected");if(Array.prototype.forEach.call(o,(t=>{e.removeClass(t,"elm-inspected")})),o=this.builder.doc.querySelectorAll(".elm-active"),Array.prototype.forEach.call(o,(t=>{e.removeClass(t,"elm-active")})),i.querySelector(".is-element-tool").style.display="",i.querySelector("#divLinkTool").style.display="",t){this.builder.activeIcon=null,this.builder.inspectedElement=null,this.builder.activeElement=null;let t=i.querySelector(".is-rte-tool");t&&(t.style.display="none");let e=i.querySelector(".is-elementrte-tool");e&&(e.style.display="flex");let n=i.querySelector(".rte-more-options");n&&(n.style.display="");let o=i.querySelector(".elementrte-more-options");o&&(o.style.display="");let s=e.querySelectorAll("button[data-align]");Array.prototype.forEach.call(s,(t=>{t.style.display="none"})),this.builder.rte.positionToolbar()}}clearControls(){const t=this.dom,e=this.builder.builderStuff;if(!e)return;if(e.getAttribute("preventDevault"))return void setTimeout((()=>{e.removeAttribute("preventDevault")}),30);let i=e.querySelectorAll(".is-tool");Array.prototype.forEach.call(i,(e=>{e.style.display="",t.removeClass(e,"active")})),this.builder.iframe&&(i=this.builder.contentStuff.querySelectorAll(".is-tool"),Array.prototype.forEach.call(i,(e=>{e.style.display="",t.removeClass(e,"active")}))),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none",this.builder.activeSpacer=null,this.builder.activeCodeBlock=null,this.builder.activeLink=null,this.builder.activeLinkButton=null,this.builder.activeButton=null,this.builder.activeIframe=null,this.builder.activeTd=null,this.builder.activeTable=null,this.builder.activeModule=null,this.builder.activeImage=null;const n=this.builder.doc.querySelectorAll(".icon-active");Array.prototype.forEach.call(n,(e=>{t.removeClass(e,"icon-active")})),this.builder.activeIcon=null;let o=this.builder.doc.querySelectorAll(".ovl");Array.prototype.forEach.call(o,(t=>{t.style.display="block"}));var s=e.querySelectorAll(".is-side.elementstyles");Array.prototype.forEach.call(s,(e=>{t.removeClass(e,"active")}));let r=this.builder.doc.querySelectorAll("[data-saveforundo]");if(Array.prototype.forEach.call(r,(t=>{t.removeAttribute("data-saveforundo")})),r=this.builder.doc.querySelectorAll(".elm-inspected"),Array.prototype.forEach.call(r,(e=>{t.removeClass(e,"elm-inspected")})),"auto"===this.builder.toolbarDisplay){let t=e.querySelector(".is-rte-tool");t&&(t.style.display="none");let i=e.querySelector(".is-elementrte-tool");i&&(i.style.display="none");let n=e.querySelector(".rte-more-options");n&&(n.style.display="");let o=e.querySelector(".elementrte-more-options");o&&(o.style.display="")}r=this.builder.doc.querySelectorAll(".elm-active"),Array.prototype.forEach.call(r,(e=>{t.removeClass(e,"elm-active")}));let l=e.querySelectorAll(".is-rte-pop");Array.prototype.forEach.call(l,(e=>{e.style.display="",t.removeClass(e,"active"),t.removeClass(e,"deactive")}));let a=e.querySelectorAll(".is-pop");Array.prototype.forEach.call(a,(e=>{e.style.display="",t.removeClass(e,"active"),e.setAttribute("aria-hidden",!0)})),this.builder.colTool.lockIndicator.style.display=""}makeId(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<2;i++)t+=e.charAt(Math.floor(Math.random()*e.length));let i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return t+i}getSelection(){const t=this.dom.getSelection();if(!t)return;const e=t.anchorNode;if(e){const r=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.COMMENT_NODE?e:e.parentElement,l=r&&r.innerText===t.toString();let a=!1;for(var n=[],o=i.getSelection(),s=0;s<o.rangeCount;++s)n=n.concat(o.getRangeAt(s).getNodes());const d=["p","h1","h2","h3","h4","h5","h6","div","pre"];if(n.forEach((t=>{if(t.tagName){const e=t.tagName.toLowerCase();-1!==d.indexOf(e)&&(a=!0)}})),this.builder.selectionMulti=!!a,l||""===t.toString().trim()){this.builder.selectionElm=r;let t=r.nodeName.toLowerCase();this.builder.activeLink="a"===t?r:null}else this.builder.selectionText=t,this.builder.activeLink=null}}saveSelection(){if(this.builder.win.getSelection){let t=this.builder.win.getSelection();if(t.getRangeAt&&t.rangeCount){let e=[];for(let i=0,n=t.rangeCount;i<n;++i)e.push(t.getRangeAt(i));return this.builder.selection=e,e}}else if(this.builder.doc.selection&&this.builder.doc.selection.createRange)return this.builder.selection=this.builder.doc.selection.createRange(),this.builder.doc.selection.createRange();return this.builder.selection=null,null}restoreSelection(){let t=this.builder.selection;if(t)if(this.builder.win.getSelection){let o=this.builder.win.getSelection();if(this.builder.doc.body.createTextRange){var e=this.builder.doc.body.createTextRange();e.collapse(),e.select()}else this.builder.win.getSelection?this.builder.win.getSelection().empty?this.builder.win.getSelection().empty():this.builder.win.getSelection().removeAllRanges&&this.builder.win.getSelection().removeAllRanges():this.builder.doc.selection&&this.builder.doc.selection.empty();for(var i=0,n=t.length;i<n;++i)o.addRange(t[i])}else this.builder.doc.selection&&t.select&&t.select()}cleanHTML(t,e){let i,n=t.replace(/(\n|\r| class=(")?Mso[a-zA-Z]+(")?)/g," "),o=new RegExp("\x3c!--(.*?)--\x3e","g");n=n.replace(o,""),i=e?new RegExp("<(/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>","gi"):new RegExp("<(/)*(meta|link|\\?xml:|st1:|o:|font)(.*?)>","gi"),n=n.replace(i,"");let s,r=["style","script","applet","embed","noframes","noscript"];for(let t=0;t<r.length;t++)i=new RegExp("<"+r[t]+".*?"+r[t]+"(.*?)>","gi"),n=n.replace(i,"");s=e?["style","start"]:["start"];for(let t=0;t<s.length;t++){let e=new RegExp(" "+s[t]+'="(.*?)"',"gi");n=n.replace(e,"")}return n=n.replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s/>]))[^>]*>/gi,""),n=n.replace(/<(\/?)s>/gi,"<$1strike>"),n=n.replace(/&nbsp;/gi," "),n=n.replace(/background-color: rgba\(200, 200, 201, 0.11\);/gi,""),n=n.replace(/background-color: rgba\(200, 200, 201, 0.11\)/gi,""),n}checkEmpty(){const t=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(t,(t=>{this.checkEmptyOn(t)}))}checkEmptyOn(t){const e=this.dom,i=e.elementChildren(t);let n=!0;if(i.forEach((t=>{e.hasClass(t,"row-add-initial")||e.hasClass(t,"dummy-space")||(n=!1)})),n){let i=t.querySelector(".row-add-initial");i||(t.innerHTML=`<button type="button" class="row-add-initial">${this.out("Empty")}<br><span class="block">${this.out("+ Click to add content")}</span></div>`,i=t.querySelector(".row-add-initial")),i.addEventListener("click",(()=>{this.clearActiveCell();const n=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(n,(t=>{e.removeClass(t,"builder-active")})),e.addClass(t,"builder-active"),e.addClass(i,"row-active");let o=this.builder.builderStuff.querySelector(".quickadd");o.querySelector(".is-pop-tabs").style.display="none";const s=window.innerHeight;let r,l;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top,e=this.builder.iframe.getBoundingClientRect().left;r=i.getBoundingClientRect().top+t,l=i.getBoundingClientRect().left+(i.offsetWidth*this.builder.opts.zoom/2-11)+e}else r=i.getBoundingClientRect().top,l=i.getBoundingClientRect().left+i.offsetWidth*this.builder.opts.zoom/2-11;o.style.display="flex",this.showPop(o,!1,i);const a=o.offsetWidth,d=o.offsetHeight;s-r>d?(r=r+i.offsetHeight*this.builder.opts.zoom-19,o.style.top=r+window.pageYOffset+27+"px",o.style.left=l-a/2+7+"px",e.removeClass(o,"arrow-bottom"),e.removeClass(o,"arrow-right"),e.removeClass(o,"arrow-left"),e.removeClass(o,"center"),e.addClass(o,"arrow-top"),e.addClass(o,"center")):(o.style.top=r+window.pageYOffset-d-8+"px",o.style.left=l-a/2+7+"px",e.removeClass(o,"arrow-top"),e.removeClass(o,"arrow-right"),e.removeClass(o,"arrow-left"),e.removeClass(o,"center"),e.addClass(o,"arrow-bottom"),e.addClass(o,"center")),o.setAttribute("data-mode","row")}))}else{let e=t.querySelector(".row-add-initial");e&&e.parentNode.removeChild(e)}}clearPreferences(){localStorage.removeItem("_theme"),localStorage.removeItem("_zoom"),localStorage.removeItem("_buildermode"),localStorage.removeItem("_editingtoolbar"),localStorage.removeItem("_editingtoolbardisplay"),localStorage.removeItem("_hidecelltool"),localStorage.removeItem("_rowtool"),localStorage.removeItem("_hideelementtool"),localStorage.removeItem("_hidesnippetaddtool"),localStorage.removeItem("_outlinemode"),localStorage.removeItem("_hiderowcoloutline"),localStorage.removeItem("_outlinestyle"),localStorage.removeItem("_hideelementhighlight"),localStorage.removeItem("_opensnippets"),localStorage.removeItem("_toolstyle"),localStorage.removeItem("_snippetssidebardisplay"),localStorage.removeItem("_htmlview"),localStorage.removeItem("_pasteresult"),localStorage.removeItem("_livepreview"),localStorage.removeItem("_scrollableeditor"),localStorage.removeItem("_animatedsorting"),localStorage.removeItem("_addbuttonplace"),localStorage.removeItem("_hiderowtool"),localStorage.removeItem("_dragwithouthandle"),localStorage.removeItem("_advancedhtmleditor"),localStorage.removeItem("_hidecolhtmleditor"),localStorage.removeItem("_hiderowhtmleditor")}pasteHtmlAtCaret(t,e){var i,n;if(this.restoreSelection(),this.builder.win.getSelection){if(!this.builder.activeCol)return;if((i=this.builder.win.getSelection()).getRangeAt&&i.rangeCount){(n=i.getRangeAt(0)).deleteContents();var o=this.builder.doc.createElement("div");o.innerHTML=t;for(var s,r,l=this.builder.doc.createDocumentFragment();s=o.firstChild;)r=l.appendChild(s);var a=l.firstChild;n.insertNode(l),r&&((n=n.cloneRange()).setStartAfter(r),e?n.setStartBefore(a):n.collapse(!0),i.removeAllRanges(),this.builder.isTouchSupport||i.addRange(n))}}else if((i=this.builder.doc.selection)&&"Control"!==i.type){if(!this.builder.activeCol)return;var d=i.createRange();d.collapse(!0),i.createRange().pasteHTML(t),e&&((n=i.createRange()).setEndPoint("StartToStart",d),this.builder.isTouchSupport||n.select())}}refreshModule(){let t=this.builder.activeModule;if(!t)return;let e=1,i=t.querySelectorAll("[data-subblock]");Array.prototype.forEach.call(i,(i=>{let n=i.innerHTML;t.setAttribute("data-html-"+e,encodeURIComponent(n)),e++}));let n=decodeURIComponent(t.getAttribute("data-html"));n=n.replace(/{id}/g,this.makeId()),t.innerHTML="";var o=document.createRange();o.setStart(t,0),t.appendChild(o.createContextualFragment(n)),i=t.querySelectorAll("[data-subblock]");var s=1;Array.prototype.forEach.call(i,(e=>{t.getAttribute("data-html-"+s)&&(e.innerHTML=decodeURIComponent(t.getAttribute("data-html-"+s))),s++})),this.repositionColumnTool(!0),this.builder.onRefreshTool&&this.builder.onRefreshTool()}repositionColumnTool(){let t=this.builder.activeCol;if(!t)return;let e=t.parentNode;t.parentNode||(e=this.rowSelected()),this.colTool=e.querySelector(".is-col-tool"),t.parentNode||(this.colTool.style.display="none"),this.colTool.style.left=t.offsetLeft+"px";const i=this.builder.builderStuff.querySelector(".columnmore.active");if(i){const t=this.colTool.querySelector(".cell-more");i.classList.add("transition1"),setTimeout((()=>{let e,n;if(this.builder.iframe){let i=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,o=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;e=t.getBoundingClientRect().top+i,n=t.getBoundingClientRect().left+o}else e=t.getBoundingClientRect().top+window.pageYOffset,n=t.getBoundingClientRect().left+window.pageXOffset;i.style.top=e+35+"px",i.style.left=n-7+"px",setTimeout((()=>{i.classList.remove("transition1")}),300)}),30)}}hideColumnTool(){this.builder.doc.querySelectorAll(".is-col-tool").forEach((t=>{t.style.display="none"}))}isTouchSupport(){return!!window.matchMedia("(pointer: coarse)").matches}detectIE(){return!!document.documentMode}LightenDarkenColor(t,e){var i=!1;"#"===t[0]&&(t=t.slice(1),i=!0);var n=parseInt(t,16),o=(n>>16)+e;o>255?o=255:o<0&&(o=0);var s=(n>>8&255)+e;s>255?s=255:s<0&&(s=0);var r=(255&n)+e;return r>255?r=255:r<0&&(r=0),(i?"#":"")+String("000000"+(r|s<<8|o<<16).toString(16)).slice(-6)}getUIStyles(){this.dom.appendHtml(this.builder.builderStuff,'\n        <input type="text" class="style-helper-input" style="display:none;">\n        <label class="style-helper-label" style="display:none;"></label>\n        <button class="style-helper-button-classic classic" style="display:none;"><svg><use xlink:href="#ion-code-working"></use></svg></button>\n        <select class="style-helper-select" style="display:none;"><option value=""></option></select>\n\n        <div class="style-helper modal-color"></div>\n        <div class="style-helper modal-background"></div>\n        <div class="style-helper button-pickcolor-border"></div>\n        <div class="style-helper button-pickcolor-background"></div>\n\n        <button class="style-helper base"><svg><use xlink:href="#ion-code-working"></use></svg></button>\n        <div class="style-helper base on"></div>\n        <div class="style-helper base hover"></div>\n\n        <div class="style-helper snippet-color"></div>\n        <div class="style-helper snippet-background"></div>\n        <div class="style-helper snippet-tabs-background"></div>\n        <div class="style-helper snippet-tab-item-background"></div>\n        <div class="style-helper snippet-tab-item-background-active"></div>\n        <div class="style-helper snippet-tab-item-background-hover"></div>\n        <div class="style-helper snippet-tab-item-color"></div>\n\n        <div class="style-helper snippet-more-item-background"></div>\n        <div class="style-helper snippet-more-item-background-active"></div>\n        <div class="style-helper snippet-more-item-background-hover"></div>\n        <div class="style-helper snippet-more-item-color"></div>\n\n        <div class="style-helper tabs-background"></div>\n        <div class="style-helper tab-item-active-border-bottom"></div>\n        <div class="style-helper tab-item-color"></div>\n        <div class="style-helper tabs-more-background"></div>\n        <div class="style-helper tabs-more-border"></div>\n        <div class="style-helper tabs-more-item-color"></div>\n        <div class="style-helper tabs-more-item-background-hover"></div>\n        <div class="style-helper separator-color"></div>\n        <div class="style-helper outline-color"></div>\n        ');const t=(t,e)=>{const i=this.builder.builderStuff.querySelector(".style-helper"+t);return window.getComputedStyle(i,null).getPropertyValue(e)},e=this.builder.builderStuff.querySelector(".style-helper-input"),i=this.builder.builderStuff.querySelector(".style-helper-label"),n=this.builder.builderStuff.querySelector(".style-helper-select"),o=this.builder.builderStuff.querySelector(".style-helper-button-classic");this.builder.styleModalColor=t(".modal-color","background-color"),this.builder.styleModalBackground=t(".modal-background","background-color"),this.builder.styleButtonPickColorBorder=t(".button-pickcolor-border","border"),this.builder.styleButtonPickColorBackground=t(".button-pickcolor-background","background-color"),this.builder.styleToolBackground=t(".base","background-color"),this.builder.styleButtonColor=t(".base","color"),this.builder.styleButtonSvgFill=(()=>{const t=this.builder.builderStuff.querySelector(".style-helper.base");return window.getComputedStyle(t.querySelector("svg"),null).getPropertyValue("fill")})(),this.builder.styleButtonBackgroundHover=t(".base.hover","background-color"),this.builder.styleSnippetColor=t(".snippet-color","background-color"),this.builder.styleSnippetBackground=t(".snippet-background","background-color"),this.builder.styleSnippetTabsBackground=t(".snippet-tabs-background","background-color"),this.builder.styleSnippetTabItemBackground=t(".snippet-tab-item-background","background-color"),this.builder.styleSnippetTabItemBackgroundActive=t(".snippet-tab-item-background-active","background-color"),this.builder.styleSnippetTabItemBackgroundHover=t(".snippet-tab-item-background-hover","background-color"),this.builder.styleSnippetTabItemColor=t(".snippet-tab-item-color","background-color"),this.builder.styleSnippetMoreItemBackground=t(".snippet-more-item-background","background-color"),this.builder.styleSnippetMoreItemBackgroundActive=t(".snippet-more-item-background-active","background-color"),this.builder.styleSnippetMoreItemBackgroundHover=t(".snippet-more-item-background-hover","background-color"),this.builder.styleSnippetMoreItemColor=t(".snippet-more-item-color","background-color"),this.builder.styleTabsBackground=t(".tabs-background","background-color"),this.builder.styleTabItemBorderBottomActive=t(".tab-item-active-border-bottom","border"),this.builder.styleTabItemColor=t(".tab-item-color","background-color"),this.builder.styleTabsMoreBackground=t(".tabs-more-background","background-color"),this.builder.styleTabsMoreBorder=t(".tabs-more-border","border"),this.builder.styleTabsMoreItemColor=t(".tabs-more-item-color","background-color"),this.builder.styleTabsMoreBackgroundHover=t(".tabs-more-item-background-hover","background-color"),this.builder.styleSeparatorColor=t(".separator-color","background-color"),this.builder.styleOutlineColor=t(".outline-color","background-color"),this.builder.styleSelectBackground=window.getComputedStyle(n,null).getPropertyValue("background-color"),this.builder.styleSelectColor=window.getComputedStyle(n,null).getPropertyValue("color"),this.builder.styleSelectOptionBackground=window.getComputedStyle(n.querySelector("option"),null).getPropertyValue("background-color"),this.builder.styleInputBackground=window.getComputedStyle(e,null).getPropertyValue("background-color"),this.builder.styleInputBorderBottom=window.getComputedStyle(e,null).getPropertyValue("border-bottom"),this.builder.styleInputColor=window.getComputedStyle(e,null).getPropertyValue("color"),this.builder.styleLabelColor=window.getComputedStyle(i,null).getPropertyValue("color"),this.builder.styleButtonClassicBackground=window.getComputedStyle(o,null).getPropertyValue("background-color"),this.builder.styleButtonClassicColor=window.getComputedStyle(o,null).getPropertyValue("color"),this.builder.styleButtonClassicBackgroundHover=this.getUIStyleValue(o,"hover","background-color"),this.builder.styleDark=!1,this.builder.styleColored=!1,this.builder.styleColoredDark=!1,this.builder.styleLight=!1,document.body.getAttribute("class")&&(-1!==document.body.getAttribute("class").indexOf("colored-dark")?this.builder.styleColoredDark=!0:-1!==document.body.getAttribute("class").indexOf("dark")?this.builder.styleDark=!0:-1!==document.body.getAttribute("class").indexOf("colored")?this.builder.styleColored=!0:-1!==document.body.getAttribute("class").indexOf("light")&&(this.builder.styleLight=!0))}getUIStyles_OLD(){this.dom.appendHtml(this.builder.builderStuff,'<button class="style-helper"><svg><use xlink:href="#ion-code-working"></use></svg></button>\n        <input type="text" class="style-helper-input" style="display:none;">\n        <label class="style-helper-label" style="display:none;"></label>\n        <input class="style-helper-checkbox" type="checkbox" style="display:none;">\n        <button class="style-helper-button-classic classic" style="display:none;"><svg><use xlink:href="#ion-code-working"></use></svg></button>\n        <select class="style-helper-select" style="display:none;"><option value=""></option></select>\n        ');const t=this.builder.builderStuff.querySelector(".style-helper"),e=this.builder.builderStuff.querySelector(".style-helper-input"),i=this.builder.builderStuff.querySelector(".style-helper-label"),n=this.builder.builderStuff.querySelector(".style-helper-select"),o=this.builder.builderStuff.querySelector(".style-helper-button-classic");this.builder.styleModalColor=this.getUIStyleValue(t,"modal-color","background-color"),this.builder.styleModalBackground=this.getUIStyleValue(t,"modal-background","background-color"),this.builder.styleButtonPickColorBorder=this.getUIStyleValue(t,"button-pickcolor-border","border"),this.builder.styleButtonPickColorBackground=this.getUIStyleValue(t,"button-pickcolor-background","background-color"),this.builder.styleToolBackground=window.getComputedStyle(t,null).getPropertyValue("background-color"),this.builder.styleButtonColor=window.getComputedStyle(t,null).getPropertyValue("color"),this.builder.styleButtonSvgFill=window.getComputedStyle(t.querySelector("svg"),null).getPropertyValue("fill"),this.builder.styleButtonBackgroundHover=this.getUIStyleValue(t,"hover","background-color"),this.builder.styleSnippetColor=this.getUIStyleValue(t,"snippet-color","background-color"),this.builder.styleSnippetBackground=this.getUIStyleValue(t,"snippet-background","background-color"),this.builder.styleSnippetTabsBackground=this.getUIStyleValue(t,"snippet-tabs-background","background-color"),this.builder.styleSnippetTabItemBackground=this.getUIStyleValue(t,"snippet-tab-item-background","background-color"),this.builder.styleSnippetTabItemBackgroundActive=this.getUIStyleValue(t,"snippet-tab-item-background-active","background-color"),this.builder.styleSnippetTabItemBackgroundHover=this.getUIStyleValue(t,"snippet-tab-item-background-hover","background-color"),this.builder.styleSnippetTabItemColor=this.getUIStyleValue(t,"snippet-tab-item-color","background-color"),this.builder.styleSnippetMoreItemBackground=this.getUIStyleValue(t,"snippet-more-item-background","background-color"),this.builder.styleSnippetMoreItemBackgroundActive=this.getUIStyleValue(t,"snippet-more-item-background-active","background-color"),this.builder.styleSnippetMoreItemBackgroundHover=this.getUIStyleValue(t,"snippet-more-item-background-hover","background-color"),this.builder.styleSnippetMoreItemColor=this.getUIStyleValue(t,"snippet-more-item-color","background-color"),this.builder.styleTabsBackground=this.getUIStyleValue(t,"tabs-background","background-color"),this.builder.styleTabItemBorderBottomActive=this.getUIStyleValue(t,"tab-item-active-border-bottom","border"),this.builder.styleTabItemColor=this.getUIStyleValue(t,"tab-item-color","background-color"),this.builder.styleTabsMoreBackground=this.getUIStyleValue(t,"tabs-more-background","background-color"),this.builder.styleTabsMoreBorder=this.getUIStyleValue(t,"tabs-more-border","border"),this.builder.styleTabsMoreItemColor=this.getUIStyleValue(t,"tabs-more-item-color","background-color"),this.builder.styleTabsMoreBackgroundHover=this.getUIStyleValue(t,"tabs-more-item-background-hover","background-color"),this.builder.styleSeparatorColor=this.getUIStyleValue(t,"separator-color","background-color"),this.builder.styleSelectBackground=window.getComputedStyle(n,null).getPropertyValue("background-color"),this.builder.styleSelectColor=window.getComputedStyle(n,null).getPropertyValue("color"),this.builder.styleSelectOptionBackground=window.getComputedStyle(n.querySelector("option"),null).getPropertyValue("background-color"),this.builder.styleInputBackground=window.getComputedStyle(e,null).getPropertyValue("background-color"),this.builder.styleInputBorderBottom=window.getComputedStyle(e,null).getPropertyValue("border-bottom"),this.builder.styleInputColor=window.getComputedStyle(e,null).getPropertyValue("color"),this.builder.styleLabelColor=window.getComputedStyle(i,null).getPropertyValue("color"),this.builder.styleButtonClassicBackground=window.getComputedStyle(o,null).getPropertyValue("background-color"),this.builder.styleButtonClassicColor=window.getComputedStyle(o,null).getPropertyValue("color"),this.builder.styleButtonClassicBackgroundHover=this.getUIStyleValue(o,"hover","background-color"),this.builder.styleOutlineColor=this.getUIStyleValue(t,"outline-color","background-color"),this.builder.styleDark=!1,this.builder.styleColored=!1,this.builder.styleColoredDark=!1,this.builder.styleLight=!1,document.body.getAttribute("class")&&(-1!==document.body.getAttribute("class").indexOf("colored-dark")?this.builder.styleColoredDark=!0:-1!==document.body.getAttribute("class").indexOf("dark")?this.builder.styleDark=!0:-1!==document.body.getAttribute("class").indexOf("colored")?this.builder.styleColored=!0:-1!==document.body.getAttribute("class").indexOf("light")&&(this.builder.styleLight=!0))}getUIStyleValue(t,e,i){const n=this.dom;n.addClass(t,e);let o=window.getComputedStyle(t,null).getPropertyValue(i);return n.removeClass(t,e),o}getFontFamilyStyle(t){return`\n        html, body {height:100%}\n        body {overflow:hidden;margin:0;\n            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n            font-size:100%; \n            line-height:1.7;\n        }\n        #divFontList {margin:0;padding:0 0 9px 9px;height:100%;overflow-y:scroll !important;box-sizing:border-box;\n            list-style: none;\n            padding: 0;\n            margin: 0;\n        }\n        #divFontList > li {width:100%;cursor:pointer;overflow:hidden;text-align:center;position:relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            outline:none;\n        }\n        #divFontList > li img {margin:7px 5px 7px 5px;max-width: 230px;max-height: 27px;pointer-events: none;}\n        #divFontList > li div {position:absolute;top:0;left:0;width:100%;height:100%;}\n\n        #divFontList > li > div {\n            position:absolute;left:0px;top:0px;width:100%;height:100%;\n            // z-index: 1;\n            pointer-events: none;}\n\n        #divFontList > li {\n            color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n            background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n        }\n        #divFontList > li > div:after {\n            // background: rgba(0, 0, 0, 0.04); \n            background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n            position: absolute;\n            content: "";\n            display: block;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            opacity: 0;\n        }\n        #divFontList > li:hover > div:after,\n        #divFontList > li:focus > div:after {\n            opacity: 1;\n        }\n        #divFontList > li.on > div:after {\n            opacity: 1;\n        }\n\n        ${this.builder.styleDark||this.builder.styleColoredDark||this.builder.styleColore?"":"\n        #divFontList > li img {\n            mix-blend-mode: multiply;\n        }\n        "}\n\n        .dark #divFontList > li img {\n            ${t?"":"mix-blend-mode: screen;"};\n            filter: invert(1);\n        }\n        .dark #divFontList > li {\n            color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n            background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n        }\n        .dark #divFontList > li > div:after {\n            background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n        }\n        \n        .colored-dark #divFontList > li img {\n            ${t?"":"mix-blend-mode: screen;"};\n            ${t?"":"filter: invert(1);"};\n        }\n        .colored-dark #divFontList > li {\n            color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n            background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n        }\n        .colored-dark #divFontList > li > div:after {\n            background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n        }\n\n\n        .colored #divFontList > li img {\n            ${t?"":"mix-blend-mode: screen;"};\n            ${t?"":"filter: invert(1);"};\n        }\n        .colored #divFontList > li {\n            color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n            background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n        }\n        .colored #divFontList > li > div:after {\n            background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n        }\n\n\n        /* Scrollbar for toolbar/RTE and modal */\n\n        .dark * {\n            scrollbar-width: thin;\n            scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n        }\n        .dark *::-webkit-scrollbar {\n            width: 12px;\n        }\n        .dark *::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        .dark *::-webkit-scrollbar-thumb {\n            background-color:rgba(255, 255, 255, 0.3);\n        } \n\n        .colored-dark * {\n            scrollbar-width: thin;\n            scrollbar-color: rgb(100, 100, 100) auto;\n        }\n        .colored-dark *::-webkit-scrollbar {\n            width: 12px;\n        }\n        .colored-dark *::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        .colored-dark *::-webkit-scrollbar-thumb {\n            background-color:rgb(100, 100, 100);\n        } \n\n        .colored * {\n            scrollbar-width: thin;\n            scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n        }\n        .colored *::-webkit-scrollbar {\n            width: 12px;\n        }\n        .colored *::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        .colored *::-webkit-scrollbar-thumb {\n            background-color: rgba(0, 0, 0, 0.4);\n        } \n\n        .light * {\n            scrollbar-width: thin;\n            scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n        }\n        .light *::-webkit-scrollbar {\n            width: 12px;\n        }\n        .light *::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        .light *::-webkit-scrollbar-thumb {\n            background-color: rgba(0, 0, 0, 0.4);\n        } \n        `}refreshFontFamilyStyle1(){let t=this.builder.rte.rteFontFamilyOptions.querySelector("iframe").contentWindow.document;t.querySelector("#mainstyle").innerHTML=this.getFontFamilyStyle(),this.builder.styleDark?t.body.setAttribute("class","dark"):this.builder.styleColored?t.body.className="colored":this.builder.styleColoredDark?t.body.className="colored-dark":this.builder.styleLight?t.body.className="light":t.body.className=""}refreshFontFamilyStyle2(){let t=this.builder.builderStuff.querySelector(".is-modal.pickfontfamily").querySelector("iframe").contentWindow.document;t.querySelector("#mainstyle").innerHTML=this.getFontFamilyStyle(!0),this.builder.styleDark?t.body.setAttribute("class","dark"):this.builder.styleColored?t.body.className="colored":this.builder.styleColoredDark?t.body.className="colored-dark":this.builder.styleLight?t.body.className="light":t.body.className=""}getFontPreview(){let t=this.builder.fontAssetPath,e="";return e=`\n        <li role="option" tabindex="0" data-provider="" data-font-family="" style="font-size:12px;padding:10px 7px;box-sizing:border-box;"><div></div>\n            <span style="z-index:1;position: relative;pointer-events: none;">${this.out("None")}</span>\n        </li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="Arial, sans-serif"><div></div><img src="${t}arial.png"></li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="courier"><div></div><img src="${t}courier.png"></li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="Georgia, serif"><div></div><img src="${t}georgia.png"></li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="monospace"><div></div><img src="${t}monospace.png"></li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="sans-serif"><div></div><img src="${t}sans_serif.png"></li>\n        <li role="option" tabindex="0" data-provider="" data-font-family="serif"><div></div><img src="${t}serif.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Abel, sans-serif"><div></div><img src="${t}abel.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Abril Fatface"><div></div><img src="${t}abril_fatface.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Advent Pro, sans-serif" data-font-style="wght@100;200;300;400;500;600;700"><div></div><img src="${t}advent_pro.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Aladin, cursive"><div></div><img src="${t}aladin.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Alegreya, serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}alegreya.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Alegreya Sans SC, sans-serif" data-font-style="ital,wght@0,100;0,300;0,400;0,500;0,700;0,800;0,900;1,100;1,300;1,400;1,500;1,700;1,800;1,900"><div></div><img src="${t}alegreya_sans_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Alegreya SC, serif" data-font-style="ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900"><div></div><img src="${t}alegreya_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Alice, serif"><div></div><img src="${t}alice.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Allerta Stencil, sans-serif"><div></div><img src="${t}allerta_stencil.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Allura, cursive"><div></div><img src="${t}allura.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Almendra Display, cursive"><div></div><img src="${t}almendra_display.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Amatic SC, cursive" data-font-style="wght@400;700"><div></div><img src="${t}amatic_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Andika, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}andika.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Anonymous Pro, monospace" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}anonymous_pro.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Architects Daughter, cursive"><div></div><img style="transform:scale(1.1);" src="${t}architects_daughter.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Arimo, sans-serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700"><div></div><img src="${t}arimo.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Arsenal, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}arsenal.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Assistant" data-font-style="wght@200;300;400;500;600;700;800"><div></div><img src="${t}assistant.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Aubrey, cursive"><div></div><img src="${t}aubrey.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Anton, sans-serif"><div></div><img src="${t}anton.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Archivo Narrow, sans-serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700"><div></div><img src="${t}archivo_narrow.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bad Script, cursive"><div></div><img src="${t}bad_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="BenchNine, sans-serif" data-font-style="wght@300;400;700"><div></div><img src="${t}benchNine.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bevan, cursive"><div></div><img src="${t}bevan.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bigelow Rules, cursive"><div></div><img src="${t}bigelow_rules.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bilbo, cursive"><div></div><img src="${t}bilbo.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bonbon, cursive"><div></div><img src="${t}bonbon.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Bowlby One SC, cursive"><div></div><img src="${t}bowlby_one_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cabin Condensed, sans-serif" data-font-style="wght@400;500;600;700"><div></div><img src="${t}cabin_condensed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Carrois Gothic SC, sans-serif"><div></div><img src="${t}carrois_gothic_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Caveat, cursive" data-font-style="wght@400;500;600;700"><div></div><img src="${t}caveat.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Chewy, cursive"><div></div><img src="${t}chewy.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cinzel, serif" data-font-style="wght@400;500;600;700;800;900"><div></div><img src="${t}cinzel.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Comfortaa, cursive" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}comfortaa.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Concert One, cursive"><div></div><img src="${t}concert_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cormorant, serif" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}cormorant.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cormorant Garamond, serif" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}cormorant_garamond.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cormorant Infant, serif" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}cormorant_infant.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cormorant SC, serif" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}cormorant_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cormorant Unicase, serif" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}cormorant_unicase.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cousine" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}cousine.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Crafty Girls, cursive"><div></div><img src="${t}crafty_girls.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cuprum, sans-serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700"><div></div><img src="${t}cuprum.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Cutive Mono, monospace"><div></div><img src="${t}cutive_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Devonshire, cursive"><div></div><img src="${t}devonshire.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Didact Gothic, sans-serif"><div></div><img src="${t}didact_gothic.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Diplomata SC, cursive"><div></div><img src="${t}diplomata_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Dosis, sans-serif" data-font-style="wght@200;300;400;500;600;700;800"><div></div><img src="${t}dosis.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="EB Garamond, serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;0,800;1,400;1,500;1,600;1,700;1,800"><div></div><img src="${t}eb_garamond.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="El Messiri, sans-serif" data-font-style="wght@400;500;600;700"><div></div><img src="${t}el_messiri.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Elsie, cursive" data-font-style="wght@400;900"><div></div><img src="${t}elsie.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Encode Sans, sans-serif" data-font-style="wght@100;200;300;400;500;600;700;800;900"><div></div><img src="${t}encode_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Exo, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}exo.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="'Exo 2', sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900" data-font-display="swap"><div></div><img src="${t}exo_2.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Felipa, cursive"><div></div><img src="${t}felipa.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fira Code, monospace" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}fira_code.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fira Mono, monospace" data-font-style="wght@400;500;700"><div></div><img src="${t}fira_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fira Sans, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}fira_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fira Sans Condensed, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}fira_sans_condensed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fira Sans Extra Condensed, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}fira_sans_extra_condensed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fjalla One, sans-serif"><div></div><img src="${t}fjalla_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Forum, cursive"><div></div><img src="${t}forum.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Frank Ruhl Libre" data-font-style="wght@300;400;500;700;900"><div></div><img src="${t}frank_ruhl_libre.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Fredericka the Great, cursive"><div></div><img src="${t}fredericka_the_great.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Gabriela, serif"><div></div><img src="${t}gabriela.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Gilda Display, serif"><div></div><img src="${t}gilda_display.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Give You Glory, cursive"><div></div><img style="transform:scale(1.3);" src="${t}give_you_glory.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Gruppo, cursive"><div></div><img src="${t}gruppo.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Handlee, cursive"><div></div><img src="${t}handlee.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Happy Monkey, cursive"><div></div><img src="${t}happy_monkey.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Hind" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}hind.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="IBM Plex Mono, monospace" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}ibm_plex_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="IBM Plex Sans, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}ibm_plex_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="IBM Plex Serif, serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}ibm_plex_serif.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Iceland, cursive"><div></div><img src="${t}iceland.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Inconsolata, monospace" data-font-style="wght@200;300;400;500;600;700;800;900"><div></div><img src="${t}inconsolata.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Josefin Sans, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}josefin_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Istok Web, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}istok_web.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Julee, cursive"><div></div><img src="${t}julee.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Julius Sans One, sans-serif"><div></div><img src="${t}julius_sans_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Junge, serif"><div></div><img src="${t}junge.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Jura, sans-serif" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}jura.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Just Me Again Down Here, cursive"><div></div><img style="transform:scale(1.1);" src="${t}just_me_again_down_here.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kaushan Script, cursive"><div></div><img src="${t}kaushan_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kelly Slab, cursive"><div></div><img src="${t}kelly_slab.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kite One, sans-serif"><div></div><img src="${t}kite_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kosugi, sans-serif"><div></div><img src="${t}kosugi.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kosugi Maru, sans-serif"><div></div><img src="${t}kosugi_maru.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Kurale, serif"><div></div><img src="${t}kurale.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lato, sans-serif" data-font-style="ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900"><div></div><img src="${t}lato.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ledger, serif" data-font-display="swap"><div></div><img src="${t}ledger.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lekton, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400"><div></div><img src="${t}lekton.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Life Savers, cursive" data-font-style="wght@400;700;800"><div></div><img src="${t}life_savers.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Literata, serif" data-font-style="ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}literata.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lobster, cursive"><div></div><img src="${t}lobster.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lobster Two, cursive" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}lobster_two.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Londrina Shadow, cursive"><div></div><img src="${t}londrina_shadow.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lora, serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700"><div></div><img src="${t}lora.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Lovers Quarrel, cursive"><div></div><img style="transform:scale(1.1);" src="${t}lovers_quarrel.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="'M PLUS 1p', sans-serif" data-font-style="wght@100;300;400;500;700;800;900" data-font-display="swap"><div></div><img src="${t}m_plus_1p.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="'M PLUS Rounded 1c', sans-serif" data-font-style="wght@100;300;400;500;700;800;900" data-font-display="swap"><div></div><img src="${t}m_plus_rounded_1c.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Macondo, cursive"><div></div><img src="${t}macondo.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Marcellus SC, serif"><div></div><img src="${t}marcellus_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Marck Script, cursive"><div></div><img src="${t}marck_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Martel, serif" data-font-style="wght@200;300;400;600;700;800;900"><div></div><img src="${t}martel.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Maven Pro, sans-serif"><div></div><img src="${t}maven_pro.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Merriweather, serif" data-font-style="ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900"><div></div><img src="${t}merriweather.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Merriweather Sans" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800"><div></div><img src="${t}merriweather_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Mogra, cursive"><div></div><img src="${t}mogra.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Monoton, cursive"><div></div><img src="${t}monoton.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Montez, cursive"><div></div><img src="${t}montez.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Montserrat, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}montserrat.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Montserrat Alternates, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}montserrat_alternates.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Montserrat Subrayada, sans-serif" data-font-style="wght@400;700"><div></div><img src="${t}montserrat_subrayada.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Neucha, cursive"><div></div><img src="${t}neucha.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Neuton, serif" data-font-style="ital,wght@0,200;0,300;0,400;0,700;0,800;1,400"><div></div><img src="${t}neuton.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Nixie One, cursive"><div></div><img src="${t}nixie_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Nothing You Could Do, cursive"><div></div><img style="transform:scale(1.1);" src="${t}nothing_you_could_do.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Noto Sans, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}noto_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Noto Sans SC, sans-serif" data-font-style="wght@100;300;400;500;700;900"><div></div><img src="${t}noto_sans_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Noto Serif, serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}noto_serif.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Noto Serif TC, serif" data-font-style="wght@200;300;400;500;600;700;900"><div></div><img src="${t}noto_serif_tc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Nunito, sans-serif" data-font-style="ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000"><div></div><img src="${t}nunito.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Old Standard TT, serif" data-font-style="ital,wght@0,400;0,700;1,400"><div></div><img src="${t}old_standard_tt.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Open Sans, sans-serif" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800"><div></div><img src="${t}open_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Oranienbaum, serif"><div></div><img src="${t}oranienbaum.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Oswald, sans-serif" data-font-style="wght@200;300;400;500;600;700"><div></div><img src="${t}oswald.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Oxygen, sans-serif" data-font-style="wght@300;400;700"><div></div><img src="${t}oxygen.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Pacifico, cursive"><div></div><img src="${t}pacifico.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Pangolin, cursive"><div></div><img src="${t}pangolin.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Passion One, cursive" data-font-style="wght@400;700;900"><div></div><img src="${t}passion_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Pathway Gothic One, sans-serif"><div></div><img src="${t}pathway_gothic_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Pattaya, sans-serif"><div></div><img src="${t}pattaya.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Petit Formal Script, cursive"><div></div><img style="transform:scale(1.1);" src="${t}petit_formal_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Philosopher, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}philosopher.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Play, sans-serif" data-font-style="wght@400;700"><div></div><img src="${t}play.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Playfair Display, serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}playfair_display.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Playfair Display SC, serif" data-font-style="ital,wght@0,400;0,700;0,900;1,400;1,700;1,900"><div></div><img src="${t}playfair_display_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Podkova, serif" data-font-style="wght@400;500;600;700;800"><div></div><img src="${t}podkova.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Poiret One, cursive"><div></div><img src="${t}poiret_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Pompiere, cursive"><div></div><img style="transform:scale(1.1);" src="${t}pompiere.png"></li>\n        `,e+=`<li role="option" tabindex="0" data-provider="google" data-font-family="Poppins, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}poppins.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Prata, serif"><div></div><img src="${t}prata.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="'Press Start 2P', cursive"><div></div><img src="${t}press_start_2p.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Prosto One, cursive"><div></div><img src="${t}prosto_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Mono, monospace"><div></div><img src="${t}pt_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Sans, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}pt_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Sans Caption, sans-serif" data-font-style="wght@400;700"><div></div><img src="${t}pt_sans_caption.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Sans Narrow, sans-serif" data-font-style="wght@400;700"><div></div><img src="${t}pt_sans_narrow.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Serif, serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}pt_serif.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="PT Serif Caption, serif" data-font-style="ital@0;1"><div></div><img src="${t}pt_serif_caption.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Quattrocento Sans, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}quattrocento_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Quattrocento, serif" data-font-style="wght@400;700"><div></div><img src="${t}quattrocento.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Quicksand, sans-serif" data-font-style="wght@300;400;500;600;700"><div></div><img src="${t}quicksand.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Qwigley, cursive"><div></div><img src="${t}qwigley.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Raleway, sans-serif" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}raleway.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Raleway Dots, sans-serif"><div></div><img src="${t}raleway_dots.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Redressed, cursive"><div></div><img src="${t}redressed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ribeye Marrow, cursive"><div></div><img src="${t}ribeye_marrow.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Righteous, cursive"><div></div><img src="${t}righteous.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Roboto, sans-serif" data-font-style="ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900"><div></div><img src="${t}roboto.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Roboto Condensed, sans-serif" data-font-style="ital,wght@0,300;0,400;0,700;1,300;1,400;1,700"><div></div><img src="${t}roboto_condensed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Roboto Mono, monospace" data-font-style="ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700"><div></div><img src="${t}roboto_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Roboto Slab, serif" data-font-style="wght@100;200;300;400;500;600;700;800;900"><div></div><img src="${t}roboto_slab.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Rochester, cursive"><div></div><img src="${t}rochester.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Rouge Script, cursive"><div></div><img src="${t}rouge_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Rubik, sans-serif" data-font-style="ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}rubik.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Rubik Mono One, sans-serif"><div></div><img src="${t}rubik_mono_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ruslan Display, cursive"><div></div><img src="${t}ruslan_display.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Russo One, sans-serif"><div></div><img src="${t}russo_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Sacramento, cursive"><div></div><img src="${t}sacramento.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Sanchez, serif" data-font-style="ital@0;1"><div></div><img src="${t}sanchez.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Satisfy, cursive"><div></div><img src="${t}satisfy.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Sawarabi Gothic, sans-serif"><div></div><img src="${t}sawarabi_gothic.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Scada, sans-serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}scada.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Seaweed Script, cursive"><div></div><img src="${t}seaweed_script.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Seymour One, sans-serif"><div></div><img src="${t}seymour_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Shadows Into Light Two, cursive"><div></div><img src="${t}shadows_into_light_two.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Six Caps, sans-serif"><div></div><img src="${t}six_caps.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Snowburst One, cursive"><div></div><img src="${t}snowburst_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Source Code Pro, monospace" data-font-style="ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}source_code_pro.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Source Sans Pro, sans-serif" data-font-style="ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900"><div></div><img src="${t}source_sans_pro.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Special Elite, cursive"><div></div><img src="${t}special_elite.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Spectral, serif" data-font-style="ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800"><div></div><img src="${t}spectral.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Spectral SC, serif" data-font-style="ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,200;1,300;1,400;1,500;1,600;1,700;1,800"><div></div><img src="${t}spectral_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Squada One, cursive"><div></div><img src="${t}squada_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Stalinist One, cursive"><div></div><img src="${t}stalinist_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Stint Ultra Expanded, cursive"><div></div><img src="${t}stint_ultra_expanded.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Syncopate, sans-serif" data-font-style="wght@400;700"><div></div><img src="${t}syncopate.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Tangerine, cursive" data-font-style="wght@400;700"><div></div><img src="${t}tangerine.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Tenor Sans, sans-serif"><div></div><img src="${t}tenor_sans.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Tinos, serif" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}tinos.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ubuntu, sans-serif" data-font-style="ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700"><div></div><img src="${t}ubuntu.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ubuntu Condensed, sans-serif"><div></div><img src="${t}ubuntu_condensed.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Ubuntu Mono, monospace" data-font-style="ital,wght@0,400;0,700;1,400;1,700"><div></div><img src="${t}ubuntu_mono.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Underdog, cursive"><div></div><img src="${t}underdog.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="UnifrakturMaguntia, cursive"><div></div><img src="${t}unifrakturmaguntia.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Vast Shadow, cursive"><div></div><img src="${t}vast_shadow.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Viga, sans-serif"><div></div><img src="${t}viga.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Vollkorn, serif" data-font-style="ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900"><div></div><img src="${t}vollkorn.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Vollkorn SC, serif" data-font-style="wght@400;600;700;900"><div></div><img src="${t}vollkorn_sc.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Voltaire, sans-serif"><div></div><img src="${t}voltaire.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Wire One, sans-serif"><div></div><img src="${t}wire_one.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Yanone Kaffeesatz, sans-serif" data-font-style="wght@200;300;400;500;600;700"><div></div><img src="${t}yanone_kaffeesatz.png"></li>\n        <li role="option" tabindex="0" data-provider="google" data-font-family="Yeseva One, cursive"><div></div><img src="${t}yeseva_one.png"></li>\n        `,e}getFontFamilyHTML(t){return`\n        <!DOCTYPE HTML>\n        <html>\n        <head>\n            <meta charset="utf-8">\n            <title>Fonts</title>\n            <meta name="viewport" content="width=device-width, initial-scale=1">\n            <meta name="description" content="">  \n            <style id="mainstyle">\n                html, body {height:100%}\n                body {overflow:hidden;margin:0;\n                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                    font-size:100%; \n                    line-height:1.7;\n                }\n                #divFontList {margin:0;padding:0 0 9px 9px;height:100%;overflow-y:scroll !important;box-sizing:border-box;\n                    list-style: none;\n                    padding: 0;\n                    margin: 0;\n                }\n                #divFontList > li {width:100%;cursor:pointer;overflow:hidden;text-align:center;position:relative;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    text-overflow: ellipsis;\n                    white-space: nowrap;\n                    outline:none;\n                }\n                #divFontList > li img {margin:7px 5px 7px 5px;max-width: 230px;max-height: 27px;pointer-events: none;}\n                #divFontList > li div {position:absolute;top:0;left:0;width:100%;height:100%;}\n\n                #divFontList > li > div {\n                    position:absolute;left:0px;top:0px;width:100%;height:100%;\n                    // z-index: 1;\n                    pointer-events: none;}\n\n                #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                #divFontList > li > div:after {\n                    // background: rgba(0, 0, 0, 0.04); \n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                    position: absolute;\n                    content: "";\n                    display: block;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    opacity: 0;\n                }\n                #divFontList > li:hover > div:after,\n                #divFontList > li:focus > div:after {\n                    opacity: 1;\n                }\n                #divFontList > li.on > div:after {\n                    opacity: 1;\n                }\n\n                ${this.builder.styleDark||this.builder.styleColoredDark||this.builder.styleColore?"":"\n                #divFontList > li img {\n                    mix-blend-mode: multiply;\n                }\n                "}\n\n                .dark #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    filter: invert(1);\n                }\n                .dark #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .dark #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n                \n                .colored-dark #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    ${t?"":"filter: invert(1);"};\n                }\n                .colored-dark #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .colored-dark #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n\n\n                .colored #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    ${t?"":"filter: invert(1);"};\n                }\n                .colored #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .colored #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n\n\n                /* Scrollbar for toolbar/RTE and modal */\n\n                .dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n                }\n                .dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .dark *::-webkit-scrollbar-thumb {\n                    background-color:rgba(255, 255, 255, 0.3);\n                } \n\n                .colored-dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(100, 100, 100) auto;\n                }\n                .colored-dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored-dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored-dark *::-webkit-scrollbar-thumb {\n                    background-color:rgb(100, 100, 100);\n                } \n\n                .colored * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .colored *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n\n                .light * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .light *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .light *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .light *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n            </style>\n\n        </head>\n        <body${this.builder.styleDark?' class="dark"':""}${this.builder.styleColored?' class="colored"':""}${this.builder.styleColoredDark?' class="colored-dark"':""}${this.builder.styleLight?' class="light"':""}>\n\n        <ul id="divFontList">\n        ${this.getFontPreview()}\n        </ul>\n\n        <script${this.builder.nonce?` nonce="${this.builder.nonce}"`:""}>\n\n            const close = () => {\n                parent.focus();\n\n                let pop = parent.document.querySelector('.rte-fontfamily-options.active, .pickfontfamily.active');\n                if(pop)  {\n                    pop.classList.remove('active');\n                    pop.classList.add('deactive');\n                }\n            }\n\n            const setValue = (item) => {\n                let provider = item.getAttribute('data-provider');\n                let fontfamily = item.getAttribute('data-font-family');\n                let fontstyle = item.getAttribute('data-font-style');\n                let fontdisplay = item.getAttribute('data-font-display');\n                parent._cb.setFont(fontfamily, fontstyle, fontdisplay, provider);\n\n                let elms = document.querySelectorAll('#divFontList > li');\n                elms.forEach(elm=>{\n                    elm.classList.remove('on');\n                });\n                item.classList.add('on');\n            }\n\n            const handleItemClick = (e) => {\n                e.preventDefault();\n\n                let item = e.target;\n                setValue(item);\n            }\n\n            const handleItemKeyDown = (e) => {\n                e.preventDefault();\n\n                if(e.keyCode === 38 && e.target.previousElementSibling) { // up\n                    e.target.previousElementSibling.focus();\n                } else if(e.keyCode === 40 && e.target.nextElementSibling) { // down\n                    e.target.nextElementSibling.focus();\n                } else if(e.keyCode === 27) { // escape key\n                    close();\n                } else if(e.keyCode === 13 || e.keyCode === 32) { // enter or spacebar key\n                    setValue(e.target);\n                }\n            }\n            \n            let elms = document.querySelectorAll('#divFontList > li');\n            elms.forEach(elm=>{\n                elm.addEventListener('keydown', handleItemKeyDown);\n                elm.addEventListener('click', handleItemClick);\n            });\n        <\/script>\n        \n        </body>\n        </html>\n                \n        \n        `}getFontFamilyEmail(t){let e=this.builder.fontAssetPath;return`\n        <!DOCTYPE HTML>\n        <html>\n        <head>\n            <meta charset="utf-8">\n            <title>Fonts</title>\n            <meta name="viewport" content="width=device-width, initial-scale=1">\n            <meta name="description" content="">  \n            <style>\n                html, body {height:100%}\n                body {overflow:hidden;margin:0;\n                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                    font-size:100%; \n                    line-height:1.7;\n                }\n                #divFontList {margin:0;padding:0 0 9px 9px;height:100%;overflow-y:scroll !important;box-sizing:border-box;\n                    list-style: none;\n                    padding: 0;\n                    margin: 0;\n                }\n                #divFontList > li {width:100%;cursor:pointer;overflow:hidden;text-align:center;position:relative;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    text-overflow: ellipsis;\n                    white-space: nowrap;\n                    outline:none;\n                }\n                #divFontList > li img {margin:7px 5px 7px 5px;max-width: 230px;max-height: 27px;pointer-events: none;}\n                #divFontList > li div {position:absolute;top:0;left:0;width:100%;height:100%;}\n\n                #divFontList > li > div {\n                    position:absolute;left:0px;top:0px;width:100%;height:100%;\n                    // z-index: 1;\n                    pointer-events: none;}\n\n                #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                #divFontList > li > div:after {\n                    // background: rgba(0, 0, 0, 0.04); \n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                    position: absolute;\n                    content: "";\n                    display: block;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    opacity: 0;\n                }\n                #divFontList > li:hover > div:after,\n                #divFontList > li:focus > div:after {\n                    opacity: 1;\n                }\n                #divFontList > li.on > div:after {\n                    opacity: 1;\n                }\n\n                ${this.builder.styleDark||this.builder.styleColoredDark||this.builder.styleColore?"":"\n                #divFontList > li img {\n                    mix-blend-mode: multiply;\n                }\n                "}\n\n                .dark #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    filter: invert(1);\n                }\n                .dark #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .dark #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n                \n                .colored-dark #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    ${t?"":"filter: invert(1);"};\n                }\n                .colored-dark #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .colored-dark #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n\n\n                .colored #divFontList > li img {\n                    ${t?"":"mix-blend-mode: screen;"};\n                    ${t?"":"filter: invert(1);"};\n                }\n                .colored #divFontList > li {\n                    color: ${t?this.builder.styleModalColor:this.builder.styleButtonColor};\n                    background: ${t?this.builder.styleModalBackground:this.builder.styleToolBackground};\n                }\n                .colored #divFontList > li > div:after {\n                    background: ${t?this.builder.styleButtonClassicBackgroundHover:this.builder.styleButtonBackgroundHover};\n                }\n\n\n                /* Scrollbar for toolbar/RTE and modal */\n\n                .dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n                }\n                .dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .dark *::-webkit-scrollbar-thumb {\n                    background-color:rgba(255, 255, 255, 0.3);\n                } \n\n                .colored-dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(100, 100, 100) auto;\n                }\n                .colored-dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored-dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored-dark *::-webkit-scrollbar-thumb {\n                    background-color:rgb(100, 100, 100);\n                } \n\n                .colored * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .colored *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n\n                .light * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .light *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .light *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .light *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n            </style>\n\n        </head>\n        <body${this.builder.styleDark?' class="dark"':""}${this.builder.styleColored?' class="colored"':""}${this.builder.styleColoredDark?' class="colored-dark"':""}${this.builder.styleLight?' class="light"':""}>\n\n        <ul id="divFontList">\n            <li role="option" tabindex="0" data-provider="" data-font-family="" style="font-size:12px;padding:10px 7px;box-sizing:border-box;"><div></div>\n                <span style="z-index:1;position: relative;pointer-events: none;">${this.out("None")}</span>\n            </li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="Arial, sans-serif"><div></div><img src="${e}arial.png"></li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="courier"><div></div><img src="${e}courier.png"></li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="Georgia, serif"><div></div><img src="${e}georgia.png"></li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="monospace"><div></div><img src="${e}monospace.png"></li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="sans-serif"><div></div><img src="${e}sans_serif.png"></li>\n            <li role="option" tabindex="0" data-provider="" data-font-family="serif"><div></div><img src="${e}serif.png"></li>\n        </ul>\n\n        <script>\n\n            const close = () => {\n                parent.focus();\n\n                let pop = parent.document.querySelector('.is-rte-pop.active');\n                if(pop)  {\n                    pop.classList.remove('active');\n                    pop.classList.add('deactive');\n                }\n            }\n\n            const setValue = (item) => {\n                let provider = item.getAttribute('data-provider');\n                let fontfamily = item.getAttribute('data-font-family');\n                let fontstyle = item.getAttribute('data-font-style');\n                let fontdisplay = item.getAttribute('data-font-display');\n                parent._cb.setFont(fontfamily, fontstyle, fontdisplay, provider);\n\n                let elms = document.querySelectorAll('#divFontList > li');\n                elms.forEach(elm=>{\n                    elm.classList.remove('on');\n                });\n                item.classList.add('on');\n            }\n\n            const handleItemClick = (e) => {\n                e.preventDefault();\n\n                let item = e.target;\n                setValue(item);\n            }\n\n            const handleItemKeyDown = (e) => {\n                e.preventDefault();\n\n                if(e.keyCode === 38 && e.target.previousElementSibling) { // up\n                    e.target.previousElementSibling.focus();\n                } else if(e.keyCode === 40 && e.target.nextElementSibling) { // down\n                    e.target.nextElementSibling.focus();\n                } else if(e.keyCode === 27) { // escape key\n                    close();\n                } else if(e.keyCode === 13 || e.keyCode === 32) { // enter or spacebar key\n                    setValue(e.target);\n                }\n            }\n            \n            let elms = document.querySelectorAll('#divFontList > li');\n            elms.forEach(elm=>{\n                elm.addEventListener('keydown', handleItemKeyDown);\n                elm.addEventListener('click', handleItemClick);\n            });\n        <\/script>\n        \n        </body>\n        </html>\n                \n        \n        `}getPageTemplate(t){let e="";return e=""===t?'\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <title>Page</title>\n                <meta name="viewport" content="width=device-width, initial-scale=1">\n                <meta name="description" content="">\n                <link rel="shortcut icon" href="#">\n                \n                <link href="[%PATH%]/assets/minimalist-blocks/content.css" rel="stylesheet">\n                \n                <link href="[%PATH%]/assets/scripts/glide/css/glide.core.css" rel="stylesheet">\n                <link href="[%PATH%]/assets/scripts/glide/css/glide.theme.css" rel="stylesheet">\n                <script src="[%PATH%]/assets/scripts/glide/glide.js"><\/script>\n                \n                <style>\n                    .container {\n                        margin: 150px auto 0;\n                        max-width: 800px;\n                        width: 100%;\n                        padding: 0 20px;\n                        box-sizing: border-box;\n                    }\n                </style>\n            </head>\n            <body>\n            \n            <div class="container">\n            [%CONTENT%]\n            </div>\n            \n            </body>\n            </html>\n            ':"tailwind"===t?'\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <title>Page</title>\n                <meta name="viewport" content="width=device-width, initial-scale=1">\n                <meta name="description" content="">\n                <link rel="shortcut icon" href="#">\n                \n                <link href="[%PATH%]/assets/minimalist-blocks/content-tailwind.css" rel="stylesheet">\n                \n                <link href="[%PATH%]/assets/scripts/glide/css/glide.core.css" rel="stylesheet">\n                <link href="[%PATH%]/assets/scripts/glide/css/glide.theme.css" rel="stylesheet">\n                <script src="[%PATH%]/assets/scripts/glide/glide.js"><\/script>\n                \n                <link rel="stylesheet" href="[%PATH%]/assets/frameworks/tailwindcss/styles.css">\n                \x3c!-- To build your own, please see: https://tailwindcss.com/docs/installation --\x3e\n                \n                <style>\n                    .container {\n                        margin: 150px auto 0;\n                        max-width: 800px;\n                        width: 100%;\n                        padding: 0 20px;\n                        box-sizing: border-box;\n                    }\n                </style>\n            </head>\n            <body>\n            \n            <div class="container">\n            [%CONTENT%]\n            </div>\n            \n            </body>\n            </html>\n            ':"bootstrap"===t?'\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <title>Page</title>\n                <meta name="viewport" content="width=device-width, initial-scale=1">\n                <meta name="description" content="">\n                <link rel="shortcut icon" href="#">\n\n                <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">\n    \n                <link href="[%PATH%]/assets/minimalist-blocks/content.css" rel="stylesheet">\n                \n                <link href="[%PATH%]/assets/scripts/glide/css/glide.core.css" rel="stylesheet">\n                <link href="[%PATH%]/assets/scripts/glide/css/glide.theme.css" rel="stylesheet">\n                <script src="[%PATH%]/assets/scripts/glide/glide.js"><\/script>\n                \n                <style>\n                    .container {margin: 140px auto; max-width: 800px; width:100%; padding:0 35px; box-sizing: border-box;}\n                    /* Bootstrap css adjustment to enable column drag to resize */\n                    .row > *,\n                    .column {\n                        max-width: unset !important;\n                    }\n                </style>\n            </head>\n            <body>\n            \n            <div class="container">\n            [%CONTENT%]\n            </div>\n            \n            </body>\n            </html>\n            ':"foundation"===t?'\n            <!DOCTYPE html>\n            <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <title>Page</title>\n                <meta name="viewport" content="width=device-width, initial-scale=1">\n                <meta name="description" content="">\n                <link rel="shortcut icon" href="#">\n\n                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.5.3/css/foundation.min.css">\n                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.5.3/css/foundation-float.min.css">\n            \n                <link href="[%PATH%]/assets/minimalist-blocks/content.css" rel="stylesheet">\n                \n                <link href="[%PATH%]/assets/scripts/glide/css/glide.core.css" rel="stylesheet">\n                <link href="[%PATH%]/assets/scripts/glide/css/glide.theme.css" rel="stylesheet">\n                <script src="[%PATH%]/assets/scripts/glide/glide.js"><\/script>\n                \n                <style>\n                    .container {\n                        margin: 150px auto 0;\n                        max-width: 800px;\n                        width: 100%;\n                        padding: 0 20px;\n                        box-sizing: border-box;\n                    }\n                </style>\n            </head>\n            <body>\n            \n            <div class="container">\n            [%CONTENT%]\n            </div>\n            \n            </body>\n            </html>\n            ':"[%CONTENT%]",e}}class o{constructor(t){this.builder=t}getScale(t){let e=window.getComputedStyle(t).transform.split("(")[1];e=e.split(")")[0],e=e.split(",");let i=e[0],n=e[1];return Math.sqrt(i*i+n*n)}createElement(t){return document.createElement(t)}appendChild(t,e){t&&t.appendChild(e)}appendHtml(t,e){t&&t.insertAdjacentHTML("beforeend",e)}addEventListener(t,e,i){t&&t.addEventListener(e,i)}addClass(t,e){t&&(this.hasClass(t,e)||(0===t.classList.length?t.className=e:t.className=t.className+" "+e,t.className=t.className.replace(/  +/g," ")))}removeClass(t,e){if(t&&t.classList.length>0){let i,n,o,s,r=e.split(" ");for(i=0,o=r.length;i<o;++i){if(!r[i])continue;let e=r[i],o="",l=t.className.split(" ");for(n=0,s=l.length;n<s;++n)l[n]&&l[n]!==e&&(o+=l[n]+" ");t.className=o.trim()}""===t.className&&t.removeAttribute("class")}}removeClassesByPrefix(t,e){t.classList&&t.classList.forEach((i=>{0===i.indexOf(e)&&this.removeClass(t,i)}))}hasClass(t,e){return!!t&&(!!t.className&&(" "+t.className+" ").indexOf(" "+e+" ")>-1)}moveAfter(t,e){e.parentNode.insertBefore(t,e),e.parentNode.insertBefore(e,e.previousElementSibling)}elementChildren(t){const e=t.childNodes;let i=[],n=e.length;for(;n--;)1===e[n].nodeType&&i.unshift(e[n]);return i}getElementOffset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset,width:e.width,height:e.height}}parentsHasClass(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(this.hasClass(t,e))return!0;t=t.parentNode}}parentsHasId(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(t.id===e)return!0;t=t.parentNode}}parentsHasTag(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(t.tagName.toLowerCase()===e.toLowerCase())return!0;t=t.parentNode}}parentsHasAttribute(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;try{if(t.hasAttribute(e))return!0}catch(t){}t=t.parentNode}}getParentByTag(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(t.tagName.toLowerCase()===e.toLowerCase())return t;t=t.parentNode}}getParentByAttribute(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;try{if(t.hasAttribute(e))return t}catch(t){}t=t.parentNode}}parentsHasElement(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(!(t=t.parentNode))return!1;if(!t.tagName)return!1;if(t.tagName.toLowerCase()===e)return!0}}getParentElement(t,e){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(!(t=t.parentNode))return!1;if(!t.tagName)return!1;if(t.tagName.toLowerCase()===e)return t}}removeClasses(t,e){for(let i=0;i<t.length;i++)t[i].classList.remove(e)}removeAttributes(t,e){for(let i=0;i<t.length;i++)t[i].removeAttribute(e)}removeElements(t){Array.prototype.forEach.call(t,(t=>{t.parentNode.removeChild(t)}))}moveCursorToElement(t){var e,i;window.getSelection&&this.builder.doc.createRange?((i=this.builder.doc.createRange()).selectNodeContents(t),i.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(i)):this.builder.doc.body.createTextRange&&((i=this.builder.doc.body.createTextRange()).moveToElementText(t),i.collapse(!1),i.select())}selectElementContents(t){var e=this.builder.doc.createRange();e.selectNodeContents(t);var i=this.builder.win.getSelection();i.removeAllRanges(),i.addRange(e)}getSelected(){if(this.builder.win.getSelection)return this.builder.win.getSelection().toString();if(this.builder.doc.getSelection)return this.builder.doc.getSelection().toString();var t=this.builder.doc.selection&&this.builder.doc.selection.createRange();return!!t.text&&t.text}checkEditable(){try{var t,e;return this.builder.win.getSelection?t=3===(e=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer).nodeType?e.parentNode:e:this.builder.doc.selection&&(e=this.builder.doc.selection.createRange(),t=this.builder.doc.selection.createRange().parentElement()),!!this.parentsHasAttribute(t,"contenteditable")}catch(t){return!1}}textSelection(){const t=this.getSelection().anchorNode;if(!t)return!1;return t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.COMMENT_NODE?t:t.parentElement}getStyle(t,e){return window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))]}observeElement(t,e,i,n=0){let o=Object.getPrototypeOf(t);if(Object.prototype.hasOwnProperty.call(o,e)){let s=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(t,e,{get:function(){return s.get.apply(this,arguments)},set:function(){let t=this[e];s.set.apply(this,arguments);let o=this[e];"function"==typeof i&&setTimeout(i.bind(this,t,o),n)}})}}baseName(t){if("string"==typeof t){var e=t.split(".");return e.splice(0,e.length-1).join(".")}}doFunction(t,e,i){if(e(t),i){let i=Array.prototype.slice.call(t.getElementsByTagName("*"));for(var n=0;n<i.length;n++)e(i[n])}}execCommand(t,e,n){const o=this.getSelection();if(!o)return;const s=o.anchorNode;if(s){const d=s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.COMMENT_NODE?s:s.parentElement,c=d&&d.innerText===o.toString();let u,p=!1;for(var r=[],l=i.getSelection(),a=0;a<l.rangeCount;++a)r=r.concat(l.getRangeAt(a).getNodes());const h=["p","h1","h2","h3","h4","h5","h6","div","pre"];if(r.forEach((t=>{if(t.tagName){const e=t.tagName.toLowerCase();-1!==h.indexOf(e)&&(p=!0,n(!0,t))}})),p)return;u=c||""===o.toString().trim()?this.updateSelection(t,e,d):this.replaceSelection(t,e,o,d),n&&n(!0,u)}else n&&n(!1)}updateSelection(t,e,i){return i.style[t]=this.getStyleValue(i,t,e),this.checkStyleIfSameAsParent(i,t),this.cleanChildren(t,i),this.cleanUnusedSpan(i),i}replaceSelection(t,e,i,n){const o=i.getRangeAt(0),s=o.extractContents(),r=this.createSpan(n,t,e);return r.appendChild(s),this.cleanChildren(t,r),this.cleanUnusedSpan(r),o.insertNode(r),i.selectAllChildren(r),this.checkStyleIfSameAsParent(r,t),r}checkStyleIfSameAsParent(t,e){if(t.parentNode&&(t.parentNode.style[e]===t.style[e]||window.getComputedStyle(t.parentNode,null).getPropertyValue(e)===t.style[e])){t.style[e]="",""!==t.getAttribute("style")&&null!==t.style||t.removeAttribute("style");let i=0===t.attributes.length||1===t.attributes.length&&t.hasAttribute("data-keep");if("span"===t.nodeName.toLowerCase()&&i){const e=document.createTextNode(t.textContent);t.parentElement.replaceChild(e,t)}}}createSpan(t,e,i){const n=document.createElement("span");return n.style[e]=this.getStyleValue(t,e,i),n}findParentStyle(t,e){if("HTML"===t.nodeName.toUpperCase()||"BODY"===t.nodeName.toUpperCase())return null;if(!t.parentNode)return null;if(null!==t.style[e]&&void 0!==t.style[e]&&""!==t.style[e])return t;this.findParentStyle(t.parentNode,e)}getStyleValue(t,e,i){if("font-weight"===e||"font-style"===e||"text-decoration"===e||"text-transform"===e){let n,o=this.findParentStyle(t,e);if(o&&(n=o.style[e]),i===n){t.style[e]="";let o=window.getComputedStyle(t,null).getPropertyValue(e);t.style[e]=n,i=o}}return i}getParentBlock(t){for(;t;){if(!t.tagName)return!1;if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if("inline"!==this.getStyle(t,"display"))return t;t=t.parentNode}}execCommandClass(t,e,n=!0,o){const s=this.getSelection();if(!s)return;const r=s.anchorNode;if(r){let c=r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE?r:r.parentElement;const u=c&&c.innerText===s.toString();let p=!1;for(var l=[],a=i.getSelection(),d=0;d<a.rangeCount;++d)l=l.concat(a.getRangeAt(d).getNodes());const h=["p","h1","h2","h3","h4","h5","h6","div","pre"];if(l.forEach((i=>{if(i.tagName){const n=i.tagName.toLowerCase();if(-1!==h.indexOf(n)){p=!0;for(let t=0;t<Object.keys(e).length;t++){let n=Object.values(e)[t];this.removeClass(i,n)}""!==t&&this.addClass(i,t),this.cleanChildrenClass(i,e),this.cleanUnusedSpan(i)}}})),p)return;(n||u||""===s.toString().trim())&&("block"===o&&"inline"===this.getStyle(c,"display")&&(c=this.getParentBlock(c)),this.updateSelectionClass(t,e,c))}}updateSelectionClass(t,e,i){for(let t=0;t<Object.keys(e).length;t++){let n=Object.values(e)[t];this.removeClass(i,n)}return""!==t&&this.addClass(i,t),this.cleanChildrenClass(i,e),this.cleanUnusedSpan(i),i}cleanChildrenClass(t,e){if(!t.hasChildNodes())return;Array.from(t.children).map((t=>{for(let i=0;i<Object.keys(e).length;i++){let n=Object.values(e)[i];this.removeClass(t,n)}}));const i=Array.from(t.children).map((t=>this.cleanChildrenClass(t,e)));i&&i.length}execCommandToggle(t,e,n){const o=this.getSelection();if(!o)return;const s=o.anchorNode;if(s){const d=s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.COMMENT_NODE?s:s.parentElement,c=d&&d.innerText===o.toString();let u=!1;for(var r=[],l=i.getSelection(),a=0;a<l.rangeCount;++a)r=r.concat(l.getRangeAt(a).getNodes());const p=["p","h1","h2","h3","h4","h5","h6","div","pre"];if(r.forEach((i=>{if(i.tagName){const o=i.tagName.toLowerCase();if(-1!==p.indexOf(o)){if(u=!0,"fontWeight"===t){let t=!1;this.hasClass(i,n.fontWeight.defaultBold)&&(t=!0),this.removeClass(i,n.fontWeight.thin),this.removeClass(i,n.fontWeight.extralight),this.removeClass(i,n.fontWeight.light),this.removeClass(i,n.fontWeight.normal),this.removeClass(i,n.fontWeight.medium),this.removeClass(i,n.fontWeight.semibold),this.removeClass(i,n.fontWeight.bold),this.removeClass(i,n.fontWeight.extrabold),this.removeClass(i,n.fontWeight.black),t||this.addClass(i,n.fontWeight.defaultBold)}if("fontStyle"===t){let t=!1;this.hasClass(i,n.fontStyle.italic)&&(t=!0),this.removeClass(i,n.fontStyle.italic),this.removeClass(i,n.fontStyle.normal),t||this.addClass(i,n.fontStyle.italic)}if("textUnderline"===t){let t=!1;this.hasClass(i,n.textDecoration.underline)&&(t=!0),this.removeClass(i,n.textDecoration.linethrough),this.removeClass(i,n.textDecoration.underline),this.removeClass(i,n.textDecoration.normal),t||this.addClass(i,n.textDecoration.underline)}if("textLinethrough"===t){let t=!1;this.hasClass(i,n.textDecoration.linethrough)&&(t=!0),this.removeClass(i,n.textDecoration.underline),this.removeClass(i,n.textDecoration.linethrough),this.removeClass(i,n.textDecoration.normal),t||this.addClass(i,n.textDecoration.linethrough)}if("textTransform"===t){let t="";this.hasClass(i,n.textTransform.uppercase)?t="uppercase":this.hasClass(i,n.textTransform.lowercase)?t="lowercase":this.hasClass(i,n.textTransform.capitalize)?t="capitalize":this.hasClass(i,n.textTransform.normal)&&(t="normal"),this.removeClass(i,n.textTransform.uppercase),this.removeClass(i,n.textTransform.lowercase),this.removeClass(i,n.textTransform.capitalize),this.removeClass(i,n.textTransform.normal),""===t?this.addClass(i,n.textTransform.uppercase):"uppercase"===t?this.addClass(i,n.textTransform.lowercase):"lowercase"===t?this.addClass(i,n.textTransform.capitalize):"capitalize"===t||"normal"===t&&this.addClass(i,n.textTransform.uppercase)}if("clean"===t&&(i.className="",i.style.cssText=""),"extend"===t){let t=!1;this.hasClass(i,n.extend[e])&&(t=!0),t?this.removeClass(i,n.extend[e]):this.addClass(i,n.extend[e])}this.cleanChildrenToggle(t,e,i,n),this.cleanUnusedSpan(i)}}})),u)return;c||""===o.toString().trim()?this.updateSelectionToggle(t,e,n,d):this.replaceSelectionToggle(t,e,n,o,d)}}updateSelectionToggle(t,e,i,n){if("fontWeight"===t){let t=!1;this.hasClass(n,i.fontWeight.defaultBold)&&(t=!0);parseInt(window.getComputedStyle(n,null).getPropertyValue("font-weight"))>=500&&(t=!0),this.removeClass(n,i.fontWeight.thin),this.removeClass(n,i.fontWeight.extralight),this.removeClass(n,i.fontWeight.light),this.removeClass(n,i.fontWeight.normal),this.removeClass(n,i.fontWeight.medium),this.removeClass(n,i.fontWeight.semibold),this.removeClass(n,i.fontWeight.bold),this.removeClass(n,i.fontWeight.extrabold),this.removeClass(n,i.fontWeight.black),t?this.addClass(n,i.fontWeight.defaultNormal):this.addClass(n,i.fontWeight.defaultBold)}if("fontStyle"===t){let t=!1;this.hasClass(n,i.fontStyle.italic)&&(t=!0),this.removeClass(n,i.fontStyle.italic),this.removeClass(n,i.fontStyle.normal),t?this.addClass(n,i.fontStyle.normal):this.addClass(n,i.fontStyle.italic)}if("textUnderline"===t){let t=!1;this.hasClass(n,i.textDecoration.underline)&&(t=!0),this.removeClass(n,i.textDecoration.underline),this.removeClass(n,i.textDecoration.linethrough),this.removeClass(n,i.textDecoration.normal),t?this.addClass(n,i.textDecoration.normal):this.addClass(n,i.textDecoration.underline)}if("textLinethrough"===t){let t=!1;this.hasClass(n,i.textDecoration.linethrough)&&(t=!0),this.removeClass(n,i.textDecoration.underline),this.removeClass(n,i.textDecoration.linethrough),this.removeClass(n,i.textDecoration.normal),t?this.addClass(n,i.textDecoration.normal):this.addClass(n,i.textDecoration.linethrough)}if("textTransform"===t){let t="";this.hasClass(n,i.textTransform.uppercase)?t="uppercase":this.hasClass(n,i.textTransform.lowercase)?t="lowercase":this.hasClass(n,i.textTransform.capitalize)?t="capitalize":this.hasClass(n,i.textTransform.normal)&&(t="normal"),this.removeClass(n,i.textTransform.uppercase),this.removeClass(n,i.textTransform.lowercase),this.removeClass(n,i.textTransform.capitalize),this.removeClass(n,i.textTransform.normal),""===t?this.addClass(n,i.textTransform.uppercase):"uppercase"===t?this.addClass(n,i.textTransform.lowercase):"lowercase"===t?this.addClass(n,i.textTransform.capitalize):"capitalize"===t?this.addClass(n,i.textTransform.normal):"normal"===t&&this.addClass(n,i.textTransform.uppercase)}if("clean"===t&&(n.className="",n.style.cssText=""),"extend"===t){let t=!1;this.hasClass(n,i.extend[e])&&(t=!0),t?this.removeClass(n,i.extend[e]):this.addClass(n,i.extend[e])}return this.cleanChildrenToggle(t,e,n,i),this.cleanUnusedSpan(n),n}replaceSelectionToggle(t,e,i,n,o){const s=n.getRangeAt(0),r=s.extractContents(),l=document.createElement("span");if("fontWeight"===t){let t=!1;o.closest(`.${i.fontWeight.defaultBold}`)&&(t=!0,this.hasClass(o,i.fontWeight.defaultNormal)&&(t=!1));parseInt(window.getComputedStyle(o,null).getPropertyValue("font-weight"))>=500&&(t=!0),t?this.addClass(l,i.fontWeight.defaultNormal):this.addClass(l,i.fontWeight.defaultBold)}if("fontStyle"===t){let t=!1;o.closest(`.${i.fontStyle.italic}`)&&(t=!0,this.hasClass(o,i.fontStyle.normal)&&(t=!1)),t?this.addClass(l,i.fontStyle.normal):this.addClass(l,i.fontStyle.italic)}if("textUnderline"===t){let t=!1;o.closest(`.${i.textDecoration.underline}`)&&(t=!0),t||this.addClass(l,i.textDecoration.underline)}if("textLinethrough"===t){let t=!1;o.closest(`.${i.textDecoration.linethrough}`)&&(t=!0),t||this.addClass(l,i.textDecoration.linethrough)}if("textTransform"===t){let t="";o.closest(`.${i.textTransform.uppercase}`)?t="uppercase":o.closest(`.${i.textTransform.lowercase}`)?t="lowercase":o.closest(`.${i.textTransform.capitalize}`)?t="capitalize":o.closest(`.${i.textTransform.normal}`)&&(t="normal"),""===t?this.addClass(l,i.textTransform.uppercase):"uppercase"===t?this.addClass(l,i.textTransform.lowercase):"lowercase"===t?this.addClass(l,i.textTransform.capitalize):"capitalize"===t?this.addClass(l,i.textTransform.normal):"normal"===t&&this.addClass(l,i.textTransform.uppercase)}if("extend"===t){let t=!1;o.closest(`.${i.extend[e]}`)&&(t=!0),t||this.addClass(l,i.extend[e])}return l.appendChild(r),this.cleanChildrenToggle(t,e,l,i),this.cleanUnusedSpan(l),s.insertNode(l),n.selectAllChildren(l),l}cleanChildrenToggle(t,e,i,n){if(!i.hasChildNodes())return;"fontWeight"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.fontWeight.thin),this.removeClass(t,n.fontWeight.extralight),this.removeClass(t,n.fontWeight.light),this.removeClass(t,n.fontWeight.normal),this.removeClass(t,n.fontWeight.medium),this.removeClass(t,n.fontWeight.semibold),this.removeClass(t,n.fontWeight.bold),this.removeClass(t,n.fontWeight.extrabold),this.removeClass(t,n.fontWeight.black)})),"fontStyle"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.fontStyle.italic),this.removeClass(t,n.fontStyle.normal)})),"textUnderline"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.textDecoration.underline),this.removeClass(t,n.textDecoration.linethrough),this.removeClass(t,n.textDecoration.normal)})),"textLinethrough"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.textDecoration.underline),this.removeClass(t,n.textDecoration.linethrough),this.removeClass(t,n.textDecoration.normal)})),"textTransform"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.textTransform.uppercase),this.removeClass(t,n.textTransform.lowercase),this.removeClass(t,n.textTransform.capitalize),this.removeClass(t,n.textTransform.normal)})),"clean"===t&&Array.from(i.children).map((t=>{t.className="",t.style.cssText=""})),"extend"===t&&Array.from(i.children).map((t=>{this.removeClass(t,n.extend[e])}));const o=Array.from(i.children).map((i=>this.cleanChildrenToggle(t,e,i,n)));o&&o.length}getSelection(){return this.builder.win&&this.builder.win.getSelection?this.builder.win.getSelection():this.builder.doc&&this.builder.doc.getSelection?this.builder.doc.getSelection():this.builder.doc&&this.builder.doc.selection?this.builder.doc.selection.createRange().text:null}cleanChildren(t,e){if(!e.hasChildNodes())return;const i=Array.from(e.children).filter((e=>void 0!==e.style[t]&&""!==e.style[t.style]));i&&i.length>0&&i.forEach((e=>{e.style[t]="",""!==e.getAttribute("style")&&null!==e.style||e.removeAttribute("style")}));const n=Array.from(e.children).map((e=>this.cleanChildren(t,e)));n&&n.length}addCssClass(t,e,i){this.removeCssClasses(t,i),this.addClass(t,e)}removeCssClasses(t,e){for(let i=0;i<Object.keys(e).length;i++){const n=Object.values(e)[i];this.removeClass(t,n)}}removeEmptyStyle(t){if(!t.hasChildNodes())return;const e=Array.from(t.children).filter((t=>t.getAttribute("style")));e&&e.length>0&&e.forEach((t=>{""!==t.getAttribute("style").trim()&&null!==t.style||t.removeAttribute("style")}));const i=Array.from(t.children).map((t=>this.removeEmptyStyle(t)));i&&i.length}cleanClassSize(t,e){if(!t.hasChildNodes())return;const i=Array.from(t.children).filter((t=>this.hasClass(t,e)));i&&i.length>0&&i.forEach((t=>{this.removeClass(t,e)}));const n=Array.from(t.children).map((t=>this.cleanClassSize(t,e)));n&&n.length}removeFormat(){const t=this.getSelection();if(!t)return;const e=t.anchorNode;if(!e)return;const i=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.COMMENT_NODE?e:e.parentElement;i&&i.innerText===t.toString()||""===t.toString().trim()?this.cleanElement(i):this.cleanSelection(t)}cleanElement(t){t.style.fontWeight="",t.style.fontStyle="",t.style.textDecoration="",t.style.textTransform="",t.style.fontFamily="",t.style.fontSize="",t.style.color="",t.style.backgroundColor="",t.classList.forEach((e=>{-1!==e.indexOf("size-")&&this.removeClass(t,e)})),t.querySelectorAll("*").forEach((t=>{t.style.fontWeight="",t.style.fontStyle="",t.style.textDecoration="",t.style.textTransform="",t.style.fontFamily="",t.style.fontSize="",t.style.color="",t.style.backgroundColor="",t.classList.forEach((e=>{-1!==e.indexOf("size-")&&this.removeClass(t,e)}))})),this.cleanUnusedSpan(t)}cleanSelection(t){const e=t.getRangeAt(0),i=e.extractContents(),n=document.createElement("span");n.appendChild(i),e.insertNode(n),t.selectAllChildren(n),this.cleanElement(n)}cleanUnusedSpan(t){let e=t.querySelectorAll("span");const i=Array.prototype.filter;let n=i.call(e,(t=>0===t.attributes.length));n&&n.length>0&&n.forEach((t=>{t.outerHTML=t.innerHTML})),e=t.querySelectorAll("span"),i.call(e,(t=>{""===t.innerHTML&&t.parentNode.removeChild(t)})),e=t.querySelectorAll("span"),n=i.call(e,(t=>0===t.attributes.length)),n&&n.length>0&&this.cleanUnusedSpan(t)}contentReformat(t,e){this.replaceTag(t,"b",e.fontWeight.defaultBold),this.replaceTag(t,"i",e.fontStyle.italic),this.replaceTag(t,"u",e.textDecoration.underline),this.replaceTag(t,"strike",e.textDecoration.linethrough),this.replaceInline(t,"font-weight","normal",e.fontWeight.defaultBold),this.replaceInline(t,"font-weight","bold",e.fontWeight.defaultBold),this.replaceInline(t,"font-weight","600",e.fontWeight.semibold),this.replaceInline(t,"text-align","left",e.textAlign.left),this.replaceInline(t,"text-align","right",e.textAlign.right),this.replaceInline(t,"text-align","center",e.textAlign.center),this.replaceInline(t,"text-align","justify",e.textAlign.justify),this.replaceInline(t,"display","flex",e.display.flex),this.replaceInline(t,"justiify-content","flex-start",e.justifyContent.start),this.replaceInline(t,"justiify-content","flex-end",e.justifyContent.end),this.replaceInline(t,"justiify-content","center",e.justifyContent.center),this.replaceInline(t,"justiify-content","space-between",e.justifyContent.between),this.replaceInline(t,"flex-direction","column",e.flexDirection.column),this.replaceInline(t,"flex-direction","row",e.flexDirection.row),this.replaceInline(t,"align-items","flex-start",e.alignItems.start),this.replaceInline(t,"align-items","flex-end",e.alignItems.end),this.replaceInline(t,"align-items","center",e.alignItems.center),this.replaceInline(t,"text-transform","uppercase",e.textTransform.uppercase),this.replaceInline(t,"text-transform","lowercase",e.textTransform.lowercase),this.replaceInline(t,"text-transform","none",e.textTransform.normal),this.replaceInline(t,"line-height","1",e.leading.leading_10),this.replaceInline(t,"line-height","1.1",e.leading.leading_11),this.replaceInline(t,"line-height","1.2",e.leading.leading_12),this.replaceInline(t,"line-height","1.25",e.leading.leading_125),this.replaceInline(t,"line-height","1.3",e.leading.leading_13),this.replaceInline(t,"line-height","1.375",e.leading.leading_1375),this.replaceInline(t,"line-height","1.4",e.leading.leading_14),this.replaceInline(t,"line-height","1.5",e.leading.leading_15),this.replaceInline(t,"line-height","1.6",e.leading.leading_16),this.replaceInline(t,"line-height","1.625",e.leading.leading_1625),this.replaceInline(t,"line-height","1.7",e.leading.leading_17),this.replaceInline(t,"line-height","1.8",e.leading.leading_18),this.replaceInline(t,"line-height","1.9",e.leading.leading_19),this.replaceInline(t,"line-height","2",e.leading.leading_20),this.replaceInline(t,"line-height","2.1",e.leading.leading_21),this.replaceInline(t,"line-height","2.2",e.leading.leading_22)}replaceTag(t,e,i){let n=t.querySelectorAll(e);let o=Array.prototype.filter.call(n,(t=>0===t.attributes.length));o&&o.length>0&&o.forEach((t=>{const e=document.createElement("span");e.setAttribute("class",i),e.innerHTML=t.innerHTML,t.outerHTML=e.outerHTML}))}replaceInline(t,e,i,n){t.querySelectorAll("*").forEach((t=>{"justiify-content"===e?t.style.justifyContent===`${i}`&&(this.addClass(t,n),t.style.justifyContent=""):t.style[e]===`${i}`&&(this.addClass(t,n),t.style[e]="")}))}}var s={exports:{}},r={},l={exports:{}},a={},d={};function c(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function u(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function p(t,e){this.__indent_cache=new u(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new c(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}c.prototype.clone_empty=function(){var t=new c(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},c.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},c.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},c.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},c.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},c.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},c.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},c.prototype.is_empty=function(){return 0===this.__items.length},c.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},c.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf("\n");-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},c.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},c.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},c.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},c.prototype.trim=function(){for(;" "===this.last();)this.__items.pop(),this.__character_count-=1},c.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t},u.prototype.get_indent_size=function(t,e){var i=this.__base_string_length;return e=e||0,t<0&&(i=0),i+=t*this.__indent_size,i+=e},u.prototype.get_indent_string=function(t,e){var i=this.__base_string;return e=e||0,t<0&&(t=0,i=""),e+=t*this.__indent_size,this.__ensure_cache(e),i+=this.__cache[e]},u.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},u.prototype.__add_column=function(){var t=this.__cache.length,e=0,i="";this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,i=new Array(e+1).join(this.__indent_string)),t&&(i+=new Array(t+1).join(" ")),this.__cache.push(i)},p.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},p.prototype.get_line_number=function(){return this.__lines.length},p.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},p.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},p.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},p.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},p.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&("\n"===e[e.length-1]&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var i=this.__lines.join("\n");return"\n"!==t&&(i=i.replace(/[\n]/g,t)),i},p.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},p.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},p.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},p.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},p.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},p.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},p.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},p.prototype.just_added_newline=function(){return this.current_line.is_empty()},p.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},p.prototype.ensure_empty_line_above=function(t,e){for(var i=this.__lines.length-2;i>=0;){var n=this.__lines[i];if(n.is_empty())break;if(0!==n.item(0).indexOf(t)&&n.item(-1)!==e){this.__lines.splice(i+1,0,new c(this)),this.previous_line=this.__lines[this.__lines.length-2];break}i--}},d.Output=p;var h={};h.Token=function(t,e,i,n){this.type=t,this.text=e,this.comments_before=null,this.newlines=i||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null};var g,m,f,b,v,y,x={};v="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+(f="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc")+"])",y="(?:\\\\u[0-9a-fA-F]{4}|["+(m="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a")+f+(b="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f")+"])*",(g=x).identifier=new RegExp(v+y,"g"),g.identifierStart=new RegExp(v),g.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+m+f+b+"])+"),g.newline=/[\n\r\u2028\u2029]/,g.lineBreak=new RegExp("\r\n|"+g.newline.source),g.allLineBreaks=new RegExp(g.lineBreak.source,"g");var w={},S={};function _(t,e){this.raw_options=C(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs","\t"===this.indent_char),this.indent_with_tabs&&(this.indent_char="\t",1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function C(t,e){var i,n={};for(i in t=k(t))i!==e&&(n[i]=t[i]);if(e&&t[e])for(i in t[e])n[i]=t[e][i];return n}function k(t){var e,i={};for(e in t){i[e.replace(/-/g,"_")]=t[e]}return i}_.prototype._get_array=function(t,e){var i=this.raw_options[t],n=e||[];return"object"==typeof i?null!==i&&"function"==typeof i.concat&&(n=i.concat()):"string"==typeof i&&(n=i.split(/[^a-zA-Z0-9_\/\-]+/)),n},_.prototype._get_boolean=function(t,e){var i=this.raw_options[t];return void 0===i?!!e:!!i},_.prototype._get_characters=function(t,e){var i=this.raw_options[t],n=e||"";return"string"==typeof i&&(n=i.replace(/\\r/,"\r").replace(/\\n/,"\n").replace(/\\t/,"\t")),n},_.prototype._get_number=function(t,e){var i=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var n=parseInt(i,10);return isNaN(n)&&(n=e),n},_.prototype._get_selection=function(t,e,i){var n=this._get_selection_list(t,e,i);if(1!==n.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return n[0]},_.prototype._get_selection_list=function(t,e,i){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(i=i||[e[0]],!this._is_valid_selection(i,e))throw new Error("Invalid Default Value!");var n=this._get_array(t,i);if(!this._is_valid_selection(n,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return n},_.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},S.Options=_,S.normalizeOpts=k,S.mergeOpts=C;var E=S.Options,A=["before-newline","after-newline","preserve-newline"];function L(t){E.call(this,t,"js");var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var i=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var n=0;n<i.length;n++)"preserve-inline"===i[n]?this.brace_preserve_inline=!0:this.brace_style=i[n];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",A),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}L.prototype=new E,w.Options=L;var q={},T={},M=RegExp.prototype.hasOwnProperty("sticky");function O(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}O.prototype.restart=function(){this.__position=0},O.prototype.back=function(){this.__position>0&&(this.__position-=1)},O.prototype.hasNext=function(){return this.__position<this.__input_length},O.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},O.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},O.prototype.__match=function(t,e){t.lastIndex=e;var i=t.exec(this.__input);return!i||M&&t.sticky||i.index!==e&&(i=null),i},O.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},O.prototype.testChar=function(t,e){var i=this.peek(e);return t.lastIndex=0,null!==i&&t.test(i)},O.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},O.prototype.read=function(t,e,i){var n,o="";return t&&(n=this.match(t))&&(o+=n[0]),!e||!n&&t||(o+=this.readUntil(e,i)),o},O.prototype.readUntil=function(t,e){var i,n=this.__position;t.lastIndex=this.__position;var o=t.exec(this.__input);return o?(n=o.index,e&&(n+=o[0].length)):n=this.__input_length,i=this.__input.substring(this.__position,n),this.__position=n,i},O.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},O.prototype.get_regexp=function(t,e){var i=null,n="g";return e&&M&&(n="y"),"string"==typeof t&&""!==t?i=new RegExp(t,n):t&&(i=new RegExp(t.source,n)),i},O.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},O.prototype.peekUntilAfter=function(t){var e=this.__position,i=this.readUntilAfter(t);return this.__position=e,i},O.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},T.InputScanner=O;var R={},B={};function N(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}N.prototype.restart=function(){this.__position=0},N.prototype.isEmpty=function(){return 0===this.__tokens_length},N.prototype.hasNext=function(){return this.__position<this.__tokens_length},N.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},N.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},N.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},B.TokenStream=N;var I={},$={};function D(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}D.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},D.prototype.read_match=function(){return this._input.match(this._match_pattern)},D.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},D.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},D.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},D.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},D.prototype._create=function(){return new D(this._input,this)},D.prototype._update=function(){},$.Pattern=D;var P=$.Pattern;function z(t,e){P.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}z.prototype=new P,z.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")},z.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(" "===t)this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},z.prototype.matching=function(t,e){var i=this._create();return i.__set_whitespace_patterns(t,e),i._update(),i},z.prototype._create=function(){return new z(this._input,this)},z.prototype.__split=function(t,e){t.lastIndex=0;for(var i=0,n=[],o=t.exec(e);o;)n.push(e.substring(i,o.index)),i=o.index+o[0].length,o=t.exec(e);return i<e.length?n.push(e.substring(i,e.length)):n.push(""),n},I.WhitespacePattern=z;var H=T.InputScanner,F=h.Token,U=B.TokenStream,W=I.WhitespacePattern,j={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},G=function(t,e){this._input=new H(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new W(this._input)};G.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new U,this._reset();for(var e=new F(j.START,""),i=null,n=[],o=new U;e.type!==j.EOF;){for(t=this._get_next_token(e,i);this._is_comment(t);)o.add(t),t=this._get_next_token(e,i);o.isEmpty()||(t.comments_before=o,o=new U),t.parent=i,this._is_opening(t)?(n.push(i),i=t):i&&this._is_closing(t,i)&&(t.opened=i,i.closed=t,i=n.pop(),t.parent=i),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},G.prototype._is_first_token=function(){return this.__tokens.isEmpty()},G.prototype._reset=function(){},G.prototype._get_next_token=function(t,e){this._readWhitespace();var i=this._input.read(/.+/g);return i?this._create_token(j.RAW,i):this._create_token(j.EOF,"")},G.prototype._is_comment=function(t){return!1},G.prototype._is_opening=function(t){return!1},G.prototype._is_closing=function(t,e){return!1},G.prototype._create_token=function(t,e){return new F(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},G.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},R.Tokenizer=G,R.TOKEN=j;var V={};function Y(t,e){t="string"==typeof t?t:t.source,e="string"==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}Y.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var i=this.__directive_pattern.exec(t);i;)e[i[1]]=i[2],i=this.__directive_pattern.exec(t);return e},Y.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},V.Directives=Y;var X={},Z=$.Pattern,K={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Q(t,e){Z.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},K),this._excluded=Object.assign({},K),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var i=new Z(t);this.__patterns={handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:i.starting_with(/{{{/).until_after(/}}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),php:i.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:i.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:i.starting_with(/{%/).until_after(/%}/),django_value:i.starting_with(/{{/).until_after(/}}/),django_comment:i.starting_with(/{#/).until_after(/#}/),smarty:i.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:i.starting_with(/{\*/).until_after(/\*}/),smarty_literal:i.starting_with(/{literal}/).until_after(/{\/literal}/)}}Q.prototype=new Z,Q.prototype._create=function(){return new Q(this._input,this)},Q.prototype._update=function(){this.__set_templated_pattern()},Q.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},Q.prototype.read_options=function(t){var e=this._create();for(var i in K)e._disabled[i]=-1===t.templating.indexOf(i);return e._update(),e},Q.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},Q.prototype.read=function(){var t="";t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},Q.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")},Q.prototype._read_template=function(){var t="",e=this._input.peek();if("<"===e){var i=this._input.peek(1);this._disabled.php||this._excluded.php||"?"!==i||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||"%"!==i||(t=t||this.__patterns.erb.read())}else"{"===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=(t=(t=t||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return t},X.TemplatablePattern=Q;var J=T.InputScanner,tt=R.Tokenizer,et=R.TOKEN,it=V.Directives,nt=x,ot=$.Pattern,st=X.TemplatablePattern;function rt(t,e){return-1!==e.indexOf(t)}var lt={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:et.START,RAW:et.RAW,EOF:et.EOF},at=new it(/\/\*/,/\*\//),dt=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,ct=/[0-9]/,ut=/[^\d\.]/,pt=">>> === !== << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),ht=">>>= ... >>= <<= === >>> !== **= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";ht=(ht="\\?\\.(?!\\d) "+(ht=ht.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var gt,mt=new RegExp(ht),ft="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),bt=ft.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),vt=new RegExp("^(?:"+bt.join("|")+")$"),yt=function(t,e){tt.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var i=new ot(this._input),n=new st(this._input).read_options(this._options);this.__patterns={template:n,identifier:n.starting_with(nt.identifier).matching(nt.identifierMatch),number:i.matching(dt),punct:i.matching(mt),comment:i.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:i.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:i.matching(/<!--/),html_comment_end:i.matching(/-->/),include:i.starting_with(/#include/).until_after(nt.lineBreak),shebang:i.starting_with(/#!/).until_after(nt.lineBreak),xml:i.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\]|)(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/),single_quote:n.until(/['\\\n\r\u2028\u2029]/),double_quote:n.until(/["\\\n\r\u2028\u2029]/),template_text:n.until(/[`\\$]/),template_expression:n.until(/[`}\\]/)}};(yt.prototype=new tt)._is_comment=function(t){return t.type===lt.COMMENT||t.type===lt.BLOCK_COMMENT||t.type===lt.UNKNOWN},yt.prototype._is_opening=function(t){return t.type===lt.START_BLOCK||t.type===lt.START_EXPR},yt.prototype._is_closing=function(t,e){return(t.type===lt.END_BLOCK||t.type===lt.END_EXPR)&&e&&("]"===t.text&&"["===e.text||")"===t.text&&"("===e.text||"}"===t.text&&"{"===e.text)},yt.prototype._reset=function(){gt=!1},yt.prototype._get_next_token=function(t,e){var i=null;this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(lt.EOF,""):i=(i=(i=(i=(i=(i=(i=(i=(i=i||this._read_non_javascript(n))||this._read_string(n))||this._read_word(t))||this._read_singles(n))||this._read_comment(n))||this._read_regexp(n,t))||this._read_xml(n,t))||this._read_punctuation())||this._create_token(lt.UNKNOWN,this._input.next())},yt.prototype._read_word=function(t){var e;return""!==(e=this.__patterns.identifier.read())?(e=e.replace(nt.allLineBreaks,"\n"),t.type!==lt.DOT&&(t.type!==lt.RESERVED||"set"!==t.text&&"get"!==t.text)&&vt.test(e)?"in"===e||"of"===e?this._create_token(lt.OPERATOR,e):this._create_token(lt.RESERVED,e):this._create_token(lt.WORD,e)):""!==(e=this.__patterns.number.read())?this._create_token(lt.WORD,e):void 0},yt.prototype._read_singles=function(t){var e=null;return"("===t||"["===t?e=this._create_token(lt.START_EXPR,t):")"===t||"]"===t?e=this._create_token(lt.END_EXPR,t):"{"===t?e=this._create_token(lt.START_BLOCK,t):"}"===t?e=this._create_token(lt.END_BLOCK,t):";"===t?e=this._create_token(lt.SEMICOLON,t):"."===t&&ut.test(this._input.peek(1))?e=this._create_token(lt.DOT,t):","===t&&(e=this._create_token(lt.COMMA,t)),e&&this._input.next(),e},yt.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(""!==t)return"="===t?this._create_token(lt.EQUALS,t):"?."===t?this._create_token(lt.DOT,t):this._create_token(lt.OPERATOR,t)},yt.prototype._read_non_javascript=function(t){var e="";if("#"===t){if(this._is_first_token()&&(e=this.__patterns.shebang.read()))return this._create_token(lt.UNKNOWN,e.trim()+"\n");if(e=this.__patterns.include.read())return this._create_token(lt.UNKNOWN,e.trim()+"\n");t=this._input.next();var i="#";if(this._input.hasNext()&&this._input.testChar(ct)){do{i+=t=this._input.next()}while(this._input.hasNext()&&"#"!==t&&"="!==t);return"#"===t||("["===this._input.peek()&&"]"===this._input.peek(1)?(i+="[]",this._input.next(),this._input.next()):"{"===this._input.peek()&&"}"===this._input.peek(1)&&(i+="{}",this._input.next(),this._input.next())),this._create_token(lt.WORD,i)}this._input.back()}else if("<"===t&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(nt.newline);)e+=this._input.next();return gt=!0,this._create_token(lt.COMMENT,e)}}else if(gt&&"-"===t&&(e=this.__patterns.html_comment_end.read()))return gt=!1,this._create_token(lt.COMMENT,e);return null},yt.prototype._read_comment=function(t){var e=null;if("/"===t){var i="";if("*"===this._input.peek(1)){i=this.__patterns.block_comment.read();var n=at.get_directives(i);n&&"start"===n.ignore&&(i+=at.readIgnored(this._input)),i=i.replace(nt.allLineBreaks,"\n"),(e=this._create_token(lt.BLOCK_COMMENT,i)).directives=n}else"/"===this._input.peek(1)&&(i=this.__patterns.comment.read(),e=this._create_token(lt.COMMENT,i))}return e},yt.prototype._read_string=function(t){if("`"===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+="`"===t?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=function(t){var e="",i=0,n=new J(t),o=null;for(;n.hasNext();)if((o=n.match(/([\s]|[^\\]|\\\\)+/g))&&(e+=o[0]),"\\"===n.peek()){if(n.next(),"x"===n.peek())o=n.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==n.peek()){e+="\\",n.hasNext()&&(e+=n.next());continue}o=n.match(/u([0-9A-Fa-f]{4})/g)}if(!o)return t;if((i=parseInt(o[1],16))>126&&i<=255&&0===o[0].indexOf("x"))return t;if(i>=0&&i<32){e+="\\"+o[0];continue}e+=34===i||39===i||92===i?"\\"+String.fromCharCode(i):String.fromCharCode(i)}return e}(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(nt.allLineBreaks,"\n"),this._create_token(lt.STRING,e)}return null},yt.prototype._allow_regexp_or_xml=function(t){return t.type===lt.RESERVED&&rt(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===lt.END_EXPR&&")"===t.text&&t.opened.previous.type===lt.RESERVED&&rt(t.opened.previous.text,["if","while","for"])||rt(t.type,[lt.COMMENT,lt.START_EXPR,lt.START_BLOCK,lt.START,lt.END_BLOCK,lt.OPERATOR,lt.EQUALS,lt.EOF,lt.SEMICOLON,lt.COMMA])},yt.prototype._read_regexp=function(t,e){if("/"===t&&this._allow_regexp_or_xml(e)){for(var i=this._input.next(),n=!1,o=!1;this._input.hasNext()&&(n||o||this._input.peek()!==t)&&!this._input.testChar(nt.newline);)i+=this._input.peek(),n?n=!1:(n="\\"===this._input.peek(),"["===this._input.peek()?o=!0:"]"===this._input.peek()&&(o=!1)),this._input.next();return this._input.peek()===t&&(i+=this._input.next(),i+=this._input.read(nt.identifier)),this._create_token(lt.STRING,i)}return null},yt.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._allow_regexp_or_xml(e)){var i="",n=this.__patterns.xml.read_match();if(n){for(var o=n[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=0===o.indexOf("{"),r=0;n;){var l=!!n[1],a=n[2];if(!(!!n[n.length-1]||"![CDATA["===a.slice(0,8))&&(a===o||s&&a.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(l?--r:++r),i+=n[0],r<=0)break;n=this.__patterns.xml.read_match()}return n||(i+=this._input.match(/[\s\S]*/g)[0]),i=i.replace(nt.allLineBreaks,"\n"),this._create_token(lt.STRING,i)}}return null},yt.prototype._read_string_recursive=function(t,e,i){var n,o;"'"===t?o=this.__patterns.single_quote:'"'===t?o=this.__patterns.double_quote:"`"===t?o=this.__patterns.template_text:"}"===t&&(o=this.__patterns.template_expression);for(var s=o.read(),r="";this._input.hasNext();){if((r=this._input.next())===t||!e&&nt.newline.test(r)){this._input.back();break}"\\"===r&&this._input.hasNext()?("x"===(n=this._input.peek())||"u"===n?this.has_char_escapes=!0:"\r"===n&&"\n"===this._input.peek(1)&&this._input.next(),r+=this._input.next()):i&&("${"===i&&"$"===r&&"{"===this._input.peek()&&(r+=this._input.next()),i===r&&(r+="`"===t?this._read_string_recursive("}",e,"`"):this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(r+=this._input.next()))),s+=r+=o.read()}return s},q.Tokenizer=yt,q.TOKEN=lt,q.positionable_operators=pt.slice(),q.line_starters=ft.slice();var xt=d.Output,wt=h.Token,St=x,_t=w.Options,Ct=q.Tokenizer,kt=q.line_starters,Et=q.positionable_operators,At=q.TOKEN;function Lt(t,e){return-1!==e.indexOf(t)}function qt(t,e){return t&&t.type===At.RESERVED&&t.text===e}function Tt(t,e){return t&&t.type===At.RESERVED&&Lt(t.text,e)}var Mt=["case","return","do","if","throw","else","await","break","continue","async"],Ot=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].replace(/-/g,"_")]=t[i];return e}(["before-newline","after-newline","preserve-newline"]),Rt=[Ot.before_newline,Ot.preserve_newline],Bt={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function Nt(t,e){e.multiline_frame||e.mode===Bt.ForInitializer||e.mode===Bt.Conditional||t.remove_indent(e.start_line_index)}function It(t){return t===Bt.ArrayLiteral}function $t(t){return Lt(t,[Bt.Expression,Bt.ForInitializer,Bt.Conditional])}function Dt(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new _t(e)}Dt.prototype.create_flags=function(t,e){var i=0;return t&&(i=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>i&&(i=t.line_indent_level)),{mode:e,parent:t,last_token:t?t.last_token:new wt(At.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,alignment:0,line_indent_level:t?t.line_indent_level:i,start_line_index:this._output.get_line_number(),ternary_depth:0}},Dt.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new xt(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(Bt.BlockStatement);var i=new Ct(t,this._options);return this._tokens=i.tokenize(),t},Dt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._reset(this._source_text),e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&St.lineBreak.test(t||"")&&(e=t.match(St.lineBreak)[0]));for(var i=this._tokens.next();i;)this.handle_token(i),this._last_last_text=this._flags.last_token.text,this._flags.last_token=i,i=this._tokens.next();return this._output.get_code(e)},Dt.prototype.handle_token=function(t,e){t.type===At.START_EXPR?this.handle_start_expr(t):t.type===At.END_EXPR?this.handle_end_expr(t):t.type===At.START_BLOCK?this.handle_start_block(t):t.type===At.END_BLOCK?this.handle_end_block(t):t.type===At.WORD||t.type===At.RESERVED?this.handle_word(t):t.type===At.SEMICOLON?this.handle_semicolon(t):t.type===At.STRING?this.handle_string(t):t.type===At.EQUALS?this.handle_equals(t):t.type===At.OPERATOR?this.handle_operator(t):t.type===At.COMMA?this.handle_comma(t):t.type===At.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===At.COMMENT?this.handle_comment(t,e):t.type===At.DOT?this.handle_dot(t):t.type===At.EOF?this.handle_eof(t):(t.type,At.UNKNOWN,this.handle_unknown(t,e))},Dt.prototype.handle_whitespace_and_comments=function(t,e){var i=t.newlines,n=this._options.keep_array_indentation&&It(this._flags.mode);if(t.comments_before)for(var o=t.comments_before.next();o;)this.handle_whitespace_and_comments(o,e),this.handle_token(o,e),o=t.comments_before.next();if(n)for(var s=0;s<i;s+=1)this.print_newline(s>0,e);else if(this._options.max_preserve_newlines&&i>this._options.max_preserve_newlines&&(i=this._options.max_preserve_newlines),this._options.preserve_newlines&&i>1){this.print_newline(!1,e);for(var r=1;r<i;r+=1)this.print_newline(!0,e)}};var Pt=["async","break","continue","return","throw","yield"];Dt.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var i=this._options.preserve_newlines&&t.newlines||e;if(Lt(this._flags.last_token.text,Et)||Lt(t.text,Et)){var n=Lt(this._flags.last_token.text,Et)&&Lt(this._options.operator_position,Rt)||Lt(t.text,Et);i=i&&n}if(i)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(Tt(this._flags.last_token,Pt))return;this._output.set_wrap_point()}}},Dt.prototype.print_newline=function(t,e){if(!e&&";"!==this._flags.last_token.text&&","!==this._flags.last_token.text&&"="!==this._flags.last_token.text&&(this._flags.last_token.type!==At.OPERATOR||"--"===this._flags.last_token.text||"++"===this._flags.last_token.text))for(var i=this._tokens.peek();!(this._flags.mode!==Bt.Statement||this._flags.if_block&&qt(i,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},Dt.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&("["===t.text||It(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},Dt.prototype.print_token=function(t){if(this._output.raw)this._output.add_raw_token(t);else{if(this._options.comma_first&&t.previous&&t.previous.type===At.COMMA&&this._output.just_added_newline()&&","===this._output.previous_line.last()){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},Dt.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},Dt.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},Dt.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},Dt.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===Bt.Statement&&Nt(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},Dt.prototype.start_of_object_property=function(){return this._flags.parent.mode===Bt.ObjectLiteral&&this._flags.mode===Bt.Statement&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||Tt(this._flags.last_token,["get","set"]))},Dt.prototype.start_of_statement=function(t){var e=!1;return!!(e=(e=(e=(e=(e=(e=(e=e||Tt(this._flags.last_token,["var","let","const"])&&t.type===At.WORD)||qt(this._flags.last_token,"do"))||!(this._flags.parent.mode===Bt.ObjectLiteral&&this._flags.mode===Bt.Statement)&&Tt(this._flags.last_token,Pt)&&!t.newlines)||qt(this._flags.last_token,"else")&&!(qt(t,"if")&&!t.comments_before))||this._flags.last_token.type===At.END_EXPR&&(this._previous_flags.mode===Bt.ForInitializer||this._previous_flags.mode===Bt.Conditional))||this._flags.last_token.type===At.WORD&&this._flags.mode===Bt.BlockStatement&&!this._flags.in_case&&!("--"===t.text||"++"===t.text)&&"function"!==this._last_last_text&&t.type!==At.WORD&&t.type!==At.RESERVED)||this._flags.mode===Bt.ObjectLiteral&&(":"===this._flags.last_token.text&&0===this._flags.ternary_depth||Tt(this._flags.last_token,["get","set"])))&&(this.set_mode(Bt.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,Tt(t,["do","for","if","while"])),!0)},Dt.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=Bt.Expression;if("["===t.text){if(this._flags.last_token.type===At.WORD||")"===this._flags.last_token.text)return Tt(this._flags.last_token,kt)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=Bt.ArrayLiteral,It(this._flags.mode)&&("["!==this._flags.last_token.text&&(","!==this._flags.last_token.text||"]"!==this._last_last_text&&"}"!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),Lt(this._flags.last_token.type,[At.START_EXPR,At.END_EXPR,At.WORD,At.OPERATOR,At.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===At.RESERVED)"for"===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=Bt.ForInitializer):Lt(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=Bt.Conditional):Lt(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:"import"===this._flags.last_token.text&&""===t.whitespace_before?this._output.space_before_token=!1:(Lt(this._flags.last_token.text,kt)||"catch"===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===At.EQUALS||this._flags.last_token.type===At.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===At.WORD){this._output.space_before_token=!1;var i=this._tokens.peek(-3);if(this._options.space_after_named_function&&i){var n=this._tokens.peek(-4);Tt(i,["async","function"])||"*"===i.text&&Tt(n,["async","function"])?this._output.space_before_token=!0:this._flags.mode===Bt.ObjectLiteral&&("{"!==i.text&&","!==i.text&&("*"!==i.text||"{"!==n.text&&","!==n.text)||(this._output.space_before_token=!0))}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===At.RESERVED&&("function"===this._flags.last_word||"typeof"===this._flags.last_word)||"*"===this._flags.last_token.text&&(Lt(this._last_last_text,["function","yield"])||this._flags.mode===Bt.ObjectLiteral&&Lt(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}";"===this._flags.last_token.text||this._flags.last_token.type===At.START_BLOCK?this.print_newline():this._flags.last_token.type!==At.END_EXPR&&this._flags.last_token.type!==At.START_EXPR&&this._flags.last_token.type!==At.END_BLOCK&&"."!==this._flags.last_token.text&&this._flags.last_token.type!==At.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},Dt.prototype.handle_end_expr=function(t){for(;this._flags.mode===Bt.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,"]"===t.text&&It(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==At.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(t),this.restore_mode(),Nt(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===Bt.Conditional&&(this._previous_flags.mode=Bt.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},Dt.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),i=this._tokens.peek(1);"switch"===this._flags.last_word&&this._flags.last_token.type===At.END_EXPR?(this.set_mode(Bt.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(Bt.BlockStatement):i&&(Lt(i.text,[":",","])&&Lt(e.type,[At.STRING,At.WORD,At.RESERVED])||Lt(e.text,["get","set","..."])&&Lt(i.type,[At.WORD,At.RESERVED]))?Lt(this._last_last_text,["class","interface"])?this.set_mode(Bt.BlockStatement):this.set_mode(Bt.ObjectLiteral):this._flags.last_token.type===At.OPERATOR&&"=>"===this._flags.last_token.text?this.set_mode(Bt.BlockStatement):Lt(this._flags.last_token.type,[At.EQUALS,At.START_EXPR,At.COMMA,At.OPERATOR])||Tt(this._flags.last_token,["return","throw","import","default"])?this.set_mode(Bt.ObjectLiteral):this.set_mode(Bt.BlockStatement);var n=!e.comments_before&&"}"===e.text,o=n&&"function"===this._flags.last_word&&this._flags.last_token.type===At.END_EXPR;if(this._options.brace_preserve_inline){var s=0,r=null;this._flags.inline_frame=!0;do{if(s+=1,(r=this._tokens.peek(s-1)).newlines){this._flags.inline_frame=!1;break}}while(r.type!==At.EOF&&(r.type!==At.END_BLOCK||r.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==At.OPERATOR&&(o||this._flags.last_token.type===At.EQUALS||Tt(this._flags.last_token,Mt)&&"else"!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!It(this._previous_flags.mode)||this._flags.last_token.type!==At.START_EXPR&&this._flags.last_token.type!==At.COMMA||((this._flags.last_token.type===At.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===At.COMMA||this._flags.last_token.type===At.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==At.OPERATOR&&this._flags.last_token.type!==At.START_EXPR&&(this._flags.last_token.type!==At.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(t),this.indent(),n||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},Dt.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===Bt.Statement;)this.restore_mode();var e=this._flags.last_token.type===At.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(It(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},Dt.prototype.handle_word=function(t){if(t.type===At.RESERVED)if(Lt(t.text,["set","get"])&&this._flags.mode!==Bt.ObjectLiteral)t.type=At.WORD;else if("import"===t.text&&"("===this._tokens.peek().text)t.type=At.WORD;else if(Lt(t.text,["as","from"])&&!this._flags.import_block)t.type=At.WORD;else if(this._flags.mode===Bt.ObjectLiteral){":"===this._tokens.peek().text&&(t.type=At.WORD)}if(this.start_of_statement(t)?Tt(this._flags.last_token,["var","let","const"])&&t.type===At.WORD&&(this._flags.declaration_statement=!0):!t.newlines||$t(this._flags.mode)||this._flags.last_token.type===At.OPERATOR&&"--"!==this._flags.last_token.text&&"++"!==this._flags.last_token.text||this._flags.last_token.type===At.EQUALS||!this._options.preserve_newlines&&Tt(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(qt(t,"while"))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&qt(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===Bt.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&Tt(t,["case","default"]))return this.print_newline(),this._flags.last_token.type!==At.END_BLOCK&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==At.COMMA&&this._flags.last_token.type!==At.START_EXPR&&this._flags.last_token.type!==At.EQUALS&&this._flags.last_token.type!==At.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t),qt(t,"function"))return(Lt(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Lt(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==At.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===At.RESERVED||this._flags.last_token.type===At.WORD?Tt(this._flags.last_token,["get","set","new","export"])||Tt(this._flags.last_token,Pt)||qt(this._flags.last_token,"default")&&"export"===this._last_last_text||"declare"===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===At.OPERATOR||"="===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!$t(this._flags.mode)&&!It(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var e="NONE";(this._flags.last_token.type===At.END_BLOCK?this._previous_flags.inline_frame?e="SPACE":Tt(t,["else","catch","finally","from"])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?e="NEWLINE":(e="SPACE",this._output.space_before_token=!0):e="NEWLINE":this._flags.last_token.type===At.SEMICOLON&&this._flags.mode===Bt.BlockStatement?e="NEWLINE":this._flags.last_token.type===At.SEMICOLON&&$t(this._flags.mode)?e="SPACE":this._flags.last_token.type===At.STRING?e="NEWLINE":this._flags.last_token.type===At.RESERVED||this._flags.last_token.type===At.WORD||"*"===this._flags.last_token.text&&(Lt(this._last_last_text,["function","yield"])||this._flags.mode===Bt.ObjectLiteral&&Lt(this._last_last_text,["{",","]))?e="SPACE":this._flags.last_token.type===At.START_BLOCK?e=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===At.END_EXPR&&(this._output.space_before_token=!0,e="NEWLINE"),Tt(t,kt)&&")"!==this._flags.last_token.text&&(e=this._flags.inline_frame||"else"===this._flags.last_token.text||"export"===this._flags.last_token.text?"SPACE":"NEWLINE"),Tt(t,["else","catch","finally"]))?(this._flags.last_token.type!==At.END_BLOCK||this._previous_flags.mode!==Bt.BlockStatement||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),"}"!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):"NEWLINE"===e?Tt(this._flags.last_token,Mt)||"declare"===this._flags.last_token.text&&Tt(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==At.END_EXPR?this._flags.last_token.type===At.START_EXPR&&Tt(t,["var","let","const"])||":"===this._flags.last_token.text||(qt(t,"if")&&qt(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):Tt(t,kt)&&")"!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&It(this._flags.mode)&&","===this._flags.last_token.text&&"}"===this._last_last_text?this.print_newline():"SPACE"===e&&(this._output.space_before_token=!0);!t.previous||t.previous.type!==At.WORD&&t.previous.type!==At.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===At.RESERVED&&("do"===t.text?this._flags.do_block=!0:"if"===t.text?this._flags.if_block=!0:"import"===t.text?this._flags.import_block=!0:this._flags.import_block&&qt(t,"from")&&(this._flags.import_block=!1))},Dt.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();!(this._flags.mode!==Bt.Statement||this._flags.if_block&&qt(e,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},Dt.prototype.handle_string=function(t){(!t.text.startsWith("`")||0!==t.newlines||""!==t.whitespace_before||")"!==t.previous.text&&this._flags.last_token.type!==At.WORD)&&(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===At.RESERVED||this._flags.last_token.type===At.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===At.COMMA||this._flags.last_token.type===At.START_EXPR||this._flags.last_token.type===At.EQUALS||this._flags.last_token.type===At.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):!t.text.startsWith("`")||this._flags.last_token.type!==At.END_EXPR||"]"!==t.previous.text&&")"!==t.previous.text||0!==t.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(t)},Dt.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},Dt.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?($t(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===Bt.ObjectLiteral||this._flags.mode===Bt.Statement&&this._flags.parent.mode===Bt.ObjectLiteral?(this._flags.mode===Bt.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},Dt.prototype.handle_operator=function(t){var e="*"===t.text&&(Tt(this._flags.last_token,["function","yield"])||Lt(this._flags.last_token.type,[At.START_BLOCK,At.COMMA,At.END_BLOCK,At.SEMICOLON])),i=Lt(t.text,["-","+"])&&(Lt(this._flags.last_token.type,[At.START_BLOCK,At.START_EXPR,At.EQUALS,At.OPERATOR])||Lt(this._flags.last_token.text,kt)||","===this._flags.last_token.text);if(this.start_of_statement(t));else{var n=!e;this.handle_whitespace_and_comments(t,n)}if(Tt(this._flags.last_token,Mt))return this._output.space_before_token=!0,void this.print_token(t);if("*"!==t.text||this._flags.last_token.type!==At.DOT)if("::"!==t.text){if(this._flags.last_token.type===At.OPERATOR&&Lt(this._options.operator_position,Rt)&&this.allow_wrap_or_preserved_newline(t),":"===t.text&&this._flags.in_case)return this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==At.START_BLOCK?(this.indent(),this.print_newline()):this._output.space_before_token=!0);var o=!0,s=!0,r=!1;if(":"===t.text?0===this._flags.ternary_depth?o=!1:(this._flags.ternary_depth-=1,r=!0):"?"===t.text&&(this._flags.ternary_depth+=1),!i&&!e&&this._options.preserve_newlines&&Lt(t.text,Et)){var l=":"===t.text,a=l&&r,d=l&&!r;switch(this._options.operator_position){case Ot.before_newline:return this._output.space_before_token=!d,this.print_token(t),l&&!a||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case Ot.after_newline:return this._output.space_before_token=!0,!l||a?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case Ot.preserve_newline:return d||this.allow_wrap_or_preserved_newline(t),o=!(this._output.just_added_newline()||d),this._output.space_before_token=o,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),o=!1;var c=this._tokens.peek();s=c&&Lt(c.type,[At.WORD,At.RESERVED])}else"..."===t.text?(this.allow_wrap_or_preserved_newline(t),o=this._flags.last_token.type===At.START_BLOCK,s=!1):(Lt(t.text,["--","++","!","~"])||i)&&(this._flags.last_token.type!==At.COMMA&&this._flags.last_token.type!==At.START_EXPR||this.allow_wrap_or_preserved_newline(t),o=!1,s=!1,!t.newlines||"--"!==t.text&&"++"!==t.text||this.print_newline(!1,!0),";"===this._flags.last_token.text&&$t(this._flags.mode)&&(o=!0),this._flags.last_token.type===At.RESERVED?o=!0:this._flags.last_token.type===At.END_EXPR?o=!("]"===this._flags.last_token.text&&("--"===t.text||"++"===t.text)):this._flags.last_token.type===At.OPERATOR&&(o=Lt(t.text,["--","-","++","+"])&&Lt(this._flags.last_token.text,["--","-","++","+"]),Lt(t.text,["+","-"])&&Lt(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode!==Bt.BlockStatement||this._flags.inline_frame)&&this._flags.mode!==Bt.Statement||"{"!==this._flags.last_token.text&&";"!==this._flags.last_token.text||this.print_newline());this._output.space_before_token=this._output.space_before_token||o,this.print_token(t),this._output.space_before_token=s}else this.print_token(t);else this.print_token(t)},Dt.prototype.handle_block_comment=function(t,e){return this._output.raw?(this._output.add_raw_token(t),void(t.directives&&"end"===t.directives.preserve&&(this._output.raw=this._options.test_output_raw))):t.directives?(this.print_newline(!1,e),this.print_token(t),"start"===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):St.newline.test(t.text)||t.newlines?void this.print_block_commment(t,e):(this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0))},Dt.prototype.print_block_commment=function(t,e){var i,n=function(t){for(var e=[],i=(t=t.replace(St.allLineBreaks,"\n")).indexOf("\n");-1!==i;)e.push(t.substring(0,i)),i=(t=t.substring(i+1)).indexOf("\n");return t.length&&e.push(t),e}(t.text),o=!1,s=!1,r=t.whitespace_before,l=r.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(n[0]),this.print_newline(!1,e),n.length>1){for(o=function(t,e){for(var i=0;i<t.length;i++)if(t[i].trim().charAt(0)!==e)return!1;return!0}(n=n.slice(1),"*"),s=function(t,e){for(var i,n=0,o=t.length;n<o;n++)if((i=t[n])&&0!==i.indexOf(e))return!1;return!0}(n,r),o&&(this._flags.alignment=1),i=0;i<n.length;i++)o?(this.print_token_line_indentation(t),this._output.add_token(n[i].replace(/^\s+/g,""))):s&&n[i]?(this.print_token_line_indentation(t),this._output.add_token(n[i].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(n[i])),this.print_newline(!1,e);this._flags.alignment=0}},Dt.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},Dt.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),Tt(this._flags.last_token,Mt)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,")"===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},Dt.prototype.handle_unknown=function(t,e){this.print_token(t),"\n"===t.text[t.text.length-1]&&this.print_newline(!1,e)},Dt.prototype.handle_eof=function(t){for(;this._flags.mode===Bt.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)},a.Beautifier=Dt;var zt=a.Beautifier,Ht=w.Options;l.exports=function(t,e){return new zt(t,e).beautify()},l.exports.defaultOptions=function(){return new Ht};var Ft={exports:{}},Ut={},Wt={},jt=S.Options;function Gt(t){jt.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var i=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var n=0;n<i.length;n++)"expand"!==i[n]?this.brace_style="collapse":this.brace_style=i[n]}Gt.prototype=new jt,Wt.Options=Gt;var Vt=Wt.Options,Yt=d.Output,Xt=T.InputScanner,Zt=new(0,V.Directives)(/\/\*/,/\*\//),Kt=/\r\n|[\r\n]/,Qt=/\r\n|[\r\n]/g,Jt=/\s/,te=/(?:\s|\n)+/g,ee=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,ie=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function ne(t,e){this._source_text=t||"",this._options=new Vt(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}ne.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},ne.prototype.eatWhitespace=function(t){for(var e=Jt.test(this._input.peek()),i=0;Jt.test(this._input.peek());)this._ch=this._input.next(),t&&"\n"===this._ch&&(0===i||i<this._options.max_preserve_newlines)&&(i++,this._output.add_new_line(!0));return e},ne.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,i=this._input.peek(e);i;){if("{"===i)return!0;if("("===i)t+=1;else if(")"===i){if(0===t)return!1;t-=1}else if(";"===i||"}"===i)return!1;e++,i=this._input.peek(e)}return!1},ne.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)},ne.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},ne.prototype.indent=function(){this._indentLevel++},ne.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},ne.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===e&&(e="\n",t&&Kt.test(t||"")&&(e=t.match(Kt)[0]));var i=(t=t.replace(Qt,"\n")).match(/^[\t ]*/)[0];this._output=new Yt(this._options,i),this._input=new Xt(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var n,o,s=0,r=!1,l=!1,a=!1,d=!1,c=!1,u=this._ch;n=""!==this._input.read(te),o=u,this._ch=this._input.next(),"\\"===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),u=this._ch,this._ch;)if("/"===this._ch&&"*"===this._input.peek()){this._output.add_new_line(),this._input.back();var p=this._input.read(ee),h=Zt.get_directives(p);h&&"start"===h.ignore&&(p+=Zt.readIgnored(this._input)),this.print_string(p),this.eatWhitespace(!0),this._output.add_new_line()}else if("/"===this._ch&&"/"===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(ie)),this.eatWhitespace(!0);else if("@"===this._ch)if(this.preserveSingleSpace(n),"{"===this._input.peek())this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var g=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);g.match(/[ :]$/)&&(g=this.eatString(": ").replace(/\s$/,""),this.print_string(g),this._output.space_before_token=!0),"extend"===(g=g.replace(/\s$/,""))?d=!0:"import"===g&&(c=!0),g in this.NESTED_AT_RULE?(this._nestedLevel+=1,g in this.CONDITIONAL_GROUP_RULE&&(a=!0)):r||0!==s||-1===g.indexOf(":")||(l=!0,this.indent())}else"#"===this._ch&&"{"===this._input.peek()?(this.preserveSingleSpace(n),this.print_string(this._ch+this.eatString("}"))):"{"===this._ch?(l&&(l=!1,this.outdent()),a?(a=!1,r=this._indentLevel>=this._nestedLevel):r=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&r&&this._output.previous_line&&"{"!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,"expand"===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line()):"}"===this._ch?(this.outdent(),this._output.add_new_line(),"{"===o&&this._output.trim(!0),c=!1,d=!1,l&&(this.outdent(),l=!1),this.print_string(this._ch),r=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&"}"!==this._input.peek()&&this._output.add_new_line(!0)):":"===this._ch?!r&&!a||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||d||0!==s?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),l||(l=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):'"'===this._ch||"'"===this._ch?(this.preserveSingleSpace(n),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)):";"===this._ch?0===s?(l&&(this.outdent(),l=!1),d=!1,c=!1,this.print_string(this._ch),this.eatWhitespace(!0),"/"!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0):"("===this._ch?this._input.lookBack("url")?(this.print_string(this._ch),this.eatWhitespace(),s++,this.indent(),this._ch=this._input.next(),")"===this._ch||'"'===this._ch||"'"===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),s&&(s--,this.outdent()))):(this.preserveSingleSpace(n),this.print_string(this._ch),this.eatWhitespace(),s++,this.indent()):")"===this._ch?(s&&(s--,this.outdent()),this.print_string(this._ch)):","===this._ch?(this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||l||0!==s||c||d?this._output.space_before_token=!0:this._output.add_new_line()):">"!==this._ch&&"+"!==this._ch&&"~"!==this._ch||l||0!==s?"]"===this._ch?this.print_string(this._ch):"["===this._ch?(this.preserveSingleSpace(n),this.print_string(this._ch)):"="===this._ch?(this.eatWhitespace(),this.print_string("="),Jt.test(this._ch)&&(this._ch="")):"!"!==this._ch||this._input.lookBack("\\")?(this.preserveSingleSpace(n),this.print_string(this._ch)):(this.print_string(" "),this.print_string(this._ch)):this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Jt.test(this._ch)&&(this._ch=""));return this._output.get_code(e)},Ut.Beautifier=ne;var oe=Ut.Beautifier,se=Wt.Options;Ft.exports=function(t,e){return new oe(t,e).beautify()},Ft.exports.defaultOptions=function(){return new se};var re={exports:{}},le={},ae={},de=S.Options;function ce(t){de.call(this,t,"html"),1===this.templating.length&&"auto"===this.templating[0]&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}ce.prototype=new de,ae.Options=ce;var ue={},pe=R.Tokenizer,he=R.TOKEN,ge=V.Directives,me=X.TemplatablePattern,fe=$.Pattern,be={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:he.START,RAW:he.RAW,EOF:he.EOF},ve=new ge(/<\!--/,/-->/),ye=function(t,e){pe.call(this,t,e),this._current_tag_name="";var i=new me(this._input).read_options(this._options),n=new fe(this._input);if(this.__patterns={word:i.until(/[\n\r\t <]/),single_quote:i.until_after(/'/),double_quote:i.until_after(/"/),attribute:i.until(/[\n\r\t =>]|\/>/),element_name:i.until(/[\n\r\t >\/]/),handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),handlebars_open:n.until(/[\n\r\t }]/),handlebars_raw_close:n.until(/}}/),comment:n.starting_with(/<!--/).until_after(/-->/),cdata:n.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:n.starting_with(/<!\[/).until_after(/]>/),processing:n.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var o=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=n.matching(o).until_after(o)}};(ye.prototype=new pe)._is_comment=function(t){return!1},ye.prototype._is_opening=function(t){return t.type===be.TAG_OPEN},ye.prototype._is_closing=function(t,e){return t.type===be.TAG_CLOSE&&e&&((">"===t.text||"/>"===t.text)&&"<"===e.text[0]||"}}"===t.text&&"{"===e.text[0]&&"{"===e.text[1])},ye.prototype._reset=function(){this._current_tag_name=""},ye.prototype._get_next_token=function(t,e){var i=null;this._readWhitespace();var n=this._input.peek();return null===n?this._create_token(be.EOF,""):i=(i=(i=(i=(i=(i=(i=(i=(i=i||this._read_open_handlebars(n,e))||this._read_attribute(n,t,e))||this._read_close(n,e))||this._read_raw_content(n,t,e))||this._read_content_word(n))||this._read_comment_or_cdata(n))||this._read_processing(n))||this._read_open(n,e))||this._create_token(be.UNKNOWN,this._input.next())},ye.prototype._read_comment_or_cdata=function(t){var e=null,i=null,n=null;"<"===t&&("!"===this._input.peek(1)&&((i=this.__patterns.comment.read())?(n=ve.get_directives(i))&&"start"===n.ignore&&(i+=ve.readIgnored(this._input)):i=this.__patterns.cdata.read()),i&&((e=this._create_token(be.COMMENT,i)).directives=n));return e},ye.prototype._read_processing=function(t){var e=null,i=null;if("<"===t){var n=this._input.peek(1);"!"!==n&&"?"!==n||(i=(i=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),i&&((e=this._create_token(be.COMMENT,i)).directives=null)}return e},ye.prototype._read_open=function(t,e){var i=null,n=null;return e||"<"===t&&(i=this._input.next(),"/"===this._input.peek()&&(i+=this._input.next()),i+=this.__patterns.element_name.read(),n=this._create_token(be.TAG_OPEN,i)),n},ye.prototype._read_open_handlebars=function(t,e){var i=null,n=null;return e||this._options.indent_handlebars&&"{"===t&&"{"===this._input.peek(1)&&("!"===this._input.peek(2)?(i=(i=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),n=this._create_token(be.COMMENT,i)):(i=this.__patterns.handlebars_open.read(),n=this._create_token(be.TAG_OPEN,i))),n},ye.prototype._read_close=function(t,e){var i=null,n=null;return e&&("<"===e.text[0]&&(">"===t||"/"===t&&">"===this._input.peek(1))?(i=this._input.next(),"/"===t&&(i+=this._input.next()),n=this._create_token(be.TAG_CLOSE,i)):"{"===e.text[0]&&"}"===t&&"}"===this._input.peek(1)&&(this._input.next(),this._input.next(),n=this._create_token(be.TAG_CLOSE,"}}"))),n},ye.prototype._read_attribute=function(t,e,i){var n=null,o="";if(i&&"<"===i.text[0])if("="===t)n=this._create_token(be.EQUALS,this._input.next());else if('"'===t||"'"===t){var s=this._input.next();s+='"'===t?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),n=this._create_token(be.VALUE,s)}else(o=this.__patterns.attribute.read())&&(n=e.type===be.EQUALS?this._create_token(be.VALUE,o):this._create_token(be.ATTRIBUTE,o));return n},ye.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},ye.prototype._read_raw_content=function(t,e,i){var n="";if(i&&"{"===i.text[0])n=this.__patterns.handlebars_raw_close.read();else if(e.type===be.TAG_CLOSE&&"<"===e.opened.text[0]&&"/"!==e.text[0]){var o=e.opened.text.substr(1).toLowerCase();if("script"===o||"style"===o){var s=this._read_comment_or_cdata(t);if(s)return s.type=be.TEXT,s;n=this._input.readUntil(new RegExp("</"+o+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(o)&&(n=this._input.readUntil(new RegExp("</"+o+"[\\n\\r\\t ]*?>","ig")))}return n?this._create_token(be.TEXT,n):null},ye.prototype._read_content_word=function(t){var e="";if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(be.TEXT,e)},ue.Tokenizer=ye,ue.TOKEN=be;var xe=ae.Options,we=d.Output,Se=ue.Tokenizer,_e=ue.TOKEN,Ce=/\r\n|[\r\n]/,ke=/\r\n|[\r\n]/g,Ee=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new we(t,e)};Ee.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},Ee.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},Ee.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Ee.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},Ee.prototype.print_preserved_newlines=function(t){var e=0;t.type!==_e.TEXT&&t.previous.type!==_e.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var i=0;i<e;i++)this.print_newline(i>0);return 0!==e},Ee.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines)&&(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0)},Ee.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Ee.prototype.print_newline=function(t){this._output.add_new_line(t)},Ee.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},Ee.prototype.indent=function(){this.indent_level++},Ee.prototype.get_full_indent=function(t){return(t=this.indent_level+(t||0))<1?"":this._output.get_indent_string(t)};var Ae=function(t,e){var i=null,n=null;return e.closed?("script"===t?i="text/javascript":"style"===t&&(i="text/css"),i=function(t){for(var e=null,i=t.next;i.type!==_e.EOF&&t.closed!==i;){if(i.type===_e.ATTRIBUTE&&"type"===i.text){i.next&&i.next.type===_e.EQUALS&&i.next.next&&i.next.next.type===_e.VALUE&&(e=i.next.next.text);break}i=i.next}return e}(e)||i,i.search("text/css")>-1?n="css":i.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?n="javascript":i.search(/(text|application|dojo)\/(x-)?(html)/)>-1?n="html":i.search(/test\/null/)>-1&&(n="null"),n):null};function Le(t,e){return-1!==e.indexOf(t)}function qe(t,e,i){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=i||0,this.parser_token=e||null}function Te(t){this._printer=t,this._current_frame=null}function Me(t,e,i,n){this._source_text=t||"",e=e||{},this._js_beautify=i,this._css_beautify=n,this._tag_stack=null;var o=new xe(e,"html");this._options=o,this._is_wrap_attributes_force="force"===this._options.wrap_attributes.substr(0,"force".length),this._is_wrap_attributes_force_expand_multiline="force-expand-multiline"===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned="force-aligned"===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple="aligned-multiple"===this._options.wrap_attributes,this._is_wrap_attributes_preserve="preserve"===this._options.wrap_attributes.substr(0,"preserve".length),this._is_wrap_attributes_preserve_aligned="preserve-aligned"===this._options.wrap_attributes}Te.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Te.prototype.record_tag=function(t){var e=new qe(this._current_frame,t,this._printer.indent_level);this._current_frame=e},Te.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},Te.prototype._get_frame=function(t,e){for(var i=this._current_frame;i&&-1===t.indexOf(i.tag);){if(e&&-1!==e.indexOf(i.tag)){i=null;break}i=i.parent}return i},Te.prototype.try_pop=function(t,e){var i=this._get_frame([t],e);return this._try_pop_frame(i)},Te.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},Me.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;"auto"===this._options.eol&&(e="\n",t&&Ce.test(t)&&(e=t.match(Ce)[0]));var i=(t=t.replace(ke,"\n")).match(/^[\t ]*/)[0],n={text:"",type:""},o=new Oe,s=new Ee(this._options,i),r=new Se(t,this._options).tokenize();this._tag_stack=new Te(s);for(var l=null,a=r.next();a.type!==_e.EOF;)a.type===_e.TAG_OPEN||a.type===_e.COMMENT?o=l=this._handle_tag_open(s,a,o,n):a.type===_e.ATTRIBUTE||a.type===_e.EQUALS||a.type===_e.VALUE||a.type===_e.TEXT&&!o.tag_complete?l=this._handle_inside_tag(s,a,o,r):a.type===_e.TAG_CLOSE?l=this._handle_tag_close(s,a,o):a.type===_e.TEXT?l=this._handle_text(s,a,o):s.add_raw_token(a),n=l,a=r.next();return s._output.get_code(e)},Me.prototype._handle_tag_close=function(t,e,i){var n={text:e.text,type:e.type};return t.alignment_size=0,i.tag_complete=!0,t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),i.is_unformatted?t.add_raw_token(e):("<"===i.tag_start_char&&(t.set_space_before_token("/"===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&i.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),!i.indent_content||i.is_unformatted||i.is_content_unformatted||(t.indent(),i.indent_content=!1),i.is_inline_element||i.is_unformatted||i.is_content_unformatted||t.set_wrap_point(),n},Me.prototype._handle_inside_tag=function(t,e,i,n){var o=i.has_wrapped_attrs,s={text:e.text,type:e.type};if(t.set_space_before_token(e.newlines||""!==e.whitespace_before,!0),i.is_unformatted)t.add_raw_token(e);else if("{"===i.tag_start_char&&e.type===_e.TEXT)t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e);else{if(e.type===_e.ATTRIBUTE?(t.set_space_before_token(!0),i.attr_count+=1):(e.type===_e.EQUALS||e.type===_e.VALUE&&e.previous.type===_e.EQUALS)&&t.set_space_before_token(!1),e.type===_e.ATTRIBUTE&&"<"===i.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),o=o||0!==e.newlines),this._is_wrap_attributes_force)){var r=i.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&1===i.attr_count){var l,a=!0,d=0;do{if((l=n.peek(d)).type===_e.ATTRIBUTE){a=!1;break}d+=1}while(d<4&&l.type!==_e.EOF&&l.type!==_e.TAG_CLOSE);r=!a}r&&(t.print_newline(!1),o=!0)}t.print_token(e),o=o||t.previous_token_wrapped(),i.has_wrapped_attrs=o}return s},Me.prototype._handle_text=function(t,e,i){var n={text:e.text,type:"TK_CONTENT"};return i.custom_beautifier_name?this._print_custom_beatifier_text(t,e,i):i.is_unformatted||i.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),n},Me.prototype._print_custom_beatifier_text=function(t,e,i){var n=this;if(""!==e.text){var o,s=e.text,r=1,l="",a="";"javascript"===i.custom_beautifier_name&&"function"==typeof this._js_beautify?o=this._js_beautify:"css"===i.custom_beautifier_name&&"function"==typeof this._css_beautify?o=this._css_beautify:"html"===i.custom_beautifier_name&&(o=function(t,e){return new Me(t,e,n._js_beautify,n._css_beautify).beautify()}),"keep"===this._options.indent_scripts?r=0:"separate"===this._options.indent_scripts&&(r=-t.indent_level);var d=t.get_full_indent(r);if(s=s.replace(/\n[ \t]*$/,""),"html"!==i.custom_beautifier_name&&"<"===s[0]&&s.match(/^(<!--|<!\[CDATA\[)/)){var c=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(s);if(!c)return void t.add_raw_token(e);l=d+c[1]+"\n",s=c[4],c[5]&&(a=d+c[5]),s=s.replace(/\n[ \t]*$/,""),(c[2]||-1!==c[3].indexOf("\n"))&&(c=c[3].match(/[ \t]+$/))&&(e.whitespace_before=c[0])}if(s)if(o){var u=function(){this.eol="\n"};u.prototype=this._options.raw_options,s=o(d+s,new u)}else{var p=e.whitespace_before;p&&(s=s.replace(new RegExp("\n("+p+")?","g"),"\n")),s=d+s.replace(/\n/g,"\n"+d)}l&&(s=s?l+s+"\n"+a:l+a),t.print_newline(!1),s&&(e.text=s,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},Me.prototype._handle_tag_open=function(t,e,i,n){var o=this._get_tag_open_token(e);return!i.is_unformatted&&!i.is_content_unformatted||i.is_empty_element||e.type!==_e.TAG_OPEN||0!==e.text.indexOf("</")?(t.traverse_whitespace(e),this._set_tag_position(t,e,o,i,n),o.is_inline_element||t.set_wrap_point(),t.print_token(e)):(t.add_raw_token(e),o.start_tag_token=this._tag_stack.try_pop(o.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(o.alignment_size=e.text.length+1),o.tag_complete||o.is_unformatted||(t.alignment_size=o.alignment_size),o};var Oe=function(t,e){var i;(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",e)?(this.tag_start_char=e.text[0],this.text=e.text,"<"===this.tag_start_char?(i=e.text.match(/^<([^\s>]*)/),this.tag_check=i?i[1]:""):(i=e.text.match(/^{{(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=i?i[1]:"","{{#>"===e.text&&">"===this.tag_check&&null!==e.next&&(this.tag_check=e.next.text)),this.tag_check=this.tag_check.toLowerCase(),e.type===_e.COMMENT&&(this.tag_complete=!0),this.is_start_tag="/"!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&"/>"===e.closed.text,this.is_end_tag=this.is_end_tag||"{"===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(2)))):this.tag_complete=!0};Me.prototype._get_tag_open_token=function(t){var e=new Oe(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||Le(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&Le(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&Le(e.tag_check,this._options.content_unformatted),e.is_inline_element=Le(e.tag_name,this._options.inline)||"{"===e.tag_start_char,e},Me.prototype._set_tag_position=function(t,e,i,n,o){if(i.is_empty_element||(i.is_end_tag?i.start_tag_token=this._tag_stack.try_pop(i.tag_name):(this._do_optional_end_element(i)&&(i.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(i),"script"!==i.tag_name&&"style"!==i.tag_name||i.is_unformatted||i.is_content_unformatted||(i.custom_beautifier_name=Ae(i.tag_check,e)))),Le(i.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),i.is_empty_element){if("{"===i.tag_start_char&&"else"===i.tag_check)this._tag_stack.indent_to_tag(["if","unless","each"]),i.indent_content=!0,t.current_line_has_match(/{{#if/)||t.print_newline(!1);"!--"===i.tag_name&&o.type===_e.TAG_CLOSE&&n.is_end_tag&&-1===i.text.indexOf("\n")||(i.is_inline_element||i.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,i))}else if(i.is_end_tag){var s=!1;s=(s=i.start_tag_token&&i.start_tag_token.multiline_content)||!i.is_inline_element&&!(n.is_inline_element||n.is_unformatted)&&!(o.type===_e.TAG_CLOSE&&i.start_tag_token===n)&&"TK_CONTENT"!==o.type,(i.is_content_unformatted||i.is_unformatted)&&(s=!1),s&&t.print_newline(!1)}else i.indent_content=!i.custom_beautifier_name,"<"===i.tag_start_char&&("html"===i.tag_name?i.indent_content=this._options.indent_inner_html:"head"===i.tag_name?i.indent_content=this._options.indent_head_inner_html:"body"===i.tag_name&&(i.indent_content=this._options.indent_body_inner_html)),i.is_inline_element||i.is_unformatted||"TK_CONTENT"===o.type&&!i.is_content_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,i)},Me.prototype._calcluate_parent_multiline=function(t,e){!e.parent||!t._output.just_added_newline()||(e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element||(e.parent.multiline_content=!0)};var Re=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],Be=["a","audio","del","ins","map","noscript","video"];Me.prototype._do_optional_end_element=function(t){var e=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent){if("body"===t.tag_name)e=e||this._tag_stack.try_pop("head");else if("li"===t.tag_name)e=e||this._tag_stack.try_pop("li",["ol","ul"]);else if("dd"===t.tag_name||"dt"===t.tag_name)e=(e=e||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if("p"===t.parent.tag_name&&-1!==Re.indexOf(t.tag_name)){var i=t.parent.parent;i&&-1!==Be.indexOf(i.tag_name)||(e=e||this._tag_stack.try_pop("p"))}else"rp"===t.tag_name||"rt"===t.tag_name?e=(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):"optgroup"===t.tag_name?e=e||this._tag_stack.try_pop("optgroup",["select"]):"option"===t.tag_name?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):"colgroup"===t.tag_name?e=e||this._tag_stack.try_pop("caption",["table"]):"thead"===t.tag_name?e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):"tbody"===t.tag_name||"tfoot"===t.tag_name?e=(e=(e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):"tr"===t.tag_name?e=(e=(e=e||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):"th"!==t.tag_name&&"td"!==t.tag_name||(e=(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return t.parent=this._tag_stack.get_parser_token(),e}},le.Beautifier=Me;var Ne=le.Beautifier,Ie=ae.Options;re.exports=function(t,e,i,n){return new Ne(t,e,i,n).beautify()},re.exports.defaultOptions=function(){return new Ie};var $e=l.exports,De=Ft.exports,Pe=re.exports;function ze(t,e,i,n){return Pe(t,e,i=i||$e,n=n||De)}ze.defaultOptions=Pe.defaultOptions,r.js=$e,r.css=De,r.html=ze,function(t){!function(t){var e=r;e.js_beautify=e.js,e.css_beautify=e.css,e.html_beautify=e.html,t.exports=function(t,e,i){var n=function(e,i){return t.js_beautify(e,i)};return n.js=t.js_beautify,n.css=e.css_beautify,n.html=i.html_beautify,n.js_beautify=t.js_beautify,n.css_beautify=e.css_beautify,n.html_beautify=i.html_beautify,n}(e,e,e)}(t)}(s);var He=s.exports;function Fe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ue(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function We(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ue(Object(i),!0).forEach((function(e){Fe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ue(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function je(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}function Ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Ve(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ye(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Xe(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(i),!0).forEach((function(e){Ve(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ye(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ze(t){return function e(){for(var i=this,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=t.length?t.apply(this,o):function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e.apply(i,[].concat(o,n))}}}function Ke(t){return{}.toString.call(t).includes("Object")}function Qe(t){return"function"==typeof t}var Je=Ze((function(t,e){throw new Error(t[e]||t.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),ti={changes:function(t,e){return Ke(e)||Je("changeType"),Object.keys(e).some((function(e){return i=t,n=e,!Object.prototype.hasOwnProperty.call(i,n);var i,n}))&&Je("changeField"),e},selector:function(t){Qe(t)||Je("selectorType")},handler:function(t){Qe(t)||Ke(t)||Je("handlerType"),Ke(t)&&Object.values(t).some((function(t){return!Qe(t)}))&&Je("handlersType")},initial:function(t){var e;t||Je("initialIsRequired"),Ke(t)||Je("initialType"),e=t,Object.keys(e).length||Je("initialContent")}};function ei(t,e){return Qe(e)?e(t.current):e}function ii(t,e){return t.current=Xe(Xe({},t.current),e),e}function ni(t,e,i){return Qe(e)?e(t.current):Object.keys(i).forEach((function(i){var n;return null===(n=e[i])||void 0===n?void 0:n.call(e,t.current[i])})),i}var oi={create:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ti.initial(t),ti.handler(e);var i={current:t},n=Ze(ni)(i,e),o=Ze(ii)(i),s=Ze(ti.changes)(t),r=Ze(ei)(i);return[function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return ti.selector(t),t(i.current)},function(t){!function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}}(n,o,s,r)(t)}]}};var si,ri={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},li=(si=function(t,e){throw new Error(t[e]||t.default)},function t(){for(var e=this,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.length>=si.length?si.apply(this,n):function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t.apply(e,[].concat(n,o))}})(ri),ai={config:function(t){var e;return t||li("configIsRequired"),e=t,{}.toString.call(e).includes("Object")||li("configType"),t.urls?(console.warn(ri.deprecation),{paths:{vs:t.urls.monacoBase}}):t}};function di(t,e){return Object.keys(e).forEach((function(i){e[i]instanceof Object&&t[i]&&Object.assign(e[i],di(t[i],e[i]))})),We(We({},t),e)}var ci={type:"cancelation",msg:"operation is manually canceled"};function ui(t){var e=!1,i=new Promise((function(i,n){t.then((function(t){return e?n(ci):i(t)})),t.catch(n)}));return i.cancel=function(){return e=!0},i}var pi,hi,gi=oi.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),mi=(hi=2,function(t){if(Array.isArray(t))return t}(pi=gi)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,o=!1,s=void 0;try{for(var r,l=t[Symbol.iterator]();!(n=(r=l.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{n||null==l.return||l.return()}finally{if(o)throw s}}return i}}(pi,hi)||function(t,e){if(t){if("string"==typeof t)return Ge(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ge(t,e):void 0}}(pi,hi)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),fi=mi[0],bi=mi[1];function vi(t){return document.body.appendChild(t)}function yi(t){var e=fi((function(t){return{config:t.config,reject:t.reject}})),i=function(t){var e=document.createElement("script");return t&&(e.src=t),e}("".concat(e.config.paths.vs,"/loader.js"));return i.onload=function(){return t()},i.onerror=e.reject,i}function xi(){var t=fi((function(t){return{config:t.config,resolve:t.resolve,reject:t.reject}})),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],(function(e){wi(e),t.resolve(e)}),(function(e){t.reject(e)}))}function wi(t){fi().monaco||bi({monaco:t})}var Si=new Promise((function(t,e){return bi({resolve:t,reject:e})})),_i={config:function(t){var e=ai.config(t),i=e.monaco,n=je(e,["monaco"]);bi((function(t){return{config:di(t.config,n),monaco:i}}))},init:function(){var t=fi((function(t){return{monaco:t.monaco,isInitialized:t.isInitialized,resolve:t.resolve}}));if(!t.isInitialized){if(bi({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ui(Si);if(window.monaco&&window.monaco.editor)return wi(window.monaco),t.resolve(window.monaco),ui(Si);!function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduceRight((function(t,e){return e(t)}),t)}}(vi,yi)(xi)}return ui(Si)},__getMonacoInstance:function(){return fi((function(t){return t.monaco}))}};const Ci=new o;let ki={};class Ei{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;let n=i.querySelector(".viewhtml");if(!n){const t=`<div class="is-modal viewhtml" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <textarea class="tabSupport" style="width:100%;height:calc(100% - 50px);border:none;margin:0;box-sizing:border-box;"></textarea>\n                    <div class="is-modal-footer" style="border-top:1px solid ${this.builder.styleSeparatorColor};width:100%;height:50px;position:absolute;left:0;bottom:0;overflow:hidden;text-align:right">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal viewhtmlmonaco" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width: 55vw;padding:0">\n                    <textarea style="position:absolute;display:none;"></textarea>\n                    <div class="input-code-editor" style="width:100%;height:65vh;"></div>\n                    <div class="is-modal-footer" style="display:flex;justify-content:flex-end;border-top:1px solid ${this.builder.styleSeparatorColor};">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal viewhtmlexternal" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width: 55vw;padding:0">\n                    <div class="input-code-editor" style="width:100%;height:65vh;"></div>\n                    <div class="is-modal-footer" style="display:flex;justify-content:flex-end;border-top:1px solid ${this.builder.styleSeparatorColor};">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n            \n            `;Ci.appendHtml(i,t),n=i.querySelector(".viewhtml");let o=i.querySelector(".viewhtmlmonaco"),s=i.querySelector(".viewhtmlexternal"),r=n.querySelector(".input-ok");Ci.addEventListener(r,"click",(()=>{this.applyHtml(n)})),r=n.querySelector(".input-cancel"),Ci.addEventListener(r,"click",(()=>{this.builder.hideModal(n)})),r=o.querySelector(".input-ok"),Ci.addEventListener(r,"click",(()=>{this.applyHtml(o)})),r=o.querySelector(".input-cancel"),Ci.addEventListener(r,"click",(()=>{this.builder.hideModal(o)})),r=s.querySelector(".input-ok"),Ci.addEventListener(r,"click",(()=>{const t=document.querySelector("textarea[data-source-active]"),e=t.getAttribute("data-source-ok");t.removeAttribute("data-source-active"),t.removeAttribute("data-source-ok"),t.removeAttribute("data-source-cancel"),document.querySelector(e).click(),this.builder.hideModal(s)})),r=s.querySelector(".input-cancel"),Ci.addEventListener(r,"click",(()=>{const t=document.querySelector("textarea[data-source-active]"),e=t.getAttribute("data-source-cancel");t.removeAttribute("data-source-active"),t.removeAttribute("data-source-ok"),t.removeAttribute("data-source-cancel"),document.querySelector(e).click(),this.builder.hideModal(s)}))}}applyHtml(t){const e=this.builder.util;let i=this.builder.codeEditorMode,n=this.builder.codeEditorArea;this.builder.uo.saveForUndo();let o=t.querySelector("textarea").value;if("code"===i){let i=this.builder.activeCodeBlock;i.setAttribute("data-html",encodeURIComponent(o)),o=o.replace(/{id}/g,e.makeId());for(let t=1;t<=20;t++)o=o.replace("[%HTML"+t+"%]",void 0===i.getAttribute("data-html-"+t)?"":decodeURIComponent(i.getAttribute("data-html-"+t)));i.innerHTML="";let n=document.createRange();n.setStart(i,0),i.appendChild(n.createContextualFragment(o));let s=this.builder.doc.querySelector(".builder-active");return s&&this.builder.applyBehaviorOn(s),this.builder.opts.onChange(),this.builder.opts.onRender(),this.builder.hideModal(t),void e.hideControls()}if(o=this.fromViewToActual(o),"cell"===i){e.cellSelected().innerHTML=o;let t=this.builder.doc.querySelector(".builder-active");t&&this.builder.applyBehaviorOn(t),this.builder.opts.onChange(),this.builder.opts.onRender()}if("row"===i){let t,i=e.cellSelected();if(t=i?i.parentNode:e.rowSelected(),!t)return;t.innerHTML=o;let n=this.builder.doc.querySelector(".builder-active");n&&this.builder.applyBehaviorOn(n),this.builder.opts.onChange(),this.builder.opts.onRender()}if("full"===i){n.innerHTML="";let t=document.createRange();t.setStart(n,0),n.appendChild(t.createContextualFragment(o)),this.builder.applyBehaviorOn(n),this.builder.opts.onChange(),this.builder.opts.onRender(),e.clearActiveCell()}e.clearControls(),this.builder.hideModal(t)}viewHtmlExternal(){const t=this.builder.util,e=this.builder.builderStuff.querySelector(".viewhtmlexternal");document.activeElement&&(this.elmFocus=document.activeElement),t.showModal(e,!0,(()=>{this.elmFocus&&this.elmFocus.focus()}),!1),e.querySelector(".input-code-editor").style.opacity=.01,this._viewHtmlExternal()}_viewHtmlExternal(){const t=document.querySelector("textarea[data-source-active]");let e=this.builder.builderStuff.querySelector(".viewhtmlexternal").querySelector(".input-code-editor");if(!e.querySelector(".monaco-editor"))return _i.init().then((t=>{this.builder.monaco=t,e.getAttribute("data-mode-id")||(this.builder.codeEditorExternal=t.editor.create(e,{value:"",minimap:{enabled:!1},automaticLayout:!0,contextmenu:!1,fontSize:13,wordWrap:!0,scrollbar:{useShadows:!1,vertical:"visible",horizontal:"visible",horizontalScrollbarSize:12,verticalScrollbarSize:12},language:"html",theme:this.builder.styleDark||this.builder.styleColoredDark?"vs-dark":""})),this.builder.codeEditorExternal.onKeyUp((()=>{document.querySelector("textarea[data-source-active]").value=this.builder.codeEditorExternal.getModel().getValue()}))})),void setTimeout((()=>{this._viewHtmlExternal()}),100);const i=this.builder.monaco.editor.createModel(t.value,"html");this.builder.codeEditorExternal.setModel(i),e.style.opacity=""}view(t,e,i){const n=this.builder.util,o=this.builder.builderStuff;let s;s=this.builder.opts.htmlSyntaxHighlighting?o.querySelector(".viewhtmlmonaco"):o.querySelector(".viewhtml"),n.showModal(s,!0,(()=>{i&&(i.removeAttribute("data-focus"),i.focus())})),i&&i.setAttribute("data-focus",!0),s.querySelector(".input-code-editor").style.opacity=.01,this._view(t,e)}_view(t,e){const i=this.builder.util,n=this.builder.builderStuff;let o;if(this.builder.opts.htmlSyntaxHighlighting){o=n.querySelector(".viewhtmlmonaco");let i=o.querySelector(".input-code-editor");if(!i.querySelector(".monaco-editor"))return _i.init().then((t=>{this.builder.monaco=t,i.getAttribute("data-mode-id")||(this.builder.codeEditor=t.editor.create(i,{value:"",minimap:{enabled:!1},automaticLayout:!0,contextmenu:!1,fontSize:13,wordWrap:!0,scrollbar:{useShadows:!1,vertical:"visible",horizontal:"visible",horizontalScrollbarSize:12,verticalScrollbarSize:12},language:"html",theme:this.builder.styleDark||this.builder.styleColoredDark?"vs-dark":""}));let e=o.querySelector("textarea");this.builder.codeEditor.onKeyUp((()=>{e.value=this.builder.codeEditor.getModel().getValue()}))})),void setTimeout((()=>{this._view(t,e)}),100)}else o=n.querySelector(".viewhtml");let s=o.querySelector("textarea");if("cell"===t){const t=i.cellSelected();if(!t)return;let e=o.querySelector("textarea");this.builder.cleanHtmlFormatting=!0,e.value=this.readHtml(t,!0),this.builder.cleanHtmlFormatting=!1}if("row"===t){let t,e=i.cellSelected();if(t=e?e.parentNode:i.rowSelected(),!t)return;let n=o.querySelector("textarea");this.builder.cleanHtmlFormatting=!0,n.value=this.readHtml(t,!0),this.builder.cleanHtmlFormatting=!1,Ci.removeClass(t,"row-outline")}if("full"===t){if(e);else{const t=this.builder.doc.querySelectorAll(this.builder.opts.container);if(t.length>1){const n=i.cellSelected();e=n?n.parentNode.parentNode:t[0]}else e=t[0];if(""!==this.builder.opts.page){const t=this.builder.doc.querySelector(this.builder.opts.page);t&&(e=t)}}let t=o.querySelector("textarea");this.builder.cleanHtmlFormatting=!0,this.builder.shortenHTML?t.value=this.readHtml(e,!0):t.value=this.readHtml(e,!1),this.builder.cleanHtmlFormatting=!1}if(this.builder.opts.htmlSyntaxHighlighting){const t=this.builder.monaco.editor.createModel(s.value,"html");this.builder.codeEditor.setModel(t)}let r=n.querySelector(".is-pop.columnmore");r&&(r.style.display="");let l=n.querySelector(".is-pop.rowmore");l&&(l.style.display=""),this.builder.codeEditorMode=t,this.builder.codeEditorArea=e,o.querySelector(".input-code-editor").style.opacity=""}fromViewToActual(t){for(var e in ki)t=t.replace(e,ki[e]);return t}readHtml(t,e,i){if(this.builder.opts.absolutePath){let e=t.querySelectorAll("a");Array.prototype.forEach.call(e,(t=>{let e=t.href;t.setAttribute("href",e)}));let i=t.querySelectorAll("img");Array.prototype.forEach.call(i,(t=>{let e=t.src;t.setAttribute("src",e)}))}this.builder.cleanHtmlFormatting;const n=this.builder.util;let o,s=document.createElement("div");s.innerHTML=t.innerHTML;let r=s.querySelectorAll("[data-html]");if(Array.prototype.forEach.call(r,(t=>{let e=1,i=t.querySelectorAll("[data-subblock]");Array.prototype.forEach.call(i,(i=>{if(i.closest(".glide__slide--clone"))return;let n=i.innerHTML;t.setAttribute("data-html-"+e,encodeURIComponent(n)),e++}))})),r=s.querySelectorAll("[data-html]"),Array.prototype.forEach.call(r,(t=>{let e=decodeURIComponent(t.getAttribute("data-html"));e=e.replace(/{id}/g,n.makeId()),t.innerHTML=e;let i=t.querySelectorAll("[data-subblock]");var o=1;Array.prototype.forEach.call(i,(e=>{e.innerHTML=void 0===t.getAttribute("data-html-"+o)?"":decodeURIComponent(t.getAttribute("data-html-"+o)),o++}))})),e&&(ki={},r=s.querySelectorAll("[data-html]"),Array.prototype.forEach.call(r,(t=>{let e=n.makeId();ki[e]=t.getAttribute("data-html"),t.setAttribute("data-html",e);for(let i=1;i<=20;i++)void 0!==t.getAttribute("data-html-"+i)&&(e=n.makeId(),ki[e]=t.getAttribute("data-html-"+i),t.getAttribute("data-html-"+i,e));void 0!==t.getAttribute("data-settings")&&(e=n.makeId(),ki[e]=t.getAttribute("data-settings"),t.getAttribute("data-settings",e))}))),this.builder.makeAbsolute){const t=t=>{let e=document.createElement("img");return e.src=t,e.setAttribute("data-absoluteurl",e.src),t=e.getAttribute("data-absoluteurl")},e=t=>{let e=document.createElement("img");e.src=t,e.setAttribute("data-absoluteurl",e.src),t=e.getAttribute("data-absoluteurl");let i=location.href.substring(0,location.href.lastIndexOf("/"));return t.replace(i,"[%PATH%]")},i=(e,i)=>{if(e.hasAttribute(i)){if("video"!==e.parentNode.tagName.toLowerCase()&&"audio"!==e.parentNode.tagName.toLowerCase())return;let n=e.getAttribute(i);n=t(n),e.setAttribute(i,`${n}`)}};let n=s.querySelectorAll("img");Array.prototype.forEach.call(n,(t=>{let e=t.src;t.setAttribute("src",e)})),s.querySelectorAll("*").forEach((n=>{if(n.style.backgroundImage){let t=n.style.backgroundImage;if(-1!==t.indexOf("url(")){let i=t.slice(4,-1).replace(/["']/g,"");i=e(i),n.style.backgroundImage=`url(${i})`}}if(i(n,"src"),i(n,"data-default"),i(n,"data-240"),i(n,"data-360"),i(n,"data-480"),i(n,"data-540"),i(n,"data-720"),i(n,"data-1080"),i(n,"data-1440"),i(n,"data-2160"),n.hasAttribute("href")&&"link"===n.tagName.toLowerCase()){let e=n.getAttribute("href");e=t(e),n.setAttribute("href",`${e}`)}}))}let l=s.querySelectorAll(".is-builder");Array.prototype.forEach.call(l,(t=>{t.style.transform="",t.style.WebkitTransform="",t.style.MozTransform="",t.removeAttribute("data-sort"),Ci.removeClass(t,"builder-active");Ci.elementChildren(t).forEach((t=>{Ci.elementChildren(t).forEach((t=>{t.style.cursor=""}))}))}));Ci.elementChildren(s).forEach((t=>{t.style.cursor="";Ci.elementChildren(t).forEach((t=>{t.style.cursor=""}))}));let a=s.querySelectorAll(".sortable-chosen");Ci.removeClasses(a,"sortable-chosen"),a=s.querySelectorAll(".sortable-ghost"),Ci.removeClasses(a,"sortable-ghost"),a=s.querySelectorAll(".elm-active"),Ci.removeClasses(a,"elm-active"),a=s.querySelectorAll(".elm-inspected"),Ci.removeClasses(a,"elm-inspected"),a=s.querySelectorAll(".cell-active"),Ci.removeClasses(a,"cell-active"),a=s.querySelectorAll(".row-active"),Ci.removeClasses(a,"row-active"),a=s.querySelectorAll(".row-outline"),Ci.removeClasses(a,"row-outline"),a=s.querySelectorAll(".is-builder"),Ci.removeClasses(a,"is-builder"),a=s.querySelectorAll(".row-outline"),Ci.removeClasses(a,"row-outline"),a=s.querySelectorAll("[data-click]"),Ci.removeAttributes(a,"data-click"),a=s.querySelectorAll("[contenteditable]"),Ci.removeAttributes(a,"contenteditable"),a=s.querySelectorAll("[draggridoutline]"),Ci.removeAttributes(a,"draggridoutline"),a=s.querySelectorAll("[between-blocks-left]"),Ci.removeAttributes(a,"between-blocks-left"),a=s.querySelectorAll("[between-blocks-center]"),Ci.removeAttributes(a,"between-blocks-center"),a=s.querySelectorAll("[hideelementhighlight]"),Ci.removeAttributes(a,"hideelementhighlight"),a=s.querySelectorAll("[data-module-active]"),Ci.removeAttributes(a,"data-module-active"),a=s.querySelectorAll("[draggable]"),Ci.removeAttributes(a,"draggable"),a=s.querySelectorAll("[data-animated]"),Ci.removeAttributes(a,"data-animated"),a=s.querySelectorAll("[data-saveforundo]"),Ci.removeAttributes(a,"data-saveforundo"),a=s.querySelectorAll("[hidesnippetaddtool]"),Ci.removeAttributes(a,"hidesnippetaddtool"),a=s.querySelectorAll("[gray]"),Ci.removeAttributes(a,"gray"),a=s.querySelectorAll("[rowoutline]"),Ci.removeAttributes(a,"rowoutline"),a=s.querySelectorAll("[hidecolumntool]"),Ci.removeAttributes(a,"hidecolumntool"),a=s.querySelectorAll("[grayoutline]"),Ci.removeAttributes(a,"grayoutline"),a=s.querySelectorAll("[hideoutline]"),Ci.removeAttributes(a,"hideoutline"),a=s.querySelectorAll("[leftrowtool]"),Ci.removeAttributes(a,"leftrowtool"),a=s.querySelectorAll("[minimal]"),Ci.removeAttributes(a,"minimal"),a=s.querySelectorAll("[clean]"),Ci.removeAttributes(a,"clean"),a=s.querySelectorAll("[grideditor]"),Ci.removeAttributes(a,"grideditor"),a=s.querySelectorAll("[gridoutline]"),Ci.removeAttributes(a,"gridoutline"),Ci.removeElements(s.querySelectorAll(".is-row-tool")),Ci.removeElements(s.querySelectorAll(".is-col-tool")),Ci.removeElements(s.querySelectorAll(".is-rowadd-tool")),Ci.removeElements(s.querySelectorAll(".ovl")),Ci.removeElements(s.querySelectorAll(".row-add-initial")),a=s.querySelectorAll(".aos-init"),Ci.removeClasses(a,"aos-init"),a=s.querySelectorAll(".aos-animate"),Ci.removeClasses(a,"aos-animate"),a=s.querySelectorAll(".skrollable"),Ci.removeClasses(a,"skrollable"),a=s.querySelectorAll(".skrollable-after"),Ci.removeClasses(a,"skrollable-after"),a=s.querySelectorAll(".skrollable-before"),Ci.removeClasses(a,"skrollable-before"),a=s.querySelectorAll(".skrollable-between"),Ci.removeClasses(a,"skrollable-between"),a=s.querySelectorAll(".is-inview"),Ci.removeClasses(a,"is-inview");let d=s.querySelectorAll('[class=""]');Array.prototype.forEach.call(d,(t=>{t.removeAttribute("class")}));let c=s.querySelectorAll(".is-row-overlay");Array.prototype.forEach.call(c,(t=>{t.hasAttribute("style")||t.parentNode.removeChild(t)})),Ci.removeEmptyStyle(s),a=s.querySelectorAll("[data-keep]"),Ci.removeAttributes(a,"data-keep");let u=s.querySelectorAll("a");if(Array.prototype.forEach.call(u,(t=>{"inline-block"===t.style.display&&1===t.parentNode.childElementCount&&"span"===t.parentNode.tagName.toLowerCase()&&(t.parentNode.outerHTML=t.parentNode.innerHTML)})),o="",i){let t=s.querySelectorAll(".is-dummy");Ci.removeElements(t),t=s.querySelectorAll("[data-scroll]"),Ci.removeAttributes(t,"data-scroll"),t=s.querySelectorAll("[data-scroll-once]"),Ci.removeAttributes(t,"data-scroll-once"),this.builder.shortenOutput&&(t=s.querySelectorAll("[data-noedit]"),Ci.removeAttributes(t,"data-noedit"),t=s.querySelectorAll("[data-module]"),Ci.removeAttributes(t,"data-module"),t=s.querySelectorAll("[data-module-desc]"),Ci.removeAttributes(t,"data-module-desc"),t=s.querySelectorAll("[data-dialog-width]"),Ci.removeAttributes(t,"data-dialog-width"),t=s.querySelectorAll("[data-dialog-height]"),Ci.removeAttributes(t,"data-dialog-height"),t=s.querySelectorAll("[data-html]"),Ci.removeAttributes(t,"data-html"),t=s.querySelectorAll("[data-settings]"),Ci.removeAttributes(t,"data-settings"),t=s.querySelectorAll("[data-html-1]"),Ci.removeAttributes(t,"data-html-1"),t=s.querySelectorAll("[data-html-2]"),Ci.removeAttributes(t,"data-html-2"),t=s.querySelectorAll("[data-html-3]"),Ci.removeAttributes(t,"data-html-3"),t=s.querySelectorAll("[data-html-4]"),Ci.removeAttributes(t,"data-html-4"),t=s.querySelectorAll("[data-html-5]"),Ci.removeAttributes(t,"data-html-5"),t=s.querySelectorAll("[data-html-6]"),Ci.removeAttributes(t,"data-html-6"),t=s.querySelectorAll("[data-html-7]"),Ci.removeAttributes(t,"data-html-7"),t=s.querySelectorAll("[data-html-8]"),Ci.removeAttributes(t,"data-html-8"),t=s.querySelectorAll("[data-html-9]"),Ci.removeAttributes(t,"data-html-9"),t=s.querySelectorAll("[data-html-10]"),Ci.removeAttributes(t,"data-html-10"),t=s.querySelectorAll("[data-html-12]"),Ci.removeAttributes(t,"data-html-12"),t=s.querySelectorAll("[data-html-13]"),Ci.removeAttributes(t,"data-html-13"),t=s.querySelectorAll("[data-html-14]"),Ci.removeAttributes(t,"data-html-14"),t=s.querySelectorAll("[data-html-15]"),Ci.removeAttributes(t,"data-html-15"),t=s.querySelectorAll("[data-html-16]"),Ci.removeAttributes(t,"data-html-16"),t=s.querySelectorAll("[data-html-17]"),Ci.removeAttributes(t,"data-html-17"),t=s.querySelectorAll("[data-html-18]"),Ci.removeAttributes(t,"data-html-18"),t=s.querySelectorAll("[data-html-19]"),Ci.removeAttributes(t,"data-html-19"),t=s.querySelectorAll("[data-html-20]"),Ci.removeAttributes(t,"data-html-20"),t=s.querySelectorAll("[data-html-21]"),Ci.removeAttributes(t,"data-html-21"),t=s.querySelectorAll("[data-html-21]"),Ci.removeAttributes(t,"data-html-21"),t=s.querySelectorAll("[data-html-22]"),Ci.removeAttributes(t,"data-html-22"),t=s.querySelectorAll("[data-html-23]"),Ci.removeAttributes(t,"data-html-23"),t=s.querySelectorAll("[data-html-24]"),Ci.removeAttributes(t,"data-html-24"),t=s.querySelectorAll("[data-html-25]"),Ci.removeAttributes(t,"data-html-25")),t=s.querySelectorAll("[data-bottom-top],[data-center],[data-center-bottom],[data-100-top],[data-50-top],[data-top],[data-top-bottom],[data-center-top],[data--300-bottom],[data--150-bottom],[data--50-bottom],[data-bottom],[data-100-bottom],[data-150-bottom],[data-400-bottom],[data--400-bottom],[data--200-bottom],[data--100-bottom],[data-50-bottom],[data-200-bottom],[data-300-bottom],[data-in],[data-in-150],[data-in-300],[data-cen--150],[data-cen],[data-cen-150],[data-out--300],[data-out--150],[data-out][data-t],[data-t-100],[data-t-200],[data-t-300],[data-t-400],[data-t-500],[data-t-600],[data-t-700],[data-t-800],[data-t-900],[data-t-1000],[data-t-1100],[data-t-1200],[data-t-1300],[data-t-1400],[data-t-1500],[data-t-1600],[data-t-1700],[data-t-1800],[data-t-1900],[data-t-2000],[data-t-2100],[data-t-2200],[data-t-2300],[data-t-2400],[data-t-2500],[data-t-2600],[data-t-2700],[data-t-2800]"),Array.prototype.forEach.call(t,(t=>{t.style.transition="",t.style.transform="",t.style.opacity=""})),t=s.querySelectorAll(".is-animated"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"animated"),Ci.removeClass(t,"pulse"),Ci.removeClass(t,"bounceIn"),Ci.removeClass(t,"fadeIn"),Ci.removeClass(t,"fadeOut"),Ci.removeClass(t,"fadeInDown"),Ci.removeClass(t,"fadeInLeft"),Ci.removeClass(t,"fadeInRight"),Ci.removeClass(t,"fadeInUp"),Ci.removeClass(t,"flipInX"),Ci.removeClass(t,"flipInY"),Ci.removeClass(t,"slideInUp"),Ci.removeClass(t,"slideInDown"),Ci.removeClass(t,"slideInLeft"),Ci.removeClass(t,"slideInRight"),Ci.removeClass(t,"zoomIn"),t.style.animationDelay="",t.style.transitionDelay="",t.style.transitionDuration="",t.style.transitionTimingFunction="",t.style.transitionProperty=""}));let e=s.querySelectorAll('[style=""]');Array.prototype.forEach.call(e,(t=>{t.removeAttribute("style")})),t=s.querySelectorAll(".is-appeared"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"is-appeared")})),t=s.querySelectorAll(".box-active"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"box-active")})),t=s.querySelectorAll(".section-active"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"section-active")})),t=s.querySelectorAll(".section-select"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"section-select")})),t=s.querySelectorAll(".box-select"),Array.prototype.forEach.call(t,(t=>{Ci.removeClass(t,"box-select")})),t=s.querySelectorAll(".is-section-tool"),Ci.removeElements(t),t=s.querySelectorAll(".is-box-tool"),Ci.removeElements(t),t=s.querySelectorAll(".is-section-info"),Ci.removeElements(t);var p="",h="",g="";Ci.elementChildren(s).forEach((t=>{let e=t;if(Ci.hasClass(e,"is-section")){var i="";e.getAttribute("class")&&(i=' class="'+e.getAttribute("class")+'"');var n=e.cloneNode(!0),s=n.outerHTML;o+=s,-1===i.indexOf("is-static")?p+=s+"\n\n":h+=s+"\n\n"}else s=(n=e.cloneNode(!0)).outerHTML,o+=s,g+=s}));let i=document.querySelector("[data-contentbox]"),n=!1;i&&(n=i.settings.disableStaticSection),n||(o=p+h+g)}else{let t=s.querySelectorAll('[style=""]');Array.prototype.forEach.call(t,(t=>{t.removeAttribute("style")})),this.builder.shortenOutput&&(a=s.querySelectorAll("[data-noedit]"),Ci.removeAttributes(a,"data-noedit"),a=s.querySelectorAll("[data-module]"),Ci.removeAttributes(a,"data-module"),a=s.querySelectorAll("[data-module-desc]"),Ci.removeAttributes(a,"data-module-desc"),a=s.querySelectorAll("[data-dialog-width]"),Ci.removeAttributes(a,"data-dialog-width"),a=s.querySelectorAll("[data-dialog-height]"),Ci.removeAttributes(a,"data-dialog-height"),a=s.querySelectorAll("[data-html]"),Ci.removeAttributes(a,"data-html"),a=s.querySelectorAll("[data-settings]"),Ci.removeAttributes(a,"data-settings"),a=s.querySelectorAll("[data-html-1]"),Ci.removeAttributes(a,"data-html-1"),a=s.querySelectorAll("[data-html-2]"),Ci.removeAttributes(a,"data-html-2"),a=s.querySelectorAll("[data-html-3]"),Ci.removeAttributes(a,"data-html-3"),a=s.querySelectorAll("[data-html-4]"),Ci.removeAttributes(a,"data-html-4"),a=s.querySelectorAll("[data-html-5]"),Ci.removeAttributes(a,"data-html-5"),a=s.querySelectorAll("[data-html-6]"),Ci.removeAttributes(a,"data-html-6"),a=s.querySelectorAll("[data-html-7]"),Ci.removeAttributes(a,"data-html-7"),a=s.querySelectorAll("[data-html-8]"),Ci.removeAttributes(a,"data-html-8"),a=s.querySelectorAll("[data-html-9]"),Ci.removeAttributes(a,"data-html-9"),a=s.querySelectorAll("[data-html-10]"),Ci.removeAttributes(a,"data-html-10"),a=s.querySelectorAll("[data-html-12]"),Ci.removeAttributes(a,"data-html-12"),a=s.querySelectorAll("[data-html-13]"),Ci.removeAttributes(a,"data-html-13"),a=s.querySelectorAll("[data-html-14]"),Ci.removeAttributes(a,"data-html-14"),a=s.querySelectorAll("[data-html-15]"),Ci.removeAttributes(a,"data-html-15"),a=s.querySelectorAll("[data-html-16]"),Ci.removeAttributes(a,"data-html-16"),a=s.querySelectorAll("[data-html-17]"),Ci.removeAttributes(a,"data-html-17"),a=s.querySelectorAll("[data-html-18]"),Ci.removeAttributes(a,"data-html-18"),a=s.querySelectorAll("[data-html-19]"),Ci.removeAttributes(a,"data-html-19"),a=s.querySelectorAll("[data-html-20]"),Ci.removeAttributes(a,"data-html-20"),a=s.querySelectorAll("[data-html-21]"),Ci.removeAttributes(a,"data-html-21"),a=s.querySelectorAll("[data-html-21]"),Ci.removeAttributes(a,"data-html-21"),a=s.querySelectorAll("[data-html-22]"),Ci.removeAttributes(a,"data-html-22"),a=s.querySelectorAll("[data-html-23]"),Ci.removeAttributes(a,"data-html-23"),a=s.querySelectorAll("[data-html-24]"),Ci.removeAttributes(a,"data-html-24"),a=s.querySelectorAll("[data-html-25]"),Ci.removeAttributes(a,"data-html-25")),o=s.innerHTML.trim(),o=o.replace(/<font/g,"<span").replace(/<\/font/g,"</span")}let m=He.html;return o=m(o),o=o.replace(/(\r\n|\r|\n){3,}/g,"$1\n"),o}beautify(t){return t=(t=(0,He.html)(t)).replace(/(\r\n|\r|\n){3,}/g,"$1\n")}}class Ai{constructor(t){this.builder=t;const e=this.builder.dom;this.dom=e,this.undoList=[]}readStyles(){if(this.builder.opts.undoContainerOnly)return"";let t,e,i="",n=this.builder.doc.getElementsByTagName("link");for(t=0;t<n.length;t++)e=n[t].href.toLowerCase(),-1!==e.indexOf("basetype-")&&(i+=n[t].outerHTML);for(n=this.builder.doc.getElementsByTagName("link"),t=0;t<n.length;t++)e=n[t].href.toLowerCase(),-1!==e.indexOf("basetype-")||-1!==e.indexOf("type-")&&(i+=n[t].outerHTML);return i}writeStyles(t){const e=this.dom;if(this.builder.opts.undoContainerOnly)return;let i,n,o=this.builder.doc.getElementsByTagName("link");for(i=0;i<o.length;i++)n=o[i].href.toLowerCase(),(-1!==n.indexOf("basetype-")||-1!==n.indexOf("type-"))&&o[i].parentNode.removeChild(o[i]);let s=this.builder.doc.getElementsByTagName("head")[0];e.appendHtml(s,t)}readHtml(){if(""===this.builder.opts.page||this.builder.opts.undoContainerOnly){const t=this.builder.doc.querySelectorAll(this.builder.opts.container);let e="";return Array.prototype.forEach.call(t,(t=>{e+=t.innerHTML+"####|####"})),e=e.substr(0,e.length-9),e}return this.builder.doc.querySelector(this.builder.opts.page).innerHTML}cleaning(t){const e=this.dom;let i=t.querySelectorAll(".is-builder");Array.prototype.forEach.call(i,(t=>{t.removeAttribute("data-sort")}));let n=t.querySelectorAll("[data-click]");e.removeAttributes(n,"data-click"),e.removeElements(t.querySelectorAll(".is-row-tool")),e.removeElements(t.querySelectorAll(".is-rowadd-tool")),e.removeElements(t.querySelectorAll(".is-col-tool")),e.removeElements(t.querySelectorAll(".ovl")),e.removeElements(t.querySelectorAll(".row-add-initial")),n=t.querySelectorAll(".is-section-tool"),e.removeElements(n)}writeHtml(t){if(""===this.builder.opts.page||this.builder.opts.undoContainerOnly){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);let i=0;Array.prototype.forEach.call(e,(e=>{var n=document.createRange();e.innerHTML="",e.appendChild(n.createContextualFragment(t.split("####|####")[i])),this.cleaning(e),this.builder.applyBehaviorOn(e),i++}))}else{let i=this.builder.doc.querySelector(this.builder.opts.page);var e=document.createRange();i.innerHTML="",i.appendChild(e.createContextualFragment(t)),this.cleaning(i)}this.builder.opts.onRender()}saveForUndo(t){if(this.builder.undoRedoStyles){if(this.undoList[120]){let e=this.undoList[120][0].split("###$###")[1];if(this.builder.saveForUndoCheck&&e===this.readHtml())return void(this.builder.saveForUndoCheck=!0===t)}}else if(this.undoList[120]){let e=this.undoList[120][0];if(this.builder.saveForUndoCheck&&e===this.readHtml())return void(this.builder.saveForUndoCheck=!0===t)}if(this.builder.saveForUndoCheck=!0===t,this.undoList[140]=this.undoList[139],this.undoList[139]=this.undoList[138],this.undoList[138]=this.undoList[137],this.undoList[137]=this.undoList[136],this.undoList[136]=this.undoList[135],this.undoList[135]=this.undoList[134],this.undoList[134]=this.undoList[133],this.undoList[133]=this.undoList[132],this.undoList[132]=this.undoList[131],this.undoList[131]=this.undoList[130],this.undoList[130]=this.undoList[129],this.undoList[129]=this.undoList[128],this.undoList[128]=this.undoList[127],this.undoList[127]=this.undoList[126],this.undoList[126]=this.undoList[125],this.undoList[125]=this.undoList[124],this.undoList[124]=this.undoList[123],this.undoList[123]=this.undoList[122],this.undoList[122]=this.undoList[121],this.undoList[121]=this.undoList[120],this.builder.undoRedoStyles){let t=" "+this.readStyles()+"###$###"+this.readHtml();this.undoList[120]=[t,null]}else this.undoList[120]=[this.readHtml(),null]}doUndo(){const t=this.dom;if(!this.undoList[120])return;if(!0===this.builder.undoRedoInProcess)return;if(this.builder.undoRedoInProcess=!0,this.undoList[99]=this.undoList[100],this.undoList[100]=this.undoList[101],this.undoList[101]=this.undoList[102],this.undoList[102]=this.undoList[103],this.undoList[103]=this.undoList[104],this.undoList[104]=this.undoList[105],this.undoList[105]=this.undoList[106],this.undoList[106]=this.undoList[107],this.undoList[107]=this.undoList[108],this.undoList[108]=this.undoList[109],this.undoList[109]=this.undoList[110],this.undoList[110]=this.undoList[111],this.undoList[111]=this.undoList[112],this.undoList[112]=this.undoList[113],this.undoList[113]=this.undoList[114],this.undoList[114]=this.undoList[115],this.undoList[115]=this.undoList[116],this.undoList[116]=this.undoList[117],this.undoList[117]=this.undoList[118],this.undoList[118]=this.undoList[119],this.builder.undoRedoStyles){let t=this.readStyles(),e=this.readHtml(),i=" "+t+"###$###"+e;this.undoList[119]=[i,null],i=this.undoList[120][0],t=i.split("###$###")[0].trim(),e=i.split("###$###")[1],this.writeStyles(t),this.writeHtml(e)}else{this.undoList[119]=[this.readHtml(),null];let t=this.undoList[120][0];this.writeHtml(t)}this.builder.applyBehavior(),this.builder.opts.onChange(),this.undoList[120]=this.undoList[121],this.undoList[121]=this.undoList[122],this.undoList[122]=this.undoList[123],this.undoList[123]=this.undoList[124],this.undoList[124]=this.undoList[125],this.undoList[125]=this.undoList[126],this.undoList[126]=this.undoList[127],this.undoList[127]=this.undoList[128],this.undoList[128]=this.undoList[129],this.undoList[129]=this.undoList[130],this.undoList[130]=this.undoList[131],this.undoList[131]=this.undoList[132],this.undoList[132]=this.undoList[133],this.undoList[133]=this.undoList[134],this.undoList[134]=this.undoList[135],this.undoList[135]=this.undoList[136],this.undoList[136]=this.undoList[137],this.undoList[137]=this.undoList[138],this.undoList[138]=this.undoList[139],this.undoList[139]=this.undoList[140],this.undoList[140]=this.undoList[141];const e=new n(this.builder);e.clearActiveCell(),e.clearAfterUndoRedo();let i=this.builder.doc.querySelector("[data-saveforundo]");if(i){let e=document.querySelector(".is-side.elementstyles");t.addClass(e,"active"),setTimeout((()=>{i.click()}),700)}else{let e=document.querySelector(".is-side.elementstyles");t.removeClass(e,"active")}this.builder.opts.onUndo&&this.builder.opts.onUndo(),this.builder.undoRedoInProcess=!1}doRedo(){const t=this.dom;if(!this.undoList[119])return;if(!0===this.builder.undoRedoInProcess)return;if(this.builder.undoRedoInProcess=!0,this.undoList[141]=this.undoList[140],this.undoList[140]=this.undoList[139],this.undoList[139]=this.undoList[138],this.undoList[138]=this.undoList[137],this.undoList[137]=this.undoList[136],this.undoList[136]=this.undoList[135],this.undoList[135]=this.undoList[134],this.undoList[134]=this.undoList[133],this.undoList[133]=this.undoList[132],this.undoList[132]=this.undoList[131],this.undoList[131]=this.undoList[130],this.undoList[130]=this.undoList[129],this.undoList[129]=this.undoList[128],this.undoList[128]=this.undoList[127],this.undoList[127]=this.undoList[126],this.undoList[126]=this.undoList[125],this.undoList[125]=this.undoList[124],this.undoList[124]=this.undoList[123],this.undoList[123]=this.undoList[122],this.undoList[122]=this.undoList[121],this.undoList[121]=this.undoList[120],this.builder.undoRedoStyles){let t=this.readStyles(),e=this.readHtml(),i=" "+t+"###$###"+e;this.undoList[120]=[i,null],i=this.undoList[119][0],t=i.split("###$###")[0].trim(),e=i.split("###$###")[1],this.writeStyles(t),this.writeHtml(e)}else{this.undoList[120]=[this.readHtml(),null];let t=this.undoList[119][0];this.writeHtml(t)}this.builder.applyBehavior(),this.builder.opts.onChange(),this.undoList[119]=this.undoList[118],this.undoList[118]=this.undoList[117],this.undoList[117]=this.undoList[116],this.undoList[116]=this.undoList[115],this.undoList[115]=this.undoList[114],this.undoList[114]=this.undoList[113],this.undoList[113]=this.undoList[112],this.undoList[112]=this.undoList[111],this.undoList[111]=this.undoList[110],this.undoList[110]=this.undoList[109],this.undoList[109]=this.undoList[108],this.undoList[108]=this.undoList[107],this.undoList[107]=this.undoList[106],this.undoList[106]=this.undoList[105],this.undoList[105]=this.undoList[104],this.undoList[104]=this.undoList[103],this.undoList[103]=this.undoList[102],this.undoList[102]=this.undoList[101],this.undoList[101]=this.undoList[100],this.undoList[100]=this.undoList[99],this.undoList[99]=null;const e=new n(this.builder);e.clearActiveCell(),e.clearAfterUndoRedo();let i=this.builder.doc.querySelector("[data-saveforundo]");if(i){let e=document.querySelector(".is-side.elementstyles");t.addClass(e,"active"),setTimeout((()=>{i.click()}),700)}else{let e=document.querySelector(".is-side.elementstyles");t.removeClass(e,"active")}this.builder.opts.onRedo&&this.builder.opts.onRedo(),this.builder.undoRedoInProcess=!1}}
/*!
	Ionicons
	License: MIT
	Copyright (c) 2015-present Ionic (http://ionic.io/)
	https://ionic.io/ionicons/v1
	*/
/*!
	Tabler Icons
	License: MIT
	Copyright (c) 2020 Paweł Kuna
	https://github.com/tabler/tabler-icons
	*/class Li{constructor(t){this.builder=t;const e=this.builder.util;this.util=e}getSnippetsHtml(){const t=this.util,e=this.builder.opts.snippetUrl,i=this.builder.opts.snippetPath;let n="[";for(let e=0;e<this.builder.opts.snippetCategories.length;e++)n+=`[${this.builder.opts.snippetCategories[e][0]},'${t.out(this.builder.opts.snippetCategories[e][1])}'],`;n+="]";const o=this.builder.opts.defaultSnippetCategory;return`\n        <!DOCTYPE HTML>\n        <html>\n        \n        <head>\n            <meta charset="utf-8">\n            <title></title>\n            <meta name="viewport" content="width=device-width, initial-scale=1">\n            <meta name="description" content="">\n            <script src="${e}"><\/script>\n            <style>\n                body {\n                    // background: #fff;\n                    background: ${this.builder.styleSnippetBackground};\n                    margin: 0;\n                }\n\n                .is-pop-close {\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    border: none;\n                    background: transparent;\n                    z-index:10;width:30px;height:30px;position:absolute;\n                    top:2px;right:2px;box-sizing:border-box;padding:0;line-height:40px;font-size: 12px;text-align:center;cursor:pointer;\n                }\n                .is-pop-close:focus-visible {\n                    outline:  ${this.builder.styleOutlineColor} 2px solid;\n                }\n\n                /*\n                body.dark {\n                    background: #111;\n                }\n                .dark .is-categories {\n                    background: #333;\n                }\n                .dark .is-category-list a {\n                    background: #333;\n                    color: #fff;\n                }\n                .dark .is-category-list a.active {\n                    background: #525252;\n                    color: #fff;\n                }\n                .dark .is-category-list a:hover {\n                    color: #fff;\n                }\n                .dark .is-design-list>li img {\n                    opacity: 0.93;\n                }\n                .dark .is-more-categories {\n                    background: #333;\n                }\n                .dark .is-more-categories a {\n                    background: #333;\n                    color: #fff;\n                }\n                .dark .is-more-categories a:hover,\n                .dark .is-more-categories a:focus {\n                    background: #4c4c4c;\n                }\n                .dark .is-more-categories a.active {\n                    background: #4c4c4c;\n                }\n                */\n\n                \n                .dark .is-design-list>li {\n                    outline: transparent 1px solid;\n                }\n\n                \n                        \n                /* Scrollbar for modal */\n\n                /* Darker color, because background for snippet thumbnails is always light. */\n                .dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(78 78 78 / 62%) auto;\n                }\n                .dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .dark *::-webkit-scrollbar-thumb {\n                    background-color:rgb(78 78 78 / 62%);\n                } \n\n                .colored-dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(100, 100, 100) auto;\n                }\n                .colored-dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored-dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored-dark *::-webkit-scrollbar-thumb {\n                    background-color:rgb(100, 100, 100);\n                } \n\n                .colored * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .colored *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n\n                .light * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .light *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .light *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .light *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n        \n                svg {\n                    fill: ${this.builder.styleSnippetColor};\n                }\n\n                .is-design-list {\n                    position: fixed;\n                    top: 0px;\n                    left: 0px;\n                    border-top: transparent 68px solid;\n                    width: 100%;\n                    height: 100%;\n                    overflow-y: auto;\n                    padding: 0px 0px 30px 30px;\n                    box-sizing: border-box;\n                    overflow: auto;\n                    list-style: none;\n                    margin: 0;\n                }\n        \n                .is-design-list>li {\n                    width: 250px;\n                    min-height:120px;\n                    position:relative;\n                    background: #fff;\n                    // background: ${this.builder.styleToolBackground};\n                    overflow: hidden;\n                    margin: 32px 40px 0 0;\n                    cursor: pointer;\n                    display: inline-block;\n                    outline: #ececec 1px solid;\n                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n                    border-radius: 2px;\n                }\n\n                .is-design-list>li:focus-visible {\n                    outline:  ${this.builder.styleOutlineColor} 2px solid;\n                }\n\n                .is-design-list>li img {\n                    box-shadow: none;\n                    opacity: 1;\n                    display: block;\n                    box-sizing: border-box;\n                    transition: all 0.2s ease-in-out;\n                    max-width: 400px;\n                    width: 100%\n                }\n        \n                // .is-design-list>li:hover img {\n                //     opacity: 0.95;\n                // }\n                \n                // .is-design-list>li:hover {\n                //     background: #999;\n                // }\n                .is-overlay {\n                    position:absolute;left:0px;top:0px;width:100%;height:100%;\n                }\n                .is-design-list>li .is-overlay:after {\n                    background: rgba(0, 0, 0, 0.02);\n                    position: absolute;\n                    content: "";\n                    display: block;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    transition: all 0.3s ease-in-out;\n                    opacity: 0;\n                }\n                .is-design-list>li:hover .is-overlay:after,\n                .is-design-list>li:focus .is-overlay:after {\n                    opacity: 0.9;\n                }\n                .dark .is-design-list>li .is-overlay:after {\n                    background: rgb(78 78 78 / 13%);\n                }\n        \n                .is-category-list {\n                    position: relative;\n                    top: 0px;\n                    left: 0px;\n                    width: 100%;\n                    height: 80px;\n                    box-sizing: border-box;\n                    z-index: 1;\n                }\n        \n                .is-category-list>div {\n                    white-space: nowrap;\n                    padding: 0 30px;\n                    box-sizing: border-box;\n                    font-family: sans-serif;\n                    font-size: 10px;\n                    text-transform: uppercase;\n                    letter-spacing: 2px;\n                    // background: #f5f5f5;\n                    background: ${this.builder.styleSnippetTabsBackground};\n                    // box-shadow: 0 5px 8px rgb(0 0 0 / 4%);\n                }\n        \n                .is-category-list a {\n                    display: inline-block;\n                    padding: 10px 20px;\n                    // background: #fefefe;\n                    // color: #000;\n                    background: ${this.builder.styleSnippetTabItemBackground};\n                    color: ${this.builder.styleSnippetTabItemColor};\n                    border-radius: 50px;\n        \n                    margin: 0 12px 0 0;\n                    text-decoration: none;\n                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);\n                    transition: box-shadow ease 0.3s;\n                }\n        \n                .is-category-list a:hover {\n                    /*background: #fafafa;*/\n                    background: ${this.builder.styleSnippetTabItemBackgroundHover};\n                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);\n                    // color: #000;\n                    color: ${this.builder.styleSnippetTabItemColor};\n                }\n        \n                .is-category-list a.active {\n                    // background: #f5f5f5;\n                    background: ${this.builder.styleSnippetTabItemBackgroundActive};\n                    // color: #000;\n                    color: ${this.builder.styleSnippetTabItemColor};\n                    box-shadow: none;\n                    cursor: default;\n                }\n\n                .is-category-list a:focus-visible {\n                    outline:  ${this.builder.styleOutlineColor} 2px solid;\n                }\n        \n                .is-more-categories {\n                    display: none;\n                    position: absolute;\n                    width: 400px;\n                    box-sizing: border-box;\n                    padding: 0;\n                    z-index: 1;\n                    font-family: sans-serif;\n                    font-size: 10px;\n                    text-transform: uppercase;\n                    letter-spacing: 2px;\n                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);\n                    // background: #fff;\n                    background: ${this.builder.styleSnippetMoreItemBackground};\n                }\n        \n                .is-more-categories a {\n                    width: 200px;\n                    float: left;\n                    display: block;\n                    box-sizing: border-box;\n                    padding: 12px 20px;\n                    // background: #fff;\n                    background: ${this.builder.styleSnippetMoreItemBackground};\n                    text-decoration: none;\n                    // color: #000;\n                    color: ${this.builder.styleSnippetMoreItemColor};\n                    line-height: 1.6;\n                    outline: none;\n                }\n        \n                .is-more-categories a:hover,\n                .is-more-categories a:focus {\n                    // background: #eee;\n                    background: ${this.builder.styleSnippetMoreItemBackgroundHover};\n                }\n        \n                .is-more-categories a.active {\n                    // background: #eee;\n                    background: ${this.builder.styleSnippetMoreItemBackgroundActive};\n                }\n        \n                .is-more-categories.active {\n                    display: block;\n                }\n        \n                /* First Loading */\n                /* .is-category-list {\n                    display: none;\n                }\n        \n                .is-design-list {\n                    display: none;\n                }\n        \n                .pace {\n                    -webkit-pointer-events: none;\n                    pointer-events: none;\n                    -webkit-user-select: none;\n                    -moz-user-select: none;\n                    user-select: none;\n                }\n        \n                .pace-inactive {\n                    display: none;\n                }\n        \n                .pace .pace-progress {\n                    background: #000000;\n                    position: fixed;\n                    z-index: 2000;\n                    top: 0;\n                    right: 100%;\n                    width: 100%;\n                    height: 2px;\n                } */\n        \n                .is-more-categories>a:nth-child(0) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(1) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(2) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(3) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(4) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(5) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(6) {\n                    display: none\n                }\n        \n                .is-more-categories>a:nth-child(7) {\n                    display: none\n                }\n        \n                @media all and (max-width: 1212px) {\n                    .is-categories>a:nth-child(7):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(7) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 1070px) {\n                    .is-categories>a:nth-child(6):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(6) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 940px) {\n                    .is-categories>a:nth-child(5):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(5) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 700px) {\n                    .is-categories>a:nth-child(4):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(4) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 555px) {\n                    .is-categories>a:nth-child(3):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(3) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 415px) {\n                    .is-categories>a:nth-child(2):not(.more-snippets) {\n                        display: none\n                    }\n        \n                    .is-more-categories>a:nth-child(2) {\n                        display: block\n                    }\n                }\n        \n                @media all and (max-width: 640px) {\n                    .is-more-categories a {\n                        width: 150px;\n                        padding: 10px 5px 10px 15px;\n                        font-size: 10px;\n                    }\n        \n                    .is-more-categories {\n                        left: 0 !important;\n                        width: 100% !important;\n                    }\n                }\n            </style>\n        </head>\n        \n        <body${this.builder.styleDark?' class="dark"':""}${this.builder.styleColored?' class="colored"':""}${this.builder.styleColoredDark?' class="colored-dark"':""}${this.builder.styleLight?' class="light"':""}>\n\n            <svg style="display:none">\n                <defs>\n                    <symbol viewBox="0 0 512 512" id="ion-ios-close-empty">\n                        <path d="M340.2 160l-84.4 84.3-84-83.9-11.8 11.8 84 83.8-84 83.9 11.8 11.7 84-83.8 84.4 84.2 11.8-11.7-84.4-84.3 84.4-84.2z"></path>\n                    </symbol>\n                </defs>\n            </svg>\n        \n            <button class="is-pop-close" tabindex="-1">\n                <svg class="is-icon-flex" style="width:30px;height:30px;">\n                    <use xlink:href="#ion-ios-close-empty"></use>\n                </svg>\n            </button>\n        \n            <div class="is-category-list">\n                <div class="is-categories" style="position:fixed;top:0;left:0;right:0;height:68px;padding-top:17px;box-sizing:border-box;">\n                </div>\n            </div>\n\n            <div class="is-more-categories" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            </div>\n        \n            <ul class="is-design-list" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            </ul>\n        \n            <script${this.builder.nonce?` nonce="${this.builder.nonce}"`:""}>\n        \n                var snippetPath = '${i}';\n                var snippetCategories = ${n};\n                var defaultSnippetCategory = ${o};\n\n                ${void 0!==this.builder.slider&&null!==this.builder.slider?`\n                var slider='${this.builder.slider}';`:"var slider=null;"};\n        \n                var numOfCat = snippetCategories.length;\n                if (numOfCat <= 7) {\n                    document.querySelector('.is-more-categories').style.width = '200px';\n                }\n        \n                var categorytabs = document.querySelector('.is-categories');\n                categorytabs.innerHTML = '';\n                let html_catselect = '';\n                for (var i = 0; i < numOfCat; i++) {\n                    if (i < 7) {\n                        html_catselect += '<a href="" data-cat="' + snippetCategories[i][0] + '">' + parent._cb.out(snippetCategories[i][1]) + '</a>';\n                    }\n                }\n                html_catselect += '<a href="" class="more-snippets">' + parent._cb.out('More') + '</a>';\n                categorytabs.innerHTML = html_catselect;\n        \n                var categorymore = document.querySelector('.is-more-categories');\n                html_catselect = '';\n                for (var i = 0; i < numOfCat; i++) {\n                    html_catselect += '<a href="" data-cat="' + snippetCategories[i][0] + '">' + parent._cb.out(snippetCategories[i][1]) + '</a>';\n                }\n                categorymore.innerHTML = html_catselect;\n        \n                // Show/hide "More" button\n                if (numOfCat <= 7) {\n                    var bHasMore = false;\n        \n                    const childNodes = categorymore.childNodes;\n                    let i = childNodes.length;\n                    while (i--) {\n                        if(childNodes[i].style.display === 'block') {\n                            bHasMore = true;\n                        }\n                    }\n                    var more = document.querySelector('.more-snippets');\n                    if (!bHasMore) more.style.display = 'none';\n                    else more.style.display = '';\n                }\n        \n                var elms = categorytabs.querySelectorAll('a[data-cat="' + defaultSnippetCategory + '"]'); //.classList.add('active');\n                Array.prototype.forEach.call(elms, function(elm){\n                    elm.classList.add('active');\n                });\n                elms = categorymore.querySelectorAll('a[data-cat="' + defaultSnippetCategory + '"]'); //.classList.add('active');\n                Array.prototype.forEach.call(elms, function(elm){\n                    elm.classList.add('active');\n                });\n\n\n                document.addEventListener('keydown', function(e){\n                    if(e.keyCode === 27) { // escape key\n                        const moreCategories = document.querySelector('.is-more-categories');\n                        if(moreCategories.classList.contains('active')) {\n                            moreCategories.classList.remove('active');\n                            const activeTab = categorylist.querySelector('.more-snippets');\n                            activeTab.classList.remove('active');\n                            activeTab.focus();\n                        } else {\n                            const modal = parent.document.querySelector('.is-modal.snippets');\n                            removeClass(modal, 'active');\n                        }\n                    }\n                });\n\n\n                let categorylist = document.querySelector('.is-category-list');\n                let designlist = document.querySelector('.is-design-list');\n\n                const select = (elm) => {\n\n                    if(elm.classList.contains('active')) {\n                        return false;\n                    }\n    \n                    var cat = elm.getAttribute('data-cat');\n                    if (cat) if(designlist.querySelectorAll('[data-cat="' + cat + '"]').length === 0) {\n\n                        for (let i = 0; i <snippets.length; i++) {\n                    \n                            var thumb = snippets[i].thumbnail;\n                            \n                            thumb = snippetPath + thumb;    \n    \n                            if (snippets[i].category === cat) {\n                                designlist.insertAdjacentHTML('beforeend', '<li role="button" tabindex="0" data-id="' + snippets[i].id + '" data-cat="' + snippets[i].category + '"><img src="' + thumb + '"><span class="is-overlay"></span></li>');\n                            \n                                var newitem = designlist.querySelector('[data-id="' + snippets[i].id + '"]');\n                                newitem.addEventListener('click', function(e){\n                                    \n                                    var snippetid = e.target.parentNode.getAttribute('data-id');\n                                    addSnippet(snippetid);\n    \n                                });\n\n                                newitem.addEventListener('keydown', (e)=>{\n                                    if ((e.which === 9 && !e.shiftKey)) { // tab\n                                        let last = false;\n                                        if(e.target.nextElementSibling) {\n                                            if(!e.target.nextElementSibling.classList.contains('active')) {\n                                                last = true;\n                                            }\n                                        } else {\n                                            last = true;\n                                        }\n                                        if(last) {\n                                            e.preventDefault();\n                                            let activeTab = categorylist.querySelector('.active');\n                                            if(activeTab) activeTab.focus();\n                                            else {\n                                                activeTab = categorylist.querySelector('.more-snippets');\n                                                activeTab.focus();\n                                            }\n                                        }\n                                    }\n                                    if ((e.which === 9 && e.shiftKey)) { // shift + tab\n                                        let first = false;\n                                        if(e.target.previousElementSibling) {\n                                            if(!e.target.previousElementSibling.classList.contains('active')) {\n                                                first = true;\n                                            }\n                                        } else {\n                                            first = true;\n                                        }\n                                        if(first) {\n                                            e.preventDefault();\n                                            let activeTab = categorylist.querySelector('.active');\n                                            if(activeTab) activeTab.focus();\n                                            else {\n                                                activeTab = categorylist.querySelector('.more-snippets');\n                                                activeTab.focus();\n                                            }\n                                        }\n                                    }\n                                });\n\n                            }\n    \n                        }    \n                    }\n    \n                    if (cat) {\n                        // Hide all, show items from selected category\n                        var categorylist_items = categorylist.querySelectorAll('a');    \n                        Array.prototype.forEach.call(categorylist_items, function(elm){\n                            elm.className = elm.className.replace('active', '');\n                        });\n                        categorymore.className = categorymore.className.replace('active', ''); \n                        var categorymore_items = categorymore.querySelectorAll('a');\n                        Array.prototype.forEach.call(categorymore_items, function(elm){\n                            elm.className = elm.className.replace('active', '');\n                        });\n    \n                        var items = designlist.querySelectorAll('li');\n                        Array.prototype.forEach.call(items, function(elm){\n                            elm.style.display = 'none';\n                            elm.classList.remove('active');\n                        });\n                        Array.prototype.forEach.call(items, function(elm){\n                            var catSplit = elm.getAttribute('data-cat').split(',');\n                            for (var j = 0; j < catSplit.length; j++) {\n                                if (catSplit[j] == cat) {\n                                    elm.style.display = ''; // TODO: hide & show snippets => animated\n                                    elm.classList.add('active');\n                                }\n                            }\n                        });\n                        \n                    } else {\n                        // show dropdown\n                        var more = document.querySelector('.more-snippets');\n                        var moreCategories = document.querySelector('.is-more-categories');\n    \n                        var _width = moreCategories.offsetWidth;\n                        more.classList.add('active');\n                        moreCategories.classList.add('active');\n                        var top = more.getBoundingClientRect().top;\n                        var left = more.getBoundingClientRect().left;\n                        top = top + 50;\n                        moreCategories.style.top = top + 'px';\n                        moreCategories.style.left = left + 'px';\n                    }\n                    elm.classList.add('active');\n    \n                };\n\n                let tabs = document.querySelectorAll('.is-categories a');\n                Array.prototype.forEach.call(tabs, (tab) => {\n        \n                    tab.addEventListener('keydown', (e)=>{\n                        e.preventDefault();\n        \n                        if ((e.which === 39 && e.target.nextElementSibling)) { // arrow right key pressed\n                            e.target.nextElementSibling.focus();\n                        } else if ((e.which === 37 && e.target.previousElementSibling)) { // arrow left key pressed\n                            e.target.previousElementSibling.focus();\n                        } else if(e.keyCode === 13 || e.keyCode === 32) { // enter or spacebar key\n                            select(e.target);\n                        } else if ((e.which === 9 && !e.shiftKey)) { // tab key pressed\n        \n                            let moreCategories = document.querySelector('.is-more-categories');\n                            if(moreCategories.classList.contains('active')) {\n                 \n                                // Redirect to dropdown list\n                                let firstItem;\n                                let activeItem;\n                                let moreCategories = document.querySelector('.is-more-categories');\n                                let items = moreCategories.querySelectorAll('a');\n                                items.forEach(item=>{\n                                    let display = window.getComputedStyle(item).getPropertyValue('display');\n                                    if(display==='block') {\n                                        item.classList.add('show');\n                                        if(item.classList.contains('active')) {\n                                            activeItem=item;\n                                        }\n                                    } else {\n                                        item.classList.remove('show');\n                                    }\n                                });\n                                firstItem = moreCategories.querySelector('.show');\n                                if(activeItem) {\n                                    activeItem.focus();\n                                } else {\n                                    firstItem.focus();\n                                }\n                                return;\n\n                            }\n\n                            // Redirect to tab content\n                            let inputs = [];\n                            let controls = designlist.querySelectorAll('.active');\n                            controls.forEach(control=>{\n                                inputs.push(control);\n                            });\n        \n                            if(inputs.length===0) return;\n        \n                            let firstInput = inputs[0];\n        \n                            firstInput.focus();\n                        } else if(e.which === 40 && e.target.classList.contains('more-snippets')) { // down\n                 \n                            // Redirect to dropdown list\n                            let firstItem;\n                            let activeItem;\n                            let moreCategories = document.querySelector('.is-more-categories');\n                            let items = moreCategories.querySelectorAll('a');\n                            items.forEach(item=>{\n                                let display = window.getComputedStyle(item).getPropertyValue('display');\n                                if(display==='block') {\n                                    item.classList.add('show');\n                                    if(item.classList.contains('active')) {\n                                        activeItem=item;\n                                    }\n                                } else {\n                                    item.classList.remove('show');\n                                }\n                            });\n                            firstItem = moreCategories.querySelector('.show');\n                            if(activeItem) {\n                                activeItem.focus();\n                            } else {\n                                firstItem.focus();\n                            }\n\n                        } \n\n                        \n                    });\n        \n                    tab.addEventListener('click', (e)=>{\n                        e.preventDefault();\n\n                        e.target.focus();\n        \n                        select(e.target);\n                    });\n        \n                });\n\n                let dropdownItems = document.querySelectorAll('.is-more-categories a');\n                Array.prototype.forEach.call(dropdownItems, (item) => {\n\n                    item.addEventListener('keydown', (e)=>{\n                        e.preventDefault();\n                        if(e.keyCode === 38 && e.target.previousElementSibling && window.getComputedStyle(e.target.previousElementSibling).getPropertyValue('display')==='block') { // up\n                            e.target.previousElementSibling.focus();\n                        } else if(e.keyCode === 40 && e.target.nextElementSibling && window.getComputedStyle(e.target.nextElementSibling).getPropertyValue('display')==='block') { // down\n                            e.target.nextElementSibling.focus();\n                        } else if(e.keyCode === 13 || e.keyCode === 32) { // enter or spacebar key\n                            select(e.target);\n                        } else if ((e.which === 9 && !e.shiftKey)) { // tab key pressed\n        \n                            // Redirect to tab content\n                            let inputs = [];\n                            let controls = designlist.querySelectorAll('.active');\n                            controls.forEach(control=>{\n                                inputs.push(control);\n                            });\n        \n                            if(inputs.length===0) return;\n        \n                            let firstInput = inputs[0];\n        \n                            firstInput.focus();\n                        } \n                        \n                    });\n        \n                    item.addEventListener('click', (e)=>{\n                        e.preventDefault();\n\n                        e.target.focus();\n        \n                        select(e.target);\n                    });\n                });\n\n\n        \n                var snippets = data_basic.snippets; //DATA\n\n                if (slider !== null){\n                    if(slider==='slick') {\n                        //remove glide\n                        const predicate = (item) => (item.type!=='glide');\n                        snippets = snippets.filter(predicate);\n                    } else if(slider==='glide') {\n                        //remove slick\n                        const predicate = (item) => (item.type!=='slick');\n                        snippets = snippets.filter(predicate);\n                    } else if(slider==='all') {\n                        // Do Nothing\n                    } else {\n                        // remove all slider (if incorrect settings)\n                        const predicate = (item) => (item.type!=='glide' && item.type!=='slick');\n                        snippets = snippets.filter(predicate);\n                    }\n\n                    // for (let i = 0; i < snippets.length; i++) {\n                    //     console.log(snippets[i].type)\n                    // }\n\n                } else {\n                    // Backward compatible OR if slider param not set\n\n                    // Hide slider snippet if slick is not included\n                    var bHideSliderSnippet = true;\n                    if(parent._cb.win.jQuery) {\n                        if(parent._cb.win.jQuery.fn.slick) {\n                            bHideSliderSnippet = false;\n                        }\n                    }\n                    if(bHideSliderSnippet){\n                        const result = snippets.filter((item)=>{\n                            return item.type !== 'slick';\n                        });\n                        snippets = [...result];\n                    } \n\n                    if(!(parent._cb.win.Glide)){\n                        const result = snippets.filter((item)=>{\n                            return !(item.glide || item.type === 'glide');\n                        });\n                        snippets = [...result];\n                    }\n\n                    // for (let i = 0; i < snippets.length; i++) {\n                    //     console.log(snippets[i].type)\n                    // }\n\n                }\n                \n\n                for (let i = 0; i <snippets.length; i++) {\n                    \n                    snippets[i].id = i+1;\n                    var thumb = snippets[i].thumbnail;\n        \n                    thumb = snippetPath + thumb;\n        \n                    if (snippets[i].category === defaultSnippetCategory + '') {\n                        designlist.insertAdjacentHTML('beforeend', '<li class="active" role="button" tabindex="0" data-id="' + snippets[i].id + '" data-cat="' + snippets[i].category + '"><img src="' + thumb + '"><span class="is-overlay"></span></li>');\n                    \n                        var newitem = designlist.querySelector('[data-id="' + snippets[i].id + '"]');\n                        newitem.addEventListener('click', function(e){\n        \n                            var snippetid = e.target.parentNode.getAttribute('data-id');\n                            addSnippet(snippetid);\n        \n                        });\n        \n                        newitem.addEventListener('keydown', (e)=>{\n\n                            if ((e.which === 9 && !e.shiftKey)) { // tab\n                                let last = false;\n                                if(e.target.nextElementSibling) {\n                                    if(!e.target.nextElementSibling.classList.contains('active')) {\n                                        last = true;\n                                    }\n                                } else {\n                                    last = true;\n                                }\n                                if(last) {\n                                    e.preventDefault();\n                                    let activeTab = categorylist.querySelector('.active');\n                                    if(activeTab) activeTab.focus();\n                                    else {\n                                        activeTab = categorylist.querySelector('.more-snippets');\n                                        activeTab.focus();\n                                    }\n                                }\n                            }\n                            if ((e.which === 9 && e.shiftKey)) { // shift + tab\n                                let first = false;\n                                if(e.target.previousElementSibling) {\n                                    if(!e.target.previousElementSibling.classList.contains('active')) {\n                                        first = true;\n                                    }\n                                } else {\n                                    first = true;\n                                }\n                                if(first) {\n                                    e.preventDefault();\n                                    let activeTab = categorylist.querySelector('.active');\n                                    if(activeTab) activeTab.focus();\n                                    else {\n                                        activeTab = categorylist.querySelector('.more-snippets');\n                                        activeTab.focus();\n                                    }\n                                }\n                            }\n                        });\n\n                    }\n\n                }\n        \n\n\n\n                /*\n                elms = categorymore.querySelectorAll('a');\n                Array.prototype.forEach.call(elms, function(elm){\n        \n                    elm.addEventListener('click', function(e){\n                        \n                        var cat = elm.getAttribute('data-cat');\n                        if(designlist.querySelectorAll('[data-cat="' + cat + '"]').length === 0) {\n        \n                            for (let i = 0; i <snippets.length; i++) {\n                        \n                                var thumb = snippets[i].thumbnail;\n                                \n                                thumb = snippetPath + thumb;\n        \n                                if (snippets[i].category === cat) {\n                      \n                                    designlist.insertAdjacentHTML('beforeend', '<li role="button" tabindex="0" data-id="' + snippets[i].id + '" data-cat="' + snippets[i].category + '"><img src="' + thumb + '"><span class="is-overlay"></span></li>');\n                                \n                                    var newitem = designlist.querySelector('[data-id="' + snippets[i].id + '"]');\n                                    newitem.addEventListener('click', function(e){\n                                        \n                                        var snippetid = e.target.parentNode.getAttribute('data-id');\n                                        addSnippet(snippetid);\n        \n                                    });\n                                }\n        \n                            }    \n                        }\n        \n                        // Hide all, show items from selected category\n                        Array.prototype.forEach.call(elms, function(elm){\n                            elm.className = elm.className.replace('active', '');\n                        });\n                        categorymore.className = categorymore.className.replace('active', ''); // hide popup\n                        //var categorymore_items = categorymore.querySelectorAll('a');\n                        \n                        var categorylist = document.querySelector('.is-category-list');\n                        var categorylist_items = categorylist.querySelectorAll('a');                \n                        Array.prototype.forEach.call(categorylist_items, function(elm){\n                            elm.className = elm.className.replace('active', '');\n                        });\n                            \n                        var more = document.querySelector('.more-snippets');\n                        more.className = more.className.replace('active', '');\n        \n                        var items = designlist.querySelectorAll('div');\n                        Array.prototype.forEach.call(items, function(elm){\n                            elm.style.display = 'none';\n                            elm.classList.remove('active');\n                        });\n                        Array.prototype.forEach.call(items, function(elm){\n                            var catSplit = elm.getAttribute('data-cat').split(',');\n                            for (var j = 0; j < catSplit.length; j++) {\n                                if (catSplit[j] == cat) {\n                                    elm.style.display = '';\n                                    elm.classList.add('active');\n                                }\n                            }\n                        });\n        \n                        elm.classList.add('active');\n        \n                        e.preventDefault();\n                    });\n        \n                });\n                */\n        \n                var close = document.querySelector('.is-pop-close');\n                close.addEventListener('click', function(e){\n                    var modal = parent.document.querySelector('.is-modal.snippets');\n                    removeClass(modal, 'active');\n                });\n        \n                // Add document Click event\n                document.addEventListener('click', function(e){\n                    e = e || window.event;\n                    var target = e.target || e.srcElement;  \n        \n                    if(parentsHasClass(target, 'more-snippets')) return;\n                    if(hasClass(target, 'more-snippets')) return;\n                    \n                    var more = document.querySelector('.more-snippets');\n                    var moreCategories = document.querySelector('.is-more-categories');\n                    \n                    more.className = more.className.replace('active', '');\n                    moreCategories.className = moreCategories.className.replace('active', '');\n                });\n        \n                parent.document.addEventListener('click', function(e){\n                    var more = document.querySelector('.more-snippets');\n                    var moreCategories = document.querySelector('.is-more-categories');\n                    \n                    more.className = more.className.replace('active', '');\n                    moreCategories.className = moreCategories.className.replace('active', '');\n                });\n        \n                function addSnippet(snippetid) {\n                    \n                    // TODO: var framework = parent._cb.opts.framework;\n                    var snippetPathReplace = parent._cb.opts.snippetPathReplace;\n                    var emailMode = parent._cb.opts.emailMode;\n                    \n                    // \n                    for (let i = 0; i <snippets.length; i++) {\n                        if(snippets[i].id + ''=== snippetid) {\n                            \n                            var html = snippets[i].html;\n                            var noedit = snippets[i].noedit;\n                            break;\n                        }\n                    }\n        \n                    var bSnippet;\n                    if (html.indexOf('"row') === -1) {\n                        bSnippet = true; // Just snippet (without row/column grid)\n                    } else {\n                        bSnippet = false; // Snippet is wrapped in row/colum\n                    }\n                    if (emailMode) bSnippet = false;\n\n                    if(bSnippet) {\n                        var quickadd = parent._cb.builderStuff.querySelector('.quickadd');\n                        var mode = quickadd.getAttribute('data-mode');\n                        if(!mode) {\n                            // in case of using viewSnippets() to open the dialog (mode=null) => change to non snippet.\n                            html = '<div class="row">' +\n                                '<div class="column full">' +\n                                html +\n                                '</div>' +\n                            '</div>';\n                            bSnippet=false;\n                        }\n                    }\n         \n                    // Convert snippet into your defined 12 columns grid   \n                    var rowClass = parent._cb.opts.row; //row\n                    var colClass = parent._cb.opts.cols; //['col s1', 'col s2', 'col s3', 'col s4', 'col s5', 'col s6', 'col s7', 'col s8', 'col s9', 'col s10', 'col s11', 'col s12']\n                    if(rowClass!=='' && colClass.length===12){\n\n                        //html = html.replace(new RegExp('row clearfix', 'g'), rowClass);\n                        html = html.replace(new RegExp('row clearfix', 'g'), 'row'); // backward\n                        html = html.replace(new RegExp('"row', 'g'), '"' + rowClass);\n                        \n                        html = html.replace(new RegExp('column full', 'g'), colClass[11]);\n                        html = html.replace(new RegExp('column half', 'g'), colClass[5]);\n                        html = html.replace(new RegExp('column third', 'g'), colClass[3]);\n                        html = html.replace(new RegExp('column fourth', 'g'), colClass[2]);\n                        html = html.replace(new RegExp('column fifth', 'g'), colClass[1]);\n                        html = html.replace(new RegExp('column sixth', 'g'), colClass[1]);\n                        html = html.replace(new RegExp('column two-third', 'g'), colClass[7]);\n                        html = html.replace(new RegExp('column two-fourth', 'g'), colClass[8]);\n                        html = html.replace(new RegExp('column two-fifth', 'g'), colClass[9]);\n                        html = html.replace(new RegExp('column two-sixth', 'g'), colClass[9]);\n                    }\n                    \n                    html = html.replace(/{id}/g, makeid()); // Replace {id} with auto generated id (for custom code snippet)\n                    \n                    if(parent._cb.opts.onAdd){\n                        html = parent._cb.opts.onAdd(html);\n                    }\n\n                    if(snippetPathReplace.length>0) {\n                        if (snippetPathReplace[0] != '') {\n                            var regex = new RegExp(snippetPathReplace[0], 'g');\n                            html = html.replace(regex, snippetPathReplace[1]);\n\n                            /* for encoded replace, change / to %2F  */\n                            var slash = new RegExp('/', 'g');\n                            var snippetPathReplace_0 = snippetPathReplace[0].replace(slash, '%2F');\n                            var snippetPathReplace_1 = snippetPathReplace[1].replace(slash, '%2F');\n                            regex = new RegExp(snippetPathReplace_0, 'g');\n                            html = html.replace(regex, snippetPathReplace_1);\n                        }\n                    }\n                    \n                    parent._cb.addSnippet(html, bSnippet, noedit);\n        \n                    var modal = parent.document.querySelector('.is-modal.snippets');\n                    removeClass(modal, 'active');\n        \n                }\n        \n                function hasClass(element, classname) {\n                    if(!element) return false;\n                    return element.classList ? element.classList.contains(classname) : new RegExp('\\b'+ classname+'\\b').test(element.className);\n                }\n        \n                function removeClass(element, classname) {\n                    if(!element) return;\n                    if(element.classList.length>0) {\n                        element.className = element.className.replace(classname, '');\n                    }\n                }\n                \n                function parentsHasClass(element, classname) {\n                    while (element) {\n                        if(element.tagName === 'BODY' || element.tagName === 'HTML') return false;\n                        if(!element.classList) return false;\n                        if (element.classList.contains(classname)) {\n                            return true;\n                        }\n                        element = element.parentNode;\n                    }\n                }\n        \n                function makeid() {//http://stackoverflow.com/questions/1349404/generate-a-string-of-5-random-characters-in-javascript\n                    var text = "";\n                    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";\n                    for (var i = 0; i < 2; i++)\n                        text += possible.charAt(Math.floor(Math.random() * possible.length));\n        \n                    var text2 = "";\n                    var possible2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";\n                    for (var i = 0; i < 5; i++)\n                        text2 += possible2.charAt(Math.floor(Math.random() * possible2.length));\n        \n                    return text + text2;\n                }\n        \n            <\/script>\n        \n        </textarea>\n        </body>\n        \n        </html>\n        `}}const qi=t=>{const e=t.util,i=t.builderStuff,n=t.dom;let o=i.querySelector(".quickadd");if(!o){const s=`<div class="is-pop quickadd arrow-right" style="z-index:10003;" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n        <div class="is-pop-close" style="display:none;z-index:1;width:40px;height:40px;position:absolute;top:0px;right:0px;box-sizing:border-box;padding:0;line-height:40px;font-size: 12px;color:#777;text-align:center;cursor:pointer;"><svg class="is-icon-flex" style="width:40px;height:40px;"><use xlink:href="#ion-ios-close-empty"></use></svg></div>\n        <div class="is-pop-tabs">\n            <div class="is-pop-tab-item" data-value="left">${e.out("Add to Left")}</div>\n            <div class="is-pop-tab-item active" data-value="right">${e.out("Add to Right")}</div>\n        </div>\n        <div style="padding:12px;display:flex;flex-direction:row;flex-flow: wrap;justify-content: center;align-items: center;">\n            <button title="${e.out("Paragraph")}" class="add-paragraph"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#icon-align-full"></use></svg></span>${e.out("Paragraph")}</button>\n            <button title="${e.out("Headline")}" class="add-headline"><span style="font-family:serif;display:block;margin:0 0 8px;font-size:11px;">H</span>${e.out("Headline")}</button>\n            <button title="${e.out("Image")}" class="add-image"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex ion-image" style="width:14px;height:14px;"><use xlink:href="#ion-image"></use></svg></span>${e.out("Image")}</button>\n            <button title="${e.out("List")}" class="add-list"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-list-bullet"></use></svg></span>${e.out("List")}</button>\n            <button title="${e.out("Heading 1")}" class="add-heading1"><span style="font-family:serif;display:block;margin:0 0 8px;">H1</span>${e.out("Heading 1")}</button>\n            <button title="${e.out("Heading 2")}" class="add-heading2"><span style="font-family:serif;display:block;margin:0 0 8px;">H2</span>${e.out("Heading 2")}</button>\n            <button title="${e.out("Heading 3")}" class="add-heading3"><span style="font-family:serif;display:block;margin:0 0 8px;">H3</span>${e.out("Heading 3")}</button>\n            <button title="${e.out("Heading 4")}" class="add-heading4"><span style="font-family:serif;display:block;margin:0 0 8px;">H4</span>${e.out("Heading 4")}</button>\n            <button title="${e.out("Quote")}" class="add-quote"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-quote"></use></svg></span>${e.out("Quote")}</button>\n            <button title="${e.out("Preformatted")}" class="add-preformatted"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-code"></use></svg></span>${e.out("Preformatted")}</button>\n            ${t.opts.emailMode?"":`<button title="${e.out("Button")}" class="add-button"><span style="display:block;margin:0 0 8px;"><span style="display:inline-block;border:#a1a1a1 1px solid;background:#f3f3f3;width:10px;height:4px;"></span></span>${e.out("Button")}</button>`}\n            ${t.opts.emailMode?"":`<button title="${e.out("Two Button")}" class="add-twobutton"><span style="display:block;margin:0 0 8px;"><span style="display:inline-block;border:#a1a1a1 1px solid;background:#f3f3f3;width:10px;height:4px;"></span></span>${e.out("Two Button")}</button>`}\n            <button title="${e.out("Youtube")}" class="add-youtube"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-social-youtube-outline"></use></svg></use></svg></svg></span>${e.out("Youtube")}</button>\n            <button title="${e.out("Video")}" class="add-video"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-ios-play"></use></svg></use></svg></svg></span>${e.out("Video")}</button>\n            <button style="display:none" title="${e.out("Audio")}" class="add-audio"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-volume-medium"></use></svg></use></svg></svg></span>${e.out("Audio")}</button>\n            <button title="${e.out("Map")}" class="add-map"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-location"></use></svg></use></svg></svg></span>${e.out("Map")}</button>\n            <button title="${e.out("Table")}" class="add-table"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#icon-table"></use></svg></use></svg></svg></span>${e.out("Table")}</button>\n            <button title="${e.out("Icon")}" class="add-icon"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-android-happy"></use></svg></use></svg></svg></span>${e.out("Icon")}</button>\n            <button title="${e.out("Social Links")}" class="add-social"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-social-twitter"></use></svg></use></svg></svg></span>${e.out("Social Links")}</button>\n            <button title="${e.out("HTML/JS")}" class="add-code"><span style="display:block;margin:0 0 8px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-code"></use></svg></use></svg></svg></span>${e.out("HTML/JS")}</button>\n            <button title="${e.out("Spacer")}" class="add-spacer"><span style="display:block;margin:0 0 8px;"><span style="display:inline-block;background:#eee;width:30px;height:5px;"></span></span>${e.out("Spacer")}</button>\n            <button style="display:none" title="${e.out("Line")}" class="add-line"><span style="display:block;margin:0 0 8px;"><span style="display:inline-block;background:#ddd;width:30px;height:2px;"></span></span>${e.out("Line")}</button>\n            <div class="pop-separator"></div>\n            <button title="${e.out("More...")}" class="add-more" style="flex-direction:initial;">${e.out("More...")}</button>\n        </div>\n        </div>\n        \n        <div class="is-modal snippets" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content" style="max-width:1250px;height:90%;padding:0;">\n                <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n            </div>\n        </div>\n        `;n.appendHtml(i,s),o=i.querySelector(".quickadd"),document.addEventListener("click",(t=>{var i=(t=t||window.event).target||t.srcElement;if("flex"===o.style.display){let t=n.parentsHasClass(i,"quickadd"),s=n.parentsHasClass(i,"row-add"),r=n.parentsHasClass(i,"is-rowadd-tool"),l=n.parentsHasClass(i,"cell-add"),a=n.parentsHasClass(i,"elm-add"),d=n.parentsHasClass(i,"row-add-initial");if(t||s||r||l||a||d)return;e.hidePop(o)}}));let r=o.querySelectorAll(".is-pop-tab-item");Array.prototype.forEach.call(r,(t=>{n.addEventListener(t,"click",(t=>{let e=o.querySelectorAll(".is-pop-tab-item");Array.prototype.forEach.call(e,(t=>{n.removeClass(t,"active")})),n.addClass(t.target,"active"),"left"===o.querySelector(".active").getAttribute("data-value")?o.setAttribute("data-mode","cell-left"):o.setAttribute("data-mode","cell-right")}))}));let l=o.querySelector(".add-paragraph");n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. \n            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, \n            when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>",t)})),l=o.querySelector(".add-headline"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div class="display">\n                <h1>Headline Goes Here</h1>\n                <p>Lorem Ipsum is simply dummy text</p>\n            </div>',t)})),l=o.querySelector(".add-image"),n.addEventListener(l,"click",(()=>{const i=o.getAttribute("data-mode");let n=`<img src="${t.opts.snippetPath}example.png" alt="" />`;t.opts.snippetSampleImage&&(n=`<img src="${t.opts.snippetSampleImage}" alt="" />`),e.addContent(n,i)})),l=o.querySelector(".add-heading1"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<h1>Heading 1 here</h1>",t)})),l=o.querySelector(".add-heading2"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<h2>Heading 2 here</h2>",t)})),l=o.querySelector(".add-heading3"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<h3>Heading 3 here</h3>",t)})),l=o.querySelector(".add-heading4"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<h4>Heading 4 here</h4>",t)})),l=o.querySelector(".add-preformatted"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<pre>Lorem Ipsum is simply dummy text of the printing and typesetting industry. \n            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, \n            when an unknown printer took a galley of type and scrambled it to make a type specimen book.</pre>",t)})),l=o.querySelector(".add-list"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<ul style="list-style: initial;padding-left: 20px;">\n                <li>Lorem Ipsum is simply dummy text</li>\n                <li>Lorem Ipsum is simply dummy text</li>\n            </ul>',t)})),l=o.querySelector(".add-quote"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<blockquote>Lorem Ipsum is simply dummy text</blockquote>",t)})),l=o.querySelector(".add-button"),l&&n.addEventListener(l,"click",(()=>{const i=o.getAttribute("data-mode");let n='<div>\n            <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 text-black leading-12 rounded border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Read More</a>\n            </div>';t.opts.emailMode&&(n='<div><a href="#" role="button" style="margin-top: ;margin-right: ;margin-bottom: ;margin-left: ;display: inline-block; text-decoration: none; transition: all 0.16s ease 0s; border-style: solid; cursor: pointer; background-color: rgb(220, 220, 220); color: rgb(0, 0, 0); border-color: rgb(220, 220, 220); border-width: 2px; border-radius: 0px; padding: 13px 28px; line-height: 21px; text-transform: uppercase; font-weight: 400; font-size: 14px; letter-spacing: 3px;">Read More</a></div>'),e.addContent(n,i)})),l=o.querySelector(".add-twobutton"),l&&n.addEventListener(l,"click",(()=>{const i=o.getAttribute("data-mode");let n='<div>\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 text-black leading-12 rounded border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Read More</a>\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 border-current hover:border-current font-normal leading-12 rounded tracking-wide">Get Started</a>\n            </div>';t.opts.emailMode&&(n='<div>\n                    <a href="#" role="button" style="margin-top: ;margin-right: ;margin-bottom: ;margin-left: ;display: inline-block; text-decoration: none; transition: all 0.16s ease 0s; border-style: solid; cursor: pointer; background-color: rgb(220, 220, 220); color: rgb(0, 0, 0); border-color: rgb(220, 220, 220); border-width: 2px; border-radius: 0px; padding: 13px 28px; line-height: 21px; text-transform: uppercase; font-weight: 400; font-size: 14px; letter-spacing: 3px;">Read More</a> &nbsp;\n                    <a href="#" role="button" style="display: inline-block; text-decoration: none; transition: all 0.16s ease 0s; border-style: solid; cursor: pointer; background-color: rgba(0, 0, 0, 0); border-color: rgb(53, 53, 53); border-width: 2px; border-radius: 0px; padding: 13px 28px; line-height: 21px; text-transform: uppercase; font-weight: 600; font-size: 14px; letter-spacing: 3px; color: rgb(53, 53, 53);">Get Started</a>\n                </div>'),e.addContent(n,i)})),l=o.querySelector(".add-spacer"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div class="spacer height-80"></div>',t)})),l=o.querySelector(".add-line"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent("<hr>",t)})),l=o.querySelector(".add-code"),n.addEventListener(l,"click",(()=>{let i='<div class="row"><div class="column full" data-noedit data-html="'+encodeURIComponent("<h1 id=\"{id}\">Lorem ipsum</h1><p>This is a code block. You can edit this block using the source dialog.</p><script>var docReady = function (fn) {var stateCheck = setInterval(function () {if (document.readyState !== \"complete\") return;clearInterval(stateCheck);try{fn()}catch(e){}}, 1);};docReady(function() {document.querySelector('#{id}').innerHTML ='<b>Hello World..!</b>';});<\/script>")+'"></div></div>',n=t.opts.snippetPathReplace,o=t.opts.row,s=t.opts.cols;if(""!==o&&12===s.length&&(i=i.replace(new RegExp("row clearfix","g"),"row"),i=i.replace(new RegExp('"row',"g"),'"'+o),i=i.replace(new RegExp("column full","g"),s[11]),i=i.replace(new RegExp("column half","g"),s[5]),i=i.replace(new RegExp("column third","g"),s[3]),i=i.replace(new RegExp("column fourth","g"),s[2]),i=i.replace(new RegExp("column fifth","g"),s[1]),i=i.replace(new RegExp("column sixth","g"),s[1]),i=i.replace(new RegExp("column two-third","g"),s[7]),i=i.replace(new RegExp("column two-fourth","g"),s[8]),i=i.replace(new RegExp("column two-fifth","g"),s[9]),i=i.replace(new RegExp("column two-sixth","g"),s[9])),i=i.replace(/{id}/g,e.makeId()),t.opts.onAdd&&(i=t.opts.onAdd(i)),n.length>0&&""!==n[0]){let t=new RegExp(n[0],"g");i=i.replace(t,n[1])}t.addSnippet(i,!1,!0)})),l=o.querySelector(".add-table"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<table class="default" style="border-collapse:collapse;width:100%;">\n                <thead>\n                <tr>\n                    <td style="vertical-align:top;"><br></td>\n                    <td style="vertical-align:top;"><br></td>\n                </tr>\n                </thead>\n                <tr>\n                    <td style="vertical-align:top;"><br></td>\n                    <td style="vertical-align:top;"><br></td>\n                </tr>\n            </table>',t)})),l=o.querySelector(".add-icon"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div style="text-align: center;">\n            <i class="icon ion-android-alarm-clock size-80"></i>\n            </div>',t)})),l=o.querySelector(".add-social"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div class="is-social" style="text-align: center;">\n                <a href="https://twitter.com/"><i class="icon ion-social-twitter" style="margin-right: 1em"></i></a>\n                <a href="https://www.facebook.com/"><i class="icon ion-social-facebook" style="margin-right: 1em"></i></a>\n                <a href="mailto:you@example.com"><i class="icon ion-android-drafts"></i></a>\n            </div>',t)})),l=o.querySelector(".add-map"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div class="embed-responsive embed-responsive-16by9">\n            <iframe width="100%" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" class="mg1" src="https://maps.google.com/maps?q=Melbourne,+Victoria,+Australia&amp;hl=en&amp;sll=-7.981898,112.626504&amp;sspn=0.009084,0.016512&amp;oq=melbourne&amp;hnear=Melbourne+Victoria,+Australia&amp;t=m&amp;z=10&amp;output=embed"></iframe>\n            </div>',t)})),l=o.querySelector(".add-youtube"),n.addEventListener(l,"click",(()=>{const t=o.getAttribute("data-mode");e.addContent('<div class="embed-responsive embed-responsive-16by9">\n                <iframe width="560" height="315" src="https://www.youtube.com/embed/P5yHEKqx86U?rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>\n            </div>',t)})),l=o.querySelector(".add-video"),n.addEventListener(l,"click",(()=>{const i=o.getAttribute("data-mode");let n=`<video style="width: 100%;" loop="" autoplay="">\n                <source src="${t.opts.snippetPath}example.mp4" type="video/mp4"></video>`;t.opts.snippetSampleVideo&&(n=`<video style="width: 100%;" loop="" autoplay="">\n                    <source src="${t.opts.snippetSampleVideo}" type="video/mp4"></video>`),e.addContent(n,i)})),l=o.querySelector(".add-audio"),n.addEventListener(l,"click",(()=>{const i=o.getAttribute("data-mode");let n=`<div style="display:flex;width:100%;position:relative;margin:15px 0;background:transparent;">\n                        <audio controls="" style="width:100%">\n                            <source src="${t.opts.snippetPath}example.mp3" type="audio/mpeg">\n                            Your browser does not support the audio element.\n                        </audio>\n                    </div>`;t.opts.snippetSampleAudio&&(n=`<div style="display:flex;width:100%;position:relative;margin:15px 0;background:transparent;">\n                            <audio controls="" style="width:100%">\n                                <source src="${t.opts.snippetSampleAudio}" type="audio/mpeg">\n                                Your browser does not support the audio element.\n                            </audio>\n                    </div>`),e.addContent(n,i)}));const a=new Li(t);l=o.querySelector(".add-more"),n.addEventListener(l,"click",(()=>{let t=i.querySelector(".snippets");e.showModal(t,!1,null,!1);var n=t.querySelector("iframe").contentWindow.document;""===n.body.innerHTML&&(n.open(),n.write(a.getSnippetsHtml()),n.close()),e.hidePop(o)}))}return o};class Ti{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n,this.rowTool=new Mi(t)}moveColumnPrevious(){const t=this.util.cellSelected();t&&t.previousElementSibling&&(this.builder.uo.saveForUndo(),t.parentElement.insertBefore(t,t.previousElementSibling),this.builder.opts.onChange())}moveColumnNext(){let t=this.util;const e=t.cellSelected();if(!e)return;const i=t.cellNext(e);i&&(this.builder.uo.saveForUndo(),e.parentElement.insertBefore(i,e),this.builder.opts.onChange())}moveColumnUp(){let t=this.builder,e=this.util;const i=e.cellSelected();if(!i)return;let n=i.parentNode,o=3;if(n.querySelector(".is-row-overlay")&&(o=4),n.childElementCount-o==1){if(!n.previousElementSibling)return;{let e=4;if(this.builder.maxColumns&&(e=this.builder.maxColumns),n.previousElementSibling.childElementCount>=e+o||n.previousElementSibling.hasAttribute("data-protected"))return this.builder.uo.saveForUndo(),n.parentNode.insertBefore(n,n.previousElementSibling),void this.builder.opts.onChange();{this.builder.uo.saveForUndo();let e=n.previousElementSibling.querySelector(".is-row-tool");n.previousElementSibling.removeChild(e),e=n.previousElementSibling.querySelector(".is-rowadd-tool"),n.previousElementSibling.removeChild(e),e=n.previousElementSibling.querySelector(".is-col-tool"),n.previousElementSibling.removeChild(e),n.previousElementSibling.appendChild(i),n.parentNode.removeChild(n);let o=this.builder.doc.querySelector(".builder-active");t.applyBehaviorOn(o),setTimeout((()=>{i.click()}),30),this.builder.opts.onChange()}}}else{this.builder.uo.saveForUndo();var s=n.cloneNode(!0);s.innerHTML="",s.appendChild(i),n.parentNode.insertBefore(s,n);let e=this.builder.doc.querySelector(".builder-active");t.applyBehaviorOn(e),setTimeout((()=>{i.click()}),30),this.builder.opts.onChange()}n=i.parentNode,e.fixLayout(n),n.nextElementSibling&&e.fixLayout(n.nextElementSibling)}moveColumnDown(){let t=this.builder,e=this.util,i=this.dom;const n=e.cellSelected();if(!n)return;let o=n.parentNode,s=3;if(o.querySelector(".is-row-overlay")&&(s=4),o.childElementCount-s==1){if(!o.nextElementSibling)return;{let e=4;if(this.builder.maxColumns&&(e=this.builder.maxColumns),o.nextElementSibling.childElementCount>=e+s||o.nextElementSibling.hasAttribute("data-protected"))return this.builder.uo.saveForUndo(),o.parentNode.insertBefore(o.nextElementSibling,o),void this.builder.opts.onChange();{this.builder.uo.saveForUndo();let e=o.nextElementSibling.querySelector(".is-row-tool");o.nextElementSibling.removeChild(e),e=o.nextElementSibling.querySelector(".is-rowadd-tool"),o.nextElementSibling.removeChild(e),e=o.nextElementSibling.querySelector(".is-col-tool"),o.nextElementSibling.removeChild(e),o.nextElementSibling.appendChild(n),o.parentNode.removeChild(o);let i=this.builder.doc.querySelector(".builder-active");t.applyBehaviorOn(i),setTimeout((()=>{n.click()}),30),this.builder.opts.onChange()}}}else{this.builder.uo.saveForUndo();var r=o.cloneNode(!0);r.innerHTML="",r.appendChild(n),i.moveAfter(r,o);let e=this.builder.doc.querySelector(".builder-active");t.applyBehaviorOn(e),setTimeout((()=>{n.click()}),30),this.builder.opts.onChange()}o=n.parentNode,e.fixLayout(o),o.previousElementSibling&&e.fixLayout(o.previousElementSibling)}duplicateColumn(){let t=this.builder,e=this.util,i=this.dom;const n=e.cellSelected();if(!n)return;this.builder.uo.saveForUndo();var o=n.cloneNode(!0);i.removeClass(o,"cell-active"),o.removeAttribute("data-click"),this.builder.opts.enableDragResize&&(n.style.width="",n.style.flex="");let s=n.parentNode,r=3;s.querySelector(".is-row-overlay")&&(r=4);let l=4;if(this.builder.maxColumns&&(l=this.builder.maxColumns),s.childElementCount>=l+r)return alert(e.out("You have reached the maximum number of columns")),!1;s.insertBefore(o,n),e.fixLayout(s);let a=this.builder.doc.querySelector(".builder-active");t.applyBehaviorOn(a),setTimeout((()=>{n.click()}),30),this.builder.opts.onChange()}removeColumn(){let t=this.util;const e=t.cellSelected();if(!e)return;let i=e.parentNode,n=3;i.querySelector(".is-row-overlay")&&(n=4),t.confirm(t.out("Are you sure you want to delete this block?"),(o=>{o&&(this.builder.uo.saveForUndo(),i.childElementCount-n==1?(i.parentNode.removeChild(i),t.checkEmpty()):(i.removeChild(e),t.fixLayout(i)),t.clearActiveCell(),this.builder.opts.onChange())}))}increaseColumn(){let t=this.builder,e=this.util,i=this.dom;const n=e.cellSelected();if(!n)return;let o,s=e.cellNext(n);if(s)o=e.cellNext(s),o||(o=n.previousElementSibling);else{if(s=n.previousElementSibling,!s)return;o=s.previousElementSibling}const r=t.opts.row;let l=t.opts.cols;const a=t.opts.colsizes;if(""!==r&&l.length>0&&a.length>0){if(o)for(let t=0;t<a.length;t++){let e=a[t];for(let t=0;t<e.length;t++)if(3===e[t].length&&i.hasClass(n,e[t][0])&&i.hasClass(s,e[t][1])&&i.hasClass(o,e[t][2])&&t+1!==e.length)return this.builder.uo.saveForUndo(),i.removeClass(n,e[t][0]),i.removeClass(s,e[t][1]),i.removeClass(o,e[t][2]),i.addClass(n,e[t+1][0]),i.addClass(s,e[t+1][1]),i.addClass(o,e[t+1][2]),void this.builder.opts.onChange()}for(let t=0;t<a.length;t++){let e=a[t];for(let t=0;t<e.length;t++)if(2===e[t].length&&i.hasClass(n,e[t][0])&&i.hasClass(s,e[t][1])&&t+1!==e.length)return this.builder.uo.saveForUndo(),i.removeClass(n,e[t][0]),i.removeClass(s,e[t][1]),i.addClass(n,e[t+1][0]),i.addClass(s,e[t+1][1]),void this.builder.opts.onChange()}}else if(""!==r&&l.length>0&&(-1!==n.className.indexOf("col-md-")||(-1!==n.className.indexOf("col-sm-")?l=["col-sm-1","col-sm-2","col-sm-3","col-sm-4","col-sm-5","col-sm-6","col-sm-7","col-sm-8","col-sm-9","col-sm-10","col-sm-11","col-sm-12"]:-1!==n.className.indexOf("col-xs-")?l=["col-xs-1","col-xs-2","col-xs-3","col-xs-4","col-xs-5","col-xs-6","col-xs-7","col-xs-8","col-xs-9","col-xs-10","col-xs-11","col-xs-12"]:-1!==n.className.indexOf("col-lg-")?l=["col-lg-1","col-lg-2","col-lg-3","col-lg-4","col-lg-5","col-lg-6","col-lg-7","col-lg-8","col-lg-9","col-lg-10","col-lg-11","col-lg-12"]:-1!==n.className.indexOf("col-xl-")?l=["col-xl-1","col-xl-2","col-xl-3","col-xl-4","col-xl-5","col-xl-6","col-xl-7","col-xl-8","col-xl-9","col-xl-10","col-xl-11","col-xl-12"]:-1!==n.className.indexOf("col-xxl-")&&(l=["col-xxl-1","col-xxl-2","col-xxl-3","col-xxl-4","col-xxl-5","col-xxl-6","col-xxl-7","col-xxl-8","col-xxl-9","col-xxl-10","col-xxl-11","col-xxl-12"])),!i.hasClass(n,l[11]))){if(i.hasClass(n,l[11]))return;if(i.hasClass(s,l[0]))return;this.builder.uo.saveForUndo(),i.hasClass(n,l[10])?(i.removeClass(n,l[10]),i.addClass(n,l[11])):i.hasClass(n,l[9])?(i.removeClass(n,l[9]),i.addClass(n,l[10])):i.hasClass(n,l[8])?(i.removeClass(n,l[8]),i.addClass(n,l[9])):i.hasClass(n,l[7])?(i.removeClass(n,l[7]),i.addClass(n,l[8])):i.hasClass(n,l[6])?(i.removeClass(n,l[6]),i.addClass(n,l[7])):i.hasClass(n,l[5])?(i.removeClass(n,l[5]),i.addClass(n,l[6])):i.hasClass(n,l[4])?(i.removeClass(n,l[4]),i.addClass(n,l[5])):i.hasClass(n,l[3])?(i.removeClass(n,l[3]),i.addClass(n,l[4])):i.hasClass(n,l[2])?(i.removeClass(n,l[2]),i.addClass(n,l[3])):i.hasClass(n,l[1])?(i.removeClass(n,l[1]),i.addClass(n,l[2])):i.hasClass(n,l[0])&&(i.removeClass(n,l[0]),i.addClass(n,l[1])),i.hasClass(s,l[1])?(i.removeClass(s,l[1]),i.addClass(s,l[0])):i.hasClass(s,l[2])?(i.removeClass(s,l[2]),i.addClass(s,l[1])):i.hasClass(s,l[3])?(i.removeClass(s,l[3]),i.addClass(s,l[2])):i.hasClass(s,l[4])?(i.removeClass(s,l[4]),i.addClass(s,l[3])):i.hasClass(s,l[5])?(i.removeClass(s,l[5]),i.addClass(s,l[4])):i.hasClass(s,l[6])?(i.removeClass(s,l[6]),i.addClass(s,l[5])):i.hasClass(s,l[7])?(i.removeClass(s,l[7]),i.addClass(s,l[6])):i.hasClass(s,l[8])?(i.removeClass(s,l[8]),i.addClass(s,l[7])):i.hasClass(s,l[9])?(i.removeClass(s,l[9]),i.addClass(s,l[8])):i.hasClass(s,l[10])?(i.removeClass(s,l[10]),i.addClass(s,l[9])):i.hasClass(s,l[11])&&(i.removeClass(s,l[11]),i.addClass(s,l[10])),this.builder.opts.onChange()}}decreaseColumn(){let t=this.builder,e=this.util,i=this.dom;const n=e.cellSelected();if(!n)return;let o,s=e.cellNext(n);if(s)o=e.cellNext(s),o||(o=n.previousElementSibling);else{if(s=n.previousElementSibling,!s)return;o=s.previousElementSibling}const r=t.opts.row;let l=t.opts.cols;const a=t.opts.colsizes;if(""!==r&&l.length>0&&a.length>0){if(o)for(let t=0;t<a.length;t++){let e=a[t];for(let t=0;t<e.length;t++)if(3===e[t].length&&i.hasClass(n,e[t][0])&&i.hasClass(s,e[t][1])&&i.hasClass(o,e[t][2])&&0!==t)return this.builder.uo.saveForUndo(),i.removeClass(n,e[t][0]),i.removeClass(s,e[t][1]),i.removeClass(o,e[t][2]),i.addClass(n,e[t-1][0]),i.addClass(s,e[t-1][1]),i.addClass(o,e[t-1][2]),void this.builder.opts.onChange()}for(let t=0;t<a.length;t++){let e=a[t];for(let t=0;t<e.length;t++)if(2===e[t].length&&i.hasClass(n,e[t][0])&&i.hasClass(s,e[t][1])&&0!==t)return this.builder.uo.saveForUndo(),i.removeClass(n,e[t][0]),i.removeClass(s,e[t][1]),i.addClass(n,e[t-1][0]),i.addClass(s,e[t-1][1]),void this.builder.opts.onChange()}}else if(""!==r&&l.length>0&&(-1!==n.className.indexOf("col-md-")||(-1!==n.className.indexOf("col-sm-")?l=["col-sm-1","col-sm-2","col-sm-3","col-sm-4","col-sm-5","col-sm-6","col-sm-7","col-sm-8","col-sm-9","col-sm-10","col-sm-11","col-sm-12"]:-1!==n.className.indexOf("col-xs-")?l=["col-xs-1","col-xs-2","col-xs-3","col-xs-4","col-xs-5","col-xs-6","col-xs-7","col-xs-8","col-xs-9","col-xs-10","col-xs-11","col-xs-12"]:-1!==n.className.indexOf("col-lg-")?l=["col-lg-1","col-lg-2","col-lg-3","col-lg-4","col-lg-5","col-lg-6","col-lg-7","col-lg-8","col-lg-9","col-lg-10","col-lg-11","col-lg-12"]:-1!==n.className.indexOf("col-xl-")?l=["col-xl-1","col-xl-2","col-xl-3","col-xl-4","col-xl-5","col-xl-6","col-xl-7","col-xl-8","col-xl-9","col-xl-10","col-xl-11","col-xl-12"]:-1!==n.className.indexOf("col-xxl-")&&(l=["col-xxl-1","col-xxl-2","col-xxl-3","col-xxl-4","col-xxl-5","col-xxl-6","col-xxl-7","col-xxl-8","col-xxl-9","col-xxl-10","col-xxl-11","col-xxl-12"])),!i.hasClass(n,l[11]))){if(i.hasClass(n,l[0]))return;if(i.hasClass(s,l[11]))return;this.builder.uo.saveForUndo(),i.hasClass(n,l[11])?(i.removeClass(n,l[11]),i.addClass(n,l[10])):i.hasClass(n,l[10])?(i.removeClass(n,l[10]),i.addClass(n,l[9])):i.hasClass(n,l[9])?(i.removeClass(n,l[9]),i.addClass(n,l[8])):i.hasClass(n,l[8])?(i.removeClass(n,l[8]),i.addClass(n,l[7])):i.hasClass(n,l[7])?(i.removeClass(n,l[7]),i.addClass(n,l[6])):i.hasClass(n,l[6])?(i.removeClass(n,l[6]),i.addClass(n,l[5])):i.hasClass(n,l[5])?(i.removeClass(n,l[5]),i.addClass(n,l[4])):i.hasClass(n,l[4])?(i.removeClass(n,l[4]),i.addClass(n,l[3])):i.hasClass(n,l[3])?(i.removeClass(n,l[3]),i.addClass(n,l[2])):i.hasClass(n,l[2])?(i.removeClass(n,l[2]),i.addClass(n,l[1])):i.hasClass(n,l[1])&&(i.removeClass(n,l[1]),i.addClass(n,l[0])),i.hasClass(s,l[0])?(i.removeClass(s,l[0]),i.addClass(s,l[1])):i.hasClass(s,l[1])?(i.removeClass(s,l[1]),i.addClass(s,l[2])):i.hasClass(s,l[2])?(i.removeClass(s,l[2]),i.addClass(s,l[3])):i.hasClass(s,l[3])?(i.removeClass(s,l[3]),i.addClass(s,l[4])):i.hasClass(s,l[4])?(i.removeClass(s,l[4]),i.addClass(s,l[5])):i.hasClass(s,l[5])?(i.removeClass(s,l[5]),i.addClass(s,l[6])):i.hasClass(s,l[6])?(i.removeClass(s,l[6]),i.addClass(s,l[7])):i.hasClass(s,l[7])?(i.removeClass(s,l[7]),i.addClass(s,l[8])):i.hasClass(s,l[8])?(i.removeClass(s,l[8]),i.addClass(s,l[9])):i.hasClass(s,l[9])?(i.removeClass(s,l[9]),i.addClass(s,l[10])):i.hasClass(s,l[10])&&(i.removeClass(s,l[10]),i.addClass(s,l[11])),this.builder.opts.onChange()}}removeRow(){let t,e=this.util,i=this.dom,n=e.cellSelected();t=n?n.parentNode:e.rowSelected(),t&&(i.removeClass(t,"row-outline"),e.confirm(e.out("Are you sure you want to delete this block?"),(t=>{let i,n=e.cellSelected();i=n?n.parentNode:e.rowSelected(),i&&t&&(this.builder.uo.saveForUndo(),i.parentNode.removeChild(i),e.checkEmpty(),this.builder.opts.onChange())})))}moveRowUp(){let t,e=this.util,i=this.dom,n=e.cellSelected();if(t=n?n.parentNode:e.rowSelected(),t)if(i.removeClass(t,"row-outline"),t.previousElementSibling)this.builder.uo.saveForUndo(),t.parentNode.insertBefore(t,t.previousElementSibling),this.rowTool.position(t),this.builder.opts.onChange();else{let n=t.parentNode,o=null;const s=document.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(s,(s=>{if(s.innerHTML===n.innerHTML&&o)return i.moveAfter(t,o.lastChild),this.rowTool.position(t),e.checkEmpty(),this.builder.opts.onChange(),!1;o=s}))}}moveRowDown(){let t,e=this.util,i=this.dom,n=e.cellSelected();if(t=n?n.parentNode:e.rowSelected(),t)if(i.removeClass(t,"row-outline"),t.nextElementSibling)this.builder.uo.saveForUndo(),t.parentNode.insertBefore(t.nextElementSibling,t),this.rowTool.position(t),this.builder.opts.onChange();else{let i=t.parentNode,n=!1;const o=document.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(o,(o=>{if(n)return o.insertBefore(t,o.firstChild),this.rowTool.position(t),e.checkEmpty(),this.builder.opts.onChange(),!1;o.innerHTML===i.innerHTML&&(n=!0)}))}}duplicateRow(){let t,e=this.builder,i=this.util,n=this.dom,o=i.cellSelected();if(t=o?o.parentNode:i.rowSelected(),!t)return;n.removeClass(t,"row-outline"),this.builder.uo.saveForUndo();const s=t.cloneNode(!0);s.removeChild(s.querySelector(".is-row-tool")),s.removeChild(s.querySelector(".is-col-tool"));let r=n.elementChildren(s);r.forEach((t=>{t.removeAttribute("data-click"),t.classList.contains("cell-active")&&(e.activeCol=t)})),n.moveAfter(s,t),n.removeClass(t,"row-active"),n.removeClass(t,"row-outline"),r=n.elementChildren(t),r.forEach((t=>{n.removeClass(t,"cell-active")}));let l=this.builder.doc.querySelector(".builder-active");e.applyBehaviorOn(l),this.rowTool.position(s),this.builder.opts.onChange()}}class Mi{constructor(t){this.builder=t;const e=this.builder.dom;this.dom=e}position(t){let e=this.dom;const i=this.builder.builderStuff;let n=t.querySelector(".is-row-tool"),o=i.querySelector(".rowmore");e.addClass(o,"transition1");const s=n.querySelector(".row-more");let r,l;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;r=s.getBoundingClientRect().top,l=s.getBoundingClientRect().left,r+=t,l+=e}else r=s.getBoundingClientRect().top+window.pageYOffset,l=s.getBoundingClientRect().left+window.pageXOffset;o.style.top=r-8+"px",e.removeClass(o,"arrow-bottom"),e.removeClass(o,"arrow-left"),e.removeClass(o,"arrow-right"),e.removeClass(o,"center"),e.removeClass(o,"right"),e.removeClass(o,"left"),"right"===this.builder.opts.rowTool?(o.style.left=l-o.offsetWidth-10+"px",e.addClass(o,"arrow-right"),e.addClass(o,"left")):(o.style.left=l+35+"px",e.addClass(o,"arrow-left"),e.addClass(o,"left")),setTimeout((()=>{e.removeClass(o,"transition1")}),300)}}let Oi,Ri,Bi,Ni,Ii,$i,Di,Pi;class zi{constructor(t={}){this.opts=t;const e=document.querySelectorAll(this.opts.selector);Array.prototype.forEach.call(e,(t=>{t.setAttribute("draggable",""),t.addEventListener("touchstart",this.dragStart,!1),t.addEventListener("touchend",this.dragEnd,!1),t.addEventListener("mousedown",this.dragStart,!1),t.addEventListener("mouseup",this.dragEnd,!1)})),document.addEventListener("touchmove",this.drag,!1),document.addEventListener("mousemove",this.drag,!1)}dragStart(t){var e,i;t.target.hasAttribute("draggable")&&(t.target.parentNode.style.transition="none",Di=!0,Pi=t.target.parentElement,Pi.getAttribute("data-xOffset")?e=Pi.getAttribute("data-xOffset"):(Pi.setAttribute("data-xOffset",0),e=0),Pi.getAttribute("data-yOffset")?i=Pi.getAttribute("data-yOffset"):(Pi.setAttribute("data-yOffset",0),i=0),"touchstart"===t.type?(Oi=t.touches[0].clientX-e,Ri=t.touches[0].clientY-i):(Oi=t.clientX-e,Ri=t.clientY-i),Pi.setAttribute("data-initialX",Oi),Pi.setAttribute("data-initialY",Ri))}dragEnd(t){t.target.hasAttribute("draggable")&&(t.target.parentNode.style.transition="",Bi=Pi.getAttribute("data-currentX"),Ni=Pi.getAttribute("data-currentY"),Oi=Bi,Ri=Ni,Pi.setAttribute("data-initialX",Oi),Pi.setAttribute("data-initialY",Ri),Di=!1)}drag(t){if(Di){t.preventDefault();var e=Pi.getAttribute("data-initialX"),i=Pi.getAttribute("data-initialY");"touchmove"===t.type?(Bi=t.touches[0].clientX-e,Ni=t.touches[0].clientY-i):(Bi=t.clientX-e,Ni=t.clientY-i),Pi.style.transform="translate3d("+Bi+"px, "+Ni+"px, 0)",Pi.setAttribute("data-currentX",Bi),Pi.setAttribute("data-currentY",Ni),Ii=Bi,$i=Ni,Pi.setAttribute("data-xOffset",Ii),Pi.setAttribute("data-yOffset",$i)}}isTouchSupport(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}}
/**!
	 * Sortable 1.14.0
	 * @author	RubaXa   <trash@rubaxa.org>
	 * @author	owenm    <owen23355@gmail.com>
	 * @license MIT
	 */
function Hi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Fi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(i),!0).forEach((function(e){Wi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Hi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ui(t){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function Wi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ji(){return ji=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},ji.apply(this,arguments)}function Gi(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}function Vi(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var Yi=Vi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xi=Vi(/Edge/i),Zi=Vi(/firefox/i),Ki=Vi(/safari/i)&&!Vi(/chrome/i)&&!Vi(/android/i),Qi=Vi(/iP(ad|od|hone)/i),Ji=Vi(/chrome/i)&&Vi(/android/i),tn={capture:!1,passive:!1};function en(t,e,i){t.addEventListener(e,i,!Yi&&tn)}function nn(t,e,i){t.removeEventListener(e,i,!Yi&&tn)}function on(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function sn(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function rn(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&on(t,e):on(t,e))||n&&t===i)return t;if(t===i)break}while(t=sn(t))}return null}var ln,an=/\s+/g;function dn(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(an," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(an," ")}}function cn(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function un(t,e){var i="";if("string"==typeof t)i=t;else do{var n=cn(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function pn(t,e,i){if(t){var n=t.getElementsByTagName(e),o=0,s=n.length;if(i)for(;o<s;o++)i(n[o],o);return n}return[]}function hn(){var t=document.scrollingElement;return t||document.documentElement}function gn(t,e,i,n,o){if(t.getBoundingClientRect||t===window){var s,r,l,a,d,c,u;if(t!==window&&t.parentNode&&t!==hn()?(r=(s=t.getBoundingClientRect()).top,l=s.left,a=s.bottom,d=s.right,c=s.height,u=s.width):(r=0,l=0,a=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(e||i)&&t!==window&&(o=o||t.parentNode,!Yi))do{if(o&&o.getBoundingClientRect&&("none"!==cn(o,"transform")||i&&"static"!==cn(o,"position"))){var p=o.getBoundingClientRect();r-=p.top+parseInt(cn(o,"border-top-width")),l-=p.left+parseInt(cn(o,"border-left-width")),a=r+s.height,d=l+s.width;break}}while(o=o.parentNode);if(n&&t!==window){var h=un(o||t),g=h&&h.a,m=h&&h.d;h&&(a=(r/=m)+(c/=m),d=(l/=g)+(u/=g))}return{top:r,left:l,bottom:a,right:d,width:u,height:c}}}function mn(t,e,i){for(var n=xn(t,!0),o=gn(t)[e];n;){var s=gn(n)[i];if(!("top"===i||"left"===i?o>=s:o<=s))return n;if(n===hn())break;n=xn(n,!1)}return!1}function fn(t,e,i,n){for(var o=0,s=0,r=t.children;s<r.length;){if("none"!==r[s].style.display&&r[s]!==Co.ghost&&(n||r[s]!==Co.dragged)&&rn(r[s],i.draggable,t,!1)){if(o===e)return r[s];o++}s++}return null}function bn(t,e){for(var i=t.lastElementChild;i&&(i===Co.ghost||"none"===cn(i,"display")||e&&!on(i,e));)i=i.previousElementSibling;return i||null}function vn(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Co.clone||e&&!on(t,e)||i++;return i}function yn(t){var e=0,i=0,n=hn();if(t)do{var o=un(t),s=o.a,r=o.d;e+=t.scrollLeft*s,i+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,i]}function xn(t,e){if(!t||!t.getBoundingClientRect)return hn();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=cn(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return hn();if(n||e)return i;n=!0}}}while(i=i.parentNode);return hn()}function wn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function Sn(t,e){return function(){if(!ln){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),ln=setTimeout((function(){ln=void 0}),e)}}}function _n(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Cn(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var kn="Sortable"+(new Date).getTime();function En(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==cn(t,"display")&&t!==Co.ghost){e.push({target:t,rect:gn(t)});var i=Fi({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=un(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var o=!1,s=0;e.forEach((function(t){var e=0,i=t.target,r=i.fromRect,l=gn(i),a=i.prevFromRect,d=i.prevToRect,c=t.rect,u=un(i,!0);u&&(l.top-=u.f,l.left-=u.e),i.toRect=l,i.thisAnimationDuration&&wn(a,l)&&!wn(r,l)&&(c.top-l.top)/(c.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(c,a,d,n.options)),wn(l,r)||(i.prevFromRect=r,i.prevToRect=l,e||(e=n.options.animation),n.animate(i,c,l,e)),e&&(o=!0,s=Math.max(s,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),o?t=setTimeout((function(){"function"==typeof i&&i()}),s):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){cn(t,"transition",""),cn(t,"transform","");var o=un(this.el),s=o&&o.a,r=o&&o.d,l=(e.left-i.left)/(s||1),a=(e.top-i.top)/(r||1);t.animatingX=!!l,t.animatingY=!!a,cn(t,"transform","translate3d("+l+"px,"+a+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),cn(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),cn(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){cn(t,"transition",""),cn(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var An=[],Ln={initializeByDefault:!0},qn={mount:function(t){for(var e in Ln)Ln.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ln[e]);An.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),An.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var o=t+"Global";An.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][o]&&e[n.pluginName][o](Fi({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](Fi({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var o in An.forEach((function(n){var o=n.pluginName;if(t.options[o]||n.initializeByDefault){var s=new n(t,e,t.options);s.sortable=t,s.options=t.options,t[o]=s,ji(i,s.defaults)}})),t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);void 0!==s&&(t.options[o]=s)}},getEventProperties:function(t,e){var i={};return An.forEach((function(n){"function"==typeof n.eventProperties&&ji(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return An.forEach((function(o){t[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[e]&&(n=o.optionListeners[e].call(t[o.pluginName],i))})),n}};var Tn=["evt"],Mn=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,o=Gi(i,Tn);qn.pluginEvent.bind(Co)(t,e,Fi({dragEl:Rn,parentEl:Bn,ghostEl:Nn,rootEl:In,nextEl:$n,lastDownEl:Dn,cloneEl:Pn,cloneHidden:zn,dragStarted:Jn,putSortable:Gn,activeSortable:Co.active,originalEvent:n,oldIndex:Hn,oldDraggableIndex:Un,newIndex:Fn,newDraggableIndex:Wn,hideGhostForTarget:xo,unhideGhostForTarget:wo,cloneNowHidden:function(){zn=!0},cloneNowShown:function(){zn=!1},dispatchSortableEvent:function(t){On({sortable:e,name:t,originalEvent:n})}},o))};function On(t){!function(t){var e=t.sortable,i=t.rootEl,n=t.name,o=t.targetEl,s=t.cloneEl,r=t.toEl,l=t.fromEl,a=t.oldIndex,d=t.newIndex,c=t.oldDraggableIndex,u=t.newDraggableIndex,p=t.originalEvent,h=t.putSortable,g=t.extraEventProperties;if(e=e||i&&i[kn]){var m,f=e.options,b="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||Yi||Xi?(m=document.createEvent("Event")).initEvent(n,!0,!0):m=new CustomEvent(n,{bubbles:!0,cancelable:!0}),m.to=r||i,m.from=l||i,m.item=o||i,m.clone=s,m.oldIndex=a,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=u,m.originalEvent=p,m.pullMode=h?h.lastPutMode:void 0;var v=Fi(Fi({},g),qn.getEventProperties(n,e));for(var y in v)m[y]=v[y];i&&i.dispatchEvent(m),f[b]&&f[b].call(e,m)}}(Fi({putSortable:Gn,cloneEl:Pn,targetEl:Rn,rootEl:In,oldIndex:Hn,oldDraggableIndex:Un,newIndex:Fn,newDraggableIndex:Wn},t))}var Rn,Bn,Nn,In,$n,Dn,Pn,zn,Hn,Fn,Un,Wn,jn,Gn,Vn,Yn,Xn,Zn,Kn,Qn,Jn,to,eo,io,no,oo=!1,so=!1,ro=[],lo=!1,ao=!1,co=[],uo=!1,po=[],ho="undefined"!=typeof document,go=Qi,mo=Xi||Yi?"cssFloat":"float",fo=ho&&!Ji&&!Qi&&"draggable"in document.createElement("div"),bo=function(){if(ho){if(Yi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),vo=function(t,e){var i=cn(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=fn(t,0,e),s=fn(t,1,e),r=o&&cn(o),l=s&&cn(s),a=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+gn(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+gn(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!s||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return o&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||a>=n&&"none"===i[mo]||s&&"none"===i[mo]&&a+d>n)?"vertical":"horizontal"},yo=function(t){function e(t,i){return function(n,o,s,r){var l=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==t&&(i||l))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,o,s,r),i)(n,o,s,r);var a=(i?n:o).options.group.name;return!0===t||"string"==typeof t&&t===a||t.join&&t.indexOf(a)>-1}}var i={},n=t.group;n&&"object"==Ui(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},xo=function(){!bo&&Nn&&cn(Nn,"display","none")},wo=function(){!bo&&Nn&&cn(Nn,"display","")};ho&&document.addEventListener("click",(function(t){if(so)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),so=!1,!1}),!0);var So=function(t){if(Rn){t=t.touches?t.touches[0]:t;var e=(o=t.clientX,s=t.clientY,ro.some((function(t){var e=t[kn].options.emptyInsertThreshold;if(e&&!bn(t)){var i=gn(t),n=o>=i.left-e&&o<=i.right+e,l=s>=i.top-e&&s<=i.bottom+e;return n&&l?r=t:void 0}})),r);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[kn]._onDragOver(i)}}var o,s,r},_o=function(t){Rn&&Rn.parentNode[kn]._isOutsideThisEl(t.target)};function Co(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ji({},e),t[kn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vo(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Co.supportPointer&&"PointerEvent"in window&&!Ki,emptyInsertThreshold:5};for(var n in qn.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var o in yo(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&fo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?en(t,"pointerdown",this._onTapStart):(en(t,"mousedown",this._onTapStart),en(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(en(t,"dragover",this),en(t,"dragenter",this)),ro.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ji(this,En())}function ko(t,e,i,n,o,s,r,l){var a,d,c=t[kn],u=c.options.onMove;return!window.CustomEvent||Yi||Xi?(a=document.createEvent("Event")).initEvent("move",!0,!0):a=new CustomEvent("move",{bubbles:!0,cancelable:!0}),a.to=e,a.from=t,a.dragged=i,a.draggedRect=n,a.related=o||e,a.relatedRect=s||gn(e),a.willInsertAfter=l,a.originalEvent=r,t.dispatchEvent(a),u&&(d=u.call(c,a,r)),d}function Eo(t){t.draggable=!1}function Ao(){uo=!1}function Lo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function qo(t){return setTimeout(t,0)}function To(t){return clearTimeout(t)}Co.prototype={constructor:Co,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(to=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Rn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,o=n.preventOnFilter,s=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(r||t).target,a=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=n.filter;if(function(t){po.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&po.push(n)}}(i),!Rn&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||n.disabled)&&!a.isContentEditable&&(this.nativeDraggable||!Ki||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=rn(l,n.draggable,i,!1))&&l.animated||Dn===l)){if(Hn=vn(l),Un=vn(l,n.draggable),"function"==typeof d){if(d.call(this,t,l,this))return On({sortable:e,rootEl:a,name:"filter",targetEl:l,toEl:i,fromEl:i}),Mn("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some((function(n){if(n=rn(a,n.trim(),i,!1))return On({sortable:e,rootEl:n,name:"filter",targetEl:l,fromEl:i,toEl:i}),Mn("filter",e,{evt:t}),!0}))))return void(o&&t.cancelable&&t.preventDefault());n.handle&&!rn(a,n.handle,i,!1)||this._prepareDragStart(t,r,l)}}},_prepareDragStart:function(t,e,i){var n,o=this,s=o.el,r=o.options,l=s.ownerDocument;if(i&&!Rn&&i.parentNode===s){var a=gn(i);if(In=s,Bn=(Rn=i).parentNode,$n=Rn.nextSibling,Dn=i,jn=r.group,Co.dragged=Rn,Vn={target:Rn,clientX:(e||t).clientX,clientY:(e||t).clientY},Kn=Vn.clientX-a.left,Qn=Vn.clientY-a.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Rn.style["will-change"]="all",n=function(){Mn("delayEnded",o,{evt:t}),Co.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Zi&&o.nativeDraggable&&(Rn.draggable=!0),o._triggerDragStart(t,e),On({sortable:o,name:"choose",originalEvent:t}),dn(Rn,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){pn(Rn,t.trim(),Eo)})),en(l,"dragover",So),en(l,"mousemove",So),en(l,"touchmove",So),en(l,"mouseup",o._onDrop),en(l,"touchend",o._onDrop),en(l,"touchcancel",o._onDrop),Zi&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Rn.draggable=!0),Mn("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(Xi||Yi))n();else{if(Co.eventCanceled)return void this._onDrop();en(l,"mouseup",o._disableDelayedDrag),en(l,"touchend",o._disableDelayedDrag),en(l,"touchcancel",o._disableDelayedDrag),en(l,"mousemove",o._delayedDragTouchMoveHandler),en(l,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&en(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Rn&&Eo(Rn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;nn(t,"mouseup",this._disableDelayedDrag),nn(t,"touchend",this._disableDelayedDrag),nn(t,"touchcancel",this._disableDelayedDrag),nn(t,"mousemove",this._delayedDragTouchMoveHandler),nn(t,"touchmove",this._delayedDragTouchMoveHandler),nn(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?en(document,"pointermove",this._onTouchMove):en(document,e?"touchmove":"mousemove",this._onTouchMove):(en(Rn,"dragend",this),en(In,"dragstart",this._onDragStart));try{document.selection?qo((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(oo=!1,In&&Rn){Mn("dragStarted",this,{evt:e}),this.nativeDraggable&&en(document,"dragover",_o);var i=this.options;!t&&dn(Rn,i.dragClass,!1),dn(Rn,i.ghostClass,!0),Co.active=this,t&&this._appendGhost(),On({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Yn){this._lastX=Yn.clientX,this._lastY=Yn.clientY,xo();for(var t=document.elementFromPoint(Yn.clientX,Yn.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Yn.clientX,Yn.clientY))!==e;)e=t;if(Rn.parentNode[kn]._isOutsideThisEl(t),e)do{if(e[kn]){if(e[kn]._onDragOver({clientX:Yn.clientX,clientY:Yn.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);wo()}},_onTouchMove:function(t){if(Vn){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=Nn&&un(Nn,!0),r=Nn&&s&&s.a,l=Nn&&s&&s.d,a=go&&no&&yn(no),d=(o.clientX-Vn.clientX+n.x)/(r||1)+(a?a[0]-co[0]:0)/(r||1),c=(o.clientY-Vn.clientY+n.y)/(l||1)+(a?a[1]-co[1]:0)/(l||1);if(!Co.active&&!oo){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(Nn){s?(s.e+=d-(Xn||0),s.f+=c-(Zn||0)):s={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");cn(Nn,"webkitTransform",u),cn(Nn,"mozTransform",u),cn(Nn,"msTransform",u),cn(Nn,"transform",u),Xn=d,Zn=c,Yn=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Nn){var t=this.options.fallbackOnBody?document.body:In,e=gn(Rn,!0,go,!0,t),i=this.options;if(go){for(no=t;"static"===cn(no,"position")&&"none"===cn(no,"transform")&&no!==document;)no=no.parentNode;no!==document.body&&no!==document.documentElement?(no===document&&(no=hn()),e.top+=no.scrollTop,e.left+=no.scrollLeft):no=hn(),co=yn(no)}dn(Nn=Rn.cloneNode(!0),i.ghostClass,!1),dn(Nn,i.fallbackClass,!0),dn(Nn,i.dragClass,!0),cn(Nn,"transition",""),cn(Nn,"transform",""),cn(Nn,"box-sizing","border-box"),cn(Nn,"margin",0),cn(Nn,"top",e.top),cn(Nn,"left",e.left),cn(Nn,"width",e.width),cn(Nn,"height",e.height),cn(Nn,"opacity","0.8"),cn(Nn,"position",go?"absolute":"fixed"),cn(Nn,"zIndex","100000"),cn(Nn,"pointerEvents","none"),Co.ghost=Nn,t.appendChild(Nn),cn(Nn,"transform-origin",Kn/parseInt(Nn.style.width)*100+"% "+Qn/parseInt(Nn.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,o=i.options;Mn("dragStart",this,{evt:t}),Co.eventCanceled?this._onDrop():(Mn("setupClone",this),Co.eventCanceled||((Pn=Cn(Rn)).draggable=!1,Pn.style["will-change"]="",this._hideClone(),dn(Pn,this.options.chosenClass,!1),Co.clone=Pn),i.cloneId=qo((function(){Mn("clone",i),Co.eventCanceled||(i.options.removeCloneOnHide||In.insertBefore(Pn,Rn),i._hideClone(),On({sortable:i,name:"clone"}))})),!e&&dn(Rn,o.dragClass,!0),e?(so=!0,i._loopId=setInterval(i._emulateDragOver,50)):(nn(document,"mouseup",i._onDrop),nn(document,"touchend",i._onDrop),nn(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,Rn)),en(document,"drop",i),cn(Rn,"transform","translateZ(0)")),oo=!0,i._dragStartId=qo(i._dragStarted.bind(i,e,t)),en(document,"selectstart",i),Jn=!0,Ki&&cn(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,o,s=this.el,r=t.target,l=this.options,a=l.group,d=Co.active,c=jn===a,u=l.sort,p=Gn||d,h=this,g=!1;if(!uo){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=rn(r,l.draggable,s,!0),q("dragOver"),Co.eventCanceled)return g;if(Rn.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return M(!1);if(so=!1,d&&!l.disabled&&(c?u||(n=Bn!==In):Gn===this||(this.lastPutMode=jn.checkPull(this,d,Rn,t))&&a.checkPut(this,d,Rn,t))){if(o="vertical"===this._getDirection(t,r),e=gn(Rn),q("dragOverValid"),Co.eventCanceled)return g;if(n)return Bn=In,T(),this._hideClone(),q("revert"),Co.eventCanceled||($n?In.insertBefore(Rn,$n):In.appendChild(Rn)),M(!0);var m=bn(s,l.draggable);if(!m||function(t,e,i){var n=gn(bn(i.el,i.options.draggable)),o=10;return e?t.clientX>n.right+o||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+o}(t,o,this)&&!m.animated){if(m===Rn)return M(!1);if(m&&s===t.target&&(r=m),r&&(i=gn(r)),!1!==ko(In,s,Rn,e,r,i,t,!!r))return T(),s.appendChild(Rn),Bn=s,O(),M(!0)}else if(m&&function(t,e,i){var n=gn(fn(i.el,0,i.options,!0)),o=10;return e?t.clientX<n.left-o||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-o||t.clientY<n.bottom&&t.clientX<n.left}(t,o,this)){var f=fn(s,0,l,!0);if(f===Rn)return M(!1);if(i=gn(r=f),!1!==ko(In,s,Rn,e,r,i,t,!1))return T(),s.insertBefore(Rn,f),Bn=s,O(),M(!0)}else if(r.parentNode===s){i=gn(r);var b,v,y,x=Rn.parentNode!==s,w=!function(t,e,i){var n=i?t.left:t.top,o=i?t.right:t.bottom,s=i?t.width:t.height,r=i?e.left:e.top,l=i?e.right:e.bottom,a=i?e.width:e.height;return n===r||o===l||n+s/2===r+a/2}(Rn.animated&&Rn.toRect||e,r.animated&&r.toRect||i,o),S=o?"top":"left",_=mn(r,"top","top")||mn(Rn,"top","top"),C=_?_.scrollTop:void 0;if(to!==r&&(v=i[S],lo=!1,ao=!w&&l.invertSwap||x),b=function(t,e,i,n,o,s,r,l){var a=n?t.clientY:t.clientX,d=n?i.height:i.width,c=n?i.top:i.left,u=n?i.bottom:i.right,p=!1;if(!r)if(l&&io<d*o){if(!lo&&(1===eo?a>c+d*s/2:a<u-d*s/2)&&(lo=!0),lo)p=!0;else if(1===eo?a<c+io:a>u-io)return-eo}else if(a>c+d*(1-o)/2&&a<u-d*(1-o)/2)return function(t){return vn(Rn)<vn(t)?1:-1}(e);if(p=p||r,p&&(a<c+d*s/2||a>u-d*s/2))return a>c+d/2?1:-1;return 0}(t,r,i,o,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ao,to===r),0!==b){var k=vn(Rn);do{k-=b,y=Bn.children[k]}while(y&&("none"===cn(y,"display")||y===Nn))}if(0===b||y===r)return M(!1);to=r,eo=b;var E=r.nextElementSibling,A=!1,L=ko(In,s,Rn,e,r,i,t,A=1===b);if(!1!==L)return 1!==L&&-1!==L||(A=1===L),uo=!0,setTimeout(Ao,30),T(),A&&!E?s.appendChild(Rn):r.parentNode.insertBefore(Rn,A?E:r),_&&_n(_,0,C-_.scrollTop),Bn=Rn.parentNode,void 0===v||ao||(io=Math.abs(v-gn(r)[S])),O(),M(!0)}if(s.contains(Rn))return M(!1)}return!1}function q(l,a){Mn(l,h,Fi({evt:t,isOwner:c,axis:o?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:u,fromSortable:p,target:r,completed:M,onMove:function(i,n){return ko(In,s,Rn,e,i,gn(i),t,n)},changed:O},a))}function T(){q("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function M(e){return q("dragOverCompleted",{insertion:e}),e&&(c?d._hideClone():d._showClone(h),h!==p&&(dn(Rn,Gn?Gn.options.ghostClass:d.options.ghostClass,!1),dn(Rn,l.ghostClass,!0)),Gn!==h&&h!==Co.active?Gn=h:h===Co.active&&Gn&&(Gn=null),p===h&&(h._ignoreWhileAnimating=r),h.animateAll((function(){q("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===Rn&&!Rn.animated||r===s&&!r.animated)&&(to=null),l.dragoverBubble||t.rootEl||r===document||(Rn.parentNode[kn]._isOutsideThisEl(t.target),!e&&So(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function O(){Fn=vn(Rn),Wn=vn(Rn,l.draggable),On({sortable:h,name:"change",toEl:s,newIndex:Fn,newDraggableIndex:Wn,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){nn(document,"mousemove",this._onTouchMove),nn(document,"touchmove",this._onTouchMove),nn(document,"pointermove",this._onTouchMove),nn(document,"dragover",So),nn(document,"mousemove",So),nn(document,"touchmove",So)},_offUpEvents:function(){var t=this.el.ownerDocument;nn(t,"mouseup",this._onDrop),nn(t,"touchend",this._onDrop),nn(t,"pointerup",this._onDrop),nn(t,"touchcancel",this._onDrop),nn(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;Fn=vn(Rn),Wn=vn(Rn,i.draggable),Mn("drop",this,{evt:t}),Bn=Rn&&Rn.parentNode,Fn=vn(Rn),Wn=vn(Rn,i.draggable),Co.eventCanceled||(oo=!1,ao=!1,lo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),To(this.cloneId),To(this._dragStartId),this.nativeDraggable&&(nn(document,"drop",this),nn(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ki&&cn(document.body,"user-select",""),cn(Rn,"transform",""),t&&(Jn&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),Nn&&Nn.parentNode&&Nn.parentNode.removeChild(Nn),(In===Bn||Gn&&"clone"!==Gn.lastPutMode)&&Pn&&Pn.parentNode&&Pn.parentNode.removeChild(Pn),Rn&&(this.nativeDraggable&&nn(Rn,"dragend",this),Eo(Rn),Rn.style["will-change"]="",Jn&&!oo&&dn(Rn,Gn?Gn.options.ghostClass:this.options.ghostClass,!1),dn(Rn,this.options.chosenClass,!1),On({sortable:this,name:"unchoose",toEl:Bn,newIndex:null,newDraggableIndex:null,originalEvent:t}),In!==Bn?(Fn>=0&&(On({rootEl:Bn,name:"add",toEl:Bn,fromEl:In,originalEvent:t}),On({sortable:this,name:"remove",toEl:Bn,originalEvent:t}),On({rootEl:Bn,name:"sort",toEl:Bn,fromEl:In,originalEvent:t}),On({sortable:this,name:"sort",toEl:Bn,originalEvent:t})),Gn&&Gn.save()):Fn!==Hn&&Fn>=0&&(On({sortable:this,name:"update",toEl:Bn,originalEvent:t}),On({sortable:this,name:"sort",toEl:Bn,originalEvent:t})),Co.active&&(null!=Fn&&-1!==Fn||(Fn=Hn,Wn=Un),On({sortable:this,name:"end",toEl:Bn,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Mn("nulling",this),In=Rn=Bn=Nn=$n=Pn=Dn=zn=Vn=Yn=Jn=Fn=Wn=Hn=Un=to=eo=Gn=jn=Co.dragged=Co.ghost=Co.clone=Co.active=null,po.forEach((function(t){t.checked=!0})),po.length=Xn=Zn=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Rn&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,o=i.length,s=this.options;n<o;n++)rn(t=i[n],s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Lo(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var o=n.children[e];rn(o,this.options.draggable,n,!1)&&(i[t]=o)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return rn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=qn.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&yo(i)},destroy:function(){Mn("destroy",this);var t=this.el;t[kn]=null,nn(t,"mousedown",this._onTapStart),nn(t,"touchstart",this._onTapStart),nn(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(nn(t,"dragover",this),nn(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ro.splice(ro.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!zn){if(Mn("hideClone",this),Co.eventCanceled)return;cn(Pn,"display","none"),this.options.removeCloneOnHide&&Pn.parentNode&&Pn.parentNode.removeChild(Pn),zn=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(zn){if(Mn("showClone",this),Co.eventCanceled)return;Rn.parentNode!=In||this.options.group.revertClone?$n?In.insertBefore(Pn,$n):In.appendChild(Pn):In.insertBefore(Pn,Rn),this.options.group.revertClone&&this.animate(Rn,Pn),cn(Pn,"display",""),zn=!1}}else this._hideClone()}},ho&&en(document,"touchmove",(function(t){(Co.active||oo)&&t.cancelable&&t.preventDefault()})),Co.utils={on:en,off:nn,css:cn,find:pn,is:function(t,e){return!!rn(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:Sn,closest:rn,toggleClass:dn,clone:Cn,index:vn,nextTick:qo,cancelNextTick:To,detectDirection:vo,getChild:fn},Co.get=function(t){return t[kn]},Co.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Co.utils=Fi(Fi({},Co.utils),t.utils)),qn.mount(t)}))},Co.create=function(t,e){return new Co(t,e)},Co.version="1.14.0";var Mo,Oo,Ro,Bo,No,Io,$o=[],Do=!1;function Po(){$o.forEach((function(t){clearInterval(t.pid)})),$o=[]}function zo(){clearInterval(Io)}var Ho=Sn((function(t,e,i,n){if(e.scroll){var o,s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,a=e.scrollSpeed,d=hn(),c=!1;Oo!==i&&(Oo=i,Po(),Mo=e.scroll,o=e.scrollFn,!0===Mo&&(Mo=xn(i,!0)));var u=0,p=Mo;do{var h=p,g=gn(h),m=g.top,f=g.bottom,b=g.left,v=g.right,y=g.width,x=g.height,w=void 0,S=void 0,_=h.scrollWidth,C=h.scrollHeight,k=cn(h),E=h.scrollLeft,A=h.scrollTop;h===d?(w=y<_&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),S=x<C&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(w=y<_&&("auto"===k.overflowX||"scroll"===k.overflowX),S=x<C&&("auto"===k.overflowY||"scroll"===k.overflowY));var L=w&&(Math.abs(v-s)<=l&&E+y<_)-(Math.abs(b-s)<=l&&!!E),q=S&&(Math.abs(f-r)<=l&&A+x<C)-(Math.abs(m-r)<=l&&!!A);if(!$o[u])for(var T=0;T<=u;T++)$o[T]||($o[T]={});$o[u].vx==L&&$o[u].vy==q&&$o[u].el===h||($o[u].el=h,$o[u].vx=L,$o[u].vy=q,clearInterval($o[u].pid),0==L&&0==q||(c=!0,$o[u].pid=setInterval(function(){n&&0===this.layer&&Co.active._onTouchMove(No);var e=$o[this.layer].vy?$o[this.layer].vy*a:0,i=$o[this.layer].vx?$o[this.layer].vx*a:0;"function"==typeof o&&"continue"!==o.call(Co.dragged.parentNode[kn],i,e,t,No,$o[this.layer].el)||_n($o[this.layer].el,i,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&p!==d&&(p=xn(p,!1)));Do=c}}),30),Fo=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,o=t.activeSortable,s=t.dispatchSortableEvent,r=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var a=i||o;r();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(d.clientX,d.clientY);l(),a&&!a.el.contains(c)&&(s("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Uo(){}function Wo(){}Uo.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=fn(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:Fo},ji(Uo,{pluginName:"revertOnSpill"}),Wo.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:Fo},ji(Wo,{pluginName:"removeOnSpill"}),Co.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?en(document,"dragover",this._handleAutoScroll):this.options.supportPointer?en(document,"pointermove",this._handleFallbackAutoScroll):e.touches?en(document,"touchmove",this._handleFallbackAutoScroll):en(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?nn(document,"dragover",this._handleAutoScroll):(nn(document,"pointermove",this._handleFallbackAutoScroll),nn(document,"touchmove",this._handleFallbackAutoScroll),nn(document,"mousemove",this._handleFallbackAutoScroll)),zo(),Po(),clearTimeout(ln),ln=void 0},nulling:function(){No=Oo=Mo=Do=Io=Ro=Bo=null,$o.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(n,o);if(No=t,e||this.options.forceAutoScrollFallback||Xi||Yi||Ki){Ho(t,this.options,s,e);var r=xn(s,!0);!Do||Io&&n===Ro&&o===Bo||(Io&&zo(),Io=setInterval((function(){var s=xn(document.elementFromPoint(n,o),!0);s!==r&&(r=s,Po()),Ho(t,i.options,s,e)}),10),Ro=n,Bo=o)}else{if(!this.options.bubbleScroll||xn(s,!0)===hn())return void Po();Ho(t,this.options,xn(s,!1),!1)}}},ji(t,{pluginName:"scroll",initializeByDefault:!0})}),Co.mount(Wo,Uo);const jo=new o;class Go{constructor(t){const[e,i]=t.children,n=e=>{if(!t)return document.removeEventListener("click",n);t.contains(e.target)||this.toggle(!1)},o=n=>{const o=n.textContent,s=n.getAttribute("data-value");e.textContent=o,this.value=s,this.toggle(!1),t.dispatchEvent(new Event("change")),e.focus(),jo.elementChildren(i).forEach((t=>{jo.removeClass(t,"selected")}));let r=i.querySelector('[data-value="'+s+'"]');r&&jo.addClass(r,"selected")},s=t=>{t.preventDefault(),38===t.keyCode&&t.target.previousElementSibling?t.target.previousElementSibling.focus():40===t.keyCode&&t.target.nextElementSibling?t.target.nextElementSibling.focus():27===t.keyCode?(this.toggle(!1),e.focus()):13!==t.keyCode&&32!==t.keyCode||o(t.target)};e.addEventListener("keydown",(t=>{27===t.keyCode?(this.toggle(!1),t.preventDefault()):13!==t.keyCode&&32!==t.keyCode||(this.toggle(!0),t.preventDefault())})),e.addEventListener("click",(()=>this.toggle())),[...i.children].forEach((t=>{t.addEventListener("keydown",s),t.addEventListener("click",(()=>o(t)))})),this.element=t,this.value=e.getAttribute("data-value"),this.toggle=(o=null)=>{if(o=null===o?"true"!==i.getAttribute("aria-expanded"):o,i.setAttribute("aria-expanded",o),o){e.classList.add("active");let o=i.querySelector('[data-value="'+this.value+'"]');o&&(jo.addClass(o,"selected"),o.focus()),document.addEventListener("click",n),t.dispatchEvent(new Event("opened"))}else e.classList.remove("active"),t.dispatchEvent(new Event("closed")),document.removeEventListener("click",n)}}}const Vo=t=>{const e=t.util,i=t.builderStuff,n=t.dom;let o="",s=t.opts.sidePanel;if("#divSnippetList"===t.opts.snippetList){const r=`<div id="divSnippetList" class="is-side ${"right"===s?"":" fromleft"} snippetlist scroll-darker" tabindex="-1" role="dialog" aria-modal="true" title="${e.out("Snippets")}">\n            </div>`;n.appendHtml(i,r),t.opts.snippetHandle||(o="display:none;")}else o="display:none;",s="left";let r="",l="",a="";if(t.opts.emailMode){l=t.opts.defaultEmailSnippetCategory;for(let e=0;e<t.opts.emailSnippetCategories.length;e++)a+='<li role="option" tabindex="0" data-value="'+t.opts.emailSnippetCategories[e][0]+'">'+t.opts.emailSnippetCategories[e][1]+"</li>",t.opts.emailSnippetCategories[e][0]===t.opts.defaultEmailSnippetCategory&&(r=t.opts.emailSnippetCategories[e][1])}else{l=t.opts.defaultSnippetCategory;for(let e=0;e<t.opts.snippetCategories.length;e++)a+='<li role="option" tabindex="0" data-value="'+t.opts.snippetCategories[e][0]+'">'+t.opts.snippetCategories[e][1]+"</li>",t.opts.snippetCategories[e][0]===t.opts.defaultSnippetCategory&&(r=t.opts.snippetCategories[e][1])}let d='<div class="is-dropdown selectsnippet" style="position:absolute;top:0;right:0;padding: 0;width:100%;z-index:2;"><button tabindex="0" class="dropdown-toggle no-outline" title="'+e.out("Snippet Categories")+'" type="button" aria-haspopup="true" data-value="'+l+'"><span>'+r+'</span></button><ul class="dropdown-menu" role="listbox" title="'+e.out("Snippets")+'" aria-expanded="false">'+a+"</ul></div>"+("right"===s?'<div id="divSnippetScrollUp" role="button" tabindex="-1" style="top:calc(50% - 27px);right:25px;">&#9650;</div><div id="divSnippetScrollDown" role="button" tabindex="-1" style="top:calc(50% + 27px);right:25px;">&#9660;</div><div id="divSnippetHandle" role="button" tabindex="-1" title="'+e.out("Snippets")+'" data-title="'+e.out("Snippets")+'" style="'+o+'"><svg class="is-icon-flex"><use xlink:href="#ion-ios-arrow-left"></use></svg></div>':'<div id="divSnippetScrollUp" role="button" tabindex="-1" style="top:calc(50% - 27px);left:10px;">&#9650;</div><div id="divSnippetScrollDown" role="button" tabindex="-1" style="top:calc(50% + 27px);left:10px;">&#9660;</div><div id="divSnippetHandle" role="button" tabindex="-1" title="'+e.out("Snippets")+'" data-title="'+e.out("Snippets")+'" style="'+o+'"><svg class="is-icon-flex"><use xlink:href="#ion-ios-arrow-right"></use></svg></div>')+'<div class="is-design-list" tabindex="0"></div>',c=document.querySelector(t.opts.snippetList);n.appendHtml(c,d);const u=new Go(c.querySelector(".selectsnippet"));u.element.addEventListener("change",(()=>{let i=u.value,o=p.querySelectorAll(".snippet-item"),s=!1;Array.prototype.forEach.call(o,(t=>{t.getAttribute("data-cat")===i&&(s=!0)})),s||t.opts.snippetJSON.snippets.forEach((t=>{t.category===i&&n.appendHtml(p,'<div class="snippet-item" data-id="'+t.id+'" data-cat="'+t.category+'"><img alt="'+e.out("Snippet")+'" alt="" src="'+h+t.thumbnail+'"><span class="is-overlay"></span></div>')})),i&&(Array.prototype.forEach.call(o,(t=>{n.addClass(t,"hide")})),Array.prototype.forEach.call(o,(t=>{t.getAttribute("data-cat")===i&&(t.className=t.className.replace(/hide/g,""))})))})),u.toggle(!1),"#divSnippetList"===t.opts.snippetList&&(c.querySelector(".selectsnippet").style.display="none",c.querySelector(".is-design-list").style.display="none",t.doc.addEventListener("click",t.doHideSnippetHandler=e=>{var i=(e=e||window.event).target||e.srcElement;if("auto"===t.opts.snippetsSidebarDisplay&&n.hasClass(c,"active")){n.parentsHasClass(i,"is-builder")&&function(t){const e=t.dom;let i=document.querySelector("#divSnippetList");const n=i.querySelector("#divSnippetHandle");e.removeClass(i,"active"),"right"===t.opts.sidePanel?n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-left"></use></svg>':n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-right"></use></svg>';setTimeout((()=>{i.querySelector(".selectsnippet").style.display="none",i.querySelector(".is-design-list").style.display="none"}),300)}
/*!
	 * Cropper.js v1.5.12
	 * https://fengyuanchen.github.io/cropperjs
	 *
	 * Copyright 2015-present Chen Fengyuan
	 * Released under the MIT license
	 *
	 * Date: 2021-06-12T08:00:17.411Z
	 */(t)}},!1));const p=document.querySelector(".is-design-list");let h=t.opts.snippetPath,g=t.opts.snippetJSON.snippets,m=t.opts.slider;if(null!=m)if("slick"===m){const e=t=>"glide"!==t.type;t.opts.snippetJSON.snippets=g.filter(e)}else if("glide"===m){const e=t=>"slick"!==t.type;t.opts.snippetJSON.snippets=g.filter(e)}else if("all"===m);else{const e=t=>"glide"!==t.type&&"slick"!==t.type;t.opts.snippetJSON.snippets=g.filter(e)}else{var f=!0;if(t.win.jQuery&&t.win.jQuery.fn.slick&&(f=!1),f){const t=g.filter((t=>"slick"!==t.type));g=[...t]}if(!t.win.Glide){const t=g.filter((t=>!(t.glide||"glide"===t.type)));g=[...t]}t.opts.snippetJSON.snippets=[...g]}let b,v=1;if(t.opts.emailMode?t.opts.snippetJSON.snippets.forEach((i=>{i.id=v,i.category===t.opts.defaultEmailSnippetCategory+""&&n.appendHtml(p,'<div class="snippet-item" data-id="'+i.id+'" data-cat="'+i.category+'"><img alt="'+e.out("Snippet")+'" src="'+h+i.thumbnail+'"><span class="is-overlay"></span></div>'),v++})):t.opts.snippetJSON.snippets.forEach((i=>{i.id=v,i.category===t.opts.defaultSnippetCategory+""&&n.appendHtml(p,'<div class="snippet-item" data-id="'+i.id+'" data-cat="'+i.category+'"><img alt="'+e.out("Snippet")+'" src="'+h+i.thumbnail+'"><span class="is-overlay"></span></div>'),v++})),new Co(p,{group:{name:"shared",pull:"clone",put:!1},sort:!1,animation:150,onChoose:()=>{const e='\n            <style id="css-scale">\n                .sortable-ghost {\n                    height: 50px;\n                }\n                .sortable-ghost * {\n                    display: none\n                }\n            </style>\n            ';if(t.iframe){const i=t.contentStuff.querySelector("#css-scale");i&&i.parentNode.removeChild(i),t.contentStuff.insertAdjacentHTML("afterbegin",e)}else{const i=t.builderStuff.querySelector("#css-scale");i&&i.parentNode.removeChild(i),t.builderStuff.insertAdjacentHTML("afterbegin",e)}t.sectionDropSetup()},onMove:()=>{let e=t.doc.querySelector(".row-add-initial");e&&(e.style.display="none")},onStart:()=>{b=null;const e=t.doc.querySelector(".builder-active");e&&(b=e,n.removeClass(b,"builder-active")),t.uo.saveForUndo();let i=document.querySelector(".is-sidebar-overlay");i&&(i.style.display="none")},onEnd:()=>{let i=document.querySelector(".is-sidebar-overlay");i&&(i.style.display="block"),e.checkEmpty();let o=t.doc.querySelector(".row-add-initial");o&&(o.style.display=""),b&&n.addClass(b,"builder-active"),t.sortableOnPage&&t.sortableOnPage.destroy()}}),"#divSnippetList"===t.opts.snippetList){const i=c.querySelector("#divSnippetHandle");n.addEventListener(i,"click",(()=>{Yo(t),e.clearActiveCell(),e.clearControls()}));const o=window.innerWidth;t.opts.snippetOpen&&o>=960&&(c.style.cssText="transition: all ease 0.8s;",setTimeout((function(){Yo(t)}),100),setTimeout((function(){c.style.cssText=""}),1300))}let y=c.querySelector("#divSnippetScrollUp"),x=c.querySelector("#divSnippetScrollDown");y.style.display="none",x.style.display="none"};function Yo(t){const e=t.dom;let i=document.querySelector("#divSnippetList");const n=i.querySelector("#divSnippetHandle");e.hasClass(i,"active")?(e.removeClass(i,"active"),"right"===t.opts.sidePanel?n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-left"></use></svg>':n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-right"></use></svg>',setTimeout((()=>{i.querySelector(".selectsnippet").style.display="none",i.querySelector(".is-design-list").style.display="none"}),300)):(i.querySelector(".selectsnippet").style.display="block",i.querySelector(".is-design-list").style.display="block",setTimeout((()=>{e.addClass(i,"active"),"right"===t.opts.sidePanel?n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-right"></use></svg>':n.innerHTML='<svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-ios-arrow-left"></use></svg>'}),10))}function Xo(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Zo(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xo(Object(i),!0).forEach((function(e){Jo(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xo(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ko(t){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(t)}function Qo(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jo(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ts(t){return function(t){if(Array.isArray(t))return es(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return es(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return es(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var is="undefined"!=typeof window&&void 0!==window.document,ns=is?window:{},os=!(!is||!ns.document.documentElement)&&"ontouchstart"in ns.document.documentElement,ss=!!is&&"PointerEvent"in ns,rs="cropper",ls="all",as="crop",ds="move",cs="zoom",us="e",ps="w",hs="s",gs="n",ms="ne",fs="nw",bs="se",vs="sw",ys="".concat(rs,"-crop"),xs="".concat(rs,"-disabled"),ws="".concat(rs,"-hidden"),Ss="".concat(rs,"-hide"),_s="".concat(rs,"-invisible"),Cs="".concat(rs,"-modal"),ks="".concat(rs,"-move"),Es="".concat(rs,"Action"),As="".concat(rs,"Preview"),Ls="crop",qs="move",Ts="none",Ms="crop",Os="cropend",Rs="cropmove",Bs="cropstart",Ns="dblclick",Is=ss?"pointerdown":os?"touchstart":"mousedown",$s=ss?"pointermove":os?"touchmove":"mousemove",Ds=ss?"pointerup pointercancel":os?"touchend touchcancel":"mouseup",Ps="ready",zs="resize",Hs="wheel",Fs="zoom",Us="image/jpeg",Ws=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,js=/^data:/,Gs=/^data:image\/jpeg;base64,/,Vs=/^img|canvas$/i,Ys={viewMode:0,dragMode:Ls,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Xs=Number.isNaN||ns.isNaN;function Zs(t){return"number"==typeof t&&!Xs(t)}var Ks=function(t){return t>0&&t<1/0};function Qs(t){return void 0===t}function Js(t){return"object"===Ko(t)&&null!==t}var tr=Object.prototype.hasOwnProperty;function er(t){if(!Js(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&tr.call(i,"isPrototypeOf")}catch(t){return!1}}function ir(t){return"function"==typeof t}var nr=Array.prototype.slice;function or(t){return Array.from?Array.from(t):nr.call(t)}function sr(t,e){return t&&ir(e)&&(Array.isArray(t)||Zs(t.length)?or(t).forEach((function(i,n){e.call(t,i,n,t)})):Js(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var rr=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Js(t)&&i.length>0&&i.forEach((function(e){Js(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},lr=/\.\d*(?:0|9){12}\d*$/;function ar(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return lr.test(t)?Math.round(t*e)/e:t}var dr=/^width|height|left|top|marginLeft|marginTop$/;function cr(t,e){var i=t.style;sr(e,(function(t,e){dr.test(e)&&Zs(t)&&(t="".concat(t,"px")),i[e]=t}))}function ur(t,e){if(e)if(Zs(t.length))sr(t,(function(t){ur(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function pr(t,e){e&&(Zs(t.length)?sr(t,(function(t){pr(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function hr(t,e,i){e&&(Zs(t.length)?sr(t,(function(t){hr(t,e,i)})):i?ur(t,e):pr(t,e))}var gr=/([a-z\d])([A-Z])/g;function mr(t){return t.replace(gr,"$1-$2").toLowerCase()}function fr(t,e){return Js(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(mr(e)))}function br(t,e,i){Js(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(mr(e)),i)}var vr=/\s\s*/,yr=function(){var t=!1;if(is){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});ns.addEventListener("test",i,n),ns.removeEventListener("test",i,n)}return t}();function xr(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(vr).forEach((function(e){if(!yr){var s=t.listeners;s&&s[e]&&s[e][i]&&(o=s[e][i],delete s[e][i],0===Object.keys(s[e]).length&&delete s[e],0===Object.keys(s).length&&delete t.listeners)}t.removeEventListener(e,o,n)}))}function wr(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(vr).forEach((function(e){if(n.once&&!yr){var s=t.listeners,r=void 0===s?{}:s;o=function(){delete r[e][i],t.removeEventListener(e,o,n);for(var s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];i.apply(t,l)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],n),r[e][i]=o,t.listeners=r}t.addEventListener(e,o,n)}))}function Sr(t,e,i){var n;return ir(Event)&&ir(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function _r(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Cr=ns.location,kr=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Er(t){var e=t.match(kr);return null!==e&&(e[1]!==Cr.protocol||e[2]!==Cr.hostname||e[3]!==Cr.port)}function Ar(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Lr(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,o=t.translateX,s=t.translateY,r=[];Zs(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),Zs(s)&&0!==s&&r.push("translateY(".concat(s,"px)")),Zs(e)&&0!==e&&r.push("rotate(".concat(e,"deg)")),Zs(i)&&1!==i&&r.push("scaleX(".concat(i,")")),Zs(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var l=r.length?r.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function qr(t,e){var i=t.pageX,n=t.pageY,o={endX:i,endY:n};return e?o:Zo({startX:i,startY:n},o)}function Tr(t){var e=t.aspectRatio,i=t.height,n=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",s=Ks(n),r=Ks(i);if(s&&r){var l=i*e;"contain"===o&&l>n||"cover"===o&&l<n?i=n/e:n=i*e}else s?i=n/e:r&&(n=i*e);return{width:n,height:i}}var Mr=String.fromCharCode;var Or=/^data:.*,/;function Rr(t){var e,i=new DataView(t);try{var n,o,s;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,l=2;l+1<r;){if(255===i.getUint8(l)&&225===i.getUint8(l+1)){o=l;break}l+=1}if(o){var a=o+10;if("Exif"===function(t,e,i){var n="";i+=e;for(var o=e;o<i;o+=1)n+=Mr(t.getUint8(o));return n}(i,o+4,4)){var d=i.getUint16(a);if(((n=18761===d)||19789===d)&&42===i.getUint16(a+2,n)){var c=i.getUint32(a+4,n);c>=8&&(s=a+c)}}}if(s){var u,p,h=i.getUint16(s,n);for(p=0;p<h;p+=1)if(u=s+12*p+2,274===i.getUint16(u,n)){u+=8,e=i.getUint16(u,n),i.setUint16(u,1,n);break}}}catch(t){e=1}return e}var Br={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper,o=Number(e.minContainerWidth),s=Number(e.minContainerHeight);ur(n,ws),pr(t,ws);var r={width:Math.max(i.offsetWidth,o>=0?o:200),height:Math.max(i.offsetHeight,s>=0?s:100)};this.containerData=r,cr(n,{width:r.width,height:r.height}),ur(t,ws),pr(n,ws)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180==90,o=n?e.naturalHeight:e.naturalWidth,s=n?e.naturalWidth:e.naturalHeight,r=o/s,l=t.width,a=t.height;t.height*r>t.width?3===i?l=t.height*r:a=t.width/r:3===i?a=t.width/r:l=t.height*r;var d={aspectRatio:r,naturalWidth:o,naturalHeight:s,width:l,height:a};this.canvasData=d,this.limited=1===i||2===i,this.limitCanvas(!0,!0),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),d.left=(t.width-d.width)/2,d.top=(t.height-d.height)/2,d.oldLeft=d.left,d.oldTop=d.top,this.initialCanvasData=rr({},d)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,s=this.cropBoxData,r=i.viewMode,l=o.aspectRatio,a=this.cropped&&s;if(t){var d=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;r>1?(d=Math.max(d,n.width),c=Math.max(c,n.height),3===r&&(c*l>d?d=c*l:c=d/l)):r>0&&(d?d=Math.max(d,a?s.width:0):c?c=Math.max(c,a?s.height:0):a&&(d=s.width,(c=s.height)*l>d?d=c*l:c=d/l));var u=Tr({aspectRatio:l,width:d,height:c});d=u.width,c=u.height,o.minWidth=d,o.minHeight=c,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(r>(a?0:1)){var p=n.width-o.width,h=n.height-o.height;o.minLeft=Math.min(0,p),o.minTop=Math.min(0,h),o.maxLeft=Math.max(0,p),o.maxTop=Math.max(0,h),a&&this.limited&&(o.minLeft=Math.min(s.left,s.left+(s.width-o.width)),o.minTop=Math.min(s.top,s.top+(s.height-o.height)),o.maxLeft=s.left,o.maxTop=s.top,2===r&&(o.width>=n.width&&(o.minLeft=Math.min(0,p),o.maxLeft=Math.max(0,p)),o.height>=n.height&&(o.minTop=Math.min(0,h),o.maxTop=Math.max(0,h))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var o=function(t){var e=t.width,i=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:i,height:e};var o=n%90*Math.PI/180,s=Math.sin(o),r=Math.cos(o),l=e*r+i*s,a=e*s+i*r;return n>90?{width:a,height:l}:{width:l,height:a}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),s=o.width,r=o.height,l=i.width*(s/i.naturalWidth),a=i.height*(r/i.naturalHeight);i.left-=(l-i.width)/2,i.top-=(a-i.height)/2,i.width=l,i.height=a,i.aspectRatio=s/r,i.naturalWidth=s,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,cr(this.canvas,rr({width:i.width,height:i.height},Lr({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),o=i.naturalHeight*(e.height/e.naturalHeight);rr(i,{width:n,height:o,left:(e.width-n)/2,top:(e.height-o)/2}),cr(this.image,rr({width:i.width,height:i.height},Lr(rr({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};i&&(e.height*i>e.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=rr({},o)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,o=this.canvasData,s=this.cropBoxData,r=this.limited,l=i.aspectRatio;if(t){var a=Number(i.minCropBoxWidth)||0,d=Number(i.minCropBoxHeight)||0,c=r?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,u=r?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;a=Math.min(a,n.width),d=Math.min(d,n.height),l&&(a&&d?d*l>a?d=a/l:a=d*l:a?d=a/l:d&&(a=d*l),u*l>c?u=c/l:c=u*l),s.minWidth=Math.min(a,c),s.minHeight=Math.min(d,u),s.maxWidth=c,s.maxHeight=u}e&&(r?(s.minLeft=Math.max(0,o.left),s.minTop=Math.max(0,o.top),s.maxLeft=Math.min(n.width,o.left+o.width)-s.width,s.maxTop=Math.min(n.height,o.top+o.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=n.width-s.width,s.maxTop=n.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&br(this.face,Es,i.width>=e.width&&i.height>=e.height?ds:ls),cr(this.cropBox,rr({width:i.width,height:i.height},Lr({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Sr(this.element,Ms,this.getData())}},Nr={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",s=document.createElement("img");if(e&&(s.crossOrigin=e),s.src=n,s.alt=o,this.viewBox.appendChild(s),this.viewBoxImage=s,i){var r=i;"string"==typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,sr(r,(function(t){var i=document.createElement("img");br(t,As,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=n,i.alt=o,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){sr(this.previews,(function(t){var e=fr(t,As);cr(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(Js(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(mr(e)))}(t,As)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,o=i.height,s=t.width,r=t.height,l=i.left-e.left-t.left,a=i.top-e.top-t.top;this.cropped&&!this.disabled&&(cr(this.viewBoxImage,rr({width:s,height:r},Lr(rr({translateX:-l,translateY:-a},t)))),sr(this.previews,(function(e){var i=fr(e,As),d=i.width,c=i.height,u=d,p=c,h=1;n&&(p=o*(h=d/n)),o&&p>c&&(u=n*(h=c/o),p=c),cr(e,{width:u,height:p}),cr(e.getElementsByTagName("img")[0],rr({width:s*h,height:r*h},Lr(rr({translateX:-l*h,translateY:-a*h},t))))})))}},Ir={bind:function(){var t=this.element,e=this.options,i=this.cropper;ir(e.cropstart)&&wr(t,Bs,e.cropstart),ir(e.cropmove)&&wr(t,Rs,e.cropmove),ir(e.cropend)&&wr(t,Os,e.cropend),ir(e.crop)&&wr(t,Ms,e.crop),ir(e.zoom)&&wr(t,Fs,e.zoom),wr(i,Is,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&wr(i,Hs,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&wr(i,Ns,this.onDblclick=this.dblclick.bind(this)),wr(t.ownerDocument,$s,this.onCropMove=this.cropMove.bind(this)),wr(t.ownerDocument,Ds,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&wr(window,zs,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;ir(e.cropstart)&&xr(t,Bs,e.cropstart),ir(e.cropmove)&&xr(t,Rs,e.cropmove),ir(e.cropend)&&xr(t,Os,e.cropend),ir(e.crop)&&xr(t,Ms,e.crop),ir(e.zoom)&&xr(t,Fs,e.zoom),xr(i,Is,this.onCropStart),e.zoomable&&e.zoomOnWheel&&xr(i,Hs,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&xr(i,Ns,this.onDblclick),xr(t.ownerDocument,$s,this.onCropMove),xr(t.ownerDocument,Ds,this.onCropEnd),e.responsive&&xr(window,zs,this.onResize)}},$r={resize:function(){if(!this.disabled){var t,e,i=this.options,n=this.container,o=this.containerData,s=n.offsetWidth/o.width,r=n.offsetHeight/o.height,l=Math.abs(s-1)>Math.abs(r-1)?s:r;if(1!==l)i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(sr(t,(function(e,i){t[i]=e*l}))),this.setCropBoxData(sr(e,(function(t,i){e[i]=t*l}))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===Ts||this.setDragMode((t=this.dragBox,e=ys,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?qs:Ls))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(Zs(e)&&1!==e||Zs(i)&&0!==i||t.ctrlKey))){var n,o=this.options,s=this.pointers;t.changedTouches?sr(t.changedTouches,(function(t){s[t.identifier]=qr(t)})):s[t.pointerId||0]=qr(t),n=Object.keys(s).length>1&&o.zoomable&&o.zoomOnTouch?cs:fr(t.target,Es),Ws.test(n)&&!1!==Sr(this.element,Bs,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===as&&(this.cropping=!0,ur(this.dragBox,Cs)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Sr(this.element,Rs,{originalEvent:t,action:e})&&(t.changedTouches?sr(t.changedTouches,(function(t){rr(i[t.identifier]||{},qr(t,!0))})):rr(i[t.pointerId||0]||{},qr(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?sr(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,hr(this.dragBox,Cs,this.cropped&&this.options.modal)),Sr(this.element,Os,{originalEvent:t,action:e}))}}},Dr={change:function(t){var e,i=this.options,n=this.canvasData,o=this.containerData,s=this.cropBoxData,r=this.pointers,l=this.action,a=i.aspectRatio,d=s.left,c=s.top,u=s.width,p=s.height,h=d+u,g=c+p,m=0,f=0,b=o.width,v=o.height,y=!0;!a&&t.shiftKey&&(a=u&&p?u/p:1),this.limited&&(m=s.minLeft,f=s.minTop,b=m+Math.min(o.width,n.width,n.left+n.width),v=f+Math.min(o.height,n.height,n.top+n.height));var x=r[Object.keys(r)[0]],w={x:x.endX-x.startX,y:x.endY-x.startY},S=function(t){switch(t){case us:h+w.x>b&&(w.x=b-h);break;case ps:d+w.x<m&&(w.x=m-d);break;case gs:c+w.y<f&&(w.y=f-c);break;case hs:g+w.y>v&&(w.y=v-g)}};switch(l){case ls:d+=w.x,c+=w.y;break;case us:if(w.x>=0&&(h>=b||a&&(c<=f||g>=v))){y=!1;break}S(us),(u+=w.x)<0&&(l=ps,d-=u=-u),a&&(p=u/a,c+=(s.height-p)/2);break;case gs:if(w.y<=0&&(c<=f||a&&(d<=m||h>=b))){y=!1;break}S(gs),p-=w.y,c+=w.y,p<0&&(l=hs,c-=p=-p),a&&(u=p*a,d+=(s.width-u)/2);break;case ps:if(w.x<=0&&(d<=m||a&&(c<=f||g>=v))){y=!1;break}S(ps),u-=w.x,d+=w.x,u<0&&(l=us,d-=u=-u),a&&(p=u/a,c+=(s.height-p)/2);break;case hs:if(w.y>=0&&(g>=v||a&&(d<=m||h>=b))){y=!1;break}S(hs),(p+=w.y)<0&&(l=gs,c-=p=-p),a&&(u=p*a,d+=(s.width-u)/2);break;case ms:if(a){if(w.y<=0&&(c<=f||h>=b)){y=!1;break}S(gs),p-=w.y,c+=w.y,u=p*a}else S(gs),S(us),w.x>=0?h<b?u+=w.x:w.y<=0&&c<=f&&(y=!1):u+=w.x,w.y<=0?c>f&&(p-=w.y,c+=w.y):(p-=w.y,c+=w.y);u<0&&p<0?(l=vs,c-=p=-p,d-=u=-u):u<0?(l=fs,d-=u=-u):p<0&&(l=bs,c-=p=-p);break;case fs:if(a){if(w.y<=0&&(c<=f||d<=m)){y=!1;break}S(gs),p-=w.y,c+=w.y,u=p*a,d+=s.width-u}else S(gs),S(ps),w.x<=0?d>m?(u-=w.x,d+=w.x):w.y<=0&&c<=f&&(y=!1):(u-=w.x,d+=w.x),w.y<=0?c>f&&(p-=w.y,c+=w.y):(p-=w.y,c+=w.y);u<0&&p<0?(l=bs,c-=p=-p,d-=u=-u):u<0?(l=ms,d-=u=-u):p<0&&(l=vs,c-=p=-p);break;case vs:if(a){if(w.x<=0&&(d<=m||g>=v)){y=!1;break}S(ps),u-=w.x,d+=w.x,p=u/a}else S(hs),S(ps),w.x<=0?d>m?(u-=w.x,d+=w.x):w.y>=0&&g>=v&&(y=!1):(u-=w.x,d+=w.x),w.y>=0?g<v&&(p+=w.y):p+=w.y;u<0&&p<0?(l=ms,c-=p=-p,d-=u=-u):u<0?(l=bs,d-=u=-u):p<0&&(l=fs,c-=p=-p);break;case bs:if(a){if(w.x>=0&&(h>=b||g>=v)){y=!1;break}S(us),p=(u+=w.x)/a}else S(hs),S(us),w.x>=0?h<b?u+=w.x:w.y>=0&&g>=v&&(y=!1):u+=w.x,w.y>=0?g<v&&(p+=w.y):p+=w.y;u<0&&p<0?(l=fs,c-=p=-p,d-=u=-u):u<0?(l=vs,d-=u=-u):p<0&&(l=ms,c-=p=-p);break;case ds:this.move(w.x,w.y),y=!1;break;case cs:this.zoom(function(t){var e=Zo({},t),i=0;return sr(t,(function(t,n){delete e[n],sr(e,(function(e){var n=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),s=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),l=Math.sqrt(n*n+o*o),a=(Math.sqrt(s*s+r*r)-l)/l;Math.abs(a)>Math.abs(i)&&(i=a)}))})),i}(r),t),y=!1;break;case as:if(!w.x||!w.y){y=!1;break}e=_r(this.cropper),d=x.startX-e.left,c=x.startY-e.top,u=s.minWidth,p=s.minHeight,w.x>0?l=w.y>0?bs:ms:w.x<0&&(d-=u,l=w.y>0?vs:fs),w.y<0&&(c-=p),this.cropped||(pr(this.cropBox,ws),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}y&&(s.width=u,s.height=p,s.left=d,s.top=c,this.action=l,this.renderCropBox()),sr(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Pr={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ur(this.dragBox,Cs),pr(this.cropBox,ws),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=rr({},this.initialImageData),this.canvasData=rr({},this.initialCanvasData),this.cropBoxData=rr({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(rr(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),pr(this.dragBox,Cs),ur(this.cropBox,ws)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,sr(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,pr(this.cropper,xs)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ur(this.cropper,xs)),this},destroy:function(){var t=this.element;return t[rs]?(t[rs]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=i.left,o=i.top;return this.moveTo(Qs(t)?t:n+Number(t),Qs(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(Zs(t)&&(i.left=t,n=!0),Zs(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,o=this.canvasData,s=o.width,r=o.height,l=o.naturalWidth,a=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var d=l*t,c=a*t;if(!1===Sr(this.element,Fs,{ratio:t,oldRatio:s/l,originalEvent:i}))return this;if(i){var u=this.pointers,p=_r(this.cropper),h=u&&Object.keys(u).length?function(t){var e=0,i=0,n=0;return sr(t,(function(t){var o=t.startX,s=t.startY;e+=o,i+=s,n+=1})),{pageX:e/=n,pageY:i/=n}}(u):{pageX:i.pageX,pageY:i.pageY};o.left-=(d-s)*((h.pageX-p.left-o.left)/s),o.top-=(c-r)*((h.pageY-p.top-o.top)/r)}else er(e)&&Zs(e.x)&&Zs(e.y)?(o.left-=(d-s)*((e.x-o.left)/s),o.top-=(c-r)*((e.y-o.top)/r)):(o.left-=(d-s)/2,o.top-=(c-r)/2);o.width=d,o.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return Zs(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,Zs(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(Zs(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(Zs(t)&&(i.scaleX=t,n=!0),Zs(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,n=this.imageData,o=this.canvasData,s=this.cropBoxData;if(this.ready&&this.cropped){t={x:s.left-o.left,y:s.top-o.top,width:s.width,height:s.height};var r=n.width/n.naturalWidth;if(sr(t,(function(e,i){t[i]=e/r})),e){var l=Math.round(t.y+t.height),a=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=a-t.x,t.height=l-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=n.rotate||0),i.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&er(t)){var s=!1;e.rotatable&&Zs(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,s=!0),e.scalable&&(Zs(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,s=!0),Zs(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;Zs(t.x)&&(o.left=t.x*r+n.left),Zs(t.y)&&(o.top=t.y*r+n.top),Zs(t.width)&&(o.width=t.width*r),Zs(t.height)&&(o.height=t.height*r),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?rr({},this.containerData):{}},getImageData:function(){return this.sized?rr({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&sr(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&er(t)&&(Zs(t.left)&&(e.left=t.left),Zs(t.top)&&(e.top=t.top),Zs(t.width)?(e.width=t.width,e.height=t.width/i):Zs(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&er(t)&&(Zs(t.left)&&(n.left=t.left),Zs(t.top)&&(n.top=t.top),Zs(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),Zs(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),o&&(e?n.height=n.width/o:i&&(n.width=n.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=function(t,e,i,n){var o=e.aspectRatio,s=e.naturalWidth,r=e.naturalHeight,l=e.rotate,a=void 0===l?0:l,d=e.scaleX,c=void 0===d?1:d,u=e.scaleY,p=void 0===u?1:u,h=i.aspectRatio,g=i.naturalWidth,m=i.naturalHeight,f=n.fillColor,b=void 0===f?"transparent":f,v=n.imageSmoothingEnabled,y=void 0===v||v,x=n.imageSmoothingQuality,w=void 0===x?"low":x,S=n.maxWidth,_=void 0===S?1/0:S,C=n.maxHeight,k=void 0===C?1/0:C,E=n.minWidth,A=void 0===E?0:E,L=n.minHeight,q=void 0===L?0:L,T=document.createElement("canvas"),M=T.getContext("2d"),O=Tr({aspectRatio:h,width:_,height:k}),R=Tr({aspectRatio:h,width:A,height:q},"cover"),B=Math.min(O.width,Math.max(R.width,g)),N=Math.min(O.height,Math.max(R.height,m)),I=Tr({aspectRatio:o,width:_,height:k}),$=Tr({aspectRatio:o,width:A,height:q},"cover"),D=Math.min(I.width,Math.max($.width,s)),P=Math.min(I.height,Math.max($.height,r)),z=[-D/2,-P/2,D,P];return T.width=ar(B),T.height=ar(N),M.fillStyle=b,M.fillRect(0,0,B,N),M.save(),M.translate(B/2,N/2),M.rotate(a*Math.PI/180),M.scale(c,p),M.imageSmoothingEnabled=y,M.imageSmoothingQuality=w,M.drawImage.apply(M,[t].concat(ts(z.map((function(t){return Math.floor(ar(t))}))))),M.restore(),T}(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),o=n.x,s=n.y,r=n.width,l=n.height,a=i.width/Math.floor(e.naturalWidth);1!==a&&(o*=a,s*=a,r*=a,l*=a);var d=r/l,c=Tr({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=Tr({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=Tr({aspectRatio:d,width:t.width||(1!==a?i.width:r),height:t.height||(1!==a?i.height:l)}),h=p.width,g=p.height;h=Math.min(c.width,Math.max(u.width,h)),g=Math.min(c.height,Math.max(u.height,g));var m=document.createElement("canvas"),f=m.getContext("2d");m.width=ar(h),m.height=ar(g),f.fillStyle=t.fillColor||"transparent",f.fillRect(0,0,h,g);var b=t.imageSmoothingEnabled,v=void 0===b||b,y=t.imageSmoothingQuality;f.imageSmoothingEnabled=v,y&&(f.imageSmoothingQuality=y);var x,w,S,_,C,k,E=i.width,A=i.height,L=o,q=s;L<=-r||L>E?(L=0,x=0,S=0,C=0):L<=0?(S=-L,L=0,C=x=Math.min(E,r+L)):L<=E&&(S=0,C=x=Math.min(r,E-L)),x<=0||q<=-l||q>A?(q=0,w=0,_=0,k=0):q<=0?(_=-q,q=0,k=w=Math.min(A,l+q)):q<=A&&(_=0,k=w=Math.min(l,A-q));var T=[L,q,x,w];if(C>0&&k>0){var M=h/r;T.push(S*M,_*M,C*M,k*M)}return f.drawImage.apply(f,[i].concat(ts(T.map((function(t){return Math.floor(ar(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||Qs(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o=t===Ls,s=e.movable&&t===qs;t=o||s?t:Ts,e.dragMode=t,br(i,Es,t),hr(i,ys,o),hr(i,ks,s),e.cropBoxMovable||(br(n,Es,t),hr(n,ys,o),hr(n,ks,s))}return this}},zr=ns.Cropper,Hr=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!Vs.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=rr({},Ys,er(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,n;return e=t,i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[rs]){if(e[rs]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(js.test(t))Gs.test(t)?this.read((o=t.replace(Or,""),s=atob(o),r=new ArrayBuffer(s.length),sr(l=new Uint8Array(r),(function(t,e){l[e]=s.charCodeAt(e)})),r)):this.clone();else{var o,s,r,l,a=new XMLHttpRequest,d=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=d,a.onerror=d,a.ontimeout=d,a.onprogress=function(){a.getResponseHeader("content-type")!==Us&&a.abort()},a.onload=function(){e.read(a.response)},a.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Er(t)&&i.crossOrigin&&(t=Ar(t)),a.open("GET",t,!0),a.responseType="arraybuffer",a.withCredentials="use-credentials"===i.crossOrigin,a.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,n=Rr(t),o=0,s=1,r=1;if(n>1){this.url=function(t,e){for(var i=[],n=new Uint8Array(t);n.length>0;)i.push(Mr.apply(null,or(n.subarray(0,8192)))),n=n.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,Us);var l=function(t){var e=0,i=1,n=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:n}}(n);o=l.rotate,s=l.scaleX,r=l.scaleY}e.rotatable&&(i.rotate=o),e.scalable&&(i.scaleX=s,i.scaleY=r),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.options.checkCrossOrigin&&Er(e)&&(i||(i="anonymous"),n=Ar(e)),this.crossOrigin=i,this.crossOriginUrl=n;var o=document.createElement("img");i&&(o.crossOrigin=i),o.src=n||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),ur(o,Ss),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=ns.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(ns.navigator.userAgent),n=function(e,i){rr(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=rr({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var o=document.createElement("img"),s=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){n(o.width,o.height),i||s.removeChild(o)},o.src=e.src,i||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(o))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,n=t.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var s=o.querySelector(".".concat(rs,"-container")),r=s.querySelector(".".concat(rs,"-canvas")),l=s.querySelector(".".concat(rs,"-drag-box")),a=s.querySelector(".".concat(rs,"-crop-box")),d=a.querySelector(".".concat(rs,"-face"));this.container=n,this.cropper=s,this.canvas=r,this.dragBox=l,this.cropBox=a,this.viewBox=s.querySelector(".".concat(rs,"-view-box")),this.face=d,r.appendChild(i),ur(t,ws),n.insertBefore(s,t.nextSibling),this.isImg||pr(i,Ss),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,ur(a,ws),e.guides||ur(a.getElementsByClassName("".concat(rs,"-dashed")),ws),e.center||ur(a.getElementsByClassName("".concat(rs,"-center")),ws),e.background&&ur(s,"".concat(rs,"-bg")),e.highlight||ur(d,_s),e.cropBoxMovable&&(ur(d,ks),br(d,Es,ls)),e.cropBoxResizable||(ur(a.getElementsByClassName("".concat(rs,"-line")),ws),ur(a.getElementsByClassName("".concat(rs,"-point")),ws)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),ir(e.ready)&&wr(t,Ps,e.ready,{once:!0}),Sr(t,Ps)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),pr(this.element,ws))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],n=[{key:"noConflict",value:function(){return window.Cropper=zr,t}},{key:"setDefaults",value:function(t){rr(Ys,er(t)&&t)}}],i&&Qo(e.prototype,i),n&&Qo(e,n),t}();function Fr(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function Ur(t,e){return function(i){i&&(t[e]=i)}}function Wr(t,e,i){return function(n){n&&(t[e][i]=n)}}function jr(t,e){return function(i){var n=i.prototype;t.forEach((function(t){e(n,t)}))}}function Gr(t,e){return void 0===e&&(e={}),function(i,n){t.forEach((function(t){var o=e[t]||t;o in i||(i[o]=function(){for(var e,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=(e=this[n])[t].apply(e,i);return s===this[n]?this:s})}))}}rr(Hr.prototype,Br,Nr,Ir,$r,Dr,Pr);var Vr=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var i=this.keys,n=this.values,o=i.indexOf(t),s=-1===o?i.length:o;i[s]=t,n[s]=e},t}(),Yr=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),Xr="function"==typeof Map,Zr=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var Kr=function(){function t(t,e,i,n,o,s,r,l){this.prevList=t,this.list=e,this.added=i,this.removed=n,this.changed=o,this.maintained=s,this.changedBeforeAdded=r,this.fixed=l}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var i=[],n=[];return t.forEach((function(t){var e=t[0],o=t[1],s=new Zr;i[e]=s,n[o]=s})),i.forEach((function(t,e){t.connect(i[e-1])})),t.filter((function(t,i){return!e[i]})).map((function(t,e){var o=t[0],s=t[1];if(o===s)return[0,0];var r=i[o],l=n[s-1],a=r.getIndex();return r.disconnect(),l?r.connect(l,l.next):r.connect(void 0,i[0]),[a,r.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,i=[];this.cacheOrdered=t.filter((function(t,n){var o=t[0],s=t[1],r=e[n],l=r[0],a=r[1];if(o!==s)return i.push([l,a]),!0})),this.cachePureChanged=i},t}();function Qr(t,e,i){var n=Xr?Map:i?Yr:Vr,o=i||function(t){return t},s=[],r=[],l=[],a=t.map(o),d=e.map(o),c=new n,u=new n,p=[],h=[],g={},m=[],f=0,b=0;return a.forEach((function(t,e){c.set(t,e)})),d.forEach((function(t,e){u.set(t,e)})),a.forEach((function(t,e){var i=u.get(t);void 0===i?(++b,r.push(e)):g[i]=b})),d.forEach((function(t,e){var i=c.get(t);void 0===i?(s.push(e),++f):(l.push([i,e]),b=g[e]||0,p.push([i-b,e-f]),h.push(e===i),i!==e&&m.push([i,e]))})),r.reverse(),new Kr(t,e,s,r,m,l,p,h)}var Jr=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),i=Qr(this.list,e,this.findKeyCallback);return this.list=e,i},t}(),tl="function",el="object",il="string",nl="number",ol="undefined",sl=typeof window!==ol,rl=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ll=1e-7,al={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function dl(t){return typeof t===ol}function cl(t){return t&&typeof t===el}function ul(t){return Array.isArray(t)}function pl(t){return typeof t===il}function hl(t){return typeof t===nl}function gl(t){return typeof t===tl}function ml(t,e,i,n,o){return fl(t,e,i)?i:function(t,e,i,n,o){for(var s,r=function(i){var r=e[i].trim();if(r===t.close&&!fl(t,e,i))return{value:i};var l=i,a=kl(o,(function(t){return t.open===r}));if(a&&(l=ml(a,e,i,n,o)),-1===l)return s=i,"break";s=i=l},l=i;l<n;++l){var a=r(l);if(l=s,"object"==typeof a)return a.value;if("break"===a)break}return-1}(t,e,i+1,n,o)}function fl(t,e,i){if(!t.ignore)return null;var n=e.slice(Math.max(i-3,0),i+3).join("");return new RegExp(t.ignore).exec(n)}function bl(t,e){var i=pl(e)?{separator:e}:e,n=i.separator,o=void 0===n?",":n,s=i.isSeparateFirst,r=i.isSeparateOnlyOpenClose,l=i.isSeparateOpenClose,a=void 0===l?r:l,d=i.openCloseCharacters,c=void 0===d?rl:d,u=c.map((function(t){var e=t.open,i=t.close;return e===i?e:e+"|"+i})).join("|"),p=new RegExp("(\\s*"+o+"\\s*|"+u+"|\\s+)","g"),h=t.split(p).filter(Boolean),g=h.length,m=[],f=[];function b(){return!!f.length&&(m.push(f.join("")),f=[],!0)}for(var v,y=function(t){var e=h[t].trim(),i=t,n=kl(c,(function(t){return t.open===e})),l=kl(c,(function(t){return t.close===e}));if(n){if(-1!==(i=ml(n,h,t,g,c))&&a)return b()&&s?(v=t,"break"):(m.push(h.slice(t,i+1).join("")),t=i,s?(v=t,"break"):(v=t,"continue"))}else{if(l&&!fl(l,h,t))throw new Error("invalid format: "+l.close);if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(e,o)&&!r)return b(),s?(v=t,"break"):(v=t,"continue")}-1===i&&(i=g-1),f.push(h.slice(t,i+1).join("")),v=t=i},x=0;x<g;++x){var w=y(x);if(x=v,"break"===w)break}return f.length&&m.push(f.join("")),m}function vl(t){return bl(t,"")}function yl(t){return bl(t,",")}function xl(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function wl(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],n=e[2];return{prefix:i,unit:e[3],value:parseFloat(n)}}function Sl(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,i,n){return""+i+e+n.toLowerCase()}))}function _l(){return Date.now?Date.now():(new Date).getTime()}function Cl(t,e,i){void 0===i&&(i=-1);for(var n=t.length,o=0;o<n;++o)if(e(t[o],o,t))return o;return i}function kl(t,e,i){var n=Cl(t,e);return n>-1?t[n]:i}var El=function(){var t=_l(),e=sl&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var i=_l();return window.setTimeout((function(){e(i-t)}),1e3/60)}}(),Al=function(){var t=sl&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function Ll(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in e)e.push(i);return e}function ql(t,e){var i=wl(t),n=i.value,o=i.unit;if(cl(e)){var s=e[o];if(s){if(gl(s))return s(n);if(al[o])return al[o](n,s)}}else if("%"===o)return n*e/100;return al[o]?al[o](n):n}function Tl(t,e,i,n){return void 0===n&&(n=t[0]/t[1]),[[Il(e[0],ll),Il(e[0]/n,ll)],[Il(e[1]*n,ll),Il(e[1],ll)]].filter((function(t){return t.every((function(t,n){var o=e[n],s=Il(o,ll);return i?t<=o||t<=s:t>=o||t>=s}))}))[0]||t}function Ml(t,e,i,n){if(!n)return t.map((function(t,n){return function(t,e,i){return Math.max(e,Math.min(t,i))}(t,e[n],i[n])}));var o=t[0],s=t[1],r=!0===n?o/s:n,l=Tl(t,e,!1,r),a=l[0],d=l[1],c=Tl(t,i,!0,r),u=c[0],p=c[1];return o<a||s<d?(o=a,s=d):(o>u||s>p)&&(o=u,s=p),[o,s]}function Ol(t){for(var e=t.length,i=0,n=e-1;n>=0;--n)i+=t[n];return e?i/e:0}function Rl(t,e){var i=e[0]-t[0],n=e[1]-t[1],o=Math.atan2(n,i);return o>=0?o:o+2*Math.PI}function Bl(t){var e=function(t){return[0,1].map((function(e){return Ol(t.map((function(t){return t[e]})))}))}(t),i=Rl(e,t[0]),n=Rl(e,t[1]);return i<n&&n-i<Math.PI||i>n&&n-i<-Math.PI?1:-1}function Nl(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Il(t,e){if(!e)return t;var i=1/e;return Math.round(t/e)/i}function $l(t,e){return t.forEach((function(i,n){t[n]=Il(t[n],e)})),t}function Dl(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Pl(t,e,i,n){t.addEventListener(e,i,n)}function zl(t,e,i,n){t.removeEventListener(e,i,n)}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Hl=function(t,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Hl(t,e)};function Fl(t,e){function i(){this.constructor=t}Hl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ul=function(){return Ul=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ul.apply(this,arguments)};function Wl(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}function jl(t,e){if(t===e)return!1;for(var i in t)if(!(i in e))return!0;for(var i in e)if(t[i]!==e[i])return!0;return!1}function Gl(t,e){var i=Object.keys(t),n=Object.keys(e),o=Qr(i,n,(function(t){return t})),s={},r={},l={};return o.added.forEach((function(t){var i=n[t];s[i]=e[i]})),o.removed.forEach((function(e){var n=i[e];r[n]=t[n]})),o.maintained.forEach((function(n){var o=n[0],s=i[o],r=[t[s],e[s]];t[s]!==e[s]&&(l[s]=r)})),{added:s,removed:r,changed:l}}function Vl(t){t.forEach((function(t){t()}))}function Yl(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function Xl(t,e,i,n){return pl(t)||hl(t)?new ia("text_"+t,e,i,n,null,{}):new("string"==typeof t.type?na:t.type.prototype.render?aa:ra)(t.type,e,i,n,t.ref,t.props)}function Zl(t){var e=[];return t.forEach((function(t){e=e.concat(ul(t)?Zl(t):t)})),e}function Kl(t){var e=t.className,i=Wl(t,["className"]);return null!=e&&(i.class=e),delete i.style,delete i.children,i}function Ql(t,e){if(!e)return t;for(var i in e)dl(t[i])&&(t[i]=e[i]);return t}function Jl(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=e||{},s=o.key,r=o.ref,l=Wl(o,["key","ref"]);return{type:t,key:s,ref:r,props:Ul(Ul({},l),{children:Zl(i).filter((function(t){return null!=t&&!1!==t}))})}}var ta=function(){function t(t,e,i,n,o,s){void 0===s&&(s={}),this.type=t,this.key=e,this.index=i,this.container=n,this.ref=o,this.props=s,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,i,n){if(this.base&&!pl(e)&&!n&&!this._should(e.props,i))return!1;this.original=e,this._setState(i);var o=this.props;return pl(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?o:{},i),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function ea(t){var e={},i={};for(var n in t)0===n.indexOf("on")?i[n.replace("on","").toLowerCase()]=t[n]:e[n]=t[n];return{attributes:e,events:i}}var ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Fl(e,t);var i=e.prototype;return i._render=function(t){var e=this,i=!this.base;return i&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){i?e._mounted():e._updated()})),!0},i._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(ta),na=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}Fl(e,t);var i=e.prototype;return i.addEventListener=function(t,e){var i=this.events;i[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,i[t])},i.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},i._should=function(t){return jl(this.props,t)},i._render=function(t,e){var i=this,n=!this.base;if(n){var o=this._hasSVG();this._isSVG=o;var s=this.props.portalContainer;if(!s){var r=this.type;s=o?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r)}this.base=s}ha(this,this._providers,this.props.children,t,null);var l=this.base,a=ea(e),d=a.attributes,c=a.events,u=ea(this.props),p=u.attributes,h=u.events;return function(t,e,i){var n=Gl(t,e),o=n.added,s=n.removed,r=n.changed;for(var l in o)i.setAttribute(l,o[l]);for(var l in r)i.setAttribute(l,r[l][1]);for(var l in s)i.removeAttribute(l)}(Kl(d),Kl(p),l),function(t,e,i){var n=Gl(t,e),o=n.added,s=n.removed,r=n.changed;for(var l in s)i.removeEventListener(l);for(var l in o)i.addEventListener(l,o[l]);for(var l in r)i.removeEventListener(l),i.addEventListener(l,r[l][1]);for(var l in s)i.removeEventListener(l)}(c,h,this),function(t,e,i){var n=i.style,o=Gl(t,e),s=o.added,r=o.removed,l=o.changed;for(var a in s){var d=Sl(a,"-");n.setProperty?n.setProperty(d,s[a]):n[d]=s[a]}for(var a in l)d=Sl(a,"-"),n.setProperty?n.setProperty(d,l[a][1]):n[d]=l[a][1];for(var a in r)d=Sl(a,"-"),n.removeProperty?n.removeProperty(d):n[d]=""}(e.style||{},this.props.style||{},l),t.push((function(){n?i._mounted():i._updated()})),!0},i._unmount=function(){var t=this.events,e=this.base;for(var i in t)e.removeEventListener(i,t[i]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},i._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=oa(this.container);return t&&"ownerSVGElement"in t},e}(ta);function oa(t){if(!t)return null;var e=t.base;return e instanceof Node?e:oa(t.container)}function sa(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?sa(e[0].base):null}var ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Fl(e,t);var i=e.prototype;return i._render=function(t){var e=this.type(this.props);return ha(this,this._providers,e?[e]:[],t),!0},i._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(ta),la=function(t){function e(e){var i=t.call(this,"container","container",0,null)||this;return i.base=e,i}Fl(e,t);var i=e.prototype;return i._render=function(){return!0},i._unmount=function(){},e}(ta),aa=function(t){function e(e,i,n,o,s,r){return void 0===r&&(r={}),t.call(this,e,i,n,o,s,Ql(r,e.defaultProps))||this}Fl(e,t);var i=e.prototype;return i._should=function(t,e){return this.base.shouldComponentUpdate(Ql(t,this.type.defaultProps),e||this.base.state)},i._render=function(t,e,i){var n=this;this.props=Ql(this.props,this.type.defaultProps);var o=!this.base;o?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var s=this.base,r=s.state,l=s.render();l&&l.props&&!l.props.children.length&&(l.props.children=this.props.children),ha(this,this._providers,l?[l]:[],t,i,null),t.push((function(){o?(n._mounted(),s.componentDidMount()):(n._updated(),s.componentDidUpdate(e,r))}))},i._setState=function(t){var e=this.base;e&&t&&(e.state=t)},i._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(ta),da=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,i){var n=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Ul(Ul({},this.$_state),t),i?this.$_setState(e,i):this.$_timer=setTimeout((function(){n.$_timer=0,n.$_setState(e,i)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var i=[],n=this.$_provider;ha(n.container,[n],[n.original],i,Ul(Ul({},this.state),this.$_state),e)&&(t&&i.push(t),Vl(i))},t}(),ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fl(e,t),e.prototype.shouldComponentUpdate=function(t,e){return jl(this.props,t)||jl(this.state,e)},e}(da),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Fl(e,t);var i=e.prototype;return i.componentDidMount=function(){var t=this.props,e=t.element,i=t.container;this._portalProvider=new la(i),ga(e,i,this._portalProvider)},i.componentDidUpdate=function(){var t=this.props;ga(t.element,t.container,this._portalProvider)},i.componentWillUnmount=function(){ga(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(ca);function pa(t,e,i){var n=i.map((function(t){return pl(t)?null:t.key})),o=Qr(Yl(e.map((function(t){return t.key}))),Yl(n),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var i=t[0],n=t[1],o=e.splice(i,1)[0];e.splice(n,0,o);var s=sa(o.base),r=sa(e[n+1]&&e[n+1].base);s&&s.parentNode.insertBefore(s,r)})),o.added.forEach((function(o){e.splice(o,0,Xl(i[o],n[o],o,t))}));var s=o.maintained.filter((function(o){o[0];var s=o[1],r=i[s],l=e[s];return(pl(r)?"text_"+r:r.type)!==l.type?(l._unmount(),e.splice(s,1,Xl(r,n[s],s,t)),!0):(l.index=s,!1)}));return function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n}(o.added,s.map((function(t){return t[0],t[1]})))}function ha(t,e,i,n,o,s){var r=pa(t,e,i),l=e.filter((function(t,e){return t._update(n,i[e],o,s)})),a=oa(t);return a&&r.reverse().forEach((function(i){var n=e[i],o=sa(n.base);if(o&&a!==o&&!o.parentNode){var s=function(t,e){for(var i=t._providers,n=i.length,o=e.index+1;o<n;++o){var s=sa(i[o].base);if(s)return s}return null}(t,n);a.insertBefore(o,s)}})),l.length>0}function ga(t,e,i){void 0===i&&(i=e.__REACT_COMPAT__);var n=!!i;return i||(i=new la(e)),function(t,e,i){var n=[];ha(t,t._providers,e,n,i),Vl(n)}(i,t?[t]:[]),n||(e.__REACT_COMPAT__=i),i}function ma(t,e,i){var n=e.__REACT_COMPAT__;t&&!n&&(e.innerHTML=""),ga(t,e,n),i&&i()}function fa(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return!0;return!1}function ba(t,e){for(var i=t.length,n=0;n<i;++n)if(e(t[n],n))return t[n];return null}function va(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function ya(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function xa(t){return t.replace(/_/g,".")}function wa(t,e){var i=null,n="-1";return fa(t,(function(t){var o=ya("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!o||t.brand)&&(i=t,n=o[3]||"-1",t.versionAlias?n=t.versionAlias:t.versionTest&&(n=function(t,e){var i=ya("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return i?i[3]:""}(t.versionTest.toLowerCase(),e)||n),n=xa(n),!0)})),{preset:i,version:n}}function Sa(t,e){var i={brand:"",version:"-1"};return fa(t,(function(t){var n=_a(e,t);return!!n&&(i.brand=t.id,i.version=t.versionAlias||n.version,"-1"!==i.version)})),i}function _a(t,e){return ba(t,(function(t){var i=t.brand;return ya(""+e.test,i.toLowerCase())}))}var Ca=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],ka=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Ea=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Aa=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],La=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function qa(t){return!!wa(Aa,t).preset}function Ta(t,e,i,n,o,s){for(var r=0;r<o;++r){var l=i+r*o,a=n+r*o;t[l]+=t[a]*s,e[l]+=e[a]*s}}function Ma(t,e,i,n,o){for(var s=0;s<o;++s){var r=i+s*o,l=n+s*o,a=t[r],d=e[r];t[r]=t[l],t[l]=a,e[r]=e[l],e[l]=d}}function Oa(t,e,i,n,o){for(var s=0;s<n;++s){var r=i+s*n;t[r]/=o,e[r]/=o}}function Ra(t,e,i){void 0===i&&(i=Math.sqrt(t.length));for(var n=t.slice(),o=0;o<i;++o)n[o*i+e-1]=0,n[(e-1)*i+o]=0;return n[(e-1)*(i+1)]=1,n}function Ba(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=t.slice(),n=Ka(e),o=0;o<e;++o){var s=e*o+o;if(!Il(i[s],ll))for(var r=o+1;r<e;++r)if(i[e*o+r]){Ma(i,n,o,r,e);break}if(!Il(i[s],ll))return[];Oa(i,n,o,e,i[s]);for(r=0;r<e;++r){var l=r,a=i[r+o*e];Il(a,ll)&&o!==r&&Ta(i,n,l,o,e,-a)}}return n}function Na(t,e){for(var i=t.slice(),n=t.length;n<e-1;++n)i[n]=0;return i[e-1]=1,i}function Ia(t,e,i){if(void 0===e&&(e=Math.sqrt(t.length)),e===i)return t;for(var n=Ka(i),o=Math.min(e,i),s=0;s<o-1;++s){for(var r=0;r<o-1;++r)n[s*i+r]=t[s*e+r];n[(s+1)*i-1]=t[(s+1)*e-1],n[(i-1)*i+s]=t[(e-1)*e+s]}return n[i*i-1]=t[e*e-1],n}function $a(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=Ka(t);return e.forEach((function(e){n=Da(n,e,t)})),n}function Da(t,e,i){void 0===i&&(i=Math.sqrt(t.length));var n=[],o=t.length/i,s=e.length/o;if(!o)return e;if(!s)return t;for(var r=0;r<i;++r)for(var l=0;l<s;++l){n[l*i+r]=0;for(var a=0;a<o;++a)n[l*i+r]+=t[a*i+r]*e[l*o+a]}return n}function Pa(t,e){for(var i=Math.min(t.length,e.length),n=t.slice(),o=0;o<i;++o)n[o]=n[o]+e[o];return n}function za(t,e){for(var i=Math.min(t.length,e.length),n=t.slice(),o=0;o<i;++o)n[o]=n[o]-e[o];return n}function Ha(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Fa(t,e,i){void 0===i&&(i=e.length);var n=Da(t,e,i),o=n[i-1];return n.map((function(t){return t/o}))}function Ua(t,e){return Da(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Wa(t,e){return Da(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function ja(t,e){return Da(t,Za(e,4))}function Ga(t,e){var i=e[0],n=void 0===i?1:i,o=e[1],s=void 0===o?1:o,r=e[2];return Da(t,[n,0,0,0,0,s,0,0,0,0,void 0===r?1:r,0,0,0,0,1],4)}function Va(t,e){return Fa(Za(e,3),Na(t,3))}function Ya(t,e){var i=e[0],n=void 0===i?0:i,o=e[1],s=void 0===o?0:o,r=e[2];return Da(t,[1,0,0,0,0,1,0,0,0,0,1,0,n,s,void 0===r?0:r,1],4)}function Xa(t,e){return Da(t,e,4)}function Za(t,e){var i=Math.cos(t),n=Math.sin(t),o=Ka(e);return o[0]=i,o[1]=n,o[e]=-n,o[e+1]=i,o}function Ka(t){for(var e=t*t,i=[],n=0;n<e;++n)i[n]=n%(t+1)?0:1;return i}function Qa(t,e){for(var i=Ka(e),n=Math.min(t.length,e-1),o=0;o<n;++o)i[(e+1)*o]=t[o];return i}function Ja(t,e){for(var i=Ka(e),n=Math.min(t.length,e-1),o=0;o<n;++o)i[e*(e-1)+o]=t[o];return i}function td(t,e,i,n,o,s,r,l){var a=t[0],d=t[1],c=e[0],u=e[1],p=i[0],h=i[1],g=n[0],m=n[1],f=o[0],b=o[1],v=s[0],y=s[1],x=r[0],w=r[1],S=l[0],_=l[1],C=Ba([a,0,c,0,p,0,g,0,d,0,u,0,h,0,m,0,1,0,1,0,1,0,1,0,0,a,0,c,0,p,0,g,0,d,0,u,0,h,0,m,0,1,0,1,0,1,0,1,-f*a,-b*a,-v*c,-y*c,-x*p,-w*p,-S*g,-_*g,-f*d,-b*d,-v*u,-y*u,-x*h,-w*h,-S*m,-_*m],8);if(!C.length)return[];var k=Da(C,[f,b,v,y,x,w,S,_],8);return k[8]=1,Ia(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=[],n=0;n<e;++n)for(var o=0;o<e;++o)i[o*e+n]=t[e*n+o];return i}(k),3,4)}function ed(t){return id(nd(t))}function id(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var i=t.matrixFunction,n=t.functionValue;i&&(e=i(e,n))})),e}function nd(t){return(ul(t)?t:vl(t)).map((function(t){var e=xl(t),i=e.prefix,n=e.value,o=null,s=i,r="";if("translate"===i||"translateX"===i||"translate3d"===i){var l=yl(n).map((function(t){return parseFloat(t)})),a=l[0],d=l[1],c=void 0===d?0:d,u=l[2];o=Ya,r=[a,c,void 0===u?0:u]}else if("translateY"===i){o=Ya,r=[0,c=parseFloat(n),0]}else if("translateZ"===i){o=Ya,r=[0,0,parseFloat(n)]}else if("scale"===i||"scale3d"===i){var p=yl(n).map((function(t){return parseFloat(t)})),h=p[0],g=p[1],m=void 0===g?h:g,f=p[2];o=Ga,r=[h,m,void 0===f?1:f]}else if("scaleX"===i){o=Ga,r=[h=parseFloat(n),1,1]}else if("scaleY"===i){o=Ga,r=[1,m=parseFloat(n),1]}else if("scaleZ"===i){o=Ga,r=[1,1,parseFloat(n)]}else if("rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i){var b=wl(n),v=b.unit,y=b.value;"rotate"===i||"rotateZ"===i?(s="rotateZ",o=ja):"rotateX"===i?o=Ua:"rotateY"===i&&(o=Wa),r="rad"===v?y:y*Math.PI/180}else if("matrix3d"===i)o=Xa,r=yl(n).map((function(t){return parseFloat(t)}));else if("matrix"===i){var x=yl(n).map((function(t){return parseFloat(t)}));o=Xa,r=[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}else s="";return{name:i,functionName:s,value:n,matrixFunction:o,functionValue:r}}))}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var od=function(t,e){return od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},od(t,e)};var sd,rd="function"==typeof Map?void 0:(sd=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++sd)});var ld=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,rd)||this}return function(t,e){function i(){this.constructor=t}od(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Jr);
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function ad(t){return Il(t,ll)}function dd(t){return t.length<3?0:Math.abs(function(t){for(var e=0,i=t.length-1;i>=0;--i)e+=t[i];return e}(t.map((function(e,i){var n=t[i+1]||t[0];return e[0]*n[1]-n[0]*e[1]}))))/2}function cd(t,e){var i=e.width,n=e.height,o=e.left,s=e.top,r=ud(t),l=r.minX,a=r.minY,d=r.maxX,c=r.maxY,u=i/(d-l),p=n/(c-a);return t.map((function(t){return[o+(t[0]-l)*u,s+(t[1]-a)*p]}))}function ud(t){var e=t.map((function(t){return t[0]})),i=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,i),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,i)}}function pd(t,e,i){var n=t[0],o=t[1],s=ud(e),r=s.minX,l=s.maxX,a=[[r,o],[l,o]],d=hd(a[0],a[1]),c=fd(e),u=[];if(c.forEach((function(e){var i,n=hd(e[0],e[1]),s=e[0];(i=n,d.every((function(t,e){return 0===ad(t-i[e])})))?u.push({pos:t,line:e,type:"line"}):md(gd(d,n),[a,e]).forEach((function(t){e.some((function(e){return n=t,!ad((i=e)[0]-n[0])&&!ad(i[1]-n[1]);var i,n}))?u.push({pos:t,line:e,type:"point"}):0!==ad(s[1]-o)&&u.push({pos:t,line:e,type:"intersection"})}))})),!i&&kl(u,(function(t){return t[0]===n})))return!0;var p=0,h={};return u.forEach((function(t){var e=t.pos,i=t.type,s=t.line;if(!(e[0]>n))if("intersection"===i)++p;else{if("line"===i)return;if("point"===i){var r=kl(s,(function(t){return t[1]!==o})),l=h[e[0]],a=r[1]>o?1:-1;l?l!==a&&++p:h[e[0]]=a}}})),p%2==1}function hd(t,e){var i=t[0],n=t[1],o=e[0]-i,s=e[1]-n;Math.abs(o)<ll&&(o=0),Math.abs(s)<ll&&(s=0);var r=0,l=0,a=0;return o?s?(l=1,a=-(r=-s/o)*i-n):(l=1,a=-n):s&&(r=-1,a=i),[r,l,a]}function gd(t,e){var i=t[0],n=t[1],o=t[2],s=e[0],r=e[1],l=e[2],a=0===i&&0===s,d=0===n&&0===r,c=[];if(a&&d)return[];if(a){var u=-o/n;return u!==-l/r?[]:[[-1/0,u],[1/0,u]]}if(d){var p=-o/i;return p!==-l/s?[]:[[p,-1/0],[p,1/0]]}if(0===i)c=[[h=-(r*(g=-o/n)+l)/s,g]];else if(0===s){c=[[h=-(n*(g=-l/r)+o)/i,g]]}else if(0===n){c=[[h=-o/i,g=-(s*h+l)/r]]}else if(0===r){c=[[h=-l/s,g=-(i*h+o)/n]]}else{var h,g;c=[[h=(n*l-r*o)/(r*i-n*s),g=-(i*h+o)/n]]}return c.map((function(t){return[t[0],t[1]]}))}function md(t,e){var i=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),n=[];if(2===t.length){var o=t[0],s=o[0],r=o[1];if(ad(s-t[1][0])){if(!ad(r-t[1][1])){var l=Math.max.apply(Math,i.map((function(t){return t[0][0]}))),a=Math.min.apply(Math,i.map((function(t){return t[0][1]})));if(ad(l-a)>0)return[];n=[[l,r],[a,r]]}}else{var d=Math.max.apply(Math,i.map((function(t){return t[1][0]}))),c=Math.min.apply(Math,i.map((function(t){return t[1][1]})));if(ad(d-c)>0)return[];n=[[s,d],[s,c]]}}return n.length||(n=t.filter((function(t){var e=t[0],n=t[1];return i.every((function(t){return 0<=ad(e-t[0][0])&&0<=ad(t[0][1]-e)&&0<=ad(n-t[1][0])&&0<=ad(t[1][1]-n)}))}))),n.map((function(t){return[ad(t[0]),ad(t[1])]}))}function fd(t){return function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n}(t.slice(1),[t[0]]).map((function(e,i){return[t[i],e]}))}function bd(t,e){var i=function(t,e){var i=t.slice(),n=e.slice();-1===Bl(i)&&i.reverse(),-1===Bl(n)&&n.reverse();var o=fd(i),s=fd(n),r=o.map((function(t){return hd(t[0],t[1])})),l=s.map((function(t){return hd(t[0],t[1])})),a=[];r.forEach((function(t,e){var i=o[e],r=[];l.forEach((function(n,o){var l=md(gd(t,n),[i,s[o]]);r.push.apply(r,l.map((function(t){return{index1:e,index2:o,pos:t,type:"intersection"}})))})),r.sort((function(t,e){return Nl(i[0],t.pos)-Nl(i[0],e.pos)})),a.push.apply(a,r),pd(i[1],n)&&a.push({index1:e,index2:-1,pos:i[1],type:"inside"})})),s.forEach((function(t,e){if(pd(t[1],i)){var n=!1,o=Cl(a,(function(t){return t.index2===e?(n=!0,!1):!!n}));-1===o&&(n=!1,o=Cl(a,(function(t){var i=t.index1,o=t.index2;return-1===i&&o+1===e?(n=!0,!1):!!n}))),-1===o?a.push({index1:-1,index2:e,pos:t[1],type:"inside"}):a.splice(o,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var d={};return a.filter((function(t){var e=t.pos,i=e[0]+"x"+e[1];return!d[i]&&(d[i]=!0,!0)}))}(t,e);return i.map((function(t){return t.pos}))}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
var vd=function(){return vd=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},vd.apply(this,arguments)};var yd=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(cl(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(cl(t))for(var i in t)this.off(i);else if(e){var n=this._events[t];if(n){var o=Cl(n,(function(t){return t.listener===e}));o>-1&&n.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var n=this._events[t];if(!t||!n)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n}(n).forEach((function(n){n.listener(e),n.once&&i.off(t,n.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var n=this._events;n[t]=n[t]||[],n[t].push(vd({listener:e},i))},t}(),xd=yd;
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var wd=function(t,e){return wd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},wd(t,e)};var Sd=function(){return Sd=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Sd.apply(this,arguments)};function _d(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}var Cd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e}!function(t,e){function i(){this.constructor=t}wd(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t);var i=e.prototype;return i.dragStart=function(t,e){var i=e.container,n=0,o=0,s=0,r=0;if(i===document.body)s=window.innerWidth,r=window.innerHeight;else{var l=i.getBoundingClientRect();n=l.top,o=l.left,s=l.width,r=l.height}this._startPos=[t.clientX,t.clientY],this._startRect={top:n,left:o,width:s,height:r},this._prevScrollPos=this._getScrollPosition([0,0],e)},i.drag=function(t,e){var i=t.clientX,n=t.clientY,o=e.threshold,s=void 0===o?0:o,r=this._startRect,l=this._startPos,a=[0,0];return r.top>n-s?(l[1]>r.top||n<l[1])&&(a[1]=-1):r.top+r.height<n+s&&(l[1]<r.top+r.height||n>l[1])&&(a[1]=1),r.left>i-s?(l[0]>r.left||i<l[0])&&(a[0]=-1):r.left+r.width<i+s&&(l[0]<r.left+r.width||i>l[0])&&(a[0]=1),clearTimeout(this._timer),!(!a[0]&&!a[1])&&this._continueDrag(Sd(Sd({},e),{direction:a,inputEvent:t,isDrag:!0}))},i.checkScroll=function(t){var e=this;if(this._isWait)return!1;var i=t.prevScrollPos,n=void 0===i?this._prevScrollPos:i,o=t.direction,s=t.throttleTime,r=void 0===s?0:s,l=t.inputEvent,a=t.isDrag,d=this._getScrollPosition(o||[0,0],t),c=d[0]-n[0],u=d[1]-n[1],p=o||[c?Math.abs(c)/c:0,u?Math.abs(u)/u:0];return this._prevScrollPos=d,!(!c&&!u)&&(this.trigger("move",{offsetX:p[0]?c:0,offsetY:p[1]?u:0,inputEvent:l}),r&&a&&(this._timer=window.setTimeout((function(){e._continueDrag(t)}),r)),!0)},i.dragEnd=function(){clearTimeout(this._timer)},i._getScrollPosition=function(t,e){var i=e.container,n=e.getScrollPosition;return(void 0===n?_d:n)({container:i,direction:t})},i._continueDrag=function(t){var e=this,i=t.container,n=t.direction,o=t.throttleTime,s=t.useScroll,r=t.isDrag,l=t.inputEvent;if(!r||!this._isWait){var a=Date.now?Date.now():(new Date).getTime(),d=Math.max(o+this._prevTime-a,0);if(d>0)return this._timer=window.setTimeout((function(){e._continueDrag(t)}),d),!1;this._prevTime=a;var c=this._getScrollPosition(n,t);return this._prevScrollPos=c,r&&(this._isWait=!0),this.trigger("scroll",{container:i,direction:n,inputEvent:l}),this._isWait=!1,s||this.checkScroll(Sd(Sd({},t),{prevScrollPos:c,direction:n,inputEvent:l}))}},e}(xd),kd=Cd,Ed=function(t,e){return Ed=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Ed(t,e)};var Ad=function(){return Ad=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ad.apply(this,arguments)};function Ld(t){return 180*(e=[t[0].clientX,t[0].clientY],i=[t[1].clientX,t[1].clientY],n=i[0]-e[0],o=i[1]-e[1],((s=Math.atan2(o,n))>=0?s:s+2*Math.PI)/Math.PI);var e,i,n,o,s}function qd(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),i=[],n=0;n<e;++n)i.push(Od(t[n]));return i}(t.touches):[Od(t)]:[]}function Td(t,e,i){var n=i.length,o=Rd(t,n),s=o.clientX,r=o.clientY,l=o.originalClientX,a=o.originalClientY,d=Rd(e,n),c=d.clientX,u=d.clientY,p=Rd(i,n);return{clientX:l,clientY:a,deltaX:s-c,deltaY:r-u,distX:s-p.clientX,distY:r-p.clientY}}function Md(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Od(t){return{clientX:t.clientX,clientY:t.clientY}}function Rd(t,e){void 0===e&&(e=t.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=0;n<e;++n){var o=t[n];i.originalClientX+="originalClientX"in o?o.originalClientX:o.clientX,i.originalClientY+="originalClientY"in o?o.originalClientY:o.clientY,i.clientX+=o.clientX,i.clientY+=o.clientY}return e?{clientX:i.clientX/e,clientY:i.clientY/e,originalClientX:i.originalClientX/e,originalClientY:i.originalClientY/e}:i}var Bd=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),Ld(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),Ld(t)-Ld(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var i=Td(t||this.prevClients,this.prevClients,this.startClients),n=i.deltaX,o=i.deltaY;return this.movement+=Math.sqrt(n*n+o*o),this.prevClients=t,i},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(i,n){return Td([t[n]],[e[n]],[i])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var i=Rd(t,this.length),n=Rd(this.prevClients,this.length),o=i.clientX-n.clientX,s=i.clientY-n.clientY;return Math.sqrt(o*o+s*s)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),Md(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),Md(t)/Md(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(i){i.clientX-=t,i.clientY-=e}))},t}(),Nd=["textarea","input"],Id=function(t){function e(e,i){void 0===i&&(i={});var n=t.call(this)||this;n.options={},n.flag=!1,n.pinchFlag=!1,n.datas={},n.isDrag=!1,n.isPinch=!1,n.isMouse=!1,n.isTouch=!1,n.clientStores=[],n.targets=[],n.prevTime=0,n.doubleFlag=!1,n._dragFlag=!1,n.onDragStart=function(t,e){if(void 0===e&&(e=!0),n.flag||!1!==t.cancelable){var i=n.options,o=i.container,s=i.pinchOutside,r=i.preventWheelClick,l=i.preventRightClick,a=i.preventDefault,d=i.checkInput,c=n.isTouch,u=!n.flag;if(r&&(2===t.which||1===t.button)||l&&(3===t.which||2===t.button))return n.initDrag(),!1;if(u){var p=document.activeElement,h=t.target,g=h.tagName.toLowerCase(),m=Nd.indexOf(g)>-1,f=h.isContentEditable;if(m||f){if(d||p===h)return!1;if(p&&f&&p.isContentEditable&&p.contains(h))return!1}else if((a||"touchstart"===t.type)&&p){var b=p.tagName;(p.isContentEditable||Nd.indexOf(b)>-1)&&p.blur()}n.clientStores=[new Bd(qd(t))],n.flag=!0,n.isDrag=!1,n._dragFlag=!0,n.datas={},n.doubleFlag=_l()-n.prevTime<200,!1===n.emit("dragStart",Ad(Ad({datas:n.datas,inputEvent:t,isTrusted:e,isDouble:n.doubleFlag},n.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){n._dragFlag=!1}}))&&n.initDrag(),n.flag&&a&&t.preventDefault()}if(!n.flag)return!1;var v=0;if(u&&c&&s&&(v=setTimeout((function(){Pl(o,"touchstart",n.onDragStart,{passive:!1})}))),!u&&c&&s&&zl(o,"touchstart",n.onDragStart),n.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(v),u&&t.touches.length!==t.changedTouches.length)return;n.pinchFlag||n.onPinchStart(t)}}},n.onDrag=function(t,e){if(n.flag){var i=qd(t),o=n.moveClients(i,t,!1);if(n._dragFlag){if(n.pinchFlag||o.deltaX||o.deltaY)if(!1===n.emit("drag",Ad(Ad({},o),{isScroll:!!e,inputEvent:t})))return void n.stop();n.pinchFlag&&n.onPinch(t,i)}n.getCurrentStore().getPosition(i,!0)}},n.onDragEnd=function(t){if(n.flag){var e=n.options,i=e.pinchOutside,o=e.container;n.isTouch&&i&&zl(o,"touchstart",n.onDragStart),n.pinchFlag&&n.onPinchEnd(t);var s=(null==t?void 0:t.touches)?qd(t):[];0!==s.length&&n.options.keepDragging?n._addStore(new Bd(s)):n.flag=!1;var r=n._getPosition(),l=_l(),a=!n.isDrag&&n.doubleFlag;n.prevTime=n.isDrag||a?0:l,n.flag||(n.emit("dragEnd",Ad({datas:n.datas,isDouble:a,isDrag:n.isDrag,isClick:!n.isDrag,inputEvent:t},r)),n.clientStores=[])}},n.onBlur=function(){n.onDragEnd()};var o=[].concat(e);n.options=Ad({checkInput:!1,container:o.length>1?window:o[0],preventRightClick:!0,preventWheelClick:!0,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var s=n.options,r=s.container,l=s.events,a=s.checkWindowBlur;if(n.isTouch=l.indexOf("touch")>-1,n.isMouse=l.indexOf("mouse")>-1,n.targets=o,n.isMouse&&(o.forEach((function(t){Pl(t,"mousedown",n.onDragStart)})),Pl(r,"mousemove",n.onDrag),Pl(r,"mouseup",n.onDragEnd),Pl(r,"contextmenu",n.onDragEnd)),a&&Pl(window,"blur",n.onBlur),n.isTouch){var d={passive:!1};o.forEach((function(t){Pl(t,"touchstart",n.onDragStart,d)})),Pl(r,"touchmove",n.onDrag,d),Pl(r,"touchend",n.onDragEnd,d),Pl(r,"touchcancel",n.onDragEnd,d)}return n}!function(t,e){function i(){this.constructor=t}Ed(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t);var i=e.prototype;return i.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isDoubleFlag=function(){return this.doubleFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,e,i,n){void 0===n&&(n=!0),this.flag&&(this.clientStores[0].move(t,e),n&&this.onDrag(i,!0))},i.move=function(t,e){var i=t[0],n=t[1],o=this.getCurrentStore().prevClients;return this.moveClients(o.map((function(t){var e=t.clientX,o=t.clientY;return{clientX:e+i,clientY:o+n,originalClientX:e,originalClientY:o}})),e,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var e=this.datas;for(var i in t)e[i]=t[i];return this},i.getCurrentEvent=function(t){return Ad(Ad({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},i.getEventDatas=function(){return this.datas},i.unset=function(){var t=this,e=this.targets,i=this.options.container;this.off(),zl(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){zl(e,"mousedown",t.onDragStart)})),zl(i,"mousemove",this.onDrag),zl(i,"mouseup",this.onDragEnd),zl(i,"contextmenu",this.onDragEnd)),this.isTouch&&(e.forEach((function(e){zl(e,"touchstart",t.onDragStart)})),zl(i,"touchstart",this.onDragStart),zl(i,"touchmove",this.onDrag),zl(i,"touchend",this.onDragEnd),zl(i,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var i=new Bd(qd(t));this.pinchFlag=!0,this._addStore(i),!1===this.emit("pinchStart",Ad(Ad({datas:this.datas,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1)}},i.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Ad(Ad({datas:this.datas,movement:this.getMovement(e),angle:i.getAngle(e),rotation:i.getRotation(e),touches:i.getPositions(e),scale:i.getScale(e),distance:i.getDistance(e)},i.getPosition(e)),{inputEvent:t}))}},i.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Ad(Ad({datas:this.datas,isPinch:e,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,e,i){var n=this._getPosition(t,i);return(n.deltaX||n.deltaY)&&(this.isDrag=!0),Ad(Ad({datas:this.datas},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},i._addStore=function(t){this.clientStores.splice(0,0,t)},i._getPosition=function(t,e){var i=this.getCurrentStore().getPosition(t,e),n=this.clientStores.slice(1).reduce((function(t,e){var i=e.getPosition();return t.distX+=i.distX,t.distY+=i.distY,t}),i),o=n.distX,s=n.distY;return Ad(Ad({},i),{distX:o,distY:s})},e}(xd),$d=Id;var Dd=function(t){for(var e=5381,i=t.length;i;)e=33*e^t.charCodeAt(--i);return e>>>0};function Pd(t,e,i,n){var o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),i.nonce&&o.setAttribute("nonce",i.nonce),o.innerHTML=function(t,e,i){return i.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,i){var n=i.trim();return(n?yl(n):[""]).map((function(e){var i=e.trim();return 0===i.indexOf("@")?i:i.indexOf(":global")>-1?i.replace(/\:global/g,""):i.indexOf(":host")>-1?""+i.replace(/\:host/g,"."+t):i?"."+t+" "+i:"."+t})).join(", ")+" {"}))}(t,e,i),(n||document.head||document.body).appendChild(o),o}function zd(t){var e,i="rCS"+Dd(t).toString(36),n=0;return{className:i,inject:function(o,s){void 0===s&&(s={});var r,l=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(o),a=0===n;return(l||a)&&(r=Pd(i,t,s,l)),a&&(e=r),l||++n,{destroy:function(){l?(o.removeChild(r),r=null):(n>0&&--n,0===n&&e&&(e.parentNode.removeChild(e),e=null))}}}}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Hd=function(t,e){return Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Hd(t,e)};function Fd(t,e){function i(){this.constructor=t}Hd(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ud=function(){return Ud=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ud.apply(this,arguments)};var Wd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}Fd(e,t);var i=e.prototype;return i.render=function(){var t=this.props,e=t.className,i=void 0===e?"":e;t.cspNonce;var n=t.portalContainer,o=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}(t,["className","cspNonce","portalContainer"]),s=this.injector.className,r=this.tag,l={};return"simple-1.1.0".indexOf("simple")>-1&&n&&(l={portalContainer:n}),Jl(r,Ud({ref:Ur(this,"element"),"data-styled-id":s,className:i+" "+s},l,o))},i.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},i.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},i.getElement=function(){return this.element},e}(da);function jd(t,e){var i=zd(e);return function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.injector=i,n.tag=t,n}return Fd(n,e),n}(Wd)}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Gd=function(){return Gd=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Gd.apply(this,arguments)};var Vd=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(cl(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(cl(t))for(var i in t)this.off(i);else if(e){var n=this._events[t];if(n){var o=Cl(n,(function(t){return t.listener===e}));o>-1&&n.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var n=this._events[t];if(!t||!n)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n}(n).forEach((function(n){n.listener(e),n.once&&i.off(t,n.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var n=this._events;n[t]=n[t]||[],n[t].push(Gd({listener:e},i))},t}(),Yd=Vd,Xd=function(t,e){return Xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},Xd(t,e)};function Zd(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Xd(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Kd=function(){return Kd=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Kd.apply(this,arguments)};function Qd(t,e,i){if(i||2===arguments.length)for(var n,o=0,s=e.length;o<s;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}function Jd(t,e){var i;return Kd({events:{},props:(i={},i[t]=Boolean,i),name:t},e)}var tc,ec,ic=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,i=(e.uaList||e.brands).slice(),n=t&&t.fullVersionList,o=e.mobile||!1,s=i[0],r=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),l={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Sa(Aa,i).brand||qa(va())},a={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&fa(Ea,(function(t){return _a(i,t)}));var d=Sa(ka,i);if(l.chromium=!!d.brand,l.chromiumVersion=d.version,!l.chromium){var c=Sa(Ea,i);l.webkit=!!c.brand,l.webkitVersion=c.version}var u=ba(La,(function(t){return new RegExp(""+t.test,"g").exec(r)}));if(a.name=u?u.id:"",t&&(a.version=t.platformVersion),n&&n.length){var p=Sa(Ca,n);l.name=p.brand||l.name,l.version=p.version||l.version}else{var h=Sa(Ca,i);l.name=h.brand||l.name,l.version=h.brand&&t?t.uaFullVersion:h.version}return l.webkit&&(a.name=o?"ios":"mac"),"ios"===a.name&&l.webview&&(l.version="-1"),a.version=xa(a.version),l.version=xa(l.version),a.majorVersion=parseInt(a.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:a,isMobile:o,isHints:!0}}():function(t){var e=va(t),i=!!/mobi/g.exec(e),n={name:"unknown",version:"-1",majorVersion:-1,webview:qa(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},s=wa(Ca,e),r=s.preset,l=s.version,a=wa(La,e),d=a.preset,c=a.version,u=wa(ka,e);if(n.chromium=!!u.preset,n.chromiumVersion=u.version,!n.chromium){var p=wa(Ea,e);n.webkit=!!p.preset,n.webkitVersion=p.version}return d&&(o.name=d.id,o.version=c,o.majorVersion=parseInt(c,10)),r&&(n.name=r.id,n.version=l,n.webview&&"ios"===o.name&&"safari"!==n.name&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:o,isMobile:i,isHints:!1}}(t)}(),nc=ic.browser.webkit,oc=nc&&(tc="undefined"==typeof window?{userAgent:""}:window.navigator,!!(ec=/applewebkit\/([^\s]+)/g.exec(tc.userAgent.toLowerCase()))&&parseFloat(ec[1])<605),sc="moveable-",rc="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),i=45*Math.round(t/45)%180,n="ns-resize";return 135===i?n="nwse-resize":45===i?n="nesw-resize":90===i&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")}(t),"\n}\n")})).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(oc?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),lc=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],ac=1e-4,dc=1e-7,cc=1e-9,uc=Math.pow(10,10),pc=-uc,hc=["n","w","s","e","nw","ne","sw","se"],gc={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},mc={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},fc=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function bc(t,e,i,n,o){var s=e.gesto.move(i,t.inputEvent),r=s.originalDatas||s.datas,l=r.draggable||(r.draggable={});return Kd(Kd({},o?Hp(e,s):s),{isPinch:!!n,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var vc=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var i=e.originalDatas;return this.datas=i,i.draggable||(i.draggable={}),Kd(Kd({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var i,n;return this.isFlag?(i=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],i=t[0],n=t[1],this.isFlag=!0),this.prevX=i,this.prevY=n,{type:"drag",clientX:i,clientY:n,inputEvent:e,isDrag:this.isDrag,distX:i-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function yc(t,e,i){var n=i.originalDatas;n.groupable=n.groupable||{};var o=n.groupable;o.childDatas=o.childDatas||[];var s=o.childDatas;return t.moveables.map((function(t,n){return s[n]=s[n]||{},s[n][e]=s[n][e]||{},Kd(Kd({},i),{datas:s[n][e],originalDatas:s[n]})}))}function xc(t,e,i,n,o,s){var r=!!i.match(/Start$/g),l=!!i.match(/End$/g),a=o.isPinch,d=o.datas,c=yc(t,e.name,o),u=t.moveables,p=c.map((function(t,o){var c=u[o],p=c.state,h=t;if(r)h=(new vc).dragStart(n,t);else{if(p.gesto||(p.gesto=d.childGestos[o]),!p.gesto)return;h=bc(t,p,n,a,s)}var g=e[i](c,Kd(Kd({},h),{parentFlag:!0}));return l&&(p.gesto=null),g}));return r&&(d.childGestos=u.map((function(t){return t.state.gesto}))),p}function wc(t,e,i,n,o,s){void 0===o&&(o=function(t,e){return e});var r=!!i.match(/End$/g),l=yc(t,e.name,n),a=t.moveables,d=l.map((function(t,n){var l,d=a[n];l=o(d,t);var c=e[i](d,Kd(Kd({},l),{parentFlag:!0}));return c&&s&&s(d,t,c,n),r&&(d.state.gesto=null),c}));return d}function Sc(t,e,i,n){void 0===n&&(n="");var o=t.state,s=o.renderPoses,r=o.rotation,l=o.direction,a=t.props,d=a.renderDirections,c=void 0===d?e:d,u=a.zoom,p={};if(!c)return[];var h=l>0?1:-1,g=!0===c?hc:c,m=r/Math.PI*180;return g.forEach((function(t){p[t]=!0})),g.map((function(t){var e=gc[t];if(!e||!p[t])return null;var o=(Il(m,15)+h*mc[t]+720)%180;return i.createElement("div",{className:Qu("control","direction",t,n),"data-rotation":o,"data-direction":t,key:"direction-".concat(t),style:_p.apply(void 0,Qd([r,u],e.map((function(t){return s[t]})),!1))})}))}function _c(t,e,i,n,o,s){for(var r=[],l=6;l<arguments.length;l++)r[l-6]=arguments[l];var a=Rl(i,n),d=e?Il(a/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(s),className:Qu.apply(void 0,Qd(["line","direction",e],r,!1)),"data-rotation":d,"data-line-index":s,"data-direction":e,style:Sp(i,n,o,a)})}function Cc(t,e){return Sc(t,hc,e)}function kc(t,e){return Sc(t,["nw","ne","sw","se"],e)}function Ec(t,e,i,n,o,s){var r=t.state.is3d?4:3,l=mp(t.state.rootMatrix,o,r),a=Pa([s.left,s.top],l);e.startAbsoluteOrigin=a,e.prevDeg=Rl(a,[i,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0}function Ac(t,e,i){var n=i.defaultDeg,o=i.prevDeg,s=o%360,r=Math.floor(o/360);s<0&&(s+=360),s>t&&s>270&&t<90?++r:s<t&&s<90&&t>270&&--r;var l=e*(360*r+t-n);return i.prevDeg=n+l,l}function Lc(t,e,i,n){return Ac(Rl(n.startAbsoluteOrigin,[t,e])/Math.PI*180,i,n)}function qc(t,e,i,n,o,s){var r=t.props.throttleRotate,l=void 0===r?0:r,a=n,d=i.prevSnapDeg;s&&(a=function(t,e,i,n){if(!Ic(t,"rotatable"))return n;var o=e.pos1,s=e.pos2,r=e.pos3,l=e.pos4,a=n*Math.PI/180,d=[o,s,r,l].map((function(t){return za(t,i)})),c=d.map((function(t){return Va(t,a)})),u=Qd(Qd([],function(t,e,i,n,o){if(!t.props.bounds)return[];var s=o*Math.PI/180,r=ru(t),l=r.left,a=r.top,d=r.right,c=r.bottom,u=l-n[0],p=d-n[0],h=a-n[1],g=c-n[1],m={left:u,top:h,right:p,bottom:g};if(!au(i,m,0))return[];var f=[];return[[u,0],[p,0],[h,1],[g,1]].forEach((function(t){var n=t[0],o=t[1];i.forEach((function(t){var i=Rl([0,0],t);f.push.apply(f,function(t,e,i){var n=xp(t),o=Math.sqrt(n*n-e*e)||0;return[o,-o].sort((function(e,n){return Math.abs(e-t[i?0:1])-Math.abs(n-t[i?0:1])})).map((function(t){return Rl([0,0],i?[t,e]:[e,t])}))}(t,n,o).map((function(t){return s+t-i})).filter((function(t){return!au(e,m,t)})).map((function(t){return Il(180*t/Math.PI,dc)})))}))})),f}(t,d,c,i,n),!0),function(t,e,i,n,o){var s=t.props.innerBounds,r=o*Math.PI/180;if(!s)return[];var l=s.left,a=s.top,d=s.width,c=s.height,u=l-n[0],p=l+d-n[0],h=a-n[1],g=a+c-n[1],m=[[u,h],[p,h],[u,g],[p,g]],f=Pu(i,[0,0]);if(!ou(i,m,f,0))return[];var b=[],v=m.map((function(t){return[xp(t),Rl([0,0],t)]}));return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].forEach((function(t){var i=Rl([0,0],function(t){var e=t[0],i=t[1],n=i[0]-e[0],o=i[1]-e[1];if(!n)return[e[0],0];if(!o)return[0,e[1]];var s=o/n,r=-s*e[0]+e[1];return[-r/(s+1/s),r/(s*s+1)]}(t)),n=function(t){var e=t[0],i=t[1],n=i[0]-e[0],o=i[1]-e[1];if(!n)return Math.abs(e[0]);if(!o)return Math.abs(e[1]);var s=o/n;return Math.abs((-s*e[0]+e[1])/Math.sqrt(Math.pow(s,2)+1))}(t);b.push.apply(b,v.filter((function(t){var e=t[0];return e&&n<=e})).map((function(t){var e=t[0],o=t[1],s=Math.acos(e?n/e:0);return[r+(o+s)-i,r+(o-s)-i]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!ou(e,m,f,t)})).map((function(t){return Il(180*t/Math.PI,dc)})))})),b}(t,d,c,i,n),!0);return u.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)})),u.length?u[0]:n}(t,e,i.origin,a));var c=Il(o+a,l),u=c-o;return i.prevSnapDeg=u,[u-d,a,c]}function Tc(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var i=e.inputEvent.target;if(Dl(i,Qu("rotation-control")))return!0;var n=t.props.rotationTarget;return!!n&&Yp(n,!0).some((function(t){return!!t&&(i===t||i.contains(t))}))}var Mc={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,e){var i=t.props,n=i.rotatable,o=i.rotationPosition,s=i.zoom,r=i.renderDirections,l=t.state,a=l.renderPoses,d=l.direction;if(!n)return null;var c=function(t,e,i){var n=e[0],o=e[1],s=e[2],r=e[3];if("none"!==t){var l=(t||"top").split("-"),a=l[0],d=l[1],c=[n,o];"left"===a?c=[s,n]:"right"===a?c=[o,r]:"bottom"===a&&(c=[r,s]);var u=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],p=kp(c,i);if(d){var h="top"===d||"left"===d,g="bottom"===a||"left"===a;u=c[h&&!g||!h&&g?0:1]}return[u,p]}}(o,a,d),u=[];if(c){var p=c[0],h=c[1];u.push(e.createElement("div",{key:"rotation",className:Qu("rotation"),style:{transform:"translate(-50%) translate(".concat(p[0],"px, ").concat(p[1],"px) rotate(").concat(h,"rad)")}},e.createElement("div",{className:Qu("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),e.createElement("div",{className:Qu("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}return r&&u.push.apply(u,Sc(t,[],e)),u},dragControlCondition:Tc,dragControlStart:function(t,e){var i=e.datas,n=e.clientX,o=e.clientY,s=e.parentRotate,r=e.parentFlag,l=e.isPinch,a=e.isRequest,d=t.state,c=d.target,u=d.left,p=d.top,h=d.origin,g=d.beforeOrigin,m=d.direction,f=d.beforeDirection,b=d.targetTransform,v=d.moveableClientRect;if(!a&&!c)return!1;var y=t.getRect();if(i.rect=y,i.transform=b,i.left=u,i.top=p,i.fixedPosition=Xu(t,Yu(t)),a||l||r){var x=s||0;i.beforeInfo={origin:y.beforeOrigin,prevDeg:x,defaultDeg:x,prevSnapDeg:0},i.afterInfo=Kd(Kd({},i.beforeInfo),{origin:y.origin}),i.absoluteInfo=Kd(Kd({},i.beforeInfo),{origin:y.origin,startValue:x})}else i.beforeInfo={origin:y.beforeOrigin},i.afterInfo={origin:y.origin},i.absoluteInfo={origin:y.origin,startValue:y.rotation},Ec(t,i.beforeInfo,n,o,g,v),Ec(t,i.afterInfo,n,o,h,v),Ec(t,i.absoluteInfo,n,o,h,v);i.direction=m,i.beforeDirection=f,i.startValue=0,i.datas={},Fu(e,"rotate");var w=Op(t,e,Kd(Kd({set:function(t){i.startValue=t*Math.PI/180}},Hu(e)),{dragStart:qu.dragStart(t,(new vc).dragStart([0,0],e))})),S=Np(t,"onRotateStart",w);return i.isRotate=!1!==S,t.state.snapRenderInfo={request:e.isRequest},!!i.isRotate&&w},dragControl:function(t,e){var i,n,o,s=e.datas,r=e.clientX,l=e.clientY,a=e.parentRotate,d=e.parentFlag,c=e.isPinch,u=e.groupDelta,p=s.beforeDirection,h=s.beforeInfo,g=s.afterInfo,m=s.absoluteInfo,f=s.isRotate,b=s.startValue,v=s.rect;if(f){Ou(e,"rotate");var y,x,w,S,_,C,k,E,A,L=function(t){return yp(t.datas.beforeTransform,[50,50],100,100).direction}(e),q=p*L,T=t.props.parentMoveable,M=180/Math.PI*b,O=m.startValue,R=!1;if(!d&&"parentDist"in e){var B=e.parentDist;x=B,_=B,E=B}else c||d?(x=Ac(a,p,h),_=Ac(a,q,g),E=Ac(a,q,m)):(x=Lc(r,l,p,h),_=Lc(r,l,q,g),E=Lc(r,l,q,m),R=!0);if(Np(t,"onBeforeRotate",Op(t,e,{beforeRotation:w=M+x,rotation:C=M+_,absoluteRotation:A=O+E,setRotation:function(t){x=_=t-M,E=_}},!0)),y=(i=qc(t,v,h,x,M,R))[0],x=i[1],w=i[2],S=(n=qc(t,v,g,_,M,R))[0],_=n[1],C=n[2],k=(o=qc(t,v,m,E,O,R))[0],E=o[1],A=o[2],k||S||y||T){var N=Ru(s,"rotate(".concat(C,"deg)"),"rotate(".concat(_,"deg)")),I=function(t,e,i,n){var o=Yu(t);return Vu(t,"rotate(".concat(e,"deg)"),o,i,n)}(t,_,s.fixedPosition,s),$=za(Pa(u||[0,0],I),s.prevInverseDist||[0,0]);s.prevInverseDist=I,s.requestValue=null;var D=Op(t,e,Kd({delta:S,dist:_,rotate:C,rotation:C,beforeDist:x,beforeDelta:y,beforeRotate:w,beforeRotation:w,absoluteDist:E,absoluteDelta:k,absoluteRotate:A,absoluteRotation:A,isPinch:!!c},Gu(t,N,$,c,e)));return Np(t,"onRotate",D),D}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var i=e.datas;if(i.isRotate){i.isRotate=!1;var n=Rp(t,e,{});return Np(t,"onRotateEnd",n),n}},dragGroupControlCondition:Tc,dragGroupControlStart:function(t,e){var i=e.datas,n=t.state,o=n.left,s=n.top,r=n.beforeOrigin,l=this.dragControlStart(t,e);if(!l)return!1;l.set(i.beforeDirection*t.rotation);var a=wc(t,this,"dragControlStart",e,(function(t,e){var i=t.state,n=i.left,l=i.top,a=i.beforeOrigin,d=Pa(za([n,l],[o,s]),za(a,r));return e.datas.groupClient=d,Kd(Kd({},e),{parentRotate:0})})),d=Np(t,"onRotateGroupStart",Kd(Kd({},l),{targets:t.props.targets,events:a}));return i.isRotate=!1!==d,!!i.isRotate&&l},dragGroupControl:function(t,e){var i=e.datas;if(i.isRotate){Bp(t,"onBeforeRotate",(function(i){Np(t,"onBeforeRotateGroup",Op(t,e,Kd(Kd({},i),{targets:t.props.targets}),!0))}));var n=this.dragControl(t,e);if(n){var o=i.beforeDirection,s=n.beforeDist,r=n.beforeDelta/180*Math.PI,l=wc(t,this,"dragControl",e,(function(t,e){var i=e.datas.groupClient,n=i[0],l=i[1],a=Va([n,l],r*o),d=a[0],c=a[1],u=[d-n,c-l];return e.datas.groupClient=[d,c],Kd(Kd({},e),{parentRotate:s,groupDelta:u})}));t.rotation=o*n.beforeRotation;var a=Kd({targets:t.props.targets,events:l,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},n);return Np(t,"onRotateGroup",a),a}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var n=wc(t,this,"dragControlEnd",e);return Np(t,"onRotateGroupEnd",Rp(t,e,{targets:t.props.targets,events:n})),i}},request:function(t){var e={},i=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?i+=t.deltaRotate:"rotate"in t&&(i=t.rotate-n),{datas:e,parentDist:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Oc=["left","right","center"],Rc=["top","bottom","middle"],Bc={start:"left",end:"right",center:"center"},Nc={start:"top",end:"bottom",center:"middle"};function Ic(t,e){var i=t.props,n=i.snappable,o=i.bounds,s=i.innerBounds,r=i.verticalGuidelines,l=i.horizontalGuidelines,a=i.snapGridWidth,d=i.snapGridHeight,c=t.state,u=c.guidelines,p=c.enableSnap;return!(!n||!p||e&&!0!==n&&n.indexOf(e)<0)&&!!(a||d||o||s||u&&u.length||r&&r.length||l&&l.length)}function $c(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Dc(t,e){var i=function(t,e){var i=$c(t),n={};for(var o in i)o in e&&i[o]&&(n[o]=e[o]);return n}(t,e),n=Rc.filter((function(t){return t in i})),o=Oc.filter((function(t){return t in i}));return{horizontal:n.map((function(t){return i[t]})),vertical:o.map((function(t){return i[t]}))}}function Pc(t,e,i,n,o,s,r){void 0===o&&(o=0),void 0===s&&(s=0),void 0===r&&(r={left:0,top:0,right:0,bottom:0});var l=[],a=r.left,d=r.top,c=r.bottom,u=i+r.right-a,p=n+c-d;return t&&t.forEach((function(t){l.push({type:"horizontal",pos:[a,Il(t-s+d,.1)],size:u})})),e&&e.forEach((function(t){l.push({type:"vertical",pos:[Il(t-o+a,.1),d],size:p})})),l}function zc(t,e){if(!e.length)return[];var i=t.state,n=i.containerClientRect,o=i.targetClientRect,s=o.top,r=o.left,l=i.rootMatrix,a=i.is3d?4:3,d=function(t,e,i){var n=mp(t,[e.clientLeft,e.clientTop],i);return[e.left+n[0],e.top+n[1]]}(l,n,a),c=d[0],u=d[1],p=ud(Tp(i)),h=za([p.minX,p.minY],zp(l,[r-c,s-u],a)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),g=h[0],m=h[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),i=e.left-c,n=e.top-u,o=n+e.height,s=i+e.width,r=zp(l,[i,n],a),d=r[0],p=r[1],h=zp(l,[s,o],a),f=h[0],b=h[1];return Kd(Kd({},t),{rect:{left:d+g,right:f+g,top:p+m,bottom:b+m,center:(d+f)/2+g,middle:(p+b)/2+m}})}))}function Hc(t){var e=t.state,i=t.props.elementGuidelines,n=void 0===i?[]:i;if(!n.length)return e.elementRects=[],[];var o,s,r=(e.elementRects||[]).filter((function(t){return!t.refresh})),l=n.map((function(t){return cl(t)&&"element"in t?t:{element:Vp(t,!0)}})).filter((function(t){return t.element})),a=(o=r.map((function(t){return t.element})),s=l.map((function(t){return t.element})),Qr(o,s,rd)),d=a.maintained,c=a.added,u=[];d.forEach((function(t){var e=t[0],i=t[1];u[i]=r[e]})),zc(t,c.map((function(t){return l[t]}))).map((function(t,e){u[c[e]]=t})),e.elementRects=u;var p=$c(t.props.elementSnapDirections),h=[];return u.forEach((function(t){var e=t.element,i=t.top,n=void 0===i?p.top:i,o=t.left,s=void 0===o?p.left:o,r=t.right,l=void 0===r?p.right:r,a=t.bottom,d=void 0===a?p.bottom:a,c=t.center,u=void 0===c?p.center:c,g=t.middle,m=void 0===g?p.middle:g,f=t.className,b=t.rect,v=Dc({top:n,right:l,left:s,bottom:d,center:u,middle:m},b),y=v.horizontal,x=v.vertical,w=b.top,S=b.left,_=b.right-S,C=b.bottom-w,k=[_,C];x.forEach((function(i){h.push({type:"vertical",element:e,pos:[Il(i,.1),w],size:C,sizes:k,className:f,elementRect:t})})),y.forEach((function(i){h.push({type:"horizontal",element:e,pos:[S,Il(i,.1)],size:_,sizes:k,className:f,elementRect:t})}))})),h}function Fc(t){var e=t.state,i=e.snapOffset,n=e.containerClientRect,o=n.overflow,s=n.scrollHeight,r=n.scrollWidth,l=n.clientHeight,a=n.clientWidth,d=n.clientLeft,c=n.clientTop,u=t.props,p=u.snapGap,h=void 0===p||p,g=u.verticalGuidelines,m=u.horizontalGuidelines,f=u.snapThreshold,b=void 0===f?5:f,v=u.snapGridWidth,y=void 0===v?0:v,x=u.snapGridHeight,w=void 0===x?0:x,S=Qd([],Hc(t),!0);if(h){var _=bp(Tp(t.state)),C=_.top,k=_.left,E=_.bottom,A=_.right;S.push.apply(S,function(t,e,i){var n=t.state.elementRects,o=[];return[["vertical",Bc,Nc],["horizontal",Nc,Bc]].forEach((function(t){var s=t[0],r=t[1],l=t[2],a=e[r.start],d=e[r.end],c=e[r.center],u=e[l.start],p=e[l.end];function h(t){var e=t.rect;return e[r.end]<a+i?a-e[r.end]:d-i<e[r.start]?e[r.start]-d:-1}var g=n.filter((function(t){var e=t.rect;return!(e[l.start]>p||e[l.end]<u)&&h(t)>0})).sort((function(t,e){return h(t)-h(e)})),m=[];g.forEach((function(t){g.forEach((function(e){if(t!==e){var i=t.rect,n=e.rect,o=i[l.start],s=i[l.end],r=n[l.start];o>n[l.end]||r>s||m.push([t,e])}}))})),m.forEach((function(t){var e=t[0],n=t[1],l=e.rect,u=n.rect,p=l[r.start],h=l[r.end],g=u[r.start],m=u[r.end],f=0,b=0,v=!1,y=!1,x=!1;if(h<=a&&d<=g){if(y=!0,b=h+(f=(g-h-(d-a))/2)+(d-a)/2,Math.abs(b-c)>i)return}else if(h<g&&m<a+i){if(v=!0,b=m+(f=g-h),Math.abs(b-a)>i)return}else{if(!(h<g&&d-i<p))return;if(x=!0,b=p-(f=g-h),Math.abs(b-d)>i)return}f&&o.push({type:s,pos:"vertical"===s?[b,0]:[0,b],element:n.element,size:0,className:n.className,isStart:v,isCenter:y,isEnd:x,gap:f,hide:!0,gapRects:[e,n]})}))})),o}(t,{top:C,left:k,bottom:E,right:A,center:(k+A)/2,middle:(C+E)/2},b))}return S.push.apply(S,function(t,e,i,n,o,s){void 0===o&&(o=0);void 0===s&&(s=0);var r=[];if(e)for(var l=0;l<=n;l+=e)r.push({type:"horizontal",pos:[0,Il(l-s,.1)],size:i,hide:!0});if(t)for(l=0;l<=i;l+=t)r.push({type:"vertical",pos:[Il(l-o,.1),0],size:n,hide:!0});return r}(y,w,o?r:a,o?s:l,d,c)),S.push.apply(S,Pc(m||!1,g||!1,o?r:a,o?s:l,d,c,i)),S}function Uc(t,e,i,n){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t.length-1,n=0;n<i;++n){var o=t[n];if(!dl(o))return o}return t[i]}(n,t.props.snapThreshold,5);return Wc(t.state.guidelines,e,i,o)}function Wc(t,e,i,n){return{vertical:Vc(t,"vertical",e,n),horizontal:Vc(t,"horizontal",i,n)}}function jc(t,e,i){var n=Dc(t.props.snapDirections,e);return Uc(t,n.vertical,n.horizontal,i)}function Gc(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var i=t.posInfos[0],n=i.guidelineInfos[0],o=n.offset,s=n.dist,r=n.guideline;return{isSnap:e,offset:o,dist:s,pos:i.pos,guideline:r}}function Vc(t,e,i,n){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var o="vertical"===e?0:1,s=i.map((function(i,s){var r=t.map((function(t){var e=t.pos,n=i-e[o];return{offset:n,dist:Math.abs(n),guideline:t}})).filter((function(t){var i=t.guideline,o=t.dist;return!(i.type!==e||o>n)})).sort((function(t,e){return t.dist-e.dist}));return{pos:i,index:s,guidelineInfos:r}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),r=s.length>0;return{isSnap:r,index:r?s[0].index:-1,posInfos:s}}function Yc(t,e){var i=Math.abs(t.offset),n=Math.abs(e.offset);return t.isBound&&e.isBound?n-i:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?n-i:t.isSnap?-1:e.isSnap||i<dc?1:n<dc?-1:i-n}function Xc(t,e){return t.slice().sort((function(t,i){var n=t.sign[e],o=i.sign[e],s=t.offset[e],r=i.offset[e];return n?o?Yc({isBound:t.isBound,isSnap:t.isSnap,offset:s},{isBound:i.isBound,isSnap:i.isSnap,offset:r}):-1:1}))[0]}function Zc(t,e){var i=Ol([e[0][0],e[1][0]]),n=Ol([e[0][1],e[1][1]]);return{vertical:i<=t[0],horizontal:n<=t[1]}}function Kc(t,e){var i,n,o=e[0],s=e[1],r=s[0]-o[0],l=s[1]-o[1];if(Math.abs(r)<dc&&(r=0),Math.abs(l)<dc&&(l=0),r)if(l){i=l/r*(t[0]-o[0])+o[1],n=t[1]}else i=o[1],n=t[1];else i=o[0],n=t[0];return i-n}function Qc(t,e,i,n){return void 0===n&&(n=dc),t.every((function(t){var o=Kc(t,e);return o<=0===i||Math.abs(o)<=n}))}function Jc(t,e,i,n,o){return void 0===o&&(o=0),n&&e-o<=t||!n&&t<=i+o?{isBound:!0,offset:n?e-t:i-t}:{isBound:!1,offset:0}}function tu(t,e,i,n,o,s){var r=e[0],l=e[1],a=t[0],d=i[0],c=i[1],u=Wp(c[1]-d[1]),p=l,h=r,g=-r/l;if(!Wp(c[0]-d[0])){if(s&&!h)return{isBound:!1,offset:0};if(p)return Jc(g*(d[0]-a[0])+a[1],d[1],c[1],n,o);var m=d[0]-a[0];return{isBound:f=Math.abs(m)<=(o||0),offset:f?m:0}}if(!u){if(s&&!p)return{isBound:!1,offset:0};if(h)return Jc((d[1]-a[1])/g+a[0],d[0],c[0],n,o);var f;m=d[1]-a[1];return{isBound:f=Math.abs(m)<=(o||0),offset:f?m:0}}return{isBound:!1,offset:0}}function eu(t,e,i){return e.map((function(e){var n=function(t,e){var i=e.line,n=e.centerSign,o=e.verticalSign,s=e.horizontalSign,r=e.lineConstants,l=t.props.innerBounds;if(!l)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=l.left,d=l.top,c=l.width,u=l.height,p=[[a,d],[a,d+u]],h=[[a,d],[a+c,d]],g=[[a+c,d],[a+c,d+u]],m=[[a,d+u],[a+c,d+u]];if(Qc([[a,d],[a+c,d],[a,d+u],[a+c,d+u]],i,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var f=tu(i,r,h,o),b=tu(i,r,m,o),v=tu(i,r,p,s),y=tu(i,r,g,s),x=f.isBound&&b.isBound,w=f.isBound||b.isBound,S=v.isBound&&y.isBound,_=v.isBound||y.isBound,C=Pp(f.offset,b.offset),k=Pp(v.offset,y.offset),E=[0,0],A=!1,L=!1;return Math.abs(k)<Math.abs(C)?(E=[C,0],A=w,L=x):(E=[0,k],A=_,L=S),{isAllBound:L,isVerticalBound:w,isHorizontalBound:_,isBound:A,offset:E}}(t,e),o=n.isBound,s=n.offset,r=n.isVerticalBound,l=n.isHorizontalBound,a=e.multiple,d=Iu({datas:i,distX:s[0],distY:s[1]}).map((function(t,e){return t*(a[e]?2/a[e]:0)}));return{sign:a,isBound:o,isVerticalBound:r,isHorizontalBound:l,isSnap:!1,offset:d}}))}function iu(t,e,i){var n,o=eu(t,nu(t,e,[0,0],!1).map((function(t){return Kd(Kd({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),i),s=Xc(o,0),r=Xc(o,1),l=0,a=0,d=s.isVerticalBound||r.isVerticalBound,c=s.isHorizontalBound||r.isHorizontalBound;return(d||c)&&(n=function(t,e){var i=t.datas,n=t.distX,o=t.distY,s=i.beforeMatrix,r=i.matrix,l=i.is3d,a=i.startDragBeforeDist,d=i.startDragDist,c=i.absoluteOrigin,u=l?4:3;return za(Fa(e?s:r,Pa(e?a:d,[n,o]),u),c)}({datas:i,distX:-s.offset[0],distY:-r.offset[1]}),l=n[0],a=n[1]),{vertical:{isBound:d,offset:l},horizontal:{isBound:c,offset:a}}}function nu(t,e,i,n){var o=t.state,s=fp(o.allMatrix,100,100,o.is3d?4:3),r=Pu(s,[0,0]);return function(t,e){var i=[],n=t[0],o=t[1];return n&&o?i.push([[0,2*o],t,[-n,o]],[[2*n,0],t,[n,-o]]):n?(i.push([[2*n,0],[n,1],[n,-1]]),e&&i.push([[0,-1],[n,-1],[-n,-1]],[[0,1],[n,1],[-n,1]])):o?(i.push([[0,2*o],[1,o],[-1,o]]),e&&i.push([[-1,0],[-1,o],[-1,-o]],[[1,0],[1,o],[1,-o]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i}(i,n).map((function(t){var i=t[0],n=t[1],o=t[2],l=[Pu(s,n),Pu(s,o)],a=function(t){var e=t[0],i=t[1],n=i[0]-e[0],o=i[1]-e[1];Math.abs(n)<ll&&(n=0),Math.abs(o)<ll&&(o=0);var s=0,r=0,l=0;return n?o?(r=1,l=(s=-o/n)*e[0]-e[1]):(r=1,l=-e[1]):(s=-1,l=e[0]),[s,r,l].map((function(t){return Il(t,ll)}))}(l),d=Zc(r,l),c=d.vertical,u=d.horizontal;return{multiple:i,centerSign:Kc(r,l)<=0,verticalSign:c,horizontalSign:u,lineConstants:a,line:[Pu(e,n),Pu(e,o)]}}))}function ou(t,e,i,n){var o=n?t.map((function(t){return Va(t,n)})):t;return[[o[0],o[1]],[o[1],o[3]],[o[3],o[2]],[o[2],o[0]]].some((function(t){var n=Kc(i,t)<=0;return!Qc(e,t,n)}))}function su(t,e,i){var n=t||{},o=n.position,s=void 0===o?"client":o,r=n.left,l=void 0===r?-1/0:r,a=n.top,d=void 0===a?-1/0:a,c=n.right,u=void 0===c?1/0:c,p=n.bottom,h={position:s,left:l,top:d,right:u,bottom:void 0===p?1/0:p};return{vertical:lu(h,e,!0),horizontal:lu(h,i,!1)}}function ru(t,e){var i=t.state,n=i.containerClientRect,o=n.clientHeight,s=n.clientWidth,r=n.clientLeft,l=n.clientTop,a=i.snapOffset,d=a.left,c=a.top,u=a.right,p=a.bottom,h=e||t.props.bounds||{},g="css"===(h.position||"client"),m=h.left,f=void 0===m?-1/0:m,b=h.top,v=void 0===b?-1/0:b,y=h.right,x=void 0===y?g?-1/0:1/0:y,w=h.bottom,S=void 0===w?g?-1/0:1/0:w;return g&&(x=s+u-d-x,S=o+p-c-S),{left:f+d-r,right:x+d-r,top:v+c-l,bottom:S+c-l}}function lu(t,e,i){var n=t[i?"left":"top"],o=t[i?"right":"bottom"],s=Math.min.apply(Math,e),r=Math.max.apply(Math,e),l=[];return n+1>s&&l.push({isBound:!0,offset:s-n,pos:n}),o-1<r&&l.push({isBound:!0,offset:r-o,pos:o}),l.length||l.push({isBound:!1,offset:0,pos:0}),l.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function au(t,e,i){return(i?t.map((function(t){return Va(t,i)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function du(t,e){return function(t,e){var i,n=t.direction,o=t.classNames,s=t.size,r=t.pos,l=t.zoom,a=t.key,d="horizontal"===n,c=d?"Y":"X";return e.createElement("div",{key:a,className:o.join(" "),style:(i={},i[d?"width":"height"]="".concat(s),i.transform="translate(".concat(r[0],", ").concat(r[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(l,")"),i)})}(Kd(Kd({},t),{classNames:Qd([Qu("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(Il(t,.1),"px")}))}),e)}function cu(t,e,i,n,o,s,r,l){var a=t.props.zoom;return i.map((function(t,i){var d=t.type,c=t.pos,u=[0,0];return u[r]=n,u[r?0:1]=-o+c,du({key:"".concat(e,"TargetGuideline").concat(i),classNames:[Qu("target","bold",d)],posValue:u,sizeValue:s,zoom:a,direction:e},l)}))}function uu(t,e,i,n,o,s){var r=t.props,l=r.zoom,a=r.isDisplayInnerSnapDigit,d="horizontal"===e?Bc:Nc,c=o[d.start],u=o[d.end];return i.filter((function(t){var e=t.hide,i=t.elementRect;if(e)return!1;if(a&&i){var n=i.rect;if(n[d.start]<=c&&u<=n[d.end])return!1}return!0})).map((function(t,i){var o=t.pos,r=t.size,a=t.element,d=[-n[0]+o[0],-n[1]+o[1]];return du({key:"".concat(e,"-default-guideline-").concat(i),classNames:a?[Qu("bold")]:[],direction:e,posValue:d,sizeValue:r,zoom:l},s)}))}function pu(t,e,i,n,o,s,r,l){var a,d=t.props,c=d.snapDigit,u=void 0===c?0:c,p=d.isDisplaySnapDigit,h=void 0===p||p,g=d.snapDistFormat,m=void 0===g?function(t,e){return t}:g,f=d.zoom,b="horizontal"===e?"X":"Y",v="vertical"===e?"height":"width",y=Math.abs(o),x=h?parseFloat(y.toFixed(u)):0;return l.createElement("div",{key:"".concat(e,"-").concat(i,"-guideline-").concat(n),className:Qu("guideline-group",e),style:(a={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},a[v]="".concat(y,"px"),a)},du({direction:e,classNames:[Qu(i),r],size:"100%",posValue:[0,0],sizeValue:y,zoom:f},l),l.createElement("div",{className:Qu("size-value","gap"),style:{transform:"translate".concat(b,"(-50%) scale(").concat(f,")")}},x>0?m(x,e):""))}function hu(t,e,i,n,o){var s=t.props.isDisplayInnerSnapDigit,r=[];return["vertical","horizontal"].forEach((function(l){var a=e.filter((function(t){return t.type===l})),d="vertical"===l?1:0,c=d?0:1,u=function(t,e,i,n){var o="vertical"===t?0:1,s="vertical"===t?1:0,r=o?Bc:Nc,l=i[r.start],a=i[r.end];return function(t,e){var i=[],n=[];return t.forEach((function(o,s){var r=e(o,s,t),l=n.indexOf(r),a=i[l]||[];-1===l&&(n.push(r),i.push(a)),a.push(o)})),i}(e,(function(t){return t.pos[o]})).map((function(e){var i=[],d=[];return e.forEach((function(e){var c,u,p=e.element,h=e.elementRect.rect;if(h[r.end]<l)i.push(e);else if(a<h[r.start])d.push(e);else if(h[r.start]<=l&&a<=h[r.end]&&n){var g=e.pos,m={element:p,rect:Kd(Kd({},h),(c={},c[r.end]=h[r.start],c))},f={element:p,rect:Kd(Kd({},h),(u={},u[r.start]=h[r.end],u))},b=[0,0],v=[0,0];b[o]=g[o],b[s]=g[s],v[o]=g[o],v[s]=g[s]+e.size,i.push({type:t,pos:b,size:0,elementRect:m}),d.push({type:t,pos:v,size:0,elementRect:f})}})),i.sort((function(t,e){return e.pos[s]-t.pos[s]})),d.sort((function(t,e){return t.pos[s]-e.pos[s]})),{total:e,start:i,end:d,inner:[]}}))}(l,a,n,s),p=d?Nc:Bc,h=d?Bc:Nc,g=n[p.start],m=n[p.end];u.forEach((function(e){var s=e.total,a=e.start,u=e.end,f=e.inner,b=i[c]+s[0].pos[c]-n[h.start],v=n;a.forEach((function(e){var n=e.elementRect.rect,s=v[p.start]-n[p.end];if(s>0){var a=[0,0];a[d]=i[d]+v[p.start]-g-s,a[c]=b,r.push(pu(t,l,"dashed",r.length,s,a,e.className,o))}v=n})),v=n,u.forEach((function(e){var n=e.elementRect.rect,s=n[p.start]-v[p.end];if(s>0){var a=[0,0];a[d]=i[d]+v[p.end]-g,a[c]=b,r.push(pu(t,l,"dashed",r.length,s,a,e.className,o))}v=n})),f.forEach((function(e){var n=e.elementRect.rect,s=g-n[p.start],a=n[p.end]-m,u=[0,0],h=[0,0];u[d]=i[d]-s,u[c]=b,h[d]=i[d]+m-g,h[c]=b,r.push(pu(t,l,"dashed",r.length,s,u,e.className,o)),r.push(pu(t,l,"dashed",r.length,a,h,e.className,o))}))}))})),r}function gu(t,e,i,n,o){var s=function(t,e,i,n){var o=e[0]-t[0],s=e[1]-t[1];if(Math.abs(o)<ll&&(o=0),Math.abs(s)<ll&&(s=0),!o)return n?[0,0]:[0,i];if(!s)return n?[i,0]:[0,0];var r=s/o,l=t[1]-r*t[0];return n?[i,r*(e[0]+i)+l-e[1]]:[(e[1]+i-l)/r-e[0],i]}(t,e,i,n);if(!s)return{isOutside:!1,offset:[0,0]};var r=Nl(t,e),l=Nl(s,t),a=Nl(s,e),d=l>r||a>r,c=Iu({datas:o,distX:s[0],distY:s[1]});return{offset:[c[0],c[1]],isOutside:d}}function mu(t,e){return t.isBound?t.offset:e.isSnap?Gc(e).offset:0}function fu(t,e,i,n,o,s){if(!Ic(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var r=qp(s.absolutePoses,[e,i]),l=bp(r),a=l.left,d=l.right,c=l.top,u=l.bottom,p={horizontal:r.map((function(t){return t[1]})),vertical:r.map((function(t){return t[0]}))},h=bu(t,o,Dc($c(t.props.snapDirections),{left:a,right:d,top:c,bottom:u,center:(a+d)/2,middle:(c+u)/2}),p),g=h.vertical,m=h.horizontal,f=iu(t,r,s),b=f.vertical,v=f.horizontal,y=g.isSnap,x=m.isSnap,w=g.isBound||b.isBound,S=m.isBound||v.isBound,_=function(t,e,i,n,o){var s=e[0],r=e[1],l=i[0],a=i[1],d=n[0],c=n[1],u=o[0],p=o[1],h=-u,g=-p;if(t&&s&&r){h=0,g=0;var m=[];if(l&&a?m.push([0,p],[u,0]):l?m.push([u,0]):a?m.push([0,p]):d&&c?m.push([0,p],[u,0]):d?m.push([u,0]):c&&m.push([0,p]),m.length){m.sort((function(t,e){return xp(za([s,r],t))-xp(za([s,r],e))}));var f=m[0];if(f[0]&&Math.abs(s)>ll)h=-f[0],g=r*Math.abs(s+h)/Math.abs(s)-r;else if(f[1]&&Math.abs(r)>ll){var b=r;g=-f[1],h=s*Math.abs(r+g)/Math.abs(b)-s}if(t&&a&&l)if(Math.abs(h)>ll&&Math.abs(h)<Math.abs(u))h*=v=Math.abs(u)/Math.abs(h),g*=v;else if(Math.abs(g)>ll&&Math.abs(g)<Math.abs(p)){var v;h*=v=Math.abs(p)/Math.abs(g),g*=v}else h=Pp(-u,h),g=Pp(-p,g)}}else h=s||l?-u:0,g=r||a?-p:0;return[h,g]}(n,[e,i],[w,S],[y,x],[Pp(g.offset,b.offset),Pp(m.offset,v.offset)]);return[{isBound:w,isSnap:y,offset:_[0]},{isBound:S,isSnap:x,offset:_[1]}]}function bu(t,e,i,n){void 0===n&&(n=i);var o=su(ru(t),n.vertical,n.horizontal),s=o.horizontal,r=o.vertical,l=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Uc(t,i.vertical,i.horizontal),a=l.horizontal,d=l.vertical,c=mu(s[0],a),u=mu(r[0],d),p=Math.abs(c),h=Math.abs(u);return{horizontal:{isBound:s[0].isBound,isSnap:a.isSnap,snapIndex:a.index,offset:c,dist:p,bounds:s,snap:a},vertical:{isBound:r[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:u,dist:h,bounds:r,snap:d}}}function vu(t,e,i,n,o){var s=su(e,i,n),r=s.horizontal,l=s.vertical,a=Wc(t,i,n,o),d=a.horizontal,c=a.vertical,u=mu(r[0],d),p=mu(l[0],c),h=Math.abs(u),g=Math.abs(p);return{horizontal:{isBound:r[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:u,dist:h,bounds:r,snap:d},vertical:{isBound:l[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:g,bounds:l,snap:c}}}function yu(t,e,i,n,o,s){return i.map((function(i){var r=i[0],l=i[1],a=Pu(e,r),d=Pu(e,l),c=n?function(t,e,i,n){var o=function(t,e,i){var n=ru(t),o=n.left,s=n.top,r=n.right,l=n.bottom,a=i[0],d=i[1],c=za(i,e),u=c[0],p=c[1];Math.abs(u)<dc&&(u=0),Math.abs(p)<dc&&(p=0);var h=p>0,g=u>0,m={isBound:!1,offset:0,pos:0},f={isBound:!1,offset:0,pos:0};if(0===u&&0===p)return{vertical:m,horizontal:f};if(0===u)h?l<d&&(f.pos=l,f.offset=d-l):s>d&&(f.pos=s,f.offset=d-s);else if(0===p)g?r<a&&(m.pos=r,m.offset=a-r):o>a&&(m.pos=o,m.offset=a-o);else{var b=p/u,v=i[1]-b*a,y=0,x=0,w=!1;g&&r<=a?(y=b*r+v,x=r,w=!0):!g&&a<=o&&(y=b*o+v,x=o,w=!0),w&&(y<s||y>l)&&(w=!1),w||(h&&l<=d?(x=((y=l)-v)/b,w=!0):!h&&d<=s&&(x=((y=s)-v)/b,w=!0)),w&&(m.isBound=!0,m.pos=x,m.offset=a-x,f.isBound=!0,f.pos=y,f.offset=d-y)}return{vertical:m,horizontal:f}}(t,e,i),s=o.horizontal,r=o.vertical,l=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,i){var n=i[0],o=i[1],s=e[0],r=e[1],l=za(i,e),a=l[0],d=l[1],c=d>0,u=a>0;a=Wp(a),d=Wp(d);var p={isSnap:!1,offset:0,pos:0},h={isSnap:!1,offset:0,pos:0};if(0===a&&0===d)return{vertical:p,horizontal:h};var g=Uc(t,a?[n]:[],d?[o]:[]),m=g.vertical,f=g.horizontal;m.posInfos.filter((function(t){var e=t.pos;return u?e>=s:e<=s})),f.posInfos.filter((function(t){var e=t.pos;return c?e>=r:e<=r})),m.isSnap=m.posInfos.length>0,f.isSnap=f.posInfos.length>0;var b=Gc(m),v=b.isSnap,y=b.guideline,x=Gc(f),w=x.isSnap,S=x.guideline,_=w?S.pos[1]:0,C=v?y.pos[0]:0;if(0===a)w&&(h.isSnap=!0,h.pos=S.pos[1],h.offset=o-h.pos);else if(0===d)v&&(p.isSnap=!0,p.pos=C,p.offset=n-C);else{var k=d/a,E=i[1]-k*n,A=0,L=0,q=!1;v?(A=k*(L=C)+E,q=!0):w&&(L=((A=_)-E)/k,q=!0),q&&(p.isSnap=!0,p.pos=L,p.offset=n-L,h.isSnap=!0,h.pos=A,h.offset=o-A)}return{vertical:p,horizontal:h}}(t,e,i),a=l.horizontal,d=l.vertical,c=xu(s,a),u=xu(r,d),p=Math.abs(c),h=Math.abs(u);return{horizontal:{isBound:s.isBound,isSnap:a.isSnap,offset:c,dist:p},vertical:{isBound:r.isBound,isSnap:d.isSnap,offset:u,dist:h}}}(t,a,d,o):bu(t,o,{vertical:[d[0]],horizontal:[d[1]]}),u=c.horizontal,p=u.offset,h=u.isBound,g=u.isSnap,m=c.vertical,f=m.offset,b=m.isBound,v=m.isSnap,y=za(l,r);if(!f&&!p)return{isBound:b||h,isSnap:v||g,sign:y,offset:[0,0]};var x=function(t,e,i,n){var o=Rl(t,e)/Math.PI*180,s=i.vertical,r=s.isBound,l=s.isSnap,a=s.dist,d=i.horizontal,c=d.isBound,u=d.isSnap,p=o%180,h=p<3||p>177,g=p>87&&p<93;return d.dist<a&&(r||l&&!g&&(!n||!h))?"vertical":!c&&(!u||h||n&&g)?"":"horizontal"}(a,d,c,n);if(!x)return{sign:y,isBound:!1,isSnap:!1,offset:[0,0]};var w="vertical"===x,S=[0,0];return S=(S=n||1!==Math.abs(l[0])||1!==Math.abs(l[1])||r[0]===l[0]||r[1]===l[1]?gu(a,d,-(w?f:p),w,s).offset:Iu({datas:s,distX:-f,distY:-p})).map((function(t,e){return t*(y[e]?2/y[e]:0)})),{sign:y,isBound:w?b:h,isSnap:w?v:g,offset:S}}))}function xu(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function wu(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var i=t.state.container,n=t.props.snapContainer||i,o=e.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(i!==n){var r=Vp(n,!0);if(r){var l=Ap(r),a=Xp(e,[l.left-o.left,l.top-o.top]),d=Xp(e,[l.right-o.right,l.bottom-o.bottom]);s.left=Il(a[0],.1),s.top=Il(a[1],.1),s.right=Il(d[0],.1),s.bottom=Il(d[1],.1)}}e.snapOffset=s,e.guidelines=Fc(t),e.enableSnap=!0}}function Su(t,e,i,n,o,s){var r=fp(t,e,i,s?4:3);return qp(r,za(o,Pu(r,n)))}function _u(t,e,i,n,o,s){var r=function(t,e,i){var n=[];if(i)1!==Math.abs(e[0])||1!==Math.abs(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var o=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(i){var s=[t*o[0],i*o[1]];e[0]===s[0]&&e[1]===s[1]||n.push([e,s])}))}))}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach((function(i){n.push([[e[0],-1],[i*t[0],-1]],[[e[0],0],[i*t[0],0]],[[e[0],1],[i*t[0],1]])})):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach((function(i){n.push([[-1,e[1]],[-1,i*t[1]]],[[0,e[1]],[0,i*t[1]]],[[1,e[1]],[1,i*t[1]]])}));return n}(i,s.fixedDirection,n),l=nu(t,e,i,n),a=Qd(Qd([],yu(t,e,r,n,o,s),!0),eu(t,l,s),!0),d=Xc(a,0),c=Xc(a,1);return{width:{isBound:d.isBound,offset:d.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Cu(t,e,i,n,o,s,r,l){for(var a=Tp(t.state),d=t.props.keepRatio,c=0,u=0,p=0;p<2;++p){var h=_u(t,e(c,u),o,d,r,l),g=h.width,m=h.height,f=g.isBound,b=m.isBound,v=g.offset,y=m.offset;if(1===p&&(f||(v=0),b||(y=0)),0===p&&r&&!f&&!b)return[0,0];if(d){var x=Math.abs(v)*(i?1/i:1),w=Math.abs(y)*(n?1/n:1);(f&&b?x<w:b||!f&&x<w)?v=i*y/n:y=n*v/i}c+=v,u+=y}if(o[0]&&o[1]){var S=function(t,e,i,n,o){var s=[-i[0],-i[1]],r=t.state,l=r.width,a=r.height,d=t.props.bounds,c=1/0,u=1/0;if(d){var p=[[i[0],-i[1]],[-i[0],i[1]]],h=d.left,g=void 0===h?-1/0:h,m=d.top,f=void 0===m?-1/0:m,b=d.right,v=void 0===b?1/0:b,y=d.bottom,x=void 0===y?1/0:y;p.forEach((function(t){var i=t[0]!==s[0],r=t[1]!==s[1],d=Pu(e,t),p=360*Rl(n,d)/Math.PI;if(r){var h=d.slice();(Math.abs(p-360)<2||Math.abs(p-180)<2)&&(h[1]=n[1]);var m=gu(n,h,(n[1]<d[1]?x:f)-d[1],!1,o),b=m.offset[1],y=m.isOutside;isNaN(b)||(u=a+(y?1:-1)*Math.abs(b))}if(i){h=d.slice(),(Math.abs(p-90)<2||Math.abs(p-270)<2)&&(h[0]=n[0]);var w=gu(n,h,(n[0]<d[0]?v:g)-d[0],!0,o),S=w.offset[0],_=w.isOutside;isNaN(S)||(c=l+(_?1:-1)*Math.abs(S))}}))}return{maxWidth:c,maxHeight:u}}(t,a,o,s,l),_=S.maxWidth,C=S.maxHeight,k=function(t,e,i,n,o,s,r,l,a){var d=Pu(e,r),c=bu(t,l,{vertical:[d[0]],horizontal:[d[1]]}),u=c.horizontal.offset,p=c.vertical.offset;if(p||u){var h=Iu({datas:a,distX:-p,distY:-u}),g=h[0],m=h[1];return[Math.min(o||1/0,i+r[0]*g)-i,Math.min(s||1/0,n+r[1]*m)-n]}return[0,0]}(t,e(c,u).map((function(t){return t.map((function(t){return Il(t,ac)}))})),i+c,n+u,_,C,o,r,l);c+=v=k[0],u+=y=k[1]}return[c,u]}function ku(t,e,i,n,o){if(!Ic(t,"scalable"))return[0,0];var s=o.startOffsetWidth,r=o.startOffsetHeight,l=o.fixedPosition,a=o.fixedDirection,d=o.is3d,c=Cu(t,(function(t,i){return Su(function(t,e){var i=t.transformOrigin,n=t.offsetMatrix,o=t.is3d,s=t.targetMatrix,r=o?4:3;return zu(n,Da(s,Qa(e,r),r),i,r)}(o,Pa(e,[t/s,i/r])),s,r,a,l,d)}),s,r,i,l,n,o);return[c[0]/s,c[1]/r]}function Eu(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var i=t.guideline;e.indexOf(i)>-1||e.push(i)}))})),e}function Au(t,e,i,n,o,s){var r=su(ru(t,s),e,i),l=r.vertical,a=r.horizontal;l.forEach((function(t){t.isBound&&n.push({type:"bounds",pos:t.pos})})),a.forEach((function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})}));var d=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var i=t.getRect(),n=[i.pos1,i.pos2,i.pos3,i.pos4],o=Pu(n,[0,0]),s=e.left,r=e.top,l=e.width,a=e.height,d=[[s,r],[s,r+a]],c=[[s,r],[s+l,r]],u=[[s+l,r],[s+l,r+a]],p=[[s,r+a],[s+l,r+a]],h=nu(t,n,[0,0],!1),g=[],m=[],f={top:!1,bottom:!1,left:!1,right:!1};return h.forEach((function(t){var e=t.line,i=t.lineConstants,n=Zc(o,e),h=n.horizontal,b=n.vertical,v=tu(e,i,c,b,1,!0),y=tu(e,i,p,b,1,!0),x=tu(e,i,d,h,1,!0),w=tu(e,i,u,h,1,!0);v.isBound&&!f.top&&(g.push(r),f.top=!0),y.isBound&&!f.bottom&&(g.push(r+a),f.bottom=!0),x.isBound&&!f.left&&(m.push(s),f.left=!0),w.isBound&&!f.right&&(m.push(s+l),f.right=!0)})),{horizontal:g,vertical:m}}(t),c=d.vertical,u=d.horizontal;c.forEach((function(t){Cl(n,(function(e){var i=e.type,n=e.pos;return"bounds"===i&&n===t}))>=0||n.push({type:"bounds",pos:t})})),u.forEach((function(t){Cl(o,(function(e){var i=e.type,n=e.pos;return"bounds"===i&&n===t}))>=0||o.push({type:"bounds",pos:t})}))}var Lu={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var i=t.state,n=i.top,o=i.left,s=i.pos1,r=i.pos2,l=i.pos3,a=i.pos4,d=i.snapRenderInfo;if(!d||!Ic(t,""))return[];i.guidelines=Fc(t);var c=Math.min(s[0],r[0],l[0],a[0]),u=Math.min(s[1],r[1],l[1],a[1]),p=d.externalPoses||[],h=Tp(t.state),g=[],m=[],f=[],b=[],v=[],y=bp(h),x=y.width,w=y.height,S=y.top,_=y.left,C=y.bottom,k=y.right,E={left:_,right:k,top:S,bottom:C,center:(_+k)/2,middle:(S+C)/2},A=p.length>0,L=A?bp(p):{};if(!d.request){if(d.direction&&v.push(function(t,e,i){var n=[];if(i[0]&&i[1])n=[i,[-i[0],i[1]],[i[0],-i[1]]].map((function(t){return Pu(e,t)}));else if(i[0]||i[1])t.props.keepRatio?n=[[-1,-1],[-1,1],[1,-1],[1,1],i].map((function(t){return Pu(e,t)})):(n=Du(e,i)).length>1&&n.push([(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]);else for(var o=[e[0],e[1],e[3],e[2],e[0]],s=0;s<4;++s)n.push(o[s]),n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2]);return Uc(t,n.map((function(t){return t[0]})),n.map((function(t){return t[1]})),1)}(t,h,d.direction)),d.snap){var q=bp(h);d.center&&(q.middle=(q.top+q.bottom)/2,q.center=(q.left+q.right)/2),v.push(jc(t,q,1))}A&&(d.center&&(L.middle=(L.top+L.bottom)/2,L.center=(L.left+L.right)/2),v.push(jc(t,L,1))),v.forEach((function(t){var e=t.vertical.posInfos,i=t.horizontal.posInfos;g.push.apply(g,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),m.push.apply(m,i.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),f.push.apply(f,Eu(e)),b.push.apply(b,Eu(i))}))}Au(t,[_,k],[S,C],g,m),A&&Au(t,[L.left,L.right],[L.top,L.bottom],g,m,d.externalBounds);var T=Qd(Qd([],f,!0),b,!0),M=T.filter((function(t){return t.element&&!t.gapRects})),O=T.filter((function(t){return t.gapRects}));return Np(t,"onSnap",{guidelines:T.filter((function(t){return!t.element})),elements:M,gaps:O},!0),Qd(Qd(Qd(Qd(Qd(Qd([],hu(t,M,[c,u],E,e),!0),function(t,e,i,n,o){var s=[];return["horizontal","vertical"].forEach((function(r){var l=e.filter((function(t){return t.type===r})),a="vertical"===r?0:1,d=a?0:1,c=a?Nc:Bc,u=a?Bc:Nc,p=n[c.start],h=n[c.end],g=n[u.start],m=n[u.end];l.forEach((function(e){var n=e.gap,r=e.gapRects,l=e.className,f=Math.max.apply(Math,Qd([g],r.map((function(t){return t.rect[u.start]})),!1)),b=Math.min.apply(Math,Qd([m],r.map((function(t){return t.rect[u.end]})),!1)),v=(f+b)/2;f!==b&&v!==(g+m)/2&&r.forEach((function(e){var r=e.rect,u=[i[0],i[1]];if(r[c.end]<p)u[a]+=r[c.end]-p;else{if(!(h<r[c.start]))return;u[a]+=r[c.start]-p-n}u[d]+=v-g,s.push(pu(t,a?"vertical":"horizontal","gap",s.length,n,u,l,o))}))}))})),s}(t,O,[c,u],E,e),!0),uu(t,"horizontal",b,[o,n],E,e),!0),uu(t,"vertical",f,[o,n],E,e),!0),cu(t,"horizontal",m,c,n,x,0,e),!0),cu(t,"vertical",g,u,o,w,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},wu(t)},drag:function(t){t.state.guidelines=Fc(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!jp(t,e)&&!Tc(t,e))||(!e.isRequest&&e.inputEvent?Dl(e.inputEvent.target,Qu("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,wu(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,wu(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},qu={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var i=t.props,n=i.throttleDragRotate,o=i.zoom,s=t.state,r=s.dragInfo,l=s.beforeOrigin;if(!n||!r)return[];var a=r.dist;if(!a[0]&&!a[1])return[];var d=xp(a),c=Rl(a,[0,0]);return[e.createElement("div",{className:Qu("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(d,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(c,"rad) scaleY(").concat(o,")")}})]},dragStart:function(t,e){var i=e.datas,n=e.parentEvent,o=e.parentGesto,s=t.state,r=s.target;if(s.gesto)return!1;s.gesto=o||t.targetGesto;var l=Ip(r);i.datas={},i.left=parseFloat(l.left||"")||0,i.top=parseFloat(l.top||"")||0,i.bottom=parseFloat(l.bottom||"")||0,i.right=parseFloat(l.right||"")||0,i.startValue=[0,0],Mu(t,e),Fu(e,"translate"),function(t,e){e.absolutePoses=Tp(t.state)}(t,i),i.prevDist=[0,0],i.prevBeforeDist=[0,0],i.isDrag=!1,i.deltaOffset=[0,0];var a=Op(t,e,Kd({set:function(t){i.startValue=t}},Hu(e)));return!1!==(n||Np(t,"onDragStart",a))?(i.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(s.gesto=null,i.isPinch=!1),!!i.isDrag&&a},drag:function(t,e){if(e){Ou(e,"translate");var i=e.datas,n=e.parentEvent,o=e.parentFlag,s=e.isPinch,r=e.isRequest,l=e.deltaOffset,a=e.distX,d=e.distY,c=i.isDrag,u=i.prevDist,p=i.prevBeforeDist,h=i.startValue;if(c){l&&(a+=l[0],d+=l[1]);var g=t.props,m=g.parentMoveable,f=n?0:g.throttleDrag||0,b=n?0:g.throttleDragRotate||0,v=!1,y=0;if(!n&&b>0&&(a||d)){var x=g.startDragRotate||0,w=Il(x+180*Rl([0,0],[a,d])/Math.PI,b)-x,S=d*Math.abs(Math.cos((w-90)/180*Math.PI)),_=xp([a*Math.abs(Math.cos(w/180*Math.PI)),S]);y=w*Math.PI/180,a=_*Math.cos(y),d=_*Math.sin(y)}if(!s&&!n&&!o&&(!b||a||d)){var C=fu(t,a,d,b,r||l,i),k=C[0],E=C[1],A=k.isSnap,L=k.isBound,q=k.offset,T=E.isSnap,M=E.isBound;v=A||T||L||M,a+=q,d+=E.offset}var O=Pa(Nu({datas:i,distX:a,distY:d}),h),R=Pa(function(t){var e=t.datas,i=t.distX,n=t.distY,o=Nu({datas:e,distX:i,distY:n}),s=o[0],r=o[1],l=Bu(e,function(t,e){for(var i=Ka(e),n=0;n<e-1;++n)i[e*(e-1)+n]=t[n]||0;return i}([s,r],4));return Fa(l,Na([0,0,0],4),4)}({datas:i,distX:a,distY:d}),h);b||v||($l(R,f),$l(O,f));var B=za(O,h),N=za(R,h),I=za(N,u),$=za(B,p);i.prevDist=N,i.prevBeforeDist=B,i.passDelta=I,i.passDist=N;var D=i.left+B[0],P=i.top+B[1],z=i.right-B[0],H=i.bottom-B[1],F=Ru(i,"translate(".concat(R[0],"px, ").concat(R[1],"px)"),"translate(".concat(N[0],"px, ").concat(N[1],"px)"));if(Wu(e,F),t.state.dragInfo.dist=n?[0,0]:N,n||m||!I.every((function(t){return!t}))||!$.some((function(t){return!t}))){var U=t.state,W=Op(t,e,{transform:F,dist:N,delta:I,translate:R,beforeDist:B,beforeDelta:$,beforeTranslate:O,left:D,top:P,right:z,bottom:H,width:U.width,height:U.height,isPinch:s});return!n&&Np(t,"onDrag",W),W}}}},dragAfter:function(t,e){var i=e.datas,n=i.deltaOffset;return!(!n[0]&&!n[1])&&(i.deltaOffset=[0,0],this.drag(t,Kd(Kd({},e),{deltaOffset:n})))},dragEnd:function(t,e){var i=e.parentEvent,n=e.datas;if(t.state.gesto=null,t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var o=Rp(t,e,{});return!i&&Np(t,"onDragEnd",o),o}},dragGroupStart:function(t,e){var i=e.datas,n=e.clientX,o=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var r=xc(t,this,"dragStart",[n||0,o||0],e,!1),l=Np(t,"onDragGroupStart",Kd(Kd({},s),{targets:t.props.targets,events:r}));return i.isDrag=!1!==l,!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var i=this.drag(t,e),n=xc(t,this,"drag",e.datas.passDelta,e,!1);if(i){var o=Kd({targets:t.props.targets,events:n},i);return Np(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var i=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var n=xc(t,this,"dragEnd",[0,0],e,!1);return Np(t,"onDragGroupEnd",Rp(t,e,{targets:t.props.targets,events:n})),i}},request:function(t){var e={},i=t.getRect(),n=0,o=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?n=t.x-i.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?o=t.y-i.top:"deltaY"in t&&(o+=t.deltaY),{datas:e,distX:n,distY:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Tu(t,e){var i=e.clientX,n=e.clientY,o=e.datas,s=t.state,r=s.moveableClientRect,l=s.rootMatrix,a=s.is3d,d=s.pos1,c=za(zp(l,[i-r.left,n-r.top],a?4:3),d),u=Iu({datas:o,distX:c[0],distY:c[1]});return[u[0],u[1]]}function Mu(t,e){var i=e.datas,n=t.state,o=n.allMatrix,s=n.beforeMatrix,r=n.is3d,l=n.left,a=n.top,d=n.origin,c=n.offsetMatrix,u=n.targetMatrix,p=n.transformOrigin,h=r?4:3;i.is3d=r,i.matrix=o,i.targetMatrix=u,i.beforeMatrix=s,i.offsetMatrix=c,i.transformOrigin=p,i.inverseMatrix=Ba(o,h),i.inverseBeforeMatrix=Ba(s,h),i.absoluteOrigin=Na(Pa([l,a],d),h),i.startDragBeforeDist=Fa(i.inverseBeforeMatrix,i.absoluteOrigin,h),i.startDragDist=Fa(i.inverseMatrix,i.absoluteOrigin,h)}function Ou(t,e){var i=t.datas,n=t.originalDatas.beforeRenderable,o=i.transformIndex,s=n.nextTransforms,r=n.nextTransformAppendedIndexes,l=0;-1===o?(l=s.length,i.transformIndex=l):l=o+r.filter((function(t){return t<o})).length;var a=function(t,e){var i=t.slice(0,e<0?void 0:e),n=t.slice(0,e<0?void 0:e+1),o=t[e]||"",s=e<0?[]:t.slice(e),r=e<0?[]:t.slice(e+1),l=nd(i),a=nd(n),d=nd([o]),c=nd(s),u=nd(r),p=id(l),h=id(a),g=id(c),m=id(u),f=Da(p,g,4);return{transforms:t,beforeFunctionMatrix:p,beforeFunctionMatrix2:h,targetFunctionMatrix:id(d),afterFunctionMatrix:g,afterFunctionMatrix2:m,allFunctionMatrix:f,beforeFunctions:l,beforeFunctions2:a,targetFunction:d[0],afterFunctions:c,afterFunctions2:u,beforeFunctionTexts:i,beforeFunctionTexts2:n,targetFunctionText:o,afterFunctionTexts:s,afterFunctionTexts2:r}}(s,l),d=a.targetFunction,c="rotate"===e?"rotateZ":e;i.beforeFunctionTexts=a.beforeFunctionTexts,i.afterFunctionTexts=a.afterFunctionTexts,i.beforeTransform=a.beforeFunctionMatrix,i.beforeTransform2=a.beforeFunctionMatrix2,i.targetTansform=a.targetFunctionMatrix,i.afterTransform=a.afterFunctionMatrix,i.afterTransform2=a.afterFunctionMatrix2,i.targetAllTransform=a.allFunctionMatrix,d.functionName===c?(i.afterFunctionTexts.splice(0,1),i.isAppendTransform=!1):(i.isAppendTransform=!0,n.nextTransformAppendedIndexes=Qd(Qd([],r,!0),[l],!1))}function Ru(t,e,i){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?i:e," ").concat(t.afterFunctionTexts.join(" "))}function Bu(t,e,i){var n=t.beforeTransform,o=t.afterTransform,s=t.beforeTransform2,r=t.afterTransform2,l=t.targetAllTransform,a=i?Da(l,e,4):Da(e,l,4),d=Da(Ba(i?s:n,4),a,4);return Da(d,Ba(i?r:o,4),4)}function Nu(t){var e=t.datas,i=t.distX,n=t.distY,o=e.inverseBeforeMatrix,s=e.is3d,r=e.startDragBeforeDist,l=s?4:3;return za(Fa(o,Pa(e.absoluteOrigin,[i,n]),l),r)}function Iu(t,e){var i=t.datas,n=t.distX,o=t.distY,s=i.inverseBeforeMatrix,r=i.inverseMatrix,l=i.is3d,a=i.startDragBeforeDist,d=i.startDragDist,c=l?4:3;return za(Fa(e?s:r,Pa(i.absoluteOrigin,[n,o]),c),e?a:d)}function $u(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Du(t,e){return $u(e).map((function(e){return t[e]}))}function Pu(t,e){var i=Du(t,e);return[Ol(i.map((function(t){return t[0]}))),Ol(i.map((function(t){return t[1]})))]}function zu(t,e,i,n){return Da(t,ep(e,n,i),n)}function Hu(t){var e=t.originalDatas.beforeRenderable;return{setTransform:function(i,n){void 0===n&&(n=-1),e.startTransforms=ul(i)?i:vl(i),Uu(t,n)},setTransformIndex:function(e){Uu(t,e)}}}function Fu(t,e){Uu(t,Cl(t.originalDatas.beforeRenderable.startTransforms,(function(t){return 0===t.indexOf("".concat(e,"("))})))}function Uu(t,e){var i=t.originalDatas.beforeRenderable,n=t.datas;if(n.transformIndex=e,-1!==e){var o=i.startTransforms[e];if(o){var s=nd([o]);n.startValue=s[0].functionValue}}}function Wu(t,e){t.originalDatas.beforeRenderable.nextTransforms=vl(e)}function ju(t){return t.originalDatas.beforeRenderable.nextTransforms.join(" ")}function Gu(t,e,i,n,o){return Wu(o,e),{transform:e,drag:qu.drag(t,bc(o,t.state,i,n,!1))}}function Vu(t,e,i,n,o){var s=t.state,r=s.left,l=s.top,a=t.props.groupable,d=function(t,e,i){var n=t.transformOrigin,o=t.offsetMatrix,s=t.is3d,r=e.beforeTransform,l=e.afterTransform,a=s?4:3;return zu(o,Ia(Da(Da(r,ed([i]),4),l,4),4,a),n,a)}(t.state,o,e),c=a?r:0,u=a?l:0,p=za(n,Xu(t,i,d));return za(p,[c,u])}function Yu(t){var e=t.state,i=e.width,n=e.height,o=e.transformOrigin;return[o[0]/(i/2)-1,o[1]/(n/2)-1]}function Xu(t,e,i){void 0===i&&(i=t.state.allMatrix);var n=t.state,o=n.width,s=n.height,r=n.is3d?4:3;return mp(i,[o/2*(1+e[0]),s/2*(1+e[1])],r)}function Zu(t,e,i,n,o,s){var r=t.props.groupable,l=t.state,a=l.transformOrigin,d=l.targetMatrix,c=l.offsetMatrix,u=l.is3d,p=l.width,h=l.height,g=l.left,m=l.top,f=u?4:3,b=function(t,e,i,n,o,s){return void 0===n&&(n=e),void 0===o&&(o=i),void 0===s&&(s=[0,0]),t?t.map((function(t,r){var l=wl(t),a=l.value,d=l.unit,c=r?o:n,u=r?i:e;return"%"===t||isNaN(a)?u*(c?s[r]/c:0):"%"!==d?a:u*a/100})):s}(s,e,i,p,h,a),v=r?g:0,y=r?m:0,x=function(t,e,i,n,o,s){var r=Pu(fp(e,i,n,o),s);return[t[0]-r[0],t[1]-r[1]]}(o,zu(c,d,b,f),e,i,f,n);return za(x,[v,y])}function Ku(t,e){return Pu(Tp(t.state),e)}function Qu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fr.apply(void 0,Qd([sc],t,!1))}function Ju(t){t()}function tp(t){return t&&"none"!==t?cl(t)?t:ed(t):[1,0,0,1,0,0]}function ep(t,e,i){return $a(e,Ja(i,e),t,Ja(i.map((function(t){return-t})),e))}function ip(t){return np(Ip(t,":before")).map((function(e,i){var n=wl(e),o=n.value,s=n.unit;return o*function(t,e,i){return"%"===e?hp(t.ownerSVGElement)[i?"width":"height"]/100:1}(t,s,0===i)}))}function np(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function op(t,e){void 0===e&&(e=Ip(t));var i=e.transform;if(i&&"none"!==i)return e.transform;if("transform"in t){var n=t.transform.baseVal;if(!n)return"";var o=n.length;if(!o)return"";for(var s=[],r=function(t){var e=n[t].matrix;s.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},l=0;l<o;++l)r(l);return s.join(" ")}return""}function sp(t,e,i){for(var n=document.body,o=!t||i?t:t.parentElement,s=t===e||o===e,r="relative";o&&o!==n;){e===o&&(s=!0);var l=Ip(o),a=o.tagName.toLowerCase(),d=op(o,l);if(r=l.position,"svg"===a||"static"!==r||d&&"none"!==d)break;o=o.parentElement,r="relative"}return{isStatic:"static"===r,isEnd:s||!o||o===n,offsetParent:o||n}}function rp(t,e){var i,n,o,s=t.tagName.toLowerCase(),r=t.offsetLeft,l=t.offsetTop,a=dl(r),d=!a;return d||"svg"===s?o=(n=np(e).map((function(t){return parseFloat(t)}))).slice():(o=(n=oc?ip(t):np(e).map((function(t){return parseFloat(t)}))).slice(),d=!0,i=function(t,e){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var i=t.getBBox(),n=hp(t.ownerSVGElement),o=i.x-n.x,s=i.y-n.y;return[o,s,e[0]-o,e[1]-s]}(t,n),r=i[0],l=i[1],n[0]=i[2],n[1]=i[3]),{tagName:s,isSVG:a,hasOffset:d,offset:[r||0,l||0],origin:n,targetOrigin:o}}function lp(t,e,i){void 0===i&&(i=Ip(t));var n=Ip(document.body),o=n.position;if(!(e||o&&"static"!==o))return[0,0];var s=parseInt(n.marginLeft,10),r=parseInt(n.marginTop,10);return"absolute"===i.position&&("auto"===i.top&&"auto"===i.bottom||(r=0),"auto"===i.left&&"auto"===i.right||(s=0)),[s,r]}function ap(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=Ia(e,3,4))}))}function dp(t){for(var e=t.parentElement,i=!1;e;){var n=Ip(e).transform;if(n&&"none"!==n){i=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:i}}function cp(t,e,i){for(var n,o,s,r,l,a=t,d=[],c=!i&&t===e||t===document.body,u=c,p=!1,h=3,g=!1,m=sp(e,e,!0).offsetParent;a&&!u;){u=c;var f=Ip(a),b=f.position,v=op(a,f),y=(r=tp(v),void 0===(l=void 0)&&(l=6===r.length),l?[r[0],r[1],0,r[2],r[3],0,r[4],r[5],1]:r),x="fixed"===b,w={hasTransform:!1,fixedContainer:null};x&&(g=!0,m=(w=dp(a)).fixedContainer);var S=y.length;p||16!==S||(p=!0,h=4,ap(d),s&&(s=Ia(s,3,4))),p&&9===S&&(y=Ia(y,3,4));var _=rp(a,f),C=_.tagName,k=_.hasOffset,E=_.isSVG,A=_.origin,L=_.targetOrigin,q=_.offset,T=q[0],M=q[1];"svg"===C&&s?(d.push({type:"target",target:a,matrix:gp(a,h)}),d.push({type:"offset",target:a,matrix:Ka(h)})):"g"===C&&t!==a&&(T=0,M=0);var O=void 0,R=!1,B=!1;if(x)O=w.fixedContainer,R=!0;else{var N=sp(a,e);O=N.offsetParent,R=N.isEnd,B=N.isStatic}nc&&k&&!E&&B&&("relative"===b||"static"===b)&&(T-=O.offsetLeft,M-=O.offsetTop,c=c||R);var I=0,$=0,D=0,P=0;if(x)k&&w.hasTransform&&(D=O.clientLeft,P=O.clientTop);else if(k&&m!==O&&(I=O.clientLeft,$=O.clientTop),k&&O===document.body){var z=lp(a,!1,f);T+=z[0],M+=z[1]}if(d.push({type:"target",target:a,matrix:ep(y,h,A)}),k?d.push({type:"offset",target:a,matrix:Ja([T-a.scrollLeft+I-D,M-a.scrollTop+$-P],h)}):d.push({type:"offset",target:a,origin:A}),s||(s=y),n||(n=A),o||(o=L),u||x)break;a=O,c=R,i&&a!==document.body||(u=c)}return s||(s=Ka(h)),n||(n=[0,0]),o||(o=[0,0]),{offsetContainer:m,matrixes:d,targetMatrix:s,transformOrigin:n,targetOrigin:o,is3d:p,hasFixed:g}}function up(t,e,i,n){void 0===i&&(i=e);var o=0,s=0,r=0,l={};if(t){var a=Cp(t);o=a.offsetWidth,s=a.offsetHeight}if(t){var d=function(t,e,i,n){var o;void 0===i&&(i=e);var s=cp(t,e),r=s.matrixes,l=s.is3d,a=s.targetMatrix,d=s.transformOrigin,c=s.targetOrigin,u=s.offsetContainer,p=s.hasFixed,h=cp(u,i,!0),g=h.matrixes,m=h.is3d,f=n||m||l,b=f?4:3,v="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,y=a,x=Ka(b),w=Ka(b),S=Ka(b),_=Ka(b),C=r.length;g.reverse(),r.reverse(),!l&&f&&(y=Ia(y,3,4),ap(r));!m&&f&&ap(g);g.forEach((function(t){w=Da(w,t.matrix,b)}));var k=i||document.body,E=(null===(o=g[0])||void 0===o?void 0:o.target)||sp(k,k,!0).offsetParent,A=g.slice(1).reduce((function(t,e){return Da(t,e.matrix,b)}),Ka(b));r.forEach((function(t,e){if(C-2===e&&(S=x.slice()),C-1===e&&(_=x.slice()),!t.matrix){var i=function(t,e,i,n,o){var s,r=t.target,l=t.origin,a=e.matrix,d=Cp(r),c=d.offsetWidth,u=d.offsetHeight,p=i.getBoundingClientRect(),h=[0,0];i===document.body&&(h=lp(r,!0));var g=r.getBoundingClientRect(),m=g.left-p.left+i.scrollLeft-(i.clientLeft||0)+h[0],f=g.top-p.top+i.scrollTop-(i.clientTop||0)+h[1],b=g.width,v=g.height,y=$a(n,o,a),x=vp(y,c,u,n),w=x.left,S=x.top,_=x.width,C=x.height,k=mp(y,l,n),E=za(k,[w,S]),A=[m+E[0]*b/_,f+E[1]*v/C],L=[0,0],q=0;for(;++q<10;){var T=Ba(o,n);s=za(mp(T,A,n),mp(T,k,n)),L[0]=s[0],L[1]=s[1];var M=vp($a(n,o,Ja(L,n),a),c,u,n),O=M.left-m,R=M.top-f;if(Math.abs(O)<2&&Math.abs(R)<2)break;A[0]-=O,A[1]-=R}return L.map((function(t){return Math.round(t)}))}(t,r[e+1],E,b,Da(A,x,b));t.matrix=Ja(i,b)}x=Da(x,t.matrix,b)}));var L=!v&&l;y||(y=Ka(L?4:3));var q=pp(v&&16===y.length?Ia(y,4,3):y,L);return w=Ra(w,b,b),{hasFixed:p,rootMatrix:w,beforeMatrix:S,offsetMatrix:_,allMatrix:x,targetMatrix:y,targetTransform:q,transformOrigin:d,targetOrigin:c,is3d:f}}(t,e,i,n),c=yp(d.allMatrix,d.transformOrigin,o,s);l=Kd(Kd({},d),c);var u=yp(d.allMatrix,[50,50],100,100);r=kp([u.pos1,u.pos2],u.direction)}var p=n?4:3;return Kd({width:o,height:s,rotation:r,rootMatrix:Ka(p),beforeMatrix:Ka(p),offsetMatrix:Ka(p),allMatrix:Ka(p),targetMatrix:Ka(p),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1},l)}function pp(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Ha(t,!e).join(","),")")}function hp(t){var e=t.clientWidth,i=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:i};var n=t.viewBox,o=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:o.x,y:o.y,width:o.width||e,height:o.height||i,clientWidth:e,clientHeight:i}}function gp(t,e){var i=hp(t),n=i.width,o=i.height,s=i.clientWidth,r=i.clientHeight,l=s/n,a=r/o,d=t.preserveAspectRatio.baseVal,c=d.align,u=d.meetOrSlice,p=[0,0],h=[l,a],g=[0,0];if(1!==c){var m=(c-2)%3,f=Math.floor((c-2)/3);p[0]=n*m/2,p[1]=o*f/2;var b=2===u?Math.max(a,l):Math.min(l,a);h[0]=b,h[1]=b,g[0]=(s-n)/2*m,g[1]=(r-o)/2*f}var v=Qa(h,e);return v[e*(e-1)]=g[0],v[e*(e-1)+1]=g[1],ep(v,e,p)}function mp(t,e,i){return Fa(t,Na(e,i),i)}function fp(t,e,i,n){return[[0,0],[e,0],[0,i],[e,i]].map((function(e){return mp(t,e,n)}))}function bp(t){var e=t.map((function(t){return t[0]})),i=t.map((function(t){return t[1]})),n=Math.min.apply(Math,e),o=Math.min.apply(Math,i),s=Math.max.apply(Math,e),r=Math.max.apply(Math,i);return{left:n,top:o,right:s,bottom:r,width:s-n,height:r-o}}function vp(t,e,i,n){return bp(fp(t,e,i,n))}function yp(t,e,i,n){var o=16===t.length?4:3,s=fp(t,i,n,o),r=s[0],l=r[0],a=r[1],d=s[1],c=d[0],u=d[1],p=s[2],h=p[0],g=p[1],m=s[3],f=m[0],b=m[1],v=mp(t,e,o),y=v[0],x=v[1],w=Math.min(l,c,h,f),S=Math.min(a,u,g,b),_=Math.max(l,c,h,f);return l=l-w||0,{left:w,top:S,right:_,bottom:Math.max(a,u,g,b),origin:[y=y-w||0,x=x-S||0],pos1:[l,a=a-S||0],pos2:[c=c-w||0,u=u-S||0],pos3:[h=h-w||0,g=g-S||0],pos4:[f=f-w||0,b=b-S||0],direction:Bl(s)}}function xp(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function wp(t,e){return xp([e[0]-t[0],e[1]-t[1]])}function Sp(t,e,i,n){void 0===i&&(i=1),void 0===n&&(n=Rl(t,e));var o=wp(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(i,")"),width:"".concat(o,"px")}}function _p(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=i.length,s=i.reduce((function(t,e){return t+e[0]}),0)/o,r=i.reduce((function(t,e){return t+e[1]}),0)/o;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(r,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Cp(t,e){if(void 0===e&&(e=Ip(t)),!dl(t.offsetWidth)||"svg"===t.tagName.toLowerCase()){var i="border-box"===e.boxSizing,n=parseFloat(e.borderLeftWidth)||0,o=parseFloat(e.borderRightWidth)||0,s=parseFloat(e.borderTopWidth)||0,r=parseFloat(e.borderBottomWidth)||0,l=parseFloat(e.paddingLeft)||0,a=parseFloat(e.paddingRight)||0,d=parseFloat(e.paddingTop)||0,c=parseFloat(e.paddingBottom)||0,u=parseFloat(e.width),p=parseFloat(e.height),h=(b=u,v=p,l+a),g=d+c,m=h+(n+o),f=g+(s+r);return i?(u=b-m,p=v-f):(b=u+m,v=p+f),{svg:!1,offsetWidth:b,offsetHeight:v,clientWidth:u+h,clientHeight:p+g,cssWidth:u,cssHeight:p}}var b,v,y=t.getBBox();return{svg:!0,offsetWidth:b=y.width,offsetHeight:v=y.height,clientWidth:b,clientHeight:v,cssWidth:b,cssHeight:v}}function kp(t,e){return Rl(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Ep(t,e,i,n,o){var s=1,r=[0,0],l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},a={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},d={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c=up(e,i,o,!1);if(e){var u=c.is3d?4:3,p=yp(c.offsetMatrix,Pa(c.transformOrigin,function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var i=[],n=t[e*e-1],o=0;o<e-1;++o)i[o]=t[e*(e-1)+o]/n;return i[e-1]=0,i}(c.targetMatrix,u)),c.width,c.height);s=p.direction,r=Pa(p.origin,[p.left-c.left,p.top-c.top]),l=Ap(e),a=Ap(sp(n,n,!0).offsetParent||document.body,!0),t&&(d=Ap(t))}return Kd({targetClientRect:l,containerClientRect:a,moveableClientRect:d,beforeDirection:s,beforeOrigin:r,originalBeforeOrigin:r,target:e},c)}function Ap(t,e){var i,n=0,o=0,s=0,r=0;if(t===document.body||t===document.documentElement){s=window.innerWidth,r=window.innerHeight;var l=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];n=(i=[-l[0],-l[1]])[0],o=i[1]}else{var a=t.getBoundingClientRect();n=a.left,o=a.top,s=a.width,r=a.height}var d={left:n,right:n+s,top:o,bottom:o+r,width:s,height:r};return e&&(d.clientLeft=t.clientLeft,d.clientTop=t.clientTop,d.clientWidth=t.clientWidth,d.clientHeight=t.clientHeight,d.scrollWidth=t.scrollWidth,d.scrollHeight=t.scrollHeight,d.overflow="visible"!==Ip(t).overflow),d}function Lp(t){if(t){var e=t.getAttribute("data-direction");if(e){var i=[0,0];return e.indexOf("w")>-1&&(i[0]=-1),e.indexOf("e")>-1&&(i[0]=1),e.indexOf("n")>-1&&(i[1]=-1),e.indexOf("s")>-1&&(i[1]=1),i}}}function qp(t,e){return[Pa(e,t[0]),Pa(e,t[1]),Pa(e,t[2]),Pa(e,t[3])]}function Tp(t){var e=t.left,i=t.top;return qp([t.pos1,t.pos2,t.pos3,t.pos4],[e,i])}function Mp(t,e){var i;null===(i=t[e])||void 0===i||i.unset(),t[e]=null}function Op(t,e,i,n){var o=e.datas;o.datas||(o.datas={});var s=Kd(Kd({},i),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:o.datas});return o.isStartEvent?n||(o.lastEvent=s):o.isStartEvent=!0,s}function Rp(t,e,i){var n=e.datas,o="isDrag"in i?i.isDrag:e.isDrag;return n.datas||(n.datas={}),Kd(Kd({isDrag:o},i),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas})}function Bp(t,e,i){t._emitter.on(e,i)}function Np(t,e,i,n){return t.triggerEvent(e,i,n)}function Ip(t,e){return window.getComputedStyle(t,e)}function $p(t,e,i){var n={},o={};return t.filter((function(t){var s=t.name;if(n[s]||!e.some((function(e){return t[e]})))return!1;if(!i&&t.ableGroup){if(o[t.ableGroup])return!1;o[t.ableGroup]=!0}return n[s]=!0,!0}))}function Dp(t,e){return t===e||null==t&&null==e}function Pp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function zp(t,e,i){return Fa(Ba(t,i),Na(e,i),i)}function Hp(t,e){var i,n=t.is3d?4:3;return i=zp(t.rootMatrix,[e.distX,e.distY],n),e.distX=i[0],e.distY=i[1],e}function Fp(t,e,i,n,o){return za(mp(t,Pa(i,e),o),n)}function Up(t,e,i){return i?"".concat(t/e*100,"%"):"".concat(t,"px")}function Wp(t){return Math.abs(t)<=dc?0:t}function jp(t,e){return e.isRequest?("resizable"===e.requestAble||"scalable"===e.requestAble)&&e.parentDirection:Dl(e.inputEvent.target,Qu("direction"))}function Gp(t){var e={};for(var i in t)e[t[i]]=i;return e}function Vp(t,e){return t?pl(t)?e?document.querySelector(t):t:gl(t)?t():"current"in t?t.current:t:null}function Yp(t,e){if(!t)return[];var i=function(t){return!(!t||!cl(t))&&!(t instanceof Element)&&(ul(t)||"length"in t)}(t)?[].slice.call(t):[t];return i.reduce((function(t,i){return pl(i)&&e?Qd(Qd([],t,!0),[].slice.call(document.querySelectorAll(i)),!0):(t.push(Vp(i,e)),t)}),[])}function Xp(t,e){var i=t.rootMatrix,n=t.is3d,o=Ba(i,n?4:3);return n||(o=Ia(o,3,4)),o[12]=0,o[13]=0,o[14]=0,function(t,e){var i=Fa(t,[e[0],e[1]||0,e[2]||0,1],4),n=i[3]||1;return[i[0]/n,i[1]/n,i[2]/n]}(o,e)}function Zp(t,e,i,n,o){var s=t[0],r=t[1],l=0,a=0;if(o&&s&&r){var d=Rl([0,0],e),c=Rl([0,0],n),u=xp(e),p=Math.cos(d-c)*u;if(n[0])if(n[1]){var h=2*n[0]*s,g=2*n[1]*r,m=xp([h+e[0],g+e[1]])-xp([h,g]),f=Rl([0,0],[i,1]);l=Math.cos(f)*m,a=Math.sin(f)*m}else a=(l=p)/i;else l=(a=p)*i}else l=n[0]*e[0],a=n[1]*e[1];return[l,a]}function Kp(t,e,i,n){var o,s=i.ratio,r=i.startOffsetWidth,l=i.startOffsetHeight,a=0,d=0,c=n.distX,u=n.distY,p=n.parentDistance,h=n.parentDist,g=n.parentScale,m=n.isPinch,f=i.fixedDirection;if(h)a=h[0],d=h[1],e&&(a?d||(d=a/s):a=d*s);else if(g)a=(g[0]-1)*r,d=(g[1]-1)*l;else if(m)p&&(a=p,d=p*l/r);else{var b=Iu({datas:i,distX:c,distY:u});b=[0,1].map((function(e){var i=Math.abs(t[e]-f[e]);return 0!==i&&(i=2/i),b[e]*i})),a=(o=Zp([r,l],b,s,t,e))[0],d=o[1]}return{distWidth:a,distHeight:d}}var Qp=Jd("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var i=e.datas,n=e.targets,o=e.angle,s=e.originalDatas,r=t.props,l=r.pinchable,a=r.ables;if(!l)return!1;var d="onPinch".concat(n?"Group":"","Start"),c="drag".concat(n?"Group":"","ControlStart"),u=(!0===l?t.controlAbles:a.filter((function(t){return l.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),p=Op(t,e,{});n&&(p.targets=n);var h=Np(t,d,p);i.isPinch=!1!==h,i.ables=u;var g=i.isPinch;return!!g&&(u.forEach((function(i){if(s[i.name]=s[i.name]||{},i[c]){var n=Kd(Kd({},e),{datas:s[i.name],parentRotate:o,isPinch:!0});i[c](t,n)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},g)},pinch:function(t,e){var i=e.datas,n=e.scale,o=e.distance,s=e.originalDatas,r=e.inputEvent,l=e.targets,a=e.angle;if(i.isPinch){var d=o*(1-1/n),c=Op(t,e,{});l&&(c.targets=l);var u="onPinch".concat(l?"Group":"");Np(t,u,c);var p=i.ables,h="drag".concat(l?"Group":"","Control");return p.forEach((function(i){i[h]&&i[h](t,Kd(Kd({},e),{datas:s[i.name],inputEvent:r,parentDistance:d,parentRotate:a,isPinch:!0}))})),c}},pinchEnd:function(t,e){var i=e.datas,n=e.isPinch,o=e.inputEvent,s=e.targets,r=e.originalDatas;if(i.isPinch){var l="onPinch".concat(s?"Group":"","End"),a=Rp(t,e,{isDrag:n});s&&(a.targets=s),Np(t,l,a);var d=i.ables,c="drag".concat(s?"Group":"","ControlEnd");return d.forEach((function(i){i[c]&&i[c](t,Kd(Kd({},e),{isDrag:n,datas:r[i.name],inputEvent:o,isPinch:!0}))})),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,Kd(Kd({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Kd(Kd({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Kd(Kd({},e),{targets:t.props.targets}))}}),Jp={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,e){var i=t.props,n=i.resizable,o=i.edge;if(n)return o?kc(t,e):Cc(t,e)},dragControlCondition:jp,dragControlStart:function(t,e){var i,n=e.inputEvent,o=e.isPinch,s=e.isGroup,r=e.parentDirection,l=e.datas,a=r||(o?[0,0]:Lp(n.target)),d=t.state,c=d.target,u=d.width,p=d.height;if(!a||!c)return!1;!o&&Mu(t,e),l.datas={},l.direction=a,l.startOffsetWidth=u,l.startOffsetHeight=p,l.prevWidth=0,l.prevHeight=0,i=function(t){var e=Ip(t);return[parseFloat(e.width),parseFloat(e.height)]}(c),l.startWidth=i[0],l.startHeight=i[1];var h=[Math.max(0,u-l.startWidth),Math.max(0,p-l.startHeight)];if(l.minSize=h,l.maxSize=[1/0,1/0],!s){var g=Ip(c),m=g.position,f=g.minWidth,b=g.minHeight,v=g.maxWidth,y=g.maxHeight,x="static"===m||"relative"===m,w=x?c.parentElement:c.offsetParent,S=u,_=p;if(w&&(S=w.clientWidth,_=w.clientHeight,x)){var C=Ip(w);S-=parseFloat(C.paddingLeft)||0,_-=parseFloat(C.paddingTop)||0}l.minSize=Pa([ql(f,S)||0,ql(b,_)||0],h),l.maxSize=Pa([ql(v,S)||1/0,ql(y,_)||1/0],h)}var k=t.props.transformOrigin||"% %";function E(t){l.ratio=t&&isFinite(t)?t:0}function A(t){l.fixedDirection=t,l.fixedPosition=Pu(l.startPositions,t)}function L(t){l.minSize=[ql("".concat(t[0]),0)||0,ql("".concat(t[1]),0)||0]}function q(t){var e=[t[0]||1/0,t[1]||1/0];hl(e[0])&&!isFinite(e[0])||(e[0]=ql("".concat(e[0]),0)||1/0),hl(e[1])&&!isFinite(e[1])||(e[1]=ql("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=k&&pl(k)?k.split(" "):k,l.isWidth=!a[0]&&!a[1]||a[0]||!a[1],l.startPositions=Tp(t.state),E(u/p),A([-a[0],-a[1]]),l.setFixedDirection=A,l.setMin=L,l.setMax=q;var T=Op(t,e,{direction:a,set:function(t){var e=t[0],i=t[1];l.startWidth=e,l.startHeight=i},setMin:L,setMax:q,setRatio:E,setFixedDirection:A,setOrigin:function(t){l.transformOrigin=t},dragStart:qu.dragStart(t,(new vc).dragStart([0,0],e))});return!1!==Np(t,"onResizeStart",T)&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:a}),!!l.isResize&&T},dragControl:function(t,e){var i,n=e.datas,o=e.parentFlag,s=e.isPinch,r=e.parentKeepRatio,l=e.dragClient,a=e.parentDist,d=e.isRequest,c=n.isResize,u=n.transformOrigin,p=n.startWidth,h=n.startHeight,g=n.prevWidth,m=n.prevHeight,f=n.minSize,b=n.maxSize,v=n.ratio,y=n.isWidth,x=n.startOffsetWidth,w=n.startOffsetHeight;if(c){var S=t.props,_=S.resizeFormat,C=S.throttleResize,k=void 0===C?1:C,E=S.parentMoveable,A=n.direction,L=A,q=0,T=0;A[0]||A[1]||(L=[1,1]);var M=v&&(null!=r?r:S.keepRatio)||!1,O=H(),R=O[0],B=O[1];n.setFixedDirection(n.fixedDirection),Np(t,"onBeforeResize",Op(t,e,{setFixedDirection:function(t){var e;return n.setFixedDirection(t),e=H(),R=e[0],B=e[1],[R,B]},boundingWidth:R,boundingHeight:B,setSize:function(t){R=t[0],B=t[1]}},!0));var N=l;l||(N=!o&&s?Ku(t,[0,0]):n.fixedPosition);var I=[0,0];if(s||(I=function(t,e,i,n,o,s,r){if(!Ic(t,"resizable"))return[0,0];var l=r.fixedDirection,a=t.state,d=a.allMatrix,c=a.is3d;return Cu(t,(function(t,n){return Su(d,e+t,i+n,l,o,c)}),e,i,n,o,s,r)}(t,R,B,A,N,d,n)),a&&(!a[0]&&(I[0]=0),!a[1]&&(I[1]=0)),M){L[0]&&L[1]&&I[0]&&I[1]&&(Math.abs(I[0])>Math.abs(I[1])?I[1]=0:I[0]=0);var $=!I[0]&&!I[1];$&&F(),L[0]&&!L[1]||I[0]&&!I[1]||$&&y?(R+=I[0],B=R/v):(!L[0]&&L[1]||!I[0]&&I[1]||$&&!y)&&(B+=I[1],R=B*v)}else R+=I[0],B+=I[1],R=Math.max(0,R),B=Math.max(0,B);i=Ml([R,B],f,b,!!M&&v),R=i[0],B=i[1],F();var D=[(q=R-x)-g,(T=B-w)-m];n.prevWidth=q,n.prevHeight=T;var P=Zu(t,R,B,n.fixedDirection,N,u);if(E||!D.every((function(t){return!t}))||!P.every((function(t){return!t}))){var z=Op(t,e,{width:p+q,height:h+T,offsetWidth:Math.round(R),offsetHeight:Math.round(B),boundingWidth:R,boundingHeight:B,direction:A,dist:[q,T],delta:D,isPinch:!!s,drag:qu.drag(t,bc(e,t.state,P,!!s,!1))});return Np(t,"onResize",z),z}}function H(){var t=Kp(L,M,n,e);q=t.distWidth,T=t.distHeight;var i=L[0]||M?Math.max(x+q,dc):x,o=L[1]||M?Math.max(w+T,dc):w;return M&&x&&w&&(y?o=i/v:i=o*v),[i,o]}function F(){var t;_&&(t=_([R,B]),R=t[0],B=t[1]),R=Il(R,k),B=Il(B,k)}},dragControlAfter:function(t,e){var i=e.datas,n=i.isResize,o=i.startOffsetWidth,s=i.startOffsetHeight,r=i.prevWidth,l=i.prevHeight;if(n){var a=t.state,d=a.width-(o+r),c=a.height-(s+l),u=Math.abs(d)>3,p=Math.abs(c)>3;return u&&(i.startWidth+=d,i.startOffsetWidth+=d,i.prevWidth+=d),p&&(i.startHeight+=c,i.startOffsetHeight+=c,i.prevHeight+=c),u||p?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var i=e.datas;if(i.isResize){i.isResize=!1;var n=Rp(t,e,{});return Np(t,"onResizeEnd",n),n}},dragGroupControlCondition:jp,dragGroupControlStart:function(t,e){var i=e.datas,n=this.dragControlStart(t,Kd(Kd({},e),{isGroup:!0}));if(!n)return!1;var o=yc(t,"resizable",e);function s(e,n){var o=i.fixedDirection,s=i.fixedPosition,r=Pu(n.datas.startPositions||Tp(e.state),o),l=Fa(Za(-t.rotation/180*Math.PI,3),[r[0]-s[0],r[1]-s[1],1],3),a=l[0],d=l[1];return n.datas.originalX=a,n.datas.originalY=d,n}var r=i.startOffsetWidth,l=i.startOffsetHeight;function a(){var t=i.minSize;o.forEach((function(e){var i=e.datas,n=i.minSize,o=i.startOffsetWidth,s=i.startOffsetHeight,a=r*(o?n[0]/o:0),d=l*(s?n[1]/s:0);t[0]=Math.max(t[0],a),t[1]=Math.max(t[1],d)}))}function d(){var t=i.maxSize;o.forEach((function(e){var i=e.datas,n=i.maxSize,o=i.startOffsetWidth,s=i.startOffsetHeight,a=r*(o?n[0]/o:0),d=l*(s?n[1]/s:0);t[0]=Math.min(t[0],a),t[1]=Math.min(t[1],d)}))}var c=wc(t,this,"dragControlStart",e,(function(t,e){return s(t,e)}));a(),d();var u=function(t){n.setFixedDirection(t),c.forEach((function(e,i){e.setFixedDirection(t),s(e.moveable,o[i])}))};i.setFixedDirection=u;var p=Kd(Kd({},n),{targets:t.props.targets,events:c.map((function(t){return Kd(Kd({},t),{setMin:function(e){t.setMin(e),a()},setMax:function(e){t.setMax(e),d()}})})),setFixedDirection:u,setMin:function(t){n.setMin(t),a()},setMax:function(t){n.setMax(t),d()}}),h=Np(t,"onResizeGroupStart",p);return i.isResize=!1!==h,!!i.isResize&&n},dragGroupControl:function(t,e){var i=e.datas;if(i.isResize){Bp(t,"onBeforeResize",(function(i){Np(t,"onBeforeResizeGroup",Op(t,e,Kd(Kd({},i),{targets:t.props.targets}),!0))}));var n=this.dragControl(t,e);if(n){var o=n.boundingWidth,s=n.boundingHeight,r=n.dist,l=t.props.keepRatio,a=[o/(o-r[0]),s/(s-r[1])],d=i.fixedPosition,c=wc(t,this,"dragControl",e,(function(e,i){var n=Fa(Za(t.rotation/180*Math.PI,3),[i.datas.originalX*a[0],i.datas.originalY*a[1],1],3),o=n[0],s=n[1];return Kd(Kd({},i),{parentDist:null,parentScale:a,dragClient:Pa(d,[o,s]),parentKeepRatio:l})})),u=Kd({targets:t.props.targets,events:c},n);return Np(t,"onResizeGroup",u),u}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var n=wc(t,this,"dragControlEnd",e);return Np(t,"onResizeGroupEnd",Rp(t,e,{targets:t.props.targets,events:n})),i}},request:function(t){var e={},i=0,n=0,o=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?i=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(i+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[i,n],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},th={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,e){var i=t.props,n=i.resizable,o=i.scalable,s=i.edge;if(!n&&o)return s?kc(t,e):Cc(t,e)},dragControlCondition:jp,dragControlStart:function(t,e){var i=e.datas,n=e.isPinch,o=e.inputEvent,s=e.parentDirection||(n?[0,0]:Lp(o.target)),r=t.state,l=r.width,a=r.height,d=r.targetTransform,c=r.target,u=r.pos1,p=r.pos2,h=r.pos4;if(!s||!c)return!1;n||Mu(t,e),i.datas={},i.transform=d,i.prevDist=[1,1],i.direction=s,i.startOffsetWidth=l,i.startOffsetHeight=a,i.startValue=[1,1];var g=Nl(u,p),m=Nl(p,h),f=!s[0]&&!s[1]||s[0]||!s[1];function b(t){i.ratio=t&&isFinite(t)?t:0}function v(t){i.fixedDirection=t,i.fixedPosition=Pu(i.startPositions,t)}i.scaleWidth=g,i.scaleHeight=m,i.scaleXRatio=g/l,i.scaleYRatio=m/a,Fu(e,"scale"),i.isWidth=f,i.startPositions=Tp(t.state),i.setFixedDirection=v,b(Nl(u,p)/Nl(p,h)),v([-s[0],-s[1]]);var y=Op(t,e,Kd(Kd({direction:s,set:function(t){i.startValue=t},setRatio:b,setFixedDirection:v},Hu(e)),{dragStart:qu.dragStart(t,(new vc).dragStart([0,0],e))}));return!1!==Np(t,"onScaleStart",y)&&(i.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:s}),!!i.isScale&&y},dragControl:function(t,e){Ou(e,"scale");var i=e.datas,n=e.parentKeepRatio,o=e.parentFlag,s=e.isPinch,r=e.dragClient,l=e.isRequest,a=i.prevDist,d=i.direction,c=i.startOffsetWidth,u=i.startOffsetHeight,p=i.isScale,h=i.startValue,g=i.isWidth,m=i.ratio;if(!p)return!1;var f=t.props,b=f.throttleScale,v=f.parentMoveable,y=d;d[0]||d[1]||(y=[1,1]);var x=m&&(null!=n?n:f.keepRatio)||!1,w=t.state;function S(){var t=Kp(y,x,i,e),n=t.distWidth,o=t.distHeight,s=(c+n)/c,r=(u+o)/u;return s=y[0]||x?s*h[0]:h[0],r=y[1]||x?r*h[1]:h[1],0===s&&(s=(a[0]>0?1:-1)*cc),0===r&&(r=(a[1]>0?1:-1)*cc),[s,r]}var _=S();if(!s&&t.props.groupable){var C=(w.snapRenderInfo||{}).direction;ul(C)&&(C[0]||C[1])&&(w.snapRenderInfo={direction:d,request:e.isRequest})}Np(t,"onBeforeScale",Op(t,e,{scale:_,setFixedDirection:function(t){return i.setFixedDirection(t),_=S()},setScale:function(t){_=t}},!0));var k=[_[0]/h[0],_[1]/h[1]],E=r,A=[0,0];if(r||(E=!o&&s?Ku(t,[0,0]):i.fixedPosition),s||(A=ku(t,k,d,l,i)),x){y[0]&&y[1]&&A[0]&&A[1]&&(Math.abs(A[0]*c)>Math.abs(A[1]*u)?A[1]=0:A[0]=0);var L=!A[0]&&!A[1];if(L&&(g?k[0]=Il(k[0]*h[0],b)/h[0]:k[1]=Il(k[1]*h[1],b)/h[1]),y[0]&&!y[1]||A[0]&&!A[1]||L&&g){k[0]+=A[0];var q=c*k[0]*h[0]/m;k[1]=q/u/h[1]}else if(!y[0]&&y[1]||!A[0]&&A[1]||L&&!g){k[1]+=A[1];var T=u*k[1]*h[1]*m;k[0]=T/c/h[0]}}else k[0]+=A[0],k[1]+=A[1],A[0]||(k[0]=Il(k[0]*h[0],b)/h[0]),A[1]||(k[1]=Il(k[1]*h[1],b)/h[1]);0===k[0]&&(k[0]=(a[0]>0?1:-1)*cc),0===k[1]&&(k[1]=(a[1]>0?1:-1)*cc);var M,O,R=[k[0]/a[0],k[1]/a[1]];O=h,_=[(M=k)[0]*O[0],M[1]*O[1]];var B=function(t,e,i,n,o){return Vu(t,"scale(".concat(e.join(", "),")"),i,n,o)}(t,k,i.fixedDirection,E,i),N=za(B,i.prevInverseDist||[0,0]);if(i.prevDist=k,i.prevInverseDist=B,_[0]===a[0]&&_[1]===a[1]&&N.every((function(t){return!t}))&&!v)return!1;var I=Ru(i,"scale(".concat(_.join(", "),")"),"scale(".concat(k.join(", "),")")),$=Op(t,e,Kd({offsetWidth:c,offsetHeight:u,direction:d,scale:_,dist:k,delta:R,isPinch:!!s},Gu(t,I,N,s,e)));return Np(t,"onScale",$),$},dragControlEnd:function(t,e){var i=e.datas,n=e.isDrag;return!!i.isScale&&(i.isScale=!1,Np(t,"onScaleEnd",Rp(t,e,{})),n)},dragGroupControlCondition:jp,dragGroupControlStart:function(t,e){var i=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var o=yc(t,"resizable",e);function s(e,n){var o=i.fixedDirection,s=i.fixedPosition,r=Pu(n.datas.startPositions||Tp(e.state),o),l=Fa(Za(-t.rotation/180*Math.PI,3),[r[0]-s[0],r[1]-s[1],1],3),a=l[0],d=l[1];return n.datas.originalX=a,n.datas.originalY=d,n}i.moveableScale=t.scale;var r=wc(t,this,"dragControlStart",e,(function(t,e){return s(t,e)})),l=function(t){n.setFixedDirection(t),r.forEach((function(e,i){e.setFixedDirection(t),s(e.moveable,o[i])}))};i.setFixedDirection=l;var a=Kd(Kd({},n),{targets:t.props.targets,events:r,setFixedDirection:l}),d=Np(t,"onScaleGroupStart",a);return i.isScale=!1!==d,!!i.isScale&&a},dragGroupControl:function(t,e){var i=e.datas;if(i.isScale){Bp(t,"onBeforeScale",(function(i){Np(t,"onBeforeScaleGroup",Op(t,e,Kd(Kd({},i),{targets:t.props.targets}),!0))}));var n=this.dragControl(t,e);if(n){var o=i.moveableScale;t.scale=[n.scale[0]*o[0],n.scale[1]*o[1]];var s=t.props.keepRatio,r=n.dist,l=n.scale,a=i.fixedPosition,d=wc(t,this,"dragControl",e,(function(e,i){var n=Fa(Za(t.rotation/180*Math.PI,3),[i.datas.originalX*r[0],i.datas.originalY*r[1],1],3),o=n[0],d=n[1];return Kd(Kd({},i),{parentDist:null,parentScale:l,parentKeepRatio:s,dragClient:Pa(a,[o,d])})})),c=Kd({targets:t.props.targets,events:d},n);return Np(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var i=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var n=wc(t,this,"dragControlEnd",e);return Np(t,"onScaleGroupEnd",Rp(t,e,{targets:t.props.targets,events:n})),i}},request:function(){var t={},e=0,i=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(n){return e+=n.deltaWidth,i+=n.deltaHeight,{datas:t,parentDist:[e,i],parentKeepRatio:n.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function eh(t,e){return t.map((function(t,i){return n=t,o=e[i],(n*(r=2)+o*(s=1))/(s+r);var n,o,s,r}))}function ih(t,e,i){var n=Rl(t,e),o=Rl(t,i)-n;return o>=0?o:o+2*Math.PI}var nh={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var i=t.props,n=i.resizable,o=i.scalable,s=i.warpable,r=i.zoom;if(n||o||!s)return[];var l=t.state,a=l.pos1,d=l.pos2,c=l.pos3,u=l.pos4,p=eh(a,d),h=eh(d,a),g=eh(a,c),m=eh(c,a),f=eh(c,u),b=eh(u,c),v=eh(d,u),y=eh(u,d);return Qd([e.createElement("div",{className:Qu("line"),key:"middeLine1",style:Sp(p,f,r)}),e.createElement("div",{className:Qu("line"),key:"middeLine2",style:Sp(h,b,r)}),e.createElement("div",{className:Qu("line"),key:"middeLine3",style:Sp(g,v,r)}),e.createElement("div",{className:Qu("line"),key:"middeLine4",style:Sp(m,y,r)})],Cc(t,e),!0)},dragControlCondition:function(t,e){return!e.isRequest&&Dl(e.inputEvent.target,Qu("direction"))},dragControlStart:function(t,e){var i=e.datas,n=e.inputEvent,o=t.props.target,s=Lp(n.target);if(!s||!o)return!1;var r=t.state,l=r.transformOrigin,a=r.is3d,d=r.targetTransform,c=r.targetMatrix,u=r.width,p=r.height,h=r.left,g=r.top;i.datas={},i.targetTransform=d,i.warpTargetMatrix=a?c:Ia(c,3,4),i.targetInverseMatrix=Ra(Ba(i.warpTargetMatrix,4),3,4),i.direction=s,i.left=h,i.top=g,i.poses=[[0,0],[u,0],[0,p],[u,p]].map((function(t){return za(t,l)})),i.nextPoses=i.poses.map((function(t){var e=t[0],n=t[1];return Fa(i.warpTargetMatrix,[e,n,0,1],4)})),i.startValue=Ka(4),i.prevMatrix=Ka(4),i.absolutePoses=Tp(r),i.posIndexes=$u(s),Mu(t,e),Fu(e,"matrix3d"),r.snapRenderInfo={request:e.isRequest,direction:s};var m=Op(t,e,Kd({set:function(t){i.startValue=t}},Hu(e)));return!1!==Np(t,"onWarpStart",m)&&(i.isWarp=!0),i.isWarp},dragControl:function(t,e){var i=e.datas,n=e.isRequest,o=e.distX,s=e.distY,r=i.targetInverseMatrix,l=i.prevMatrix,a=i.isWarp,d=i.startValue,c=i.poses,u=i.posIndexes,p=i.absolutePoses;if(!a)return!1;if(Ou(e,"matrix3d"),Ic(t,"warpable")){var h=u.map((function(t){return p[t]}));h.length>1&&h.push([(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);var g=bu(t,n,{horizontal:h.map((function(t){return t[1]+s})),vertical:h.map((function(t){return t[0]+o}))}),m=g.horizontal,f=g.vertical;s-=m.offset,o-=f.offset}var b=Iu({datas:i,distX:o,distY:s},!0),v=i.nextPoses.slice();if(u.forEach((function(t){v[t]=Pa(v[t],b)})),!lc.every((function(t){return e=t.map((function(t){return c[t]})),i=t.map((function(t){return v[t]})),n=ih(e[0],e[1],e[2]),o=ih(i[0],i[1],i[2]),s=Math.PI,!(n>=s&&o<=s||n<=s&&o>=s);var e,i,n,o,s})))return!1;var y=td(c[0],c[2],c[1],c[3],v[0],v[2],v[1],v[3]);if(!y.length)return!1;var x=Bu(i,Da(r,y,4),!0),w=Da(Ba(l,4),x,4);i.prevMatrix=x;var S=Da(d,x,4),_=Ru(i,"matrix3d(".concat(S.join(", "),")"),"matrix3d(".concat(x.join(", "),")"));return Wu(e,_),Np(t,"onWarp",Op(t,e,{delta:w,matrix:S,dist:x,multiply:Da,transform:_})),!0},dragControlEnd:function(t,e){var i=e.datas,n=e.isDrag;return!!i.isWarp&&(i.isWarp=!1,Np(t,"onWarpEnd",Rp(t,e,{})),n)}},oh=Qu("area-pieces"),sh=Qu("area-piece"),rh=Qu("avoid");function lh(t){var e=t.areaElement;if(e){var i=t.state,n=i.width,o=i.height;!function(t,e){if(t.classList)t.classList.remove(e);else{var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}(e,rh),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(o,"px")}}function ah(t){return t.createElement("div",{key:"area_pieces",className:oh},t.createElement("div",{className:sh}),t.createElement("div",{className:sh}),t.createElement("div",{className:sh}),t.createElement("div",{className:sh}))}var dh={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var i=t.props,n=i.target,o=i.dragArea,s=i.groupable,r=i.passDragArea,l=t.state,a=l.width,d=l.height,c=l.renderPoses,u=r?Qu("area","pass"):Qu("area");if(s)return[e.createElement("div",{key:"area",ref:Ur(t,"areaElement"),className:u}),ah(e)];if(!n||!o)return[];var p=td([0,0],[a,0],[0,d],[a,d],c[0],c[1],c[2],c[3]),h=p.length?pp(p,!0):"none";return[e.createElement("div",{key:"area",ref:Ur(t,"areaElement"),className:u,style:{top:"0px",left:"0px",width:"".concat(a,"px"),height:"".concat(d,"px"),transformOrigin:"0 0",transform:h}}),ah(e)]},dragStart:function(t,e){var i=e.datas,n=e.clientX,o=e.clientY;if(!e.inputEvent)return!1;i.isDragArea=!1;var s,r,l=t.areaElement,a=t.state,d=a.moveableClientRect,c=a.renderPoses,u=a.rootMatrix,p=a.is3d,h=d.left,g=d.top,m=bp(c),f=m.left,b=m.top,v=m.width,y=m.height,x=zp(u,[n-h,o-g],p?4:3),w=x[0],S=x[1],_=[{left:f,top:b,width:v,height:(S-=b)-10},{left:f,top:b,width:(w-=f)-10,height:y},{left:f,top:b+S+10,width:v,height:y-S-10},{left:f+w+10,top:b,width:v-w-10,height:y}],C=[].slice.call(l.nextElementSibling.children);_.forEach((function(t,e){C[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),r=rh,(s=l).classList?s.classList.add(r):s.className+=" "+r,a.disableNativeEvent=!0},drag:function(t,e){var i=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;i.isDragArea||(i.isDragArea=!0,lh(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var i=e.inputEvent,n=e.datas;if(!i)return!1;n.isDragArea||lh(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){lh(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&El((function(){e.disableNativeEvent=!1}))}},ch=Jd("origin",{render:function(t,e){var i=t.props.zoom,n=t.state,o=n.beforeOrigin,s=n.rotation;return[e.createElement("div",{className:Qu("control","origin"),style:_p(s,i,o),key:"beforeOrigin"})]}});function uh(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ph={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var i=t.props.scrollContainer,n=void 0===i?t.getContainer():i,o=new kd,s=Vp(n,!0);e.datas.dragScroll=o;var r=e.isControl?"controlGesto":"targetGesto",l=e.targets;o.on("scroll",(function(i){var n=i.container,o=i.direction,s=Op(t,e,{scrollContainer:n,direction:o}),r=l?"onScrollGroup":"onScroll";l&&(s.targets=l),Np(t,r,s)})).on("move",(function(i){var n=i.offsetX,o=i.offsetY;t[r].scrollBy(n,o,e.inputEvent,!1)})),o.dragStart(e,{container:s})},checkScroll:function(t,e){var i=e.datas.dragScroll;if(i){var n=t.props,o=n.scrollContainer,s=void 0===o?t.getContainer():o,r=n.scrollThreshold,l=void 0===r?0:r,a=n.getScrollPosition,d=void 0===a?uh:a;return i.drag(e,{container:s,threshold:l,getScrollPosition:function(t){return d({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Kd(Kd({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Kd(Kd({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Kd(Kd({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Kd(Kd({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Kd(Kd({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Kd(Kd({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Kd(Kd({},e),{targets:t.props.targets}))}},hh={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function},events:{}},gh=Jd("padding",{render:function(t,e){var i=t.props;if(i.dragArea)return[];var n=i.padding||{},o=n.left,s=void 0===o?0:o,r=n.top,l=void 0===r?0:r,a=n.right,d=void 0===a?0:a,c=n.bottom,u=void 0===c?0:c,p=t.state,h=p.renderPoses,g=[p.pos1,p.pos2,p.pos3,p.pos4],m=[];return s>0&&m.push([0,2]),l>0&&m.push([0,1]),d>0&&m.push([1,3]),u>0&&m.push([2,3]),m.map((function(t,i){var n=t[0],o=t[1],s=td([0,0],[100,0],[0,100],[100,100],g[n],g[o],h[n],h[o]);if(s.length)return e.createElement("div",{key:"padding".concat(i),className:Qu("padding"),style:{transform:pp(s,!0)}})}))}}),mh=["nw","ne","se","sw"];function fh(t,e){var i=t[0]+t[1],n=i>e?e/i:1;return t[0]*=n,t[1]=e-t[1]*n,t}var bh=[1,2,5,6],vh=[0,3,4,7],yh=[1,-1,-1,1],xh=[1,1,-1,-1];function wh(t,e,i,n,o,s,r,l,a){void 0===s&&(s=0),void 0===r&&(r=0),void 0===l&&(l=n),void 0===a&&(a=o);var d=[],c=!1,u=t.map((function(t,u){var p=e[u],h=p.horizontal,g=p.vertical;if(g&&!c&&(c=!0,d.push("/")),c){var m=Math.max(0,1===g?t[1]-r:a-t[1]);return d.push(Up(m,o,i)),m}m=Math.max(0,1===h?t[0]-s:l-t[0]);return d.push(Up(m,n,i)),m}));return{styles:d,raws:u}}function Sh(t){for(var e=[0,0],i=[0,0],n=t.length,o=0;o<n;++o){var s=t[o];s.sub&&(s.horizontal&&(0===e[1]&&(e[0]=o),e[1]=o-e[0]+1,i[0]=o+1),s.vertical&&(0===i[1]&&(i[0]=o),i[1]=o-i[0]+1))}return{horizontalRange:e,verticalRange:i}}function _h(t,e,i,n,o,s){var r,l,a,d;void 0===s&&(s=[0,0]);var c=t.indexOf("/"),u=(c>-1?t.slice(0,c):t).length,p=t.slice(0,u),h=t.slice(u+1),g=p[0],m=void 0===g?"0px":g,f=p[1],b=void 0===f?m:f,v=p[2],y=void 0===v?m:v,x=p[3],w=void 0===x?b:x,S=h[0],_=void 0===S?m:S,C=h[1],k=void 0===C?_:C,E=h[2],A=void 0===E?_:E,L=h[3],q=void 0===L?k:L,T=[m,b,y,w].map((function(t){return ql(t,e)})),M=[_,k,A,q].map((function(t){return ql(t,i)})),O=T.slice(),R=M.slice();r=fh([O[0],O[1]],e),O[0]=r[0],O[1]=r[1],l=fh([O[3],O[2]],e),O[3]=l[0],O[2]=l[1],a=fh([R[0],R[3]],i),R[0]=a[0],R[3]=a[1],d=fh([R[1],R[2]],i),R[1]=d[0],R[2]=d[1];var B=O.slice(0,Math.max(s[0],p.length)),N=R.slice(0,Math.max(s[1],h.length));return Qd(Qd([],B.map((function(t,e){var s=mh[e];return{horizontal:yh[e],vertical:0,pos:[n+t,o+(-1===xh[e]?i:0)],sub:!0,raw:T[e],direction:s}})),!0),N.map((function(t,i){var s=mh[i];return{horizontal:0,vertical:xh[i],pos:[n+(-1===yh[i]?e:0),o+t],sub:!0,raw:M[i],direction:s}})),!0)}function Ch(t,e,i,n,o){void 0===o&&(o=e.length);var s=Sh(t.slice(n)),r=s.horizontalRange,l=s.verticalRange,a=i-n,d=0;if(0===a)d=o;else if(a>0&&a<r[1])d=r[1]-a;else{if(!(a>=l[0]))return;d=l[0]+l[1]-a}t.splice(i,d),e.splice(i,d)}function kh(t,e,i,n,o,s,r,l,a,d,c){void 0===d&&(d=0),void 0===c&&(c=0);var u=Sh(t.slice(i)),p=u.horizontalRange,h=u.verticalRange;if(n>-1)for(var g=1===yh[n]?s-d:l-s,m=p[1];m<=n;++m){var f=1===xh[m]?c:a,b=0;if(n===m?b=s:0===m?b=d+g:-1===yh[m]&&(b=l-(e[i][0]-d)),t.splice(i+m,0,{horizontal:yh[m],vertical:0,pos:[b,f]}),e.splice(i+m,0,[b,f]),0===m)break}else if(o>-1){var v=1===xh[o]?r-c:a-r;if(0===p[1]&&0===h[1]){var y=[d+v,c];t.push({horizontal:yh[0],vertical:0,pos:y}),e.push(y)}var x=h[0];for(m=h[1];m<=o;++m){b=1===yh[m]?d:l,f=0;if(o===m?f=r:0===m?f=c+v:1===xh[m]?f=e[i+x][1]:-1===xh[m]&&(f=a-(e[i+x][1]-c)),t.push({horizontal:0,vertical:xh[m],pos:[b,f]}),e.push([b,f]),0===m)break}}}function Eh(t,e){void 0===e&&(e=t.map((function(t){return t.raw})));var i=t.map((function(t,i){return t.horizontal?e[i]:null})).filter((function(t){return null!=t})),n=t.map((function(t,i){return t.vertical?e[i]:null})).filter((function(t){return null!=t}));return{horizontals:i,verticals:n}}var Ah=[[0,-1,"n"],[1,0,"e"]],Lh=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function qh(t,e,i){var n=t.props.clipRelative,o=t.state,s=o.width,r=o.height,l=e,a=l.type,d=l.poses,c="rect"===a,u="circle"===a;if("polygon"===a)return i.map((function(t){return"".concat(Up(t[0],s,n)," ").concat(Up(t[1],r,n))}));if(c||"inset"===a){var p=i[1][1],h=i[3][0],g=i[7][0],m=i[5][1];if(c)return[p,h,m,g].map((function(t){return"".concat(t,"px")}));var f=[p,s-h,r-m,g].map((function(t,e){return Up(t,e%2?s:r,n)}));if(i.length>8){var b=za(i[4],i[0]),v=b[0],y=b[1];f.push.apply(f,Qd(["round"],wh(i.slice(8),d.slice(8),n,v,y,g,p,h,m).styles,!1))}return f}if(u||"ellipse"===a){var x=i[0],w=Up(Math.abs(i[1][1]-x[1]),u?Math.sqrt((s*s+r*r)/2):r,n);return(f=u?[w]:[Up(Math.abs(i[2][0]-x[0]),s,n),w]).push("at",Up(x[0],s,n),Up(x[1],r,n)),f}}function Th(t,e,i,n){var o=[n,(n+e)/2,e],s=[t,(t+i)/2,i];return Lh.map((function(t){var e=t[0],i=t[1],n=t[2],r=o[e+1],l=s[i+1];return{vertical:Math.abs(i),horizontal:Math.abs(e),direction:n,pos:[r,l]}}))}function Mh(t){var e=[1/0,-1/0],i=[1/0,-1/0];return t.forEach((function(t){var n=t.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),i[0]=Math.min(i[0],n[1]),i[1]=Math.max(i[1],n[1])})),[Math.abs(e[1]-e[0]),Math.abs(i[1]-i[0])]}function Oh(t,e,i,n,o){var s,r,l,a,d,c,u,p=o;if(!p){var h=Ip(t),g=h.clipPath;p="none"!==g?g:h.clip}if(p&&"none"!==p&&"auto"!==p||(p=n)){var m=xl(p),f=m.prefix,b=void 0===f?p:f,v=m.value,y=void 0===v?"":v,x="circle"===b,w=" ";if("polygon"===b){w=",";var S=(A=yl(y||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var n=t.split(" "),o=n[0],s=n[1];return{vertical:1,horizontal:1,pos:[ql(o,e),ql(s,i)]}}));return{type:b,clipText:p,poses:S,splitter:w}}if(x||"ellipse"===b){var _="",C="",k=0,E=0,A=vl(y);if(x){var L;L=void 0===(s=A[0])?"50%":s,_=void 0===(r=A[2])?"50%":r,C=void 0===(l=A[3])?"50%":l,k=ql(L,Math.sqrt((e*e+i*i)/2)),E=k}else{var q,T;q=void 0===(a=A[0])?"50%":a,T=void 0===(d=A[1])?"50%":d,_=void 0===(c=A[3])?"50%":c,C=void 0===(u=A[4])?"50%":u,k=ql(q,e),E=ql(T,i)}var M=[ql(_,e),ql(C,i)];S=Qd([{vertical:1,horizontal:1,pos:M,direction:"nesw"}],Ah.slice(0,x?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[M[0]+t[0]*k,M[1]+t[1]*E]}})),!0);return{type:b,clipText:p,radiusX:k,radiusY:E,left:M[0]-k,top:M[1]-E,poses:S,splitter:w}}if("inset"===b){var O=(A=vl(y||"0 0 0 0")).indexOf("round"),R=(O>-1?A.slice(0,O):A).length,B=A.slice(R+1),N=A.slice(0,R),I=N[0],$=N[1],D=void 0===$?I:$,P=N[2],z=void 0===P?I:P,H=N[3],F=void 0===H?D:H,U=[I,z].map((function(t){return ql(t,i)})),W=U[0],j=U[1],G=[F,D].map((function(t){return ql(t,e)})),V=G[0],Y=G[1],X=e-Y,Z=i-j,K=_h(B,X-V,Z-W,V,W);return{type:"inset",clipText:p,poses:S=Qd(Qd([],Th(W,X,Z,V),!0),K,!0),top:W,left:V,right:X,bottom:Z,radius:B,splitter:w}}if("rect"===b){w=",";var Q=(A=yl(y||"0px, ".concat(e,"px, ").concat(i,"px, 0px"))).map((function(t){return wl(t).value}));return{type:"rect",clipText:p,poses:S=Th(W=Q[0],Y=Q[1],j=Q[2],V=Q[3]),top:W,right:Y,bottom:j,left:V,values:A,splitter:w}}}}var Rh={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var i=t.props,n=i.customClipPath,o=i.defaultClipPath,s=i.clipArea,r=i.zoom,l=t.state,a=l.target,d=l.width,c=l.height,u=l.allMatrix,p=l.is3d,h=l.left,g=l.top,m=l.pos1,f=l.pos2,b=l.pos3,v=l.pos4,y=l.clipPathState,x=l.snapBoundInfos,w=l.rotation;if(!a)return[];var S=Oh(a,d,c,o||"inset",y||n);if(!S)return[];var _=p?4:3,C=S.type,k=S.poses.map((function(t){var e=mp(u,t.pos,_);return[e[0]-h,e[1]-g]})),E=[],A=[],L="rect"===C,q="inset"===C,T="polygon"===C;if(L||q||T){var M=q?k.slice(0,8):k;A=M.map((function(t,i){var n=0===i?M[M.length-1]:M[i-1],o=Rl(n,t),s=wp(n,t);return e.createElement("div",{key:"clipLine".concat(i),className:Qu("line","clip-line","snap-control"),"data-clip-index":i,style:{width:"".concat(s,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(o,"rad) scaleY(").concat(r,")")}})}))}if(E=k.map((function(t,i){return e.createElement("div",{key:"clipControl".concat(i),className:Qu("control","clip-control","snap-control"),"data-clip-index":i,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(r,")")}})})),q&&E.push.apply(E,k.slice(8).map((function(t,i){return e.createElement("div",{key:"clipRadiusControl".concat(i),className:Qu("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+i,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(r,")")}})}))),"circle"===C||"ellipse"===C){var O=S.left,R=S.top,B=S.radiusX,N=S.radiusY,I=za(mp(u,[O,R],_),mp(u,[0,0],_)),$=I[0],D=I[1],P="none";if(!s){for(var z=Math.max(10,B/5,N/5),H=[],F=0;F<=z;++F){var U=2*Math.PI/z*F;H.push([B+(B-r)*Math.cos(U),N+(N-r)*Math.sin(U)])}H.push([B,-2]),H.push([-2,-2]),H.push([-2,2*N+2]),H.push([2*B+2,2*N+2]),H.push([2*B+2,-2]),H.push([B,-2]),P="polygon(".concat(H.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}E.push(e.createElement("div",{key:"clipEllipse",className:Qu("clip-ellipse","snap-control"),style:{width:"".concat(2*B,"px"),height:"".concat(2*N,"px"),clipPath:P,transform:"translate(".concat(-h+$,"px, ").concat(-g+D,"px) ").concat(pp(u))}}))}if(s){var W=bp(Qd([m,f,b,v],k,!0)),j=W.width,G=W.height,V=W.left,Y=W.top;if(T||L||q){H=q?k.slice(0,8):k;E.push(e.createElement("div",{key:"clipArea",className:Qu("clip-area","snap-control"),style:{width:"".concat(j,"px"),height:"".concat(G,"px"),transform:"translate(".concat(V,"px, ").concat(Y,"px)"),clipPath:"polygon(".concat(H.map((function(t){return"".concat(t[0]-V,"px ").concat(t[1]-Y,"px")})).join(", "),")")}}))}}return x&&["vertical","horizontal"].forEach((function(t){var i=x[t],n="horizontal"===t;i.isSnap&&A.push.apply(A,i.snap.posInfos.map((function(i,o){var s=i.pos,l=za(mp(u,n?[0,s]:[s,0],_),[h,g]),a=za(mp(u,n?[d,s]:[s,c],_),[h,g]);return _c(e,"",l,a,r,"clip".concat(t,"snap").concat(o),"guideline")}))),i.isBound&&A.push.apply(A,i.bounds.map((function(i,o){var s=i.pos,l=za(mp(u,n?[0,s]:[s,0],_),[h,g]),a=za(mp(u,n?[d,s]:[s,c],_),[h,g]);return _c(e,"",l,a,r,"clip".concat(t,"bounds").concat(o),"guideline","bounds","bold")})))})),Qd(Qd([],E,!0),A,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var i=t.props.dragWithClip;return!(void 0===i||i)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Kd(Kd({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var i=t.state,n=t.props,o=n.defaultClipPath,s=n.customClipPath,r=i.target,l=i.width,a=i.height,d=e.inputEvent?e.inputEvent.target:null,c=d&&d.getAttribute("class")||"",u=e.datas,p=Oh(r,l,a,o||"inset",s);if(!p)return!1;var h=p.clipText;return!1===Np(t,"onClipStart",Op(t,e,{clipType:p.type,clipStyle:h,poses:p.poses.map((function(t){return t.pos}))}))?(u.isClipStart=!1,!1):(u.isControl=c&&c.indexOf("clip-control")>-1,u.isLine=c.indexOf("clip-line")>-1,u.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,u.clipIndex=d?parseInt(d.getAttribute("data-clip-index"),10):-1,u.clipPath=p,u.isClipStart=!0,i.clipPathState=h,Mu(t,e),!0)},dragControl:function(t,e){var i,n=e.datas,o=e.originalDatas,s=e.isDragTarget;if(!n.isClipStart)return!1;var r=n,l=r.isControl,a=r.isLine,d=r.isArea,c=r.clipIndex,u=r.clipPath;if(!u)return!1;var p=t.props.keepRatio,h=0,g=0,m=o.draggable,f=Iu(e);s&&m?(i=m.prevBeforeDist,h=i[0],g=i[1]):(h=f[0],g=f[1]);var b=[h,g],v=t.props,y=t.state,x=y.width,w=y.height,S=!d&&!l&&!a,_=u.type,C=u.poses,k=u.splitter,E=C.map((function(t){return t.pos}));S&&(h=-h,g=-g);var A=!l||"nesw"===C[c].direction,L="inset"===_||"rect"===_,q=C.map((function(){return[0,0]}));if(l&&!A){var T=C[c],M=T.horizontal,O=T.vertical,R=[h*Math.abs(M),g*Math.abs(O)];q=function(t,e,i,n,o){var s=t[e],r=s.direction,l=s.sub,a=t.map((function(){return[0,0]})),d=r?r.split(""):[];if(n&&e<8){var c=d.filter((function(t){return"w"===t||"e"===t})),u=d.filter((function(t){return"n"===t||"s"===t})),p=c[0],h=u[0];a[e]=i;var g=Mh(t),m=g[0],f=g[1],b=m&&f?m/f:0;if(b&&o){var v=t[(e+4)%8].pos,y=[0,0];r.indexOf("w")>-1?y[0]=-1:r.indexOf("e")>-1&&(y[0]=1),r.indexOf("n")>-1?y[1]=-1:r.indexOf("s")>-1&&(y[1]=1);var x=Zp([m,f],i,b,y,!0),w=m+x[0],S=f+x[1],_=v[1],C=v[1],k=v[0],E=v[0];-1===y[0]?k=E-w:1===y[0]?E=k+w:(k-=w/2,E+=w/2),-1===y[1]?_=C-S:C=1===y[1]?_+S:(_=C-S/2)+S;var A=Th(_,E,C,k);t.forEach((function(t,e){a[e][0]=A[e].pos[0]-t.pos[0],a[e][1]=A[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var n=t.direction;n&&(n.indexOf(p)>-1&&(a[e][0]=i[0]),n.indexOf(h)>-1&&(a[e][1]=i[1]))})),p&&(a[1][0]=i[0]/2,a[5][0]=i[0]/2),h&&(a[3][1]=i[1]/2,a[7][1]=i[1]/2)}else r&&!l?d.forEach((function(e){var n="n"===e||"s"===e;t.forEach((function(t,o){var s=t.direction,r=t.horizontal,l=t.vertical;s&&-1!==s.indexOf(e)&&(a[o]=[n||!r?0:i[0],n&&l?i[1]:0])}))})):a[e]=i;return a}(C,c,R,L,p)}else A&&(q=E.map((function(){return[h,g]})));var B=E.map((function(t,e){return Pa(t,q[e])})),N=Qd([],B,!0);y.snapBoundInfos=null;var I="circle"===u.type,$="ellipse"===u.type;if(I||$){var D=bp(B),P=Math.abs(D.bottom-D.top),z=Math.abs($?D.right-D.left:P),H=B[0][1]+P,F=B[0][0]-z,U=B[0][0]+z;I&&(N.push([U,D.bottom]),q.push([1,0])),N.push([D.left,H]),q.push([0,1]),N.push([F,D.bottom]),q.push([1,0])}var W=Pc((v.clipHorizontalGuidelines||[]).map((function(t){return ql("".concat(t),w)})),(v.clipVerticalGuidelines||[]).map((function(t){return ql("".concat(t),x)})),x,w),j=[],G=[];if(I||$)j=[N[4][0],N[2][0]],G=[N[1][1],N[3][1]];else if(L){var V=[N[0],N[2],N[4],N[6]],Y=[q[0],q[2],q[4],q[6]];j=V.filter((function(t,e){return Y[e][0]})).map((function(t){return t[0]})),G=V.filter((function(t,e){return Y[e][1]})).map((function(t){return t[1]}))}else j=N.filter((function(t,e){return q[e][0]})).map((function(t){return t[0]})),G=N.filter((function(t,e){return q[e][1]})).map((function(t){return t[1]}));var X=[0,0],Z=vu(W,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:w},j,G,5),K=Z.horizontal,Q=Z.vertical,J=K.offset,tt=Q.offset;if(K.isBound&&(X[1]+=J),Q.isBound&&(X[0]+=tt),($||I)&&0===q[0][0]&&0===q[0][1]){var et=(D=bp(B)).bottom-D.top,it=$?D.right-D.left:et;it-=Q.isBound?Math.abs(tt):0===Q.snapIndex?-tt:tt,et-=K.isBound?Math.abs(J):0===K.snapIndex?-J:J,I&&(it=et=Yc(Q,K)>0?et:it);var nt=N[0];N[1][1]=nt[1]-et,N[2][0]=nt[0]+it,N[3][1]=nt[1]+et,N[4][0]=nt[0]-it}else if(L&&p&&l){var ot=Mh(C),st=ot[0],rt=ot[1],lt=st&&rt?st/rt:0,at=C[c].direction||"",dt=N[1][1];H=N[5][1],F=N[7][0],U=N[3][0];J<=tt?J=tt/lt:tt=J*lt,at.indexOf("w")>-1?F-=tt:at.indexOf("e")>-1?U-=tt:(F+=tt/2,U-=tt/2),at.indexOf("n")>-1?dt-=J:at.indexOf("s")>-1?H-=J:(dt+=J/2,H-=J/2);var ct=Th(dt,U,H,F);N.forEach((function(t,e){var i;i=ct[e].pos,t[0]=i[0],t[1]=i[1]}))}else N.forEach((function(t,e){var i=q[e];i[0]&&(t[0]-=tt),i[1]&&(t[1]-=J)}));var ut=qh(t,u,B),pt="".concat(_,"(").concat(ut.join(k),")");if(y.clipPathState=pt,I||$)j=[N[4][0],N[2][0]],G=[N[1][1],N[3][1]];else if(L){j=(V=[N[0],N[2],N[4],N[6]]).map((function(t){return t[0]})),G=V.map((function(t){return t[1]}))}else j=N.map((function(t){return t[0]})),G=N.map((function(t){return t[1]}));if(y.snapBoundInfos=vu(W,v.clipTargetBounds&&{left:0,top:0,right:x,bottom:w},j,G,1),m){var ht=y.is3d,gt=y.allMatrix,mt=ht?4:3,ft=X;s&&(ft=[b[0]+X[0]-f[0],b[1]+X[1]-f[1]]),m.deltaOffset=Da(gt,[ft[0],ft[1],0,0],mt)}return Np(t,"onClip",Op(t,e,{clipEventType:"changed",clipType:_,poses:B,clipStyle:pt,clipStyles:ut,distX:h,distY:g})),!0},dragControlEnd:function(t,e){this.unset(t);var i=e.isDrag,n=e.datas,o=e.isDouble,s=n.isLine,r=n.isClipStart,l=n.isControl;return!!r&&(Np(t,"onClipEnd",Rp(t,e,{})),o&&(l?function(t,e){var i=e.datas,n=i.clipPath,o=i.clipIndex,s=n,r=s.type,l=s.poses,a=s.splitter,d=l.map((function(t){return t.pos})),c=d.length;if("polygon"===r)l.splice(o,1),d.splice(o,1);else{if("inset"!==r)return;if(o<8)return;if(Ch(l,d,o,8,c),c===l.length)return}var u=qh(t,n,d);Np(t,"onClip",Op(t,e,{clipEventType:"removed",clipType:r,poses:d,clipStyles:u,clipStyle:"".concat(r,"(").concat(u.join(a),")"),distX:0,distY:0}))}(t,e):s&&function(t,e){var i=Tu(t,e),n=i[0],o=i[1],s=e.datas,r=s.clipPath,l=s.clipIndex,a=r,d=a.type,c=a.poses,u=a.splitter,p=c.map((function(t){return t.pos}));if("polygon"===d)p.splice(l,0,[n,o]);else{if("inset"!==d)return;var h=bh.indexOf(l),g=vh.indexOf(l),m=c.length;if(kh(c,p,8,h,g,n,o,p[4][0],p[4][1],p[0][0],p[0][1]),m===c.length)return}var f=qh(t,r,p);Np(t,"onClip",Op(t,e,{clipEventType:"added",clipType:d,poses:p,clipStyles:f,clipStyle:"".concat(d,"(").concat(f.join(u),")"),distX:0,distY:0}))}(t,e)),o||i)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Bh={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:Dl(e.inputEvent.target,Qu("origin"))},dragControlStart:function(t,e){var i=e.datas;Mu(t,e);var n=Op(t,e,{dragStart:qu.dragStart(t,(new vc).dragStart([0,0],e))}),o=Np(t,"onDragOriginStart",n);return i.startOrigin=t.state.transformOrigin,i.startTargetOrigin=t.state.targetOrigin,i.prevOrigin=[0,0],i.isDragOrigin=!0,!1===o?(i.isDragOrigin=!1,!1):n},dragControl:function(t,e){var i=e.datas,n=e.isPinch,o=e.isRequest;if(!i.isDragOrigin)return!1;var s=Iu(e),r=s[0],l=s[1],a=t.state,d=a.width,c=a.height,u=a.offsetMatrix,p=a.targetMatrix,h=a.is3d,g=t.props.originRelative,m=void 0===g||g,f=h?4:3,b=[r,l];if(o){var v=e.distOrigin;(v[0]||v[1])&&(b=v)}var y=Pa(i.startOrigin,b),x=Pa(i.startTargetOrigin,b),w=za(b,i.prevOrigin),S=zu(u,p,y,f),_=t.getRect(),C=bp(fp(S,d,c,f)),k=[_.left-C.left,_.top-C.top];i.prevOrigin=b;var E=Op(t,e,{width:d,height:c,origin:y,dist:b,delta:w,transformOrigin:[Up(x[0],d,m),Up(x[1],c,m)].join(" "),drag:qu.drag(t,bc(e,t.state,k,!!n,!1))});return Np(t,"onDragOrigin",E),E},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Np(t,"onDragOriginEnd",Rp(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var i=this.dragControl(t,e);return!!i&&(t.transformOrigin=i.transformOrigin,!0)},request:function(t){var e={},i=t.getRect(),n=0,o=0,s=i.transformOrigin,r=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(r[0]+=t.deltaOrigin[0],r[1]+=t.deltaOrigin[1]):"origin"in t?(r[0]=t.origin[0]-s[0],r[1]=t.origin[1]-s[1]):("x"in t?n=t.x-i.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?o=t.y-i.top:"deltaY"in t&&(o+=t.deltaY)),{datas:e,distX:n,distY:o,distOrigin:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Nh(t,e,i,n,o){var s;void 0===n&&(n=[0,0]);if(o)s=o;else{var r=Ip(t);s=r&&r.borderRadius||""}return _h(!s||!o&&"0px"===s?[]:vl(s),e,i,0,0,n)}function Ih(t,e,i,n,o,s){var r=t.state,l=r.width,a=r.height,d=wh(s,o,t.props.roundRelative,l,a),c=d.raws,u=d.styles,p=Eh(o,c),h=p.horizontals,g=p.verticals,m=u.join(" ");r.borderRadiusState=m,Np(t,"onRound",Op(t,e,{horizontals:h,verticals:g,borderRadius:m,width:l,height:a,delta:n,dist:i}))}var $h={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,e){var i=t.state,n=i.target,o=i.width,s=i.height,r=i.allMatrix,l=i.is3d,a=i.left,d=i.top,c=i.borderRadiusState,u=t.props,p=u.minRoundControls,h=void 0===p?[0,0]:p,g=u.maxRoundControls,m=void 0===g?[4,4]:g,f=u.zoom;if(!n)return null;var b=l?4:3,v=Nh(n,o,s,h,c);if(!v)return null;var y=0,x=0;return v.map((function(t,i){x+=Math.abs(t.horizontal),y+=Math.abs(t.vertical);var n=za(mp(r,t.pos,b),[a,d]),o=t.vertical?y<=m[1]:x<=m[0];return e.createElement("div",{key:"borderRadiusControl".concat(i),className:Qu("control","border-radius"),"data-radius-index":i,style:{display:o?"block":"none",transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) scale(").concat(f,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var i=e.inputEvent.target.getAttribute("class")||"";return i.indexOf("border-radius")>-1||i.indexOf("moveable-line")>-1&&i.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var i=e.inputEvent,n=e.datas,o=i.target,s=o.getAttribute("class")||"",r=s.indexOf("border-radius")>-1,l=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,a=r?parseInt(o.getAttribute("data-radius-index"),10):-1,d=l?parseInt(o.getAttribute("data-line-index"),10):-1;if(!r&&!l)return!1;if(!1===Np(t,"onRoundStart",Op(t,e,{})))return!1;n.lineIndex=d,n.controlIndex=a,n.isControl=r,n.isLine=l,Mu(t,e);var c=t.props,u=c.roundRelative,p=c.minRoundControls,h=void 0===p?[0,0]:p,g=t.state,m=g.target,f=g.width,b=g.height;n.isRound=!0,n.prevDist=[0,0];var v=Nh(m,f,b,h)||[];return n.controlPoses=v,g.borderRadiusState=wh(v.map((function(t){return t.pos})),v,u,f,b).styles.join(" "),!0},dragControl:function(t,e){var i=e.datas;if(!i.isRound||!i.isControl||!i.controlPoses.length)return!1;var n=i.controlIndex,o=i.controlPoses,s=Iu(e),r=s[0],l=s[1],a=[r,l],d=za(a,i.prevDist),c=t.props.maxRoundControls,u=void 0===c?[4,4]:c,p=t.state,h=p.width,g=p.height,m=o[n],f=m.vertical,b=m.horizontal,v=o.map((function(t){var e=t.horizontal,i=t.vertical,n=[e*b*a[0],i*f*a[1]];if(e){if(1===u[0])return n;if(u[0]<4&&e!==b)return n}else{if(0===u[1])return n[1]=i*b*a[0]/h*g,n;if(f){if(1===u[1])return n;if(u[1]<4&&i!==f)return n}}return[0,0]}));v[n]=a;var y=o.map((function(t,e){return Pa(t.pos,v[e])}));return i.prevDist=[r,l],Ih(t,e,a,d,o,y),!0},dragControlEnd:function(t,e){var i=t.state;i.borderRadiusState="";var n=e.datas,o=e.isDouble;if(!n.isRound)return!1;var s=i.width,r=i.height,l=n.isControl,a=n.controlIndex,d=n.isLine,c=n.lineIndex,u=n.controlPoses,p=u.map((function(t){return t.pos})),h=p.length,g=t.props.roundClickable;if(o&&(void 0===g||g)){if(l)Ch(u,p,a,0);else if(d){var m=Tu(t,e);!function(t,e,i,n,o,s,r){var l=Eh(t),a=l.horizontals,d=l.verticals,c=a.length,u=d.length,p=-1,h=-1;0===i?0===c?p=0:1===c&&(p=1):3===i&&(c<=2?p=2:c<=3&&(p=3)),2===i?0===u?h=0:u<4&&(h=3):1===i&&(u<=1?h=1:u<=2&&(h=2)),kh(t,e,0,p,h,n,o,s,r)}(u,p,c,m[0],m[1],s,r)}h!==u.length&&Ih(t,e,[0,0],[0,0],u,p)}return Np(t,"onRoundEnd",Rp(t,e,{})),i.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}};var Dh={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var i=t.state,n=i.is3d,o=i.target,s=i.targetMatrix,r=null==o?void 0:o.style.transform,l=n?"matrix3d(".concat(s.join(","),")"):"matrix(".concat(Ha(s,!0),")"),a=r&&"none"!==r?r:l;e.datas.startTransforms=function(t,e){return t===(e?"matrix3d(".concat(Ka(4)):"matrix(".concat(Ka(3),")"))||"matrix(1,0,0,1,0,0)"===t}(a,n)?[]:vl(a)},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Op(t,e,{setTransform:function(t){e.datas.startTransforms=ul(t)?t:vl(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Op(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),Np(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),Np(t,"onBeforeRender",Op(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Np(t,"onBeforeRenderEnd",Op(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var i=this;this.dragStart(t,e);var n=yc(t,"beforeRenderable",e),o=t.moveables,s=n.map((function(t,e){var n=o[e];return i.setTransform(n,t),i.fillDragStartParams(n,t)}));Np(t,"onBeforeRenderGroupStart",Op(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:s}))},dragGroup:function(t,e){var i=this;this.drag(t,e);var n=yc(t,"beforeRenderable",e),o=t.moveables,s=n.map((function(t,e){var n=o[e];return i.resetTransform(t),i.fillDragParams(n,t)}));Np(t,"onBeforeRenderGroup",Op(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:s}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Np(t,"onBeforeRenderGroupEnd",Op(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Ph={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Np(t,"onRenderStart",Op(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Np(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Np(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Np(t,"onRenderGroupStart",Op(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var i=this,n=yc(t,"beforeRenderable",e),o=t.moveables,s=n.map((function(t,e){var n=o[e];return i.fillDragParams(n,t)}));Np(t,"onRenderGroup",Op(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:ju(e),events:s}))},dragGroupEnd:function(t,e){var i=this,n=yc(t,"beforeRenderable",e),o=t.moveables,s=n.map((function(t,e){var n=o[e];return i.fillDragEndParams(n,t)}));Np(t,"onRenderGroupEnd",Op(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:s}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return Op(t,e,{isPinch:!!e.isPinch,transform:ju(e)})},fillDragEndParams:function(t,e){return Op(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function zh(t,e,i,n,o,s,r){var l="Start"===o,a=t.state.target,d=s.isRequest;if(!a||l&&n.indexOf("Control")>-1&&!d&&t.areaElement===s.inputEvent.target)return!1;var c="".concat(i).concat(n).concat(o),u="".concat(i).concat(n,"Condition"),p="End"===o,h="After"===o,g=l&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());g&&t.updateRect(o,!0,!1),""!==o||d||Hp(t.state,s);var m=Qd([],t[e],!0);if(d){var f=s.requestAble;m.some((function(t){return t.name===f}))||m.push.apply(m,t.props.ables.filter((function(t){return t.name===f})))}if(!m.length)return!1;var b=Qd(Qd([Dh],m,!0),[Ph],!1).filter((function(t){return t[c]})),v=s.datas;g&&b.forEach((function(e){e.unset&&e.unset(t)}));var y,x=s.inputEvent;p&&x&&(y=document.elementFromPoint(s.clientX,s.clientY)||x.target);var w=0,S=b.filter((function(e){var i=e.name,n=v[i]||(v[i]={});if(l&&(n.isEventStart=!e[u]||e[u](t,s)),n.isEventStart){var o=e[c](t,Kd(Kd({},s),{resultCount:w,datas:n,originalDatas:v,inputTarget:y}));return t._emitter.off(),l&&!1===o&&(n.isEventStart=!1),w+=o?1:0,o}return!1})).length,_=!1;if(l&&b.length&&!S&&(_=0===b.filter((function(t){var e=t.name,i=v[e];return!!i.isEventStart&&("strong"!==t.dragRelation||(i.isEventStart=!1,!1))})).length),(p||_)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),g&&_&&b.forEach((function(e){e.unset&&e.unset(t)})),l&&!d&&S&&(null==s||s.preventDefault()),t.isUnmounted||_)return!1;(!l&&S&&!r||p)&&(t.props.flushSync||Ju)((function(){t.updateRect(p?o:"",!0,!1),t.forceUpdate()}));return l||p||h||!S||r||zh(t,e,i,n,o+"After",s),!0}function Hh(t,e,i){var n=t.controlBox.getElement(),o=[];o.push(n),t.props.dragArea&&!t.props.dragTarget||o.push(e);var s=function(e){var i=e.inputEvent.target;return i===t.areaElement||!t.isMoveableElement(i)&&!t.controlBox.getElement().contains(i)||Dl(i,"moveable-area")||Dl(i,"moveable-padding")};return Fh(t,o,"targetAbles",i,{dragStart:s,pinchStart:s})}function Fh(t,e,i,n,o){void 0===o&&(o={});var s=t.props,r=s.pinchOutside,l=s.pinchThreshold,a={preventDefault:!1,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:r},d=new $d(e,a);return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(s){d.on("".concat(e).concat(s),(function(r){var l=r.eventType;!o[l]||o[l](r)?zh(t,i,e,n,s,r)||r.stop():r.stop()}))}))})),d}var Uh=function(){function t(t,e,i){var n=this;this.target=t,this.moveable=e,this.eventName=i,this.ables=[],this._onEvent=function(t){var e=n.eventName,i=n.moveable;i.state.disableNativeEvent||n.ables.forEach((function(n){n[e](i,{inputEvent:t})}))},t.addEventListener(i.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}(),Wh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Kd({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Ep(null)),e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Yd,e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),t.preventDefault(),zl(window,"click",e.onPreventClick,!0)},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(Al(e._observerId),e._observerId=El((function(){e.isDragging()||e.updateRect()})))}},e}Zd(e,t);var i=e.prototype;return i.render=function(){var t=this.props,e=this.state,i=t.parentPosition,n=t.className,o=t.target,s=t.zoom,r=t.cspNonce,l=t.translateZ,a=t.cssStyled,d=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=i||{left:0,top:0},u=c.left,p=c.top,h=e.left,g=e.top,m=e.target,f=e.direction,b=e.hasFixed,v=t.targets,y=(v&&v.length||o)&&m,x=this.isDragging(),w={};return this.getEnabledAbles().forEach((function(t){w["data-able-".concat(t.name.toLowerCase())]=!0})),Jl(a,Kd({cspNonce:r,ref:Ur(this,"controlBox"),className:"".concat(Qu("control-box",-1===f?"reverse":"",x?"dragging":"")," ").concat(n)},w,{onClick:this.onPreventClick,portalContainer:d,style:{position:b?"fixed":"absolute",display:y?"block":"none",transform:"translate3d(".concat(h-u,"px, ").concat(g-p,"px, ").concat(l,")"),"--zoom":s,"--zoompx":"".concat(s,"px")}}),this.renderAbles(),this._renderLines())},i.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,i=t.container,n=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),i||e||n||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},i.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},i.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Mp(this,"targetGesto"),Mp(this,"controlGesto");var t=this.events;for(var e in t){var i=t[e];i&&i.destroy()}},i.getContainer=function(){var t=this.props,e=t.parentMoveable,i=t.wrapperMoveable;return t.container||i&&i.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},i.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(sc)>-1},i.dragStart=function(t){var e=this.targetGesto;return e&&!e.isFlag()&&e.triggerDragStart(t),this},i.hitTest=function(t){var e,i=this.state,n=i.target,o=i.pos1,s=i.pos2,r=i.pos3,l=i.pos4,a=i.targetClientRect;if(!n)return 0;if(t instanceof Element){var d=t.getBoundingClientRect();e={left:d.left,top:d.top,width:d.width,height:d.height}}else e=Kd({width:0,height:0},t);var c=e.left,u=e.top,p=e.width,h=e.height,g=cd([o,s,l,r],a),m=dd(bd(g,[[c,u],[c+p,u],[c+p,u+h],[c,u+h]])),f=dd(g);return m&&f?Math.min(100,m/f*100):0},i.isInside=function(t,e){var i=this.state,n=i.target,o=i.pos1,s=i.pos2,r=i.pos3,l=i.pos4,a=i.targetClientRect;return!!n&&pd([t,e],cd([o,s,l,r],a))},i.updateRect=function(t,e,i){void 0===i&&(i=!0);var n=this.props,o=n.parentMoveable,s=this.state.target||this.props.target,r=this.getContainer(),l=o?o.props.rootContainer:n.rootContainer;this.updateState(Ep(this.controlBox&&this.controlBox.getElement(),s,r,r,l||r),!o&&i)},i.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},i.updateTarget=function(t){this.updateRect(t,!0)},i.getRect=function(){var t=this.state,e=Tp(this.state),i=e[0],n=e[1],o=e[2],s=e[3],r=bp(e),l=t.width,a=t.height,d=r.width,c=r.height,u=r.left,p=r.top,h=[t.left,t.top],g=Pa(h,t.origin);return{width:d,height:c,left:u,top:p,pos1:i,pos2:n,pos3:o,pos4:s,offsetWidth:l,offsetHeight:a,beforeOrigin:Pa(h,t.beforeOrigin),origin:g,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},i.getManager=function(){return this},i.getRotation=function(){var t=this.state;return function(t,e,i){var n=Rl(t,e)/Math.PI*180;return(n=i>=0?n:180-n)>=0?n:360+n}(t.pos1,t.pos2,t.direction)},i.request=function(t,e,i){void 0===e&&(e={});var n=this.props,o=n.ables,s=n.groupable,r=o.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!r||!r.request)return{request:function(){return this},requestEnd:function(){return this}};var l=this,a=r.request(this),d=i||e.isInstant,c=a.isControl?"controlAbles":"targetAbles",u="".concat(s?"Group":"").concat(a.isControl?"Control":""),p={request:function(e){return zh(l,c,"drag",u,"",Kd(Kd({},a.request(e)),{requestAble:t,isRequest:!0}),d),this},requestEnd:function(){return zh(l,c,"drag",u,"End",Kd(Kd({},a.requestEnd()),{requestAble:t,isRequest:!0}),d),this}};return zh(l,c,"drag",u,"Start",Kd(Kd({},a.requestStart(e)),{requestAble:t,isRequest:!0}),d),d?p.request(e).requestEnd():p},i.destroy=function(){this.componentWillUnmount()},i.updateRenderPoses=function(){var t=this.state,e=this.props,i=t.originalBeforeOrigin,n=t.transformOrigin,o=t.allMatrix,s=t.is3d,r=t.pos1,l=t.pos2,a=t.pos3,d=t.pos4,c=t.left,u=t.top,p=e.padding||{},h=p.left,g=void 0===h?0:h,m=p.top,f=void 0===m?0:m,b=p.bottom,v=void 0===b?0:b,y=p.right,x=void 0===y?0:y,w=s?4:3,S=e.groupable?i:Pa(i,[c,u]);t.renderPoses=[Pa(r,Fp(o,[-g,-f],n,S,w)),Pa(l,Fp(o,[x,-f],n,S,w)),Pa(a,Fp(o,[-g,v],n,S,w)),Pa(d,Fp(o,[x,v],n,S,w))]},i.checkUpdate=function(){var t=this.props,e=t.target,i=t.container,n=t.parentMoveable,o=this.state,s=o.target,r=o.container;if((s||e)&&(this.updateAbles(),!Dp(s,e)||!Dp(r,i))){var l=i||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:i}),!n&&l&&this.updateRect("End",!1,!1)}},i.triggerEvent=function(t,e){this._emitter.trigger(t,e);var i=this.props[t];return i&&i(e)},i.useCSS=function(t,e){var i=this.props.customStyledMap,n=t+e;return i[n]||(i[n]=jd(t,e)),i[n]},i.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},i.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var i=this.props,n=i.triggerAblesSimultaneously,o=t.filter((function(t){return t&&(t.always&&!1!==i[t.name]||i[t.name])})),s="drag".concat(e,"Start"),r="pinch".concat(e,"Start"),l="drag".concat(e,"ControlStart"),a=$p(o,[s,r],n),d=$p(o,[l],n);this.enabledAbles=o,this.targetAbles=a,this.controlAbles=d},i.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var i=this.state;for(var n in t)i[n]=t[n]}},i.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},i.renderAbles=function(){var t=this,e=this.props.triggerAblesSimultaneously,i={createElement:Jl};return function(t,e){var i=[],n={};return t.forEach((function(o,s){var r=e(o,s,t),l=n[r];l||(l=[],n[r]=l,i.push(l)),l.push(o)})),i}(function(t){return t.reduce((function(t,e){return t.concat(e)}),[])}($p(this.getEnabledAbles(),["render"],e).map((function(e){return(0,e.render)(t,i)||[]}))).filter((function(t){return t})),(function(t){return t.key})).map((function(t){return t[0]}))},i.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},i._updateObserver=function(t){var e,i=this.props,n=i.target;if(window.ResizeObserver&&n&&i.useResizeObserver){if(t.target!==n||!this._observer){var o=new ResizeObserver(this.checkUpdateRect);o.observe(n,{box:"border-box"}),this._observer=o}}else null===(e=this._observer)||void 0===e||e.disconnect()},i._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,i=this.controlAbles.length,n=this.props,o=n.dragTarget||n.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(Mp(this,"targetGesto"),this.updateState({gesto:null})),i||Mp(this,"controlGesto"),o&&e&&!this.targetGesto&&(this.targetGesto=Hh(this,o,"")),!this.controlGesto&&i&&(this.controlGesto=Fh(this,t,"controlAbles","Control"))},i._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},i._renderLines=function(){var t=this.props,e=t.edge,i=t.zoom;if(t.hideDefaultLines)return[];var n=this.state.renderPoses,o={createElement:Jl};return[_c(o,e?"n":"",n[0],n[1],i,0),_c(o,e?"e":"",n[1],n[3],i,1),_c(o,e?"w":"",n[0],n[2],i,2),_c(o,e?"s":"",n[2],n[3],i,3)]},i._isTargetChanged=function(t){var e=this.props,i=e.dragTarget||e.target,n=this._prevTarget,o=this._prevDragArea,s=e.dragArea;return!s&&n!==i||(t||s)&&o!==s},i._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,i=this.events,n=Ll(i);if(this._isTargetChanged())for(var o in i){var s=i[o];s&&s.destroy(),i[o]=null}if(e){var r=this.enabledAbles;n.forEach((function(n){var o=$p(r,[n]),s=o.length>0,l=i[n];s?(l||(l=new Uh(e,t,n),i[n]=l),l.setAbles(o)):l&&(l.destroy(),i[n]=null)}))}},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},flushSync:Ju},e}(ca),jh={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,e){var i=t.props.targets||[];t.moveables=[];var n=t.state,o={left:n.left,top:n.top},s=t.props;return i.map((function(i,n){return e.createElement(Wh,{key:"moveable"+n,ref:Wr(t,"moveables",n),target:i,origin:!1,cssStyled:s.cssStyled,customStyledMap:s.customStyledMap,useResizeObserver:s.useResizeObserver,parentMoveable:t,parentPosition:o})}))}},Gh=Jd("clickable",{props:{clickable:Boolean,preventClickDefault:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){e.isRequest||Pl(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var i=t.state.target,n=e.inputEvent,o=e.inputTarget,s=!t.isMoveableElement(o)&&t.controlBox.getElement().contains(o);if((!t.props.preventClickDefault&&!e.isDrag||s)&&this.unset(t),n&&o&&!e.isDrag&&!t.isMoveableElement(o)&&!s){var r=i.contains(o);Np(t,"onClick",Op(t,e,{isDouble:e.isDouble,inputTarget:o,isTarget:i===o,containsTarget:r}))}},dragGroupEnd:function(t,e){this.endEvent(t);var i=e.inputEvent,n=e.inputTarget;if(i&&n&&!e.isDrag&&!t.isMoveableElement(n)&&e.datas.inputTarget!==n){var o=t.props.targets,s=o.indexOf(n),r=s>-1,l=!1;-1===s&&(l=(s=Cl(o,(function(t){return t.contains(n)})))>-1),Np(t,"onClickGroup",Op(t,e,{isDouble:e.isDouble,targets:o,inputTarget:n,targetIndex:s,isTarget:r,containsTarget:l}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;El((function(){e.unset(t)}))},unset:function(t){zl(window,"click",t.onPreventClick,!0)}});function Vh(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Kd(Kd({},t),{datas:e})}var Yh=Jd("edgeDraggable",{dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var i=e.inputEvent.target;return Dl(i,Qu("direction"))&&Dl(i,Qu("line"))},dragControlStart:function(t,e){return qu.dragStart(t,Vh(e))},dragControl:function(t,e){return qu.drag(t,Vh(e))},dragControlEnd:function(t,e){return qu.dragEnd(t,Vh(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var i=e.inputEvent.target;return Dl(i,Qu("direction"))&&Dl(i,Qu("line"))},dragGroupControlStart:function(t,e){return qu.dragGroupStart(t,Vh(e))},dragGroupControl:function(t,e){return qu.dragGroup(t,Vh(e))},dragGroupControlEnd:function(t,e){return qu.dragGroupEnd(t,Vh(e))},unset:function(t){return qu.unset(t)}}),Xh={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Zh=[Dh,hh,Lu,Qp,qu,Yh,Mc,Jp,th,nh,ph,gh,ch,Bh,Rh,$h,jh,Xh,Gh,dh,Ph],Kh=Zh.reduce((function(t,e){return Kd(Kd({},t),"events"in e?e.events:{})}),{}),Qh=Zh.reduce((function(t,e){return Kd(Kd({},t),e.props)}),{}),Jh=Gp(Kh),tg=Object.keys(Jh),eg=Object.keys(Qh);function ig(t,e){return Math.max.apply(Math,t.map((function(t){var i=t[0],n=t[1],o=t[2],s=t[3];return Math.max(i[e],n[e],o[e],s[e])})))}function ng(t,e){return Math.min.apply(Math,t.map((function(t){var i=t[0],n=t[1],o=t[2],s=t[3];return Math.min(i[e],n[e],o[e],s[e])})))}var og=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new ld,e.moveables=[],e.transformOrigin="50% 50%",e}Zd(e,t);var i=e.prototype;return i.checkUpdate=function(){this.updateAbles()},i.updateRect=function(t,e,i){if(void 0===i&&(i=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var n=this.state,o=this.props,s=n.target||o.target;(!e||""!==t&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var r=this.rotation,l=this.scale,a=function(t,e){if(!t.length)return[0,0,0,0];var i=t.map((function(t){return Tp(t.state)})),n=uc,o=uc,s=0,r=0,l=Il(e,dc);if(l%90){var a=l/180*Math.PI,d=Math.tan(a),c=-1/d,u=[pc,uc],p=[pc,uc];i.forEach((function(t){t.forEach((function(t){var e=t[1]-d*t[0],i=t[1]-c*t[0];u[0]=Math.max(u[0],e),u[1]=Math.min(u[1],e),p[0]=Math.max(p[0],i),p[1]=Math.min(p[1],i)}))})),u.forEach((function(t){p.forEach((function(e){var i=(e-t)/(d-c),s=d*i+t;n=Math.min(n,i),o=Math.min(o,s)}))}));var h=i.map((function(t){var e=t[0],i=t[1],n=t[2],o=t[3];return[Va(e,-a),Va(i,-a),Va(n,-a),Va(o,-a)]}));s=ig(h,0)-ng(h,0),r=ig(h,1)-ng(h,1)}else if(n=ng(i,0),o=ng(i,1),s=ig(i,0)-n,r=ig(i,1)-o,l%180){var g=s;s=r,r=g}return[n,o,s,r]}(this.moveables,r),d=a[0],c=a[1],u=a[2],p=a[3],h="rotate(".concat(r,"deg) scale(").concat(l[0]>=0?1:-1,", ").concat(l[1]>=0?1:-1,")");s.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(u,"px; height:").concat(p,"px;")+"transform:".concat(h),n.width=u,n.height=p;var g=this.getContainer(),m=Ep(this.controlBox.getElement(),s,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||g),f=[m.left,m.top],b=Tp(m),v=b[0],y=b[1],x=b[2],w=b[3],S=ud([v,y,x,w]),_=[S.minX,S.minY];m.pos1=za(v,_),m.pos2=za(y,_),m.pos3=za(x,_),m.pos4=za(w,_),m.left=d-m.left+_[0],m.top=c-m.top+_[1],m.origin=za(Pa(f,m.origin),_),m.beforeOrigin=za(Pa(f,m.beforeOrigin),_),m.originalBeforeOrigin=Pa(f,m.originalBeforeOrigin);var C=m.targetClientRect,k=l[0]*l[1]>0?1:-1;C.top+=m.top-n.top,C.left+=m.left-n.left,s.style.transform="translate(".concat(-_[0],"px, ").concat(-_[1],"px) ").concat(h),this.updateState(Kd(Kd({},m),{direction:k,beforeDirection:k}),i)}},i.getRect=function(){return Kd(Kd({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},i.triggerEvent=function(e,i,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,i);this._emitter.trigger(e,i)},i.updateAbles=function(){t.prototype.updateAbles.call(this,Qd(Qd([],this.props.ables,!0),[jh],!1),"Group")},i._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},i._updateEvents=function(){var t=this.state,e=this.props,i=this._prevTarget,n=e.dragTarget||this.areaElement;i!==n&&(Mp(this,"targetGesto"),Mp(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=Hh(this,n,"Group")),this.controlGesto||(this.controlGesto=Fh(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var o=!Dp(t.container,e.container);o&&(t.container=e.container);var s=this.differ.update(e.targets),r=s.added,l=s.changed,a=s.removed;(o||r.length||l.length||a.length)&&this.updateRect()},i._updateObserver=function(){},e.defaultProps=Kd(Kd({},Wh.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Wh),sg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}Zd(e,t);var i=e.prototype;return i.render=function(){var t=this,e=this.props,i=e.cspNonce,n=e.cssStyled,o=e.targets;return Jl(n,{cspNonce:i,ref:Ur(this,"controlBox"),className:Qu("control-box")},o.map((function(e,i){return Jl(Wh,Kd({key:"moveable"+i,ref:Wr(t,"moveables",i)},t.props,{target:e,wrapperMoveable:t}))})))},i.componentDidUpdate=function(){},i.updateRect=function(t,e,i){void 0===i&&(i=!0),this.moveables.forEach((function(n){n.updateRect(t,e,i)}))},i.getRect=function(){return Kd(Kd({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},i.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},i.dragStart=function(){return this},i.hitTest=function(){return 0},i.isInside=function(){return!1},i.isDragging=function(){return!1},i.updateRenderPoses=function(){},i.checkUpdate=function(){},i.triggerEvent=function(){},i.updateAbles=function(){},i._updateEvents=function(){},i._updateObserver=function(){},e}(Wh),rg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e}Zd(e,t);var i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var i=e.css;i&&i.forEach((function(e){t[e]=!0}))}));var e=Ll(t).join("\n");this.defaultStyled=jd("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(e,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(sc,rc+e))},e.getTotalAbles=function(){return Qd([hh,jh,Xh,dh],this.defaultAbles,!0)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,i=e.ables,n=e.props,o=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(i[n[o]]=t[n[o]])}return i}(e,["ables","props"]),s=function(t,e){var i=[];return t.forEach((function(t){t&&(pl(t)?e[t]&&i.push.apply(i,e[t]):i.push(t))})),i}(this._updateRefs(!0),this.selectorMap),r=s.length>1,l=Qd(Qd([],t.getTotalAbles(),!0),i||[],!0),a=Kd(Kd(Kd({},o),n||{}),{ables:l,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return r?o.individualGroupable?Jl(sg,Kd({key:"individual-group",ref:Ur(this,"moveable")},a,{target:null,targets:s})):Jl(og,Kd({key:"group",ref:Ur(this,"moveable")},a,{target:null,targets:s})):Jl(Wh,Kd({key:"single",ref:Ur(this,"moveable")},a,{target:s[0]}))},i.componentDidMount=function(){this._updateRefs()},i.componentDidUpdate=function(){this._updateRefs()},i.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},i.getManager=function(){return this.moveable},i._updateRefs=function(t){var e=this.refTargets,i=Yp(this.props.target||this.props.targets),n="undefined"!=typeof document,o=e.length!==i.length||e.some((function(t,e){var n=i[e];return!(!t&&!n)&&t!==n})),s=this.selectorMap,r={};return this.refTargets.forEach((function(t){pl(t)&&(s[t]?r[t]=s[t]:n&&(o=!0,r[t]=[].slice.call(document.querySelectorAll(t))))})),this.refTargets=i,this.selectorMap=r,!t&&o&&this.forceUpdate(),i},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);s>3&&r&&Object.defineProperty(e,i,r)}([Gr(fc)],e.prototype,"moveable",void 0),e}(ca),lg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zd(e,t),e.defaultAbles=Zh,e}(rg),ag=lg,dg=function(t,e){return dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},dg(t,e)};function cg(t,e){function i(){this.constructor=t}dg(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ug=function(){return ug=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ug.apply(this,arguments)};var pg=function(t){function e(e){var i=t.call(this,e)||this;return i.state={},i.state=i.props,i}return cg(e,t),e.prototype.render=function(){return t=Jl(ag,ug({ref:Ur(this,"moveable")},this.state)),e=this.state.parentElement,Jl(ua,{element:t,container:e});var t,e},e}(da),hg=eg,gg=fc,mg=tg,fg=function(){return fg=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},fg.apply(this,arguments)};var bg=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(cl(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(cl(t))for(var i in t)this.off(i);else if(e){var n=this._events[t];if(n){var o=Cl(n,(function(t){return t.listener===e}));o>-1&&n.splice(o,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var n=this._events[t];if(!t||!n)return!0;var o=!1;return e.eventType=t,e.stop=function(){o=!0},e.currentTarget=this,function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],r=0,l=s.length;r<l;r++,o++)n[o]=s[r];return n}(n).forEach((function(n){n.listener(e),n.once&&i.off(t,n.listener)})),!o},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var n=this._events;n[t]=n[t]||[],n[t].push(fg({listener:e},i))},t}(),vg=function(t){function e(e,i){void 0===i&&(i={});var n=t.call(this)||this;n.tempElement=document.createElement("div");var o=ug({},i),s={};mg.forEach((function(t){var e;s[(e="on ".concat(t),e.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()})))]=function(e){return n.trigger(t,e)}})),ma(Jl(pg,ug({ref:Ur(n,"innerMoveable"),parentElement:e},o,s)),n.tempElement);var r=o.target;return ul(r)&&r.length>1&&n.updateRect(),n}cg(e,t);var i=e.prototype;return i.setState=function(t,e){this.innerMoveable.setState(t,e)},i.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},i.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},i.destroy=function(){ma(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},i.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,i,n){var o,s=arguments.length,r=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(r=(s<3?o(r):s>3?o(e,i,r):o(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}([jr(gg,(function(t,e){t[e]||(t[e]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=this.getMoveable();if(n&&n[e])return n[e].apply(n,t)})})),jr(hg,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var i;this.setState(((i={})[e]=t,i))},enumerable:!0,configurable:!0})}))],e),e}(bg),yg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cg(e,t),e}(vg),xg={exports:{}};!function(e){!function(t){var i=t.URL||t.webkitURL;function n(t){return!!i&&i.createObjectURL(t)}function o(t){return!!i&&i.revokeObjectURL(t)}function s(t,e){!t||"blob:"!==t.slice(0,5)||e&&e.noRevoke||o(t)}function r(e,i,n,o){if(!t.FileReader)return!1;var s=new FileReader;s.onload=function(){i.call(s,this.result)},n&&(s.onabort=s.onerror=function(){n.call(s,this.error)});var r=s[o||"readAsDataURL"];return r?(r.call(s,e),s):void 0}function l(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}function a(e,i,o){function d(i,d){var c,u=document.createElement("img");function p(t,e){i!==d?t instanceof Error?d(t):((e=e||{}).image=t,i(e)):i&&i(t,e)}function h(i,s){s&&t.console&&console.log(s),i&&l("Blob",i)?c=n(e=i):(c=e,o&&o.crossOrigin&&(u.crossOrigin=o.crossOrigin)),u.src=c}return u.onerror=function(t){s(c,o),d&&d.call(u,t)},u.onload=function(){s(c,o);var t={originalWidth:u.naturalWidth||u.width,originalHeight:u.naturalHeight||u.height};try{a.transform(u,o,p,e,t)}catch(t){d&&d(t)}},"string"==typeof e?(a.requiresMetaData(o)?a.fetchBlob(e,h,o):h(),u):l("Blob",e)||l("File",e)?(c=n(e))?(u.src=c,u):r(e,(function(t){u.src=t}),d):void 0}return t.Promise&&"function"!=typeof i?(o=i,new Promise(d)):d(i,i)}a.requiresMetaData=function(t){return t&&t.meta},a.fetchBlob=function(t,e){e()},a.transform=function(t,e,i,n,o){i(t,o)},a.global=t,a.readFile=r,a.isInstanceOf=l,a.createObjectURL=n,a.revokeObjectURL=o,e.exports?e.exports=a:t.loadImage=a}("undefined"!=typeof window&&window||t)}(xg);var wg={exports:{}};!function(t){var e;e=function(t){var e=t.transform;t.createCanvas=function(e,i,n){if(n&&t.global.OffscreenCanvas)return new OffscreenCanvas(e,i);var o=document.createElement("canvas");return o.width=e,o.height=i,o},t.transform=function(i,n,o,s,r){e.call(t,t.scale(i,n,r),n,o,s,r)},t.transformCoordinates=function(){},t.getTransformedOptions=function(t,e){var i,n,o,s,r=e.aspectRatio;if(!r)return e;for(n in i={},e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i.crop=!0,(o=t.naturalWidth||t.width)/(s=t.naturalHeight||t.height)>r?(i.maxWidth=s*r,i.maxHeight=s):(i.maxWidth=o,i.maxHeight=o/r),i},t.drawImage=function(t,e,i,n,o,s,r,l,a){var d=e.getContext("2d");return!1===a.imageSmoothingEnabled?(d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1):a.imageSmoothingQuality&&(d.imageSmoothingQuality=a.imageSmoothingQuality),d.drawImage(t,i,n,o,s,0,0,r,l),d},t.requiresCanvas=function(t){return t.canvas||t.crop||!!t.aspectRatio},t.scale=function(e,i,n){i=i||{},n=n||{};var o,s,r,l,a,d,c,u,p,h,g,m,f=e.getContext||t.requiresCanvas(i)&&!!t.global.HTMLCanvasElement,b=e.naturalWidth||e.width,v=e.naturalHeight||e.height,y=b,x=v;function w(){var t=Math.max((r||y)/y,(l||x)/x);t>1&&(y*=t,x*=t)}function S(){var t=Math.min((o||y)/y,(s||x)/x);t<1&&(y*=t,x*=t)}if(f&&(c=(i=t.getTransformedOptions(e,i,n)).left||0,u=i.top||0,i.sourceWidth?(a=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(c=b-a-i.right)):a=b-c-(i.right||0),i.sourceHeight?(d=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(u=v-d-i.bottom)):d=v-u-(i.bottom||0),y=a,x=d),o=i.maxWidth,s=i.maxHeight,r=i.minWidth,l=i.minHeight,f&&o&&s&&i.crop?(y=o,x=s,(g=a/d-o/s)<0?(d=s*a/o,void 0===i.top&&void 0===i.bottom&&(u=(v-d)/2)):g>0&&(a=o*d/s,void 0===i.left&&void 0===i.right&&(c=(b-a)/2))):((i.contain||i.cover)&&(r=o=o||r,l=s=s||l),i.cover?(S(),w()):(w(),S())),f){if((p=i.pixelRatio)>1&&(!e.style.width||Math.floor(parseFloat(e.style.width,10))!==Math.floor(b/p))&&(y*=p,x*=p),t.orientationCropBug&&!e.getContext&&(c||u||a!==b||d!==v)&&(g=e,e=t.createCanvas(b,v,!0),t.drawImage(g,e,0,0,b,v,b,v,i)),(h=i.downsamplingRatio)>0&&h<1&&y<a&&x<d)for(;a*h>y;)m=t.createCanvas(a*h,d*h,!0),t.drawImage(e,m,c,u,a,d,m.width,m.height,i),c=0,u=0,a=m.width,d=m.height,e=m;return m=t.createCanvas(y,x),t.transformCoordinates(m,i,n),p>1&&(m.style.width=m.width/p+"px"),t.drawImage(e,m,c,u,a,d,y,x,i).setTransform(1,0,0,1,0,0),m}return e.width=y,e.height=x,e}},e(t.exports?xg.exports:window.loadImage)}(wg);var Sg={exports:{}};!function(t){var e;e=function(t){var e=t.global,i=t.transform,n=e.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),o=e.ArrayBuffer&&ArrayBuffer.prototype.slice||function(t,e){e=e||this.byteLength-t;var i=new Uint8Array(this,t,e),n=new Uint8Array(e);return n.set(i),n.buffer},s={jpeg:{65505:[],65517:[]}};function r(i,r,l,a){var d=this;function c(r,c){if(!(e.DataView&&n&&i&&i.size>=12&&"image/jpeg"===i.type))return r(a);var u=l.maxMetaDataSize||262144;t.readFile(n.call(i,0,u),(function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return c(new Error("Invalid JPEG file: Missing JPEG marker."));for(var i,n,u,p,h=2,g=e.byteLength-4,m=h;h<g&&((i=e.getUint16(h))>=65504&&i<=65519||65534===i);){if(h+(n=e.getUint16(h+2)+2)>e.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((u=s.jpeg[i])&&!l.disableMetaDataParsers)for(p=0;p<u.length;p+=1)u[p].call(d,e,h,n,a,l);m=h+=n}!l.disableImageHead&&m>6&&(a.imageHead=o.call(t,0,m)),r(a)}),c,"readAsArrayBuffer")||r(a)}return l=l||{},e.Promise&&"function"!=typeof r?(a=l=r||{},new Promise(c)):(a=a||{},c(r,r))}function l(t,e,i){return t&&e&&i?new Blob([i,n.call(t,e.byteLength)],{type:"image/jpeg"}):null}t.transform=function(n,o,s,l,a){t.requiresMetaData(o)?r(l,(function(r){r!==a&&(e.console&&console.log(r),r=a),i.call(t,n,o,s,l,r)}),o,a=a||{}):i.apply(t,arguments)},t.blobSlice=n,t.bufferSlice=o,t.replaceHead=function(t,i,n){var o={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!n&&e.Promise)return r(t,o).then((function(e){return l(t,e.imageHead,i)}));r(t,(function(e){n(l(t,e.imageHead,i))}),o)},t.parseMetaData=r,t.metaDataParsers=s},e(t.exports?xg.exports:window.loadImage)}(Sg);!function(t){var e;e=function(t){var e=t.global;e.fetch&&e.Request&&e.Response&&e.Response.prototype.blob?t.fetchBlob=function(t,i,n){function o(t){return t.blob()}if(e.Promise&&"function"!=typeof i)return fetch(new Request(t,i)).then(o);fetch(new Request(t,n)).then(o).then(i).catch((function(t){i(null,t)}))}:e.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(t.fetchBlob=function(t,i,n){function o(e,i){n=n||{};var o=new XMLHttpRequest;o.open(n.method||"GET",t),n.headers&&Object.keys(n.headers).forEach((function(t){o.setRequestHeader(t,n.headers[t])})),o.withCredentials="include"===n.credentials,o.responseType="blob",o.onload=function(){e(o.response)},o.onerror=o.onabort=o.ontimeout=function(t){e===i?i(null,t):i(t)},o.send(n.body)}return e.Promise&&"function"!=typeof i?(n=i,new Promise(o)):o(i,i)})},e(t.exports?xg.exports:window.loadImage)}({exports:{}});var _g={exports:{}};!function(t){var e;e=function(t){function e(t){t&&(Object.defineProperty(this,"map",{value:this.ifds[t].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[t]||{}}))}e.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},e.prototype.ifds={ifd1:{name:"Thumbnail",map:e.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},e.prototype.get=function(t){return this[t]||this[this.map[t]]};var i={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}};function n(t,e,n,o,s,r){var l,a,d,c,u,p,h=i[o];if(h){if(!((a=(l=h.size*s)>4?e+t.getUint32(n+8,r):n+8)+l>t.byteLength)){if(1===s)return h.getValue(t,a,r);for(d=[],c=0;c<s;c+=1)d[c]=h.getValue(t,a+c*h.size,r);if(h.ascii){for(u="",c=0;c<d.length&&"\0"!==(p=d[c]);c+=1)u+=p;return u}return d}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}function o(t,e,i){return(!t||t[i])&&(!e||!0!==e[i])}function s(t,e,i,s,r,l,a,d){var c,u,p,h,g,m;if(i+6>t.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((u=i+2+12*(c=t.getUint16(i,s)))+4>t.byteLength)){for(p=0;p<c;p+=1)h=i+2+12*p,o(a,d,g=t.getUint16(h,s))&&(m=n(t,e,h,t.getUint16(h+2,s),t.getUint32(h+4,s),s),r[g]=m,l&&(l[g]=h));return t.getUint32(u,s)}console.log("Invalid Exif data: Invalid directory size.")}}i[7]=i[1],t.parseExifData=function(i,n,r,l,a){if(!a.disableExif){var d,c,u,p=a.includeExifTags,h=a.excludeExifTags||{34665:{37500:!0}},g=n+10;if(1165519206===i.getUint32(n+4))if(g+8>i.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===i.getUint16(n+8)){switch(i.getUint16(g)){case 18761:d=!0;break;case 19789:d=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===i.getUint16(g+2,d)?(c=i.getUint32(g+4,d),l.exif=new e,a.disableExifOffsets||(l.exifOffsets=new e,l.exifTiffOffset=g,l.exifLittleEndian=d),(c=s(i,g,g+c,d,l.exif,l.exifOffsets,p,h))&&o(p,h,"ifd1")&&(l.exif.ifd1=c,l.exifOffsets&&(l.exifOffsets.ifd1=g+c)),Object.keys(l.exif.ifds).forEach((function(t){!function(t,i,n,o,r,l,a){var d=t.exif[i];d&&(t.exif[i]=new e(i),t.exifOffsets&&(t.exifOffsets[i]=new e(i)),s(n,o,o+d,r,t.exif[i],t.exifOffsets&&t.exifOffsets[i],l&&l[i],a&&a[i]))}(l,t,i,g,d,p,h)})),(u=l.exif.ifd1)&&u[513]&&(u[513]=function(e,i,n){if(n){if(!(i+n>e.byteLength))return new Blob([t.bufferSlice.call(e.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(i,g+u[513],u[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},t.metaDataParsers.jpeg[65505].push(t.parseExifData),t.exifWriters={274:function(t,e,i){var n=e.exifOffsets[274];return n?(new DataView(t,n+8,2).setUint16(0,i,e.exifLittleEndian),t):t}},t.writeExifData=function(e,i,n,o){return t.exifWriters[i.exif.map[n]](e,i,o)},t.ExifMap=e},e(t.exports?xg.exports:window.loadImage)}(_g);!function(t){var e;e=function(t){var e=t.ExifMap.prototype;e.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},e.tags.ifd1=e.tags,e.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},e.getText=function(t){var e=this.get(t);switch(t){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[t][e];case"ExifVersion":case"FlashpixVersion":if(!e)return;return String.fromCharCode(e[0],e[1],e[2],e[3]);case"ComponentsConfiguration":if(!e)return;return this.stringValues[t][e[0]]+this.stringValues[t][e[1]]+this.stringValues[t][e[2]]+this.stringValues[t][e[3]];case"GPSVersionID":if(!e)return;return e[0]+"."+e[1]+"."+e[2]+"."+e[3]}return String(e)},e.getAll=function(){var t,e,i,n={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&((e=this[t])&&e.getAll?n[this.ifds[t].name]=e.getAll():(i=this.tags[t])&&(n[i]=this.getText(i)));return n},e.getName=function(t){var e=this.tags[t];return"object"==typeof e?this.ifds[t].name:e},function(){var t,i,n,o=e.tags;for(t in o)if(Object.prototype.hasOwnProperty.call(o,t))if(i=e.ifds[t])for(t in n=o[t])Object.prototype.hasOwnProperty.call(n,t)&&(i.map[n[t]]=Number(t));else e.map[o[t]]=Number(t)}()},e(t.exports?xg.exports:window.loadImage)}({exports:{}});var Cg={exports:{}};!function(t){var e;e=function(t){function e(){}function i(t,e,i,n,o){return"binary"===e.types[t]?new Blob([i.buffer.slice(n,n+o)]):"Uint16"===e.types[t]?i.getUint16(n):function(t,e,i){for(var n="",o=e+i,s=e;s<o;s+=1)n+=String.fromCharCode(t.getUint8(s));return n}(i,n,o)}function n(t,e){return void 0===t?e:t instanceof Array?(t.push(e),t):[t,e]}function o(t,e,o,s,r,l){for(var a,d,c,u=e+o,p=e;p<u;)28===t.getUint8(p)&&2===t.getUint8(p+1)&&(c=t.getUint8(p+2),r&&!r[c]||l&&l[c]||(d=t.getInt16(p+3),a=i(c,s.iptc,t,p+5,d),s.iptc[c]=n(s.iptc[c],a),s.iptcOffsets&&(s.iptcOffsets[c]=p))),p+=1}function s(t,e){return 943868237===t.getUint32(e)&&1028===t.getUint16(e+4)}function r(t,e){var i=t.getUint8(e+7);return i%2!=0&&(i+=1),0===i&&(i=4),i}e.prototype.map={ObjectName:5},e.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},e.prototype.get=function(t){return this[t]||this[this.map[t]]},t.parseIptcData=function(t,i,n,l,a){if(!a.disableIptc)for(var d=i+n;i+8<d;){if(s(t,i)){var c=r(t,i),u=i+8+c;if(u>d){console.log("Invalid IPTC data: Invalid segment offset.");break}var p=t.getUint16(i+6+c);if(i+p>d){console.log("Invalid IPTC data: Invalid segment size.");break}return l.iptc=new e,a.disableIptcOffsets||(l.iptcOffsets=new e),void o(t,u,p,l,a.includeIptcTags,a.excludeIptcTags||{202:!0})}i+=1}},t.metaDataParsers.jpeg[65517].push(t.parseIptcData),t.IptcMap=e},e(t.exports?xg.exports:window.loadImage)}(Cg);!function(t){var e;e=function(t){var e=t.IptcMap.prototype;e.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},e.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},e.getText=function(t){var e=this.get(t),i=this.map[t],n=this.stringValues[i];return n?n[e]:String(e)},e.getAll=function(){var t,e,i={};for(t in this)Object.prototype.hasOwnProperty.call(this,t)&&(e=this.tags[t])&&(i[e]=this.getText(e));return i},e.getName=function(t){return this.tags[t]},function(){var t,i=e.tags,n=e.map||{};for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[i[t]]=Number(t))}()},e(t.exports?xg.exports:window.loadImage)}({exports:{}});!function(t){var e;e=function(t){var e=t.transform,i=t.requiresCanvas,n=t.requiresMetaData,o=t.transformCoordinates,s=t.getTransformedOptions;function r(e,i){var n=e&&e.orientation;return!0===n&&!t.orientation||1===n&&t.orientation||(!i||t.orientation)&&n>1&&n<9}function l(t,e){return t!==e&&(1===t&&e>1&&e<9||t>1&&t<9)}function a(t,e){if(e>1&&e<9)switch(t){case 2:case 4:return e>4;case 5:case 7:return e%2==0;case 6:case 8:return 2===e||4===e||5===e||7===e}return!1}!function(t){if(t.global.document){var e=document.createElement("img");e.onload=function(){if(t.orientation=2===e.width&&3===e.height,t.orientation){var i=t.createCanvas(1,1,!0).getContext("2d");i.drawImage(e,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==i.getImageData(0,0,1,1).data.toString()}},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="}}(t),t.requiresCanvas=function(e){return r(e)||i.call(t,e)},t.requiresMetaData=function(e){return r(e,!0)||n.call(t,e)},t.transform=function(i,n,o,s,r){e.call(t,i,n,(function(e,i){if(i){var n=t.orientation&&i.exif&&i.exif.get("Orientation");if(n>4&&n<9){var s=i.originalWidth,r=i.originalHeight;i.originalWidth=r,i.originalHeight=s}}o(e,i)}),s,r)},t.getTransformedOptions=function(e,i,n){var o=s.call(t,e,i),r=n.exif&&n.exif.get("Orientation"),d=o.orientation,c=t.orientation&&r;if(!0===d&&(d=r),!l(d,c))return o;var u=o.top,p=o.right,h=o.bottom,g=o.left,m={};for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(m[f]=o[f]);if(m.orientation=d,(d>4&&!(c>4)||d<5&&c>4)&&(m.maxWidth=o.maxHeight,m.maxHeight=o.maxWidth,m.minWidth=o.minHeight,m.minHeight=o.minWidth,m.sourceWidth=o.sourceHeight,m.sourceHeight=o.sourceWidth),c>1){switch(c){case 2:p=o.left,g=o.right;break;case 3:u=o.bottom,p=o.left,h=o.top,g=o.right;break;case 4:u=o.bottom,h=o.top;break;case 5:u=o.left,p=o.bottom,h=o.right,g=o.top;break;case 6:u=o.left,p=o.top,h=o.right,g=o.bottom;break;case 7:u=o.right,p=o.top,h=o.left,g=o.bottom;break;case 8:u=o.right,p=o.bottom,h=o.left,g=o.top}if(a(d,c)){var b=u,v=p;u=h,p=g,h=b,g=v}}switch(m.top=u,m.right=p,m.bottom=h,m.left=g,d){case 2:m.right=g,m.left=p;break;case 3:m.top=h,m.right=g,m.bottom=u,m.left=p;break;case 4:m.top=h,m.bottom=u;break;case 5:m.top=g,m.right=h,m.bottom=p,m.left=u;break;case 6:m.top=p,m.right=h,m.bottom=g,m.left=u;break;case 7:m.top=p,m.right=u,m.bottom=g,m.left=h;break;case 8:m.top=g,m.right=u,m.bottom=p,m.left=h}return m},t.transformCoordinates=function(e,i,n){o.call(t,e,i,n);var s=i.orientation,r=t.orientation&&n.exif&&n.exif.get("Orientation");if(l(s,r)){var d=e.getContext("2d"),c=e.width,u=e.height,p=c,h=u;switch((s>4&&!(r>4)||s<5&&r>4)&&(e.width=u,e.height=c),s>4&&(p=u,h=c),r){case 2:d.translate(p,0),d.scale(-1,1);break;case 3:d.translate(p,h),d.rotate(Math.PI);break;case 4:d.translate(0,h),d.scale(1,-1);break;case 5:d.rotate(-.5*Math.PI),d.scale(-1,1);break;case 6:d.rotate(-.5*Math.PI),d.translate(-p,0);break;case 7:d.rotate(-.5*Math.PI),d.translate(-p,h),d.scale(1,-1);break;case 8:d.rotate(.5*Math.PI),d.translate(0,-h)}switch(a(s,r)&&(d.translate(p,h),d.rotate(Math.PI)),s){case 2:d.translate(c,0),d.scale(-1,1);break;case 3:d.translate(c,u),d.rotate(Math.PI);break;case 4:d.translate(0,u),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-u);break;case 7:d.rotate(.5*Math.PI),d.translate(c,-u),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-c,0)}}}},e(t.exports?xg.exports:window.loadImage)}({exports:{}});var kg=xg.exports;class Eg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e;const o=this.builder.dom;this.dom=o;let s,r=i.querySelector("#divImageTool");if(!r){let t=`\n                <div id="divImageTool" class="is-tool">\n                    <div role="button" tabindex="0" class="image-embed" style="${this.builder.opts.imageEmbed?"":"display:none;"}width:40px;height:40px;overflow:hidden;">\n                        <div style="position:absolute;width:100%;height:100%;"><svg class="is-icon-flex" style="position: absolute;top: 13px;left: 15px;width: 14px;height: 14px;"><use xlink:href="#ion-image"></use></svg></div>\n                        <input title="${e.out("Change Image")}" data-title="${e.out("Change Image")}" id="fileEmbedImage" type="file" accept="image/*" style="position:absolute;top:-20px;left:0;width:40px;height:60px;opacity: 0;cursor: pointer;"/>\n                    </div>\n                    <button tabindex="0" title="${e.out("Link")}" data-title="${e.out("Link")}" class="image-link" style="width:40px;height:40px;"><svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#ion-link"></use></svg></button> \n                    <button tabindex="0" title="${e.out("Edit")}" data-title="${e.out("Edit")}" class="image-edit" style="width:40px;height:40px;"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#ion-android-create"></use></svg></button>\n                </div>\n                <div id="divImageProgress">\n                    <div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                        <div class="dot"></div>\n                    </div>\n                </div>\n                \n                <div class="is-modal imageedit" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <div class="is-modal-content">\n                        <div class="imageedit-crop" style="display:flex;height:80px;align-items:center;align-self:flex-start;">\n                            <button title="5x5" data-crop-size="1" style="width: 60px;height: 60px;">5x5</button>\n                            <button title="4x3" data-crop-size="1.33333" style="width: 60px;height: 45px;">4x3</button>\n                            <button title="3x4" data-crop-size="0.75" style="width: 45px;height: 60px;">3x4</button>\n                            <button title="6x4" data-crop-size="1.5" style="width: 60px;height: 40px;">6x4</button>\n                            <button title="4x6" data-crop-size="0.6666" style="width: 40px;height: 60px;">4x6</button>\n                            <button title="16x9" data-crop-size="1.77" style="width: 60px;height: 35px;">16x9</button>\n                            <button title="${e.out("Free")}" data-crop-size="" style="width: 60px;height: 45px;">${e.out("Free")}</button>\n                        </div>\n                        <div class="imageedit-preview" style="max-width:1000px;width:100%;max-height:550px;">\n                        </div>\n                        <div style="margin-top:15px;text-align:right;align-self:flex-end;">\n                            <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                            <button title="${e.out("Apply")}" class="input-ok classic-primary">${e.out("Apply")}</button>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class="is-modal imagelink" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <div class="is-modal-content">\n\n                        <label for="inpImageLinkSource" style="display:block">${e.out("Source")}:</label>\n                        <div class="image-src">\n                            <input id="inpImageLinkSource" class="input-src" type="text"/>\n                            <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                                ${this.builder.opts.selectIcon}\n                            </button>\n                \n                            <div class="image-larger1" style="position:relative;flex:none;box-shadow: 0px 3px 6px -6px rgba(0, 0, 0, 0.32);">\n                                <form class="form-upload-larger" target="frameTargetImageUpload" method="post" action="${this.builder.opts.largerImageHandler}" enctype="multipart/form-data" style="border-radius:1px;position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;">\n\t\t\t\t                    <input id="hidRefId1" name="hidRefId" type="hidden" value="" />\n                                    <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                    <input onclick="blur()" title="${e.out("Select")}" id="fileImage1" name="fileImage" type="file" accept="image/*" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                                </form>\n\n                                <iframe id="frameTargetImageUpload" name="frameTargetImageUpload" tabindex="-1" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                            </div>\n                        </div>\n\n                        <label for="inpImageLinkTitle" style="margin-top:14px;display:block">${e.out("Title")}:</label>\n                        <input id="inpImageLinkTitle" class="input-title" type="text" style="width:100%;border-top: none;"/>\n\n                        <label for="inpImageLinkLink" style="margin-top:14px;display:block">${e.out("Link")}:</label>\n                        <div class="image-link">\n                            <input id="inpImageLinkLink" class="input-link" type="text" style="width:100%;border-top: none;"/>\n                            <button title="${e.out("Select")}" class="input-select2" style="flex:none;">\n                                ${this.builder.opts.selectIcon}\n                            </button>\n                            \n                            <button title="${e.out(this.builder.opts.otherSelectCaption)}" class="input-select-other" style="display:none;width:50px">${this.builder.opts.otherSelectIcon}</button>\n   \n                            <div class="image-larger2" style="position:relative;flex:none;box-shadow: 0px 3px 6px -6px rgba(0, 0, 0, 0.32);">\n                                <form class="form-upload-larger" target="frameTargetImageUpload" method="post" action="${this.builder.opts.fileHandler?this.builder.opts.fileHandler:this.builder.opts.largerImageHandler}" enctype="multipart/form-data" style="border-radius:1px;position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;">\n\t\t\t\t                    <input id="hidRefId2" name="hidRefId" type="hidden" value="" />\n                                    <svg class="is-icon-flex"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                    <input onclick="blur()" title="${e.out("Select")}" id="fileImage2" name="fileImage" type="file" accept="*" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                                </form>\n                            </div>\n                        </div>\n\n                        <label style="display:block;margin-top:14px;">\n                            <input class="input-newwindow" type="checkbox" />  ${e.out("Open new window")}&nbsp;\n                        </label>\n                        <label id="lblImageLinkOpenLightbox" style="${this.builder.useLightbox?"display:block":"display:none"};margin-top:5px;margin-bottom:14px;">\n                            <input class="input-openlightbox" type="checkbox" />  ${e.out("Open in a lightbox (for image, video or Youtube)")}&nbsp;\n                        </label>\n                        \n                        <div style="text-align:right;margin-top:14px;">\n                            <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                            <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="is-modal imageselect" style="z-index:10005" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <div style="max-width:${this.builder.imageSelectWidth};height:${this.builder.imageSelectHeight};padding:0;">\n                        <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                    </div>\n                </div>\n\n                <div class="is-modal mediaselect" style="z-index:10005" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <div style="max-width:${this.builder.mediaSelectWidth};height:${this.builder.mediaSelectHeight};padding:0;">\n                        <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                    </div>\n                </div>\n\n                <div id="divImageResizerOverlay" class="is-tool">\n                </div>\n                <div id="divImageResizer" data-x=0 data-y=0 class="is-tool moveable resizable">\n                </div>\n                `;o.appendHtml(i,t),r=i.querySelector("#divImageTool"),this.imageTool=r,s=document.querySelector("#divImageResizer"),this.imageResizer=s;const l=document.querySelector("#divImageResizerOverlay");this.builder.moveable=new yg(document.body,{target:s,resizable:!0,throttleResize:0,keepRatio:!0}).on("resizeStart",(()=>{l.style.display="block"})).on("resize",(({target:t,width:e,height:s})=>{if(0===e||0===s||isNaN(e)||isNaN(s))return;let r;this.imageTool.style.display="",r=this.builder.iframe?n.querySelector(".is-element-tool"):i.querySelector(".is-element-tool"),r.style.display="";let l,a,d=this.builder.activeImage,c=!1;if(o.hasClass(d.parentNode,"img-circular")&&(d=d.parentNode,c=!0),c){let t=parseFloat(window.getComputedStyle(d.parentNode).getPropertyValue("padding-left")),i=parseFloat(window.getComputedStyle(d.parentNode).getPropertyValue("padding-right")),n=d.parentNode.offsetWidth*this.builder.opts.zoom-t-i;e>=n&&(e=n),s>=e?(d.style.width=e/this.builder.opts.zoom+"px",d.style.height=e/this.builder.opts.zoom+"px",d.querySelector("img").style.width=e/this.builder.opts.zoom+"px",d.querySelector("img").style.height=e/this.builder.opts.zoom+"px"):(d.style.width=e/this.builder.opts.zoom+"px",d.style.height=s/this.builder.opts.zoom+"px",d.querySelector("img").style.width=e/this.builder.opts.zoom+"px",d.querySelector("img").style.height=s/this.builder.opts.zoom+"px")}else d.style.width=e/this.builder.opts.zoom+"px",d.style.height="auto";if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;l=d.getBoundingClientRect().top+t,a=d.getBoundingClientRect().left+e}else l=d.getBoundingClientRect().top+window.pageYOffset,a=d.getBoundingClientRect().left+window.pageXOffset;t.style.top=l+"px",t.style.left=a+"px",t.style.width=d.offsetWidth+"px",t.style.height=d.offsetHeight+"px",this.repositionHandler(d.offsetWidth,d.offsetHeight),document.selection?document.selection.empty():window.getSelection().removeAllRanges()})).on("resizeEnd",(({target:t})=>{l.style.display="";let e=this.builder.activeImage,i=!1;o.hasClass(e.parentNode,"img-circular")&&(e=e.parentNode,i=!0);var n=getComputedStyle(e.parentNode),s=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),r=parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),a=e.parentNode.offsetWidth-s-r;if(!i){var d=a,c=e.offsetWidth,u=c/d*100;e.style.width=u+"%"}this.builder.opts.emailMode&&e.setAttribute("width",c),t.setAttribute("data-resized",1),setTimeout((()=>{t.setAttribute("data-resized",0)}),300),this.builder.opts.onChange()})),document.querySelector(".moveable-control-box").style.display="none",s.addEventListener("click",(()=>{this.builder.activeImage.click(),this.repositionImageTool(),this.builder.elmTool.repositionElementTool()}));let a=r.querySelector("#fileEmbedImage");o.addEventListener(a,"change",(t=>{this.builder.uo.saveForUndo();var e=t.target;let n,o,s=this.builder.activeImage,l=i.querySelector("#divImageProgress");if(l.style.display="table",l.style.width=s.offsetWidth*this.builder.opts.zoom+"px",l.style.height=s.offsetHeight*this.builder.opts.zoom+"px",this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;n=s.getBoundingClientRect().top+t,o=s.getBoundingClientRect().left+e}else n=s.getBoundingClientRect().top+window.pageYOffset,o=s.getBoundingClientRect().left+window.pageXOffset;l.style.top=n+"px",l.style.left=o+"px";try{s.setAttribute("data-filename",e.files[0].name),this.processImage(e.files[0],s,(()=>{l.style.display="none",a=r.querySelector("#fileEmbedImage"),a.value="",this.refreshIfIsModule(s),this.builder.opts.onChange(),this.builder.elmTool.refresh()}))}catch(t){l.style.display="none"}})),this.builder.opts.onImageBrowseClick&&(a=r.querySelector(".image-embed"),o.addEventListener(a,"click",(t=>(this.builder.opts.onImageBrowseClick(),t.preventDefault(),!1))));let d=i.querySelector(".imagelink");if(this.builder.opts.onOtherSelectClick||this.builder.opts.otherSelect){d.querySelector(".input-select-other").style.display="block";const t=d.querySelector(".input-select-other");t&&o.addEventListener(t,"click",(n=>{if(this.builder.opts.onOtherSelectClick)this.builder.opts.onOtherSelectClick({targetInput:d.querySelector(".input-link"),theTrigger:d.querySelector(".input-select-other")});else{let n=i.querySelector(".is-modal.otherselect");this.builder.opts.assetRefresh&&(n.querySelector("iframe").src=this.builder.opts.otherSelect,this.builder.opts.assetRefresh=!1),"about:blank"===n.querySelector("iframe").src&&(n.querySelector("iframe").src=this.builder.opts.otherSelect),e.showModal(n,!1,(()=>{t.removeAttribute("data-focus"),t.focus()}),!1),t.setAttribute("data-focus",!0)}this.builder.targetInput=d.querySelector(".input-link"),this.builder.targetCallback=null,this.builder.targetAssetType="all",n.preventDefault(),n.stopImmediatePropagation()}))}""!==this.builder.opts.largerImageHandler||this.builder.opts.onLargerImageUpload||(d.querySelector(".image-larger1").style.display="none",d.querySelector(".image-larger2").style.display="none"),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(d.querySelector(".input-select").style.display="none",d.querySelector(".input-select2").style.display="none");const c=r.querySelector(".image-link");o.addEventListener(c,"click",(()=>{if(document.querySelector(".moveable-control-box").style.display="none",this.builder.opts.onImageSettingClick)return this.builder.opts.onImageSettingClick(),!1;let t,i=this.builder.activeImage;"a"===i.parentNode.tagName.toLowerCase()&&1===i.parentNode.childElementCount&&(t=i.parentNode);let n=i.getAttribute("src"),s=i.getAttribute("alt"),r=d.querySelector(".input-src");-1===n.indexOf("base64")?r.value=n:r.value="[Image Data]";let l=d.querySelector(".input-title");l.value=s;let a=d.querySelector(".input-link");a.value="";let u=d.querySelector(".input-newwindow");u.checked=!1;let p=d.querySelector(".input-openlightbox");if(p.checked=!1,t){if(a.value=t.getAttribute("href"),""===s){let e=t.getAttribute("title");e&&(l.value=e)}var h=t.getAttribute("target");u.checked="_blank"===h,o.hasClass(t,"is-lightbox")?p.checked=!0:p.checked=!1}e.showModal(d,!0,(()=>{c.removeAttribute("data-focus"),c.focus()}),!0),c.setAttribute("data-focus",!0),r.focus()})),a=d.querySelector(".input-cancel"),o.addEventListener(a,"click",(()=>{e.hideModal(d),document.querySelector(".moveable-control-box").style.display="block"})),a=d.querySelector(".input-ok"),o.addEventListener(a,"click",(()=>{this.builder.uo.saveForUndo();let t,i=this.builder.activeImage;"a"===i.parentNode.tagName.toLowerCase()&&1===i.parentNode.childElementCount&&(t=i.parentNode);let n=d.querySelector(".input-src").value,s=d.querySelector(".input-title").value,r=d.querySelector(".input-link").value;-1===n.indexOf("[Image Data]")&&i.setAttribute("src",n),i.setAttribute("alt",s),""!==r?t?(t.setAttribute("href",r),t.setAttribute("title",s),d.querySelector(".input-newwindow").checked?t.setAttribute("target","_blank"):t.removeAttribute("target"),d.querySelector(".input-openlightbox").checked?o.addClass(t,"is-lightbox"):o.removeClass(t,"is-lightbox")):(t=o.createElement("a"),t.setAttribute("href",r),t.setAttribute("title",s),t.innerHTML=i.outerHTML,d.querySelector(".input-newwindow").checked?t.setAttribute("target","_blank"):t.removeAttribute("target"),d.querySelector(".input-openlightbox").checked?o.addClass(t,"is-lightbox"):o.removeClass(t,"is-lightbox"),i.outerHTML=t.outerHTML):t&&(t.outerHTML=t.innerHTML),this.refreshIfIsModule(i),this.builder.opts.onChange(),this.builder.opts.onRender(),e.hideModal(d),this.builder.elmTool.refresh()}));let u=d.querySelector(".image-src");if(this.builder.opts.onImageSelectClick||this.builder.opts.imageselect){const t=d.querySelector(".input-select");t&&o.addEventListener(t,"click",(()=>{if(this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:d.querySelector(".input-src"),theTrigger:t});else{let n=i.querySelector(".is-modal.imageselect"),o=n.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.imageselect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.imageselect),e.showModal(n,!1,(()=>{t.removeAttribute("data-focus"),t.focus()})),t.setAttribute("data-focus",!0)}this.builder.targetInput=d.querySelector(".input-src"),this.builder.targetCallback=null,this.builder.targetAssetType="image"}));const n=d.querySelector(".input-select2");n&&o.addEventListener(n,"click",(()=>{if(this.builder.opts.onFileSelectClick)this.builder.opts.onFileSelectClick({targetInput:d.querySelector(".input-link"),theTrigger:n}),this.builder.targetInput=d.querySelector(".input-link"),this.builder.targetCallback=null,this.builder.targetAssetType="all";else if(""!==this.builder.opts.fileselect){let t=i.querySelector(".is-modal.fileselect"),o=t.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.fileselect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.fileselect),e.showModal(t,!1,(()=>{n.removeAttribute("data-focus"),n.focus()}),!0),n.setAttribute("data-focus",!0),this.builder.targetInput=d.querySelector(".input-link"),this.builder.targetCallback=null,this.builder.targetAssetType="all"}else if(this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:d.querySelector(".input-link"),theTrigger:n}),this.builder.targetInput=d.querySelector(".input-link"),this.builder.targetCallback=null,this.builder.targetAssetType="media";else{let t=i.querySelector(".is-modal.imageselect"),o=t.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.imageselect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.imageselect),e.showModal(t,!1,(()=>{n.removeAttribute("data-focus"),n.focus()})),n.setAttribute("data-focus",!0),this.builder.targetInput=d.querySelector(".input-link"),this.builder.targetCallback=null,this.builder.targetAssetType="media"}}))}else o.removeClass(u,"image-select");let p=d.querySelector("#fileImage1");o.addEventListener(p,"change",(t=>{let e=p;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;o.addClass(i,"please-wait"),d.querySelector("#hidRefId1").value=this.builder.opts.customval,this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):i.submit(),p.value=""}));let h=d.querySelector("#fileImage2");o.addEventListener(h,"change",(t=>{let e=h;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;o.addClass(i,"please-wait"),d.querySelector("#hidRefId2").value=this.builder.opts.customval,this.builder.opts.onFileUpload?this.builder.opts.onFileUpload(t):this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):i.submit(),h.value=""}));let g=i.querySelector(".imageedit");const m=r.querySelector(".image-edit");o.addEventListener(m,"click",(()=>{let t=this.builder.activeImage,i=g.querySelector(".imageedit-preview");i.innerHTML='<img style="max-width:100%;object-fit:contain;height:100%;"/>';let n=g.querySelector("img");if(this.builder.onImageEditClick){if(!this.builder.onImageEditClick(t,n))return}e.showModal(g,!0,(()=>{m.removeAttribute("data-focus"),m.focus()})),m.setAttribute("data-focus",!0);if(i.style.height="",t.offsetWidth<800&&t.offsetHeight<550)i.style.width=t.offsetWidth+"px";else{800*t.offsetHeight/t.offsetWidth<=550?i.style.width="800px":i.style.height="550px"}window.innerHeight<=800&&(i.style.height="350px"),-1===t.src.indexOf("base64")?n.src=t.src+(-1===t.src.indexOf("?")?"?":"&")+`timestamp=${(new Date).getTime()}`:n.src=t.src,this.builder.setCropperConfig?this.cropper=new Hr(n,this.builder.setCropperConfig):this.cropper=new Hr(n,{zoomable:!1}),document.querySelector(".moveable-control-box").style.display="none"}));let f=g.querySelector(".imageedit-crop").querySelectorAll("button");Array.prototype.forEach.call(f,(t=>{o.addEventListener(t,"click",(()=>{let e=1*t.getAttribute("data-crop-size");this.cropper.setAspectRatio(e)}))}));let b=g.querySelector(".input-cancel");o.addEventListener(b,"click",(()=>{e.hideModal(g),document.querySelector(".moveable-control-box").style.display="block"})),a=g.querySelector(".input-ok"),o.addEventListener(a,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeImage,i=t.getAttribute("data-filename"),n="jpg";if(i)n=i.substr(i.lastIndexOf(".")+1).toLowerCase();else{let e=t.src;e.indexOf("/")>-1?t.setAttribute("data-filename",e.substr(e.lastIndexOf("/")+1)):t.setAttribute("data-filename",e),n=e.substr(e.lastIndexOf(".")+1).toLowerCase()}if(this.builder.opts.imageRenameOnEdit){let e="";if(-1===t.src.indexOf("base64")){let i=t.getAttribute("src"),n=i.substring(i.lastIndexOf("/")+1);e=o.baseName(n)}else e=o.baseName(t.getAttribute("data-filename"));let i="";-1!==e.indexOf("-edit")&&(e=e.substr(0,e.indexOf("-edit"))),i=e+"-edit"+this.util.makeId(),i=i.replaceAll("%20","-"),t.setAttribute("data-filename",i+"."+n)}t.src="jpg"===n||"jpeg"===n||"webm"===n||"webp"===n?this.cropper.getCroppedCanvas({fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toDataURL("image/jpeg"):this.cropper.getCroppedCanvas({}).toDataURL(),this.refreshIfIsModule(t),this.builder.opts.onChange(),e.hideModal(g),this.builder.elmTool.refresh()}))}this.builder.imgs=[]}refreshIfIsModule(t){if(this.dom.parentsHasAttribute(t,"data-html")){if(this.imageTool.style.display="",t.hasAttribute("data-sync")){let e=t.getAttribute("data-src"),i=t.getAttribute("data-filename");if(e){let n=t;for(;!n.getAttribute("data-html");)n=n.parentNode;let o=n.querySelectorAll("img");Array.prototype.forEach.call(o,(n=>{n.src===e&&(n.src=t.src,n.removeAttribute("data-src"),n.setAttribute("data-filename",i))})),t.removeAttribute("data-src")}}setTimeout((()=>{this.util.refreshModule(),this.imageTool.style.display=""}),1e3)}else t.onload=()=>{this.refresh()}}refresh(){const t=this.dom;if(this.builder.activeImage){let e=this.imageTool;e.style.display="",setTimeout((()=>{let i=this.builder.activeImage;if(!i)return;t.hasClass(i.parentNode,"img-circular")&&(i=i.parentNode),e.style.display="flex";let n,o,s=e.offsetWidth,r=i.offsetWidth*this.builder.opts.zoom;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;n=i.getBoundingClientRect().top+t,o=i.getBoundingClientRect().left+e}else n=i.getBoundingClientRect().top+window.pageYOffset,o=i.getBoundingClientRect().left+window.pageXOffset;let l=o+(r/2-s/2);const a=window.innerWidth;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;s+o>a&&(l=i.getBoundingClientRect().left+t)}else s+o>a&&(l=i.getBoundingClientRect().left);e.style.top=n+"px",e.style.left=l+"px";let d=this.imageResizer;d.style.top=n+"px",d.style.left=o+"px",d.style.width=i.offsetWidth*this.builder.opts.zoom+"px",d.style.height=i.offsetHeight*this.builder.opts.zoom+"px",d.style.display="block",this.repositionHandler(i.offsetWidth,i.offsetHeight),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="block",0===i.offsetWidth&&(e.style.display="",this.builder.activeImage=null,d.style.display="none",d.style.top="-10px",d.style.left="-10px",d.style.width="1px",d.style.height="1px",this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"),this.util.repositionColumnTool()}),0)}}repositionImageTool(){const t=this.dom;if(this.builder.activeImage){let e=this.imageTool,i=this.builder.activeImage;t.hasClass(i.parentNode,"img-circular")&&(i=i.parentNode),e.style.display="flex";let n,o,s=e.offsetWidth,r=i.offsetWidth*this.builder.opts.zoom;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;n=i.getBoundingClientRect().top+t,o=i.getBoundingClientRect().left+e}else n=i.getBoundingClientRect().top+window.pageYOffset,o=i.getBoundingClientRect().left+window.pageXOffset;let l=o+(r/2-s/2);const a=window.innerWidth;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;s+o>a&&(l=i.getBoundingClientRect().left+t)}else s+o>a&&(l=i.getBoundingClientRect().left);e.style.top=n+"px",e.style.left=l+"px";let d=this.imageResizer;d.style.top=n+"px",d.style.left=o+"px",d.style.width=i.offsetWidth*this.builder.opts.zoom+"px",d.style.height=i.offsetHeight*this.builder.opts.zoom+"px",d.style.display="block",this.repositionHandler(i.offsetWidth,i.offsetHeight),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="block"}}click(t){const e=this.dom;let i=t.target;if("img"===i.tagName.toLowerCase()){let n=!1;if(i.hasAttribute("data-fixed")&&(n=!0),n){this.imageTool.style.display="",this.builder.activeImage=null;let t=this.imageResizer;t.style.display="none",t.style.top="-10px",t.style.left="-10px",t.style.width="1px",t.style.height="1px",this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}else{this.builder.activeImage=i,e.hasClass(i.parentNode,"img-circular")&&(i=i.parentNode);let n=this.imageTool;n.style.display="flex";let o,s,r=n.offsetWidth,l=i.offsetWidth*this.builder.opts.zoom;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;o=i.getBoundingClientRect().top+t,s=i.getBoundingClientRect().left+e}else o=i.getBoundingClientRect().top+window.pageYOffset,s=i.getBoundingClientRect().left+window.pageXOffset;let a=s+(l/2-r/2);const d=window.innerWidth;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;r+s>d&&(a=i.getBoundingClientRect().left+t)}else r+s>d&&(a=i.getBoundingClientRect().left);if(n.style.top=o+"px",n.style.left=a+"px",i.hasAttribute("data-noresize")){let t=this.imageResizer;t.style.display="none",t.style.top="-10px",t.style.left="-10px",t.style.width="1px",t.style.height="1px",this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}else{let t,e,n=this.imageResizer;if(this.builder.iframe){let n=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,o=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;t=i.getBoundingClientRect().top+n,e=i.getBoundingClientRect().left+o}else t=i.getBoundingClientRect().top+window.pageYOffset,e=i.getBoundingClientRect().left+window.pageXOffset;n.style.top=t+"px",n.style.left=e+"px",n.style.width=i.offsetWidth*this.builder.opts.zoom+"px",n.style.height=i.offsetHeight*this.builder.opts.zoom+"px",n.style.display="block",this.repositionHandler(i.offsetWidth,i.offsetHeight);let o,s=i.style.width;-1!==s.indexOf("%")?(s=1*s.replace("%",""),o=100*i.offsetWidth/s):o=i.offsetWidth,n.setAttribute("data-width",Math.round(o)),this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="block"}let c=!1;if(t.screenX&&0!==t.screenX&&t.screenY&&0!==t.screenY||(c=!0),c){n.style.display="";let t=this.imageResizer;t.style.display="none",t.style.top="-10px",t.style.left="-10px",t.style.width="1px",t.style.height="1px",this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}}}else{this.imageTool.style.display="",this.builder.activeImage=null;let t=this.imageResizer;t.style.display="none",t.style.top="-10px",t.style.left="-10px",t.style.width="1px",t.style.height="1px",this.builder.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none"}}clearImageResizer(){this.builder.imgs.forEach((t=>{try{t.destroy()}catch(t){}let e=this.builder.imgs.indexOf(t);e>-1&&this.builder.imgs.splice(e,1)})),document.querySelectorAll("[data-mov]").forEach((t=>{t.removeAttribute("data-mov")}))}repositionHandler(t,e){let i=document.querySelector("#divImageResizer");i.style.width=t*this.builder.opts.zoom+"px",i.style.height=e*this.builder.opts.zoom+"px"}processImage(t,e,i){if(!t)return i(),!1;if(!document.getElementById("myTmpCanvasNoCrop")){var n=document.createElement("canvas");n.id="myTmpCanvasNoCrop",n.style.display="none",document.querySelector("body").appendChild(n)}var o,s,r;"jpg"===(o=t.name?t.name.substr(t.name.lastIndexOf(".")+1).toLowerCase():t.substr(t.lastIndexOf(".")+1).toLowerCase())||"jpeg"===o?(s="image/jpeg",r=this.builder.opts.imageQuality):(s="image/png",r=1),-1===this.builder.opts.maxEmbedImageWidth?kg(t,(t=>{e.src=t.toDataURL(s,r),i()}),{canvas:!0}):kg(t,(t=>{e.src=t.toDataURL(s,r),i()}),{maxWidth:this.builder.opts.maxEmbedImageWidth,maxHeight:this.builder.opts.maxEmbedImageWidth,canvas:!0})}}class Ag{constructor(t){this.builder=t;const e=this.builder.util;this.util=e;const i=this.builder.dom;this.dom=i;const n=this.builder.builderStuff;this.builderStuff=n;let o=n.querySelector(".is-modal.buttoneditor");if(!o){let t=`\n            <div class="is-modal is-modal-content buttoneditor" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-bar is-draggable">\n                    ${e.out("Button")}\n                    <button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">&#10005;</button>\n                </div>\n                <div style="padding:0;height:100%;">\n                    <div class="is-tabs" data-group="button" style="position:relative;z-index:1">\n                        <a title="${e.out("General")}" href="" data-content="divButtonGeneral" class="active">${e.out("General")}</a>\n                        <a title="${e.out("Hover")}" href="" data-content="divButtonHover">${e.out("Hover")}</a>\n                        <a title="${e.out("Text")}" href="" data-content="divButtonText">${e.out("Text")}</a>\n                        <a title="${e.out("Saved")}" href="" data-content="divMyButtons">${e.out("Saved")}</a>\n                        <a title="${e.out("Templates")}" href="" data-content="divButtonTemplates">${e.out("Templates")}</a>\n                    </div>\n                    <div id="divButtonGeneral" class="is-tab-content active" tabindex="-1" data-group="button" style="display: flex;\n                        height: 100%;\n                        width:100%;\n                        overflow-y: auto;\n                        position: absolute;\n                        border-top: 82px solid transparent;\n                        box-sizing: border-box;\n                        top: 0px;">\n\n                        <div class="flex flex-row">\n                            <div class="flex flex-col" style="margin-right: 40px;">\n                                <div>\n                                    <label>${e.out("Background Color")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Background Color")}" class="bg-color-command" style="width:45px;height:40px;border:rgb(0 0 0 / 6%) 1px solid;margin-right:4px"></button>\n                                </div>\n                            </div>\n                            \n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Text Color")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Text Color")}" class="text-color-command" style="width:45px;height:40px;border:rgb(0 0 0 / 6%) 1px solid;margin-right:4px"></button>\n                                </div>\n                            </div>\n                            <div class="flex flex-col" style="margin-left: 60px;">\n                                <div>\n                                    <label>${e.out("Width")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Auto")}" data-command="auto" class="width-command" style="margin-right:4px">${e.out("Auto")}</button>\n                                    <button title="${e.out("Full")}" data-command="full" class="width-command" style="margin-right:4px">${e.out("Full")}</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col" style="margin-right: 40px;">\n                                <div>\n                                    <label>${e.out("Border Color")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Transparent")}" data-command="transparent" class="border-color-command" style="margin-right:4px">${e.out("Transparent")}</button>\n                                    <button title="${e.out("Current")}" data-command="current" class="border-color-command" style="margin-right:4px">${e.out("Current")}</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Border Thickness")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("No Border")}" data-command="0" class="border-width-command" style="margin-right:4px">${e.out("No Border")}</button>\n                                    <button title="1px" data-command="1" class="border-width-command" style="text-transform:none;margin-right:4px">1px</button>\n                                    <button title="2px" data-command="2" class="border-width-command" style="text-transform:none;margin-right:4px">2px</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col" style="margin-right: 20px;">\n                                <div>\n                                    <label>${e.out("Padding Left/Right")}</label>:\n                                </div>\n                                <div class="flex flex-row" style="margin-top:5px">\n                                    <button title="2" data-command="2" class="paddingx-command" style="margin-right:4px">2</button>\n                                    <button title="3" data-command="3" class="paddingx-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="paddingx-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="paddingx-command" style="margin-right:4px">5</button>\n                                    <button title="6" data-command="6" class="paddingx-command" style="margin-right:4px">6</button>\n                                    <button title="7" data-command="7" class="paddingx-command" style="margin-right:4px">7</button>\n                                    <button title="8" data-command="8" class="paddingx-command" style="margin-right:4px">8</button>\n                                    <button title="9" data-command="9" class="paddingx-command" style="margin-right:4px">9</button>\n                                    <button title="10" data-command="10" class="paddingx-command" style="margin-right:4px">10</button>\n                                    <button title="11" data-command="11" class="paddingx-command" style="margin-right:4px">11</button>\n                                    <button title="12" data-command="12" class="paddingx-command" style="margin-right:4px">12</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col" style="display:none">\n                                <div>\n                                    <label>${e.out("Padding Y")}</label>:\n                                </div>\n                                <div class="flex flex-row" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="paddingy-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="paddingy-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="paddingy-command" style="margin-right:4px">2</button>\n                                    <button title="3" data-command="3" class="paddingy-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="paddingy-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="paddingy-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col" style="margin-right: 20px;">\n                                <div>\n                                    <label>${e.out("Padding Top")}</label>:\n                                </div>\n                                <div class="flex flex-row" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="paddingtop-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="paddingtop-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="paddingtop-command" style="margin-right:4px">2</button>\n                                    <button title="3" data-command="3" class="paddingtop-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="paddingtop-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="paddingtop-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Padding Bottom")}</label>:\n                                </div>\n                                <div class="flex flex-row" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="paddingbottom-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="paddingbottom-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="paddingbottom-command" style="margin-right:4px">2</button>\n                                    <button title="3" data-command="3" class="paddingbottom-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="paddingbottom-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="paddingbottom-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-col" style="margin:15px 0 0">\n                            <div>\n                                <label>${e.out("Border Radius")}</label>:\n                            </div>\n                            <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                <button title="${e.out("None")}" data-command="none" class="border-radius-command" style="margin-right:4px">${e.out("None")}</button>\n                                <button title="${e.out("SM")}" data-command="sm" class="border-radius-command" style="margin-right:4px">${e.out("SM")}</button>\n                                <button title="${e.out("Normal")}" data-command="normal" class="border-radius-command" style="margin-right:4px">${e.out("Normal")}</button>\n                                <button title="${e.out("MD")}" data-command="md" class="border-radius-command" style="margin-right:4px">${e.out("MD")}</button>\n                                <button title="${e.out("LG")}" data-command="lg" class="border-radius-command" style="margin-right:4px">${e.out("LG")}</button>\n                                <button title="${e.out("XL")}" data-command="xl" class="border-radius-command" style="margin-right:4px">${e.out("XL")}</button>\n                                <button title="${e.out("2XL")}" data-command="2xl" class="border-radius-command" style="margin-right:4px">${e.out("2XL")}</button>\n                                <button title="${e.out("3XL")}" data-command="3xl" class="border-radius-command" style="margin-right:4px">${e.out("3XL")}</button>\n                                <button title="${e.out("Full")}" data-command="full" class="border-radius-command" style="margin-right:4px">${e.out("Full")}</button>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col" style="margin-right: 20px;">\n                                <div>\n                                    <label>${e.out("Margin Left")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="ml-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="ml-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="ml-command" style="margin-right:2px">2</button>\n                                    <button title="3" data-command="3" class="ml-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="ml-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="ml-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Margin Right")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="mr-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="mr-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="mr-command" style="margin-right:2px">2</button>\n                                    <button title="3" data-command="3" class="mr-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="mr-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="mr-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col" style="margin-right: 20px;">\n                                <div>\n                                    <label>${e.out("Margin Top")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="mt-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="mt-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="mt-command" style="margin-right:2px">2</button>\n                                    <button title="3" data-command="3" class="mt-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="mt-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="mt-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Margin Bottom")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="0" data-command="0" class="mb-command" style="margin-right:4px">0</button>\n                                    <button title="1" data-command="1" class="mb-command" style="margin-right:4px">1</button>\n                                    <button title="2" data-command="2" class="mb-command" style="margin-right:2px">2</button>\n                                    <button title="3" data-command="3" class="mb-command" style="margin-right:4px">3</button>\n                                    <button title="4" data-command="4" class="mb-command" style="margin-right:4px">4</button>\n                                    <button title="5" data-command="5" class="mb-command" style="margin-right:4px">5</button>\n                                </div>\n                            </div>\n\n                        </div>\n\n                    </div>\n                    <div id="divButtonHover" class="is-tab-content" tabindex="-1" data-group="button">\n  \n                        <div class="flex flex-row">\n                            <div class="flex-col" style="margin-right: 40px;">\n                                <div>\n                                    <label>${e.out("Background Color")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Background Color")}" class="bg-color-hover-command" style="width:45px;height:40px;border:rgb(0 0 0 / 6%) 1px solid;margin-right:4px"></button>\n                                </div>\n                            </div>\n                    \n                            <div class="flex-col">\n                                <div>\n                                    <label>${e.out("Text Color")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Dark")}" data-command="dark" class="text-color-hover-command" style="margin-right:4px">${e.out("Dark")}</button>\n                                    <button title="${e.out("Light")}" data-command="light" class="text-color-hover-command" style="margin-right:4px">${e.out("Light")}</button>\n                                    <button title="${e.out("Current")}" data-command="current" class="text-color-hover-command" style="margin-right:4px">${e.out("Current")}</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-col" style="margin:15px 0 0">\n                            <div>\n                                <label>${e.out("Border Color")}</label>:\n                            </div>\n                            <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                <button title="${e.out("Transparent")}" data-command="transparent" class="border-color-hover-command" style="margin-right:4px">${e.out("Transparent")}</button>\n                                <button title="${e.out("Current")}" data-command="current" class="border-color-hover-command" style="margin-right:4px">${e.out("Current")}</button>\n                            </div>\n                        </div>\n\n                    </div>\n                    <div id="divButtonText" class="is-tab-content" tabindex="-1" data-group="button">\n\n                        <div class="flex flex-row">\n                            <div class="flex flex-col" style="width:250px;margin-right:40px;">\n                                <div>\n                                    <label>${e.out("Font Size")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="12" data-command="12" class="font-size-command" style="margin-right:4px">12</button>\n                                    <button title="13" data-command="13" class="font-size-command" style="margin-right:4px">13</button>\n                                    <button title="14" data-command="14" class="font-size-command" style="margin-right:4px">14</button>\n                                    <button title="15" data-command="15" class="font-size-command" style="margin-right:4px">15</button>\n                                    <button title="16" data-command="16" class="font-size-command" style="margin-right:4px">16</button>\n                                    <button title="17" data-command="17" class="font-size-command" style="margin-right:4px">17</button>\n                                    <button title="18" data-command="18" class="font-size-command" style="margin-right:4px">18</button>\n                                    <button title="19" data-command="19" class="font-size-command" style="margin-right:4px">19</button>\n                                    <button title="21" data-command="21" class="font-size-command" style="margin-right:4px">21</button>\n                                    <button title="24" data-command="24" class="font-size-command" style="margin-right:4px">24</button>\n                                    <button title="28" data-command="28" class="font-size-command" style="margin-right:4px">28</button>\n                                    <button title="32" data-command="32" class="font-size-command" style="margin-right:4px">32</button>\n                                </div>\n                            </div>\n\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Upper/Lower")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="${e.out("Bold")}" class="textbold-command" style="width:38px;font-family:serif;font-size:14px;text-transform:initial;margin-right:4px">B</button>\n                                    <button title="${e.out("Upper/Lower")}" class="textcase-command" style="width:38px;font-family:serif;font-size:14px;text-transform:initial;margin-right:4px">Aa</button>\n                                    <button title="${e.out("Underline")}" class="textunderline-command" style="width:38px;text-decoration:underline;font-family:serif;font-size:14px;text-transform:initial;margin-right:4px">U</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class="flex flex-row" style="margin:15px 0 0">\n                            <div class="flex flex-col">\n                                <div>\n                                    <label>${e.out("Letter Spacing")}</label>:\n                                </div>\n                                <div class="flex flex-row flex-wrap" style="margin-top:5px">\n                                    <button title="0" data-command="normal" class="letter-spacing-command" style="margin-right:4px">0</button>\n                                    <button title="25" data-command="wide" class="letter-spacing-command" style="margin-right:4px">25</button>\n                                    <button title="50" data-command="wider" class="letter-spacing-command" style="margin-right:4px">50</button>\n                                    <button title="75" data-command="75" class="letter-spacing-command" style="margin-right:4px">75</button>\n                                    <button title="100" data-command="widest" class="letter-spacing-command" style="margin-right:4px">100</button>\n                                    <button title="125" data-command="125" class="letter-spacing-command" style="margin-right:4px">125</button>\n                                    <button title="150" data-command="150" class="letter-spacing-command" style="margin-right:4px">150</button>\n                                    <button title="175" data-command="175" class="letter-spacing-command" style="margin-right:4px">175</button>\n                                    <button title="200" data-command="200" class="letter-spacing-command" style="margin-right:4px">200</button>\n                                </div>\n                            </div>\n                        </div>\n                        \n                    </div>\n                    <div id="divMyButtons" class="is-tab-content" tabindex="-1" data-group="button">\n\n\n                        <button title="${e.out("Save Current Button")}" class="input-save" style="width:220px;position: relative;z-index: 1;">${e.out("Save Current Button")}</button>\n                       \n                        <div id="divMyButtonList"></div>\n\n                    </div>\n                    <div id="divButtonTemplates" class="is-tab-content" tabindex="-1" data-group="button">\n\n                        <div id="divButtonTemplateList"></div>\n\n                    </div>\n                </div>\n            </div>\n            `;i.appendHtml(n,t),o=n.querySelector(".is-modal.buttoneditor");let s,r=o.querySelector(".is-modal-close");i.addEventListener(r,"click",(()=>{i.removeClass(o,"active")}));const l=o.querySelector(".bg-color-command");l.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);const e=this.builder.activeButton||this.builder.activeLinkButton;let n=t.target;this.builder.colorPicker.open((t=>{const e=this.builder.activeButton||this.builder.activeLinkButton;e.style.backgroundColor=t,e.setAttribute("data-bg",t),i.removeClassesByPrefix(e,"bg-"),n.style.backgroundColor=t,this.builder.opts.onChange()}),e.style.backgroundColor,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0)}));const a=o.querySelector(".text-color-command");a.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);const e=this.builder.activeButton||this.builder.activeLinkButton;let n=t.target;this.builder.colorPicker.open((t=>{const e=this.builder.activeButton||this.builder.activeLinkButton;e.style.color=t,i.removeClassesByPrefix(e,"text-"),n.style.backgroundColor=t,this.builder.opts.onChange()}),e.style.color,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)}));const d=o.querySelector(".bg-color-hover-command");d.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=(this.builder.activeButton||this.builder.activeLinkButton).getAttribute("data-hover-bg"),n=t.target;this.builder.colorPicker.open((t=>{const e=this.builder.activeButton||this.builder.activeLinkButton;""===t?(e.removeAttribute("data-bg"),e.removeAttribute("data-hover-bg"),e.removeAttribute("onmouseover"),e.removeAttribute("onmouseout")):(e.setAttribute("data-bg",e.style.backgroundColor),e.setAttribute("data-hover-bg",t),e.setAttribute("onmouseover","if(this.getAttribute('data-hover-bg'))this.style.backgroundColor=this.getAttribute('data-hover-bg');"),e.setAttribute("onmouseout","if(this.getAttribute('data-bg'))this.style.backgroundColor=this.getAttribute('data-bg');else this.style.backgroundColor=''")),i.removeClassesByPrefix(e,"hover:bg-"),n.style.backgroundColor=t,this.builder.opts.onChange()}),e||"",(()=>{d.removeAttribute("data-focus"),d.focus()})),d.setAttribute("data-focus",!0)}));o.querySelectorAll(".text-color-hover-command").forEach((t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo(!0);const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;n.classList&&n.classList.forEach((t=>{0===t.indexOf("hover:text-")&&i.removeClass(n,t)})),"dark"===e?i.addClass(n,"hover:text-black"):"light"===e&&i.addClass(n,"hover:text-white"),this.applyDefault(n);o.querySelectorAll(".text-color-hover-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".border-color-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClass(n,"border-transparent"),i.removeClass(n,"border-current"),"transparent"===e?i.addClass(n,"border-transparent"):"current"===e&&i.addClass(n,"border-current"),this.applyDefault(n);o.querySelectorAll(".border-color-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".border-color-hover-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClass(n,"hover:border-transparent"),i.removeClass(n,"hover:border-current"),"transparent"===e?i.addClass(n,"hover:border-transparent"):"current"===e&&i.addClass(n,"hover:border-current"),this.applyDefault(n);o.querySelectorAll(".border-color-hover-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".border-width-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClass(n,"border-0"),i.removeClass(n,"border-2"),i.removeClass(n,"border"),"0"===e?i.addClass(n,"border-0"):"1"===e?i.addClass(n,"border"):"2"===e&&i.addClass(n,"border-2"),this.applyDefault(n);o.querySelectorAll(".border-width-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".border-radius-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClass(n,"rounded"),i.removeClassesByPrefix(n,"rounded-"),"normal"===e?i.addClass(n,"rounded"):i.addClass(n,"rounded-"+e),this.applyDefault(n);o.querySelectorAll(".border-radius-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".paddingx-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"px-"),"2"===e&&i.addClass(n,"px-2"),"3"===e&&i.addClass(n,"px-3"),"4"===e&&i.addClass(n,"px-4"),"5"===e&&i.addClass(n,"px-5"),"6"===e&&i.addClass(n,"px-6"),"7"===e&&i.addClass(n,"px-7"),"8"===e&&i.addClass(n,"px-8"),"9"===e&&i.addClass(n,"px-9"),"10"===e&&i.addClass(n,"px-10"),"11"===e&&i.addClass(n,"px-11"),"12"===e&&i.addClass(n,"px-12"),"14"===e&&i.addClass(n,"px-14"),this.applyDefault(n);o.querySelectorAll(".paddingx-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".paddingy-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"py-"),"0"===e&&i.addClass(n,"py-0"),"1"===e&&i.addClass(n,"py-1"),"2"===e&&i.addClass(n,"py-2"),"3"===e&&i.addClass(n,"py-3"),"4"===e&&i.addClass(n,"py-4"),"5"===e&&i.addClass(n,"py-5"),"6"===e&&i.addClass(n,"py-6"),this.applyDefault(n);o.querySelectorAll(".paddingy-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".paddingtop-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"pt-"),"0"===e&&i.addClass(n,"pt-0"),"1"===e&&i.addClass(n,"pt-1"),"2"===e&&i.addClass(n,"pt-2"),"3"===e&&i.addClass(n,"pt-3"),"4"===e&&i.addClass(n,"pt-4"),"5"===e&&i.addClass(n,"pt-5"),"6"===e&&i.addClass(n,"pt-6"),(n.classList.contains("pt-0")||n.classList.contains("pt-1")||n.classList.contains("pt-2")||n.classList.contains("pt-3")||n.classList.contains("pt-4")||n.classList.contains("pt-5"))&&(n.classList.contains("pt-0")||n.classList.contains("pb-1")||n.classList.contains("pb-2")||n.classList.contains("pb-3")||n.classList.contains("pb-4")||n.classList.contains("pb-5"))&&(n.classList.remove("py-0"),n.classList.remove("py-1"),n.classList.remove("py-2"),n.classList.remove("py-3"),n.classList.remove("py-4"),n.classList.remove("p5-4")),this.applyDefault(n);o.querySelectorAll(".paddingtop-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".paddingbottom-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"pb-"),"0"===e&&i.addClass(n,"pb-0"),"1"===e&&i.addClass(n,"pb-1"),"2"===e&&i.addClass(n,"pb-2"),"3"===e&&i.addClass(n,"pb-3"),"4"===e&&i.addClass(n,"pb-4"),"5"===e&&i.addClass(n,"pb-5"),"6"===e&&i.addClass(n,"pb-6"),(n.classList.contains("pt-0")||n.classList.contains("pt-1")||n.classList.contains("pt-2")||n.classList.contains("pt-3")||n.classList.contains("pt-4")||n.classList.contains("pt-5"))&&(n.classList.contains("pt-0")||n.classList.contains("pb-1")||n.classList.contains("pb-2")||n.classList.contains("pb-3")||n.classList.contains("pb-4")||n.classList.contains("pb-5"))&&(n.classList.remove("py-0"),n.classList.remove("py-1"),n.classList.remove("py-2"),n.classList.remove("py-3"),n.classList.remove("py-4"),n.classList.remove("p5-4")),this.applyDefault(n);o.querySelectorAll(".paddingbottom-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".font-size-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"size-"),i.addClass(n,"size-"+e),this.applyDefault(n);o.querySelectorAll(".font-size-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".width-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;"auto"===e&&(i.removeClass(n,"flex"),i.removeClass(n,"justify-center"),i.removeClass(n,"items-center"),i.addClass(n,"inline-block")),"full"===e&&(i.removeClass(n,"inline-block"),i.addClass(n,"flex"),i.addClass(n,"justify-center"),i.addClass(n,"items-center")),this.applyDefault(n);o.querySelectorAll(".width-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))}));o.querySelector(".textcase-command").addEventListener("click",(()=>{this.builder.uo.saveForUndo();const t=this.builder.activeButton||this.builder.activeLinkButton;i.hasClass(t,"uppercase")?i.removeClass(t,"uppercase"):i.addClass(t,"uppercase"),this.applyDefault(t);const e=o.querySelector(".textcase-command");i.hasClass(e,"on")?i.removeClass(e,"on"):i.addClass(e,"on"),this.builder.opts.onChange()}));o.querySelector(".textunderline-command").addEventListener("click",(()=>{this.builder.uo.saveForUndo();const t=this.builder.activeButton||this.builder.activeLinkButton;i.hasClass(t,"underline")?(i.removeClass(t,"underline"),i.addClass(t,"no-underline")):(i.removeClass(t,"no-underline"),i.addClass(t,"underline")),this.applyDefault(t);const e=o.querySelector(".textunderline-command");i.hasClass(e,"on")?i.removeClass(e,"on"):i.addClass(e,"on"),this.builder.opts.onChange()}));o.querySelector(".textbold-command").addEventListener("click",(()=>{this.builder.uo.saveForUndo();const t=this.builder.activeButton||this.builder.activeLinkButton;i.hasClass(t,"font-semibold")?(i.removeClass(t,"font-semibold"),i.addClass(t,"font-normal")):(i.removeClass(t,"font-normal"),i.addClass(t,"font-semibold")),this.applyDefault(t);const e=o.querySelector(".textbold-command");i.hasClass(e,"on")?i.removeClass(e,"on"):i.addClass(e,"on"),this.builder.opts.onChange()})),s=o.querySelectorAll(".letter-spacing-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"tracking-"),i.addClass(n,"tracking-"+e),this.applyDefault(n);o.querySelectorAll(".letter-spacing-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".ml-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"ml-"),i.addClass(n,"ml-"+e),this.applyDefault(n);o.querySelectorAll(".ml-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".mr-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"mr-"),i.addClass(n,"mr-"+e),this.applyDefault(n);o.querySelectorAll(".mr-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".mt-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"mt-"),i.addClass(n,"mt-"+e),this.applyDefault(n);o.querySelectorAll(".mt-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))})),s=o.querySelectorAll(".mb-command"),Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-command"),n=this.builder.activeButton||this.builder.activeLinkButton;i.removeClassesByPrefix(n,"mb-"),i.addClass(n,"mb-"+e),this.applyDefault(n);o.querySelectorAll(".mb-command").forEach((t=>{i.removeClass(t,"on")})),i.addClass(t,"on"),this.builder.opts.onChange()}))}));o.querySelector(".input-save").addEventListener("click",(()=>{const t=this.builder.activeButton||this.builder.activeLinkButton;let e=[];null!=localStorage.getItem("_savedbuttons")&&(e=JSON.parse(localStorage.getItem("_savedbuttons"))),i.removeClass(t,"active"),i.removeClass(t,"elm-active");let n=t.getAttribute("data-bg");const o=t.getAttribute("data-hover-bg"),s=t.style.cssText;e.push({id:e.length,className:t.className,bg:n||"",hoverBg:o||"",cssText:s}),localStorage.setItem("_savedbuttons",JSON.stringify(e)),this.renderMyButtons()}))}this.buttonModal=o}open(){this.util.showModal(this.buttonModal,!1),this.realtime(),this.renderMyButtons(),this.renderTemplates()}realtime(){const t=this.dom,e=this.builder.activeButton||this.builder.activeLinkButton,i=this.buttonModal.querySelector(".bg-color-command");let n;i.style.backgroundColor="";const o=this.buttonModal.querySelector(".text-color-command");o.style.backgroundColor="";const s=this.buttonModal.querySelector(".bg-color-hover-command");let r;s.style.backgroundColor="",e.classList&&e.classList.forEach((t=>{0===t.indexOf("hover:bg-")&&this.getVisibleBgColor(t.replace("hover:",""),(t=>{s.style.backgroundColor=t,e.setAttribute("data-hover-bg",t),e.hasAttribute("data-bg")||e.setAttribute("data-bg",i.style.backgroundColor),e.setAttribute("onmouseover","if(this.getAttribute('data-hover-bg'))this.style.backgroundColor=this.getAttribute('data-hover-bg');"),e.setAttribute("onmouseout","if(this.getAttribute('data-bg'))this.style.backgroundColor=this.getAttribute('data-bg');else this.style.backgroundColor=''")})),0===t.indexOf("bg-")&&this.getVisibleBgColor(t,(t=>{i.style.backgroundColor=t,e.setAttribute("data-bg",t)})),0===t.indexOf("text-")&&this.getVisibleTextColor(t,(t=>{o.style.backgroundColor=t,n=t}))})),n||(n=t.getStyle(e,"color"),o.style.backgroundColor=n),e.hasAttribute("data-bg")?i.style.backgroundColor=e.getAttribute("data-bg"):e.style.backgroundColor&&(i.style.backgroundColor=e.style.backgroundColor),e.getAttribute("data-hover-bg")&&(s.style.backgroundColor=e.getAttribute("data-hover-bg")),e.style.color&&(o.style.backgroundColor=e.style.color),r=this.buttonModal.querySelector(".text-color-hover-command.on"),t.removeClass(r,"on"),t.hasClass(e,"hover:text-black")?(r=this.buttonModal.querySelector('.text-color-hover-command[data-command="dark"]'),t.addClass(r,"on")):t.hasClass(e,"hover:text-white")?(r=this.buttonModal.querySelector('.text-color-hover-command[data-command="light"]'),t.addClass(r,"on")):(r=this.buttonModal.querySelector('.text-color-hover-command[data-command="current"]'),t.addClass(r,"on")),r=this.buttonModal.querySelector(".border-color-hover-command.on"),t.removeClass(r,"on"),t.hasClass(e,"hover:border-transparent")?(r=this.buttonModal.querySelector('.border-color-hover-command[data-command="transparent"]'),t.addClass(r,"on")):t.hasClass(e,"hover:border-current")&&(r=this.buttonModal.querySelector('.border-color-hover-command[data-command="current"]'),t.addClass(r,"on")),r=this.buttonModal.querySelector(".border-color-command.on"),t.removeClass(r,"on"),t.hasClass(e,"border-transparent")?(r=this.buttonModal.querySelector('.border-color-command[data-command="transparent"]'),t.addClass(r,"on")):t.hasClass(e,"border-current")&&(r=this.buttonModal.querySelector('.border-color-command[data-command="current"]'),t.addClass(r,"on")),r=this.buttonModal.querySelector(".width-command.on"),t.removeClass(r,"on"),t.hasClass(e,"flex")?(r=this.buttonModal.querySelector('.width-command[data-command="full"]'),t.addClass(r,"on")):(r=this.buttonModal.querySelector('.width-command[data-command="auto"]'),t.addClass(r,"on")),r=this.buttonModal.querySelector(".textcase-command"),t.hasClass(e,"uppercase")?t.addClass(r,"on"):t.removeClass(r,"on"),r=this.buttonModal.querySelector(".textunderline-command"),t.hasClass(e,"underline")?t.addClass(r,"on"):t.removeClass(r,"on"),r=this.buttonModal.querySelector(".font-size-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".paddingx-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".paddingy-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".paddingtop-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".paddingbottom-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".border-radius-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".letter-spacing-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".ml-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".mr-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".mt-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".mb-command.on"),t.removeClass(r,"on"),r=this.buttonModal.querySelector(".textbold-command"),t.hasClass(e,"font-semibold")?t.addClass(r,"on"):t.removeClass(r,"on"),t.hasClass(e,"rounded")&&(r=this.buttonModal.querySelector('.border-radius-command[data-command="normal"]'),t.addClass(r,"on")),r=this.buttonModal.querySelector(".border-width-command.on"),t.removeClass(r,"on"),t.hasClass(e,"border-0")?(r=this.buttonModal.querySelector('.border-width-command[data-command="0"]'),t.addClass(r,"on")):t.hasClass(e,"border-2")?(r=this.buttonModal.querySelector('.border-width-command[data-command="2"]'),t.addClass(r,"on")):t.hasClass(e,"border")&&(r=this.buttonModal.querySelector('.border-width-command[data-command="1"]'),t.addClass(r,"on")),e.classList&&e.classList.forEach((i=>{if(0===i.indexOf("size-")){let e=i.replace("size-",""),n=this.buttonModal.querySelector(`.font-size-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("px-")){let e=i.replace("px-",""),n=this.buttonModal.querySelector(`.paddingx-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("py-")){let n=i.replace("py-",""),o=this.buttonModal.querySelector(`.paddingy-command[data-command="${n}"]`);if(t.addClass(o,"on"),!(e.classList.contains("pt-0")||e.classList.contains("pt-1")||e.classList.contains("pt-2")||e.classList.contains("pt-3")||e.classList.contains("pt-4")||e.classList.contains("pt-5"))){let e=this.buttonModal.querySelector(`.paddingtop-command[data-command="${n}"]`);t.addClass(e,"on")}if(!(e.classList.contains("pb-0")||e.classList.contains("pb-1")||e.classList.contains("pb-2")||e.classList.contains("pb-3")||e.classList.contains("pb-4")||e.classList.contains("pb-5"))){let e=this.buttonModal.querySelector(`.paddingbottom-command[data-command="${n}"]`);t.addClass(e,"on")}}if(0===i.indexOf("pt-")){let e=i.replace("pt-",""),n=this.buttonModal.querySelector(`.paddingtop-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("pb-")){let e=i.replace("pb-",""),n=this.buttonModal.querySelector(`.paddingbottom-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("rounded-")){let e=i.replace("rounded-",""),n=this.buttonModal.querySelector(`.border-radius-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("tracking-")){let e=i.replace("tracking-",""),n=this.buttonModal.querySelector(`.letter-spacing-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("ml-")){let e=i.replace("ml-",""),n=this.buttonModal.querySelector(`.ml-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("mr-")){let e=i.replace("mr-",""),n=this.buttonModal.querySelector(`.mr-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("mt-")){let e=i.replace("mt-",""),n=this.buttonModal.querySelector(`.mt-command[data-command="${e}"]`);t.addClass(n,"on")}if(0===i.indexOf("mb-")){let e=i.replace("mb-",""),n=this.buttonModal.querySelector(`.mb-command[data-command="${e}"]`);t.addClass(n,"on")}}))}hide(){this.dom.removeClass(this.buttonModal,"active")}getVisibleBgColor(t,e){const i=this.dom,n=document.createElement("div");n.className=t,this.builderStuff.appendChild(n),e(i.getStyle(n,"background-color")),this.builderStuff.removeChild(n)}getVisibleTextColor(t,e){const i=this.dom,n=document.createElement("div");n.className=t,this.builderStuff.appendChild(n),e(i.getStyle(n,"color")),this.builderStuff.removeChild(n)}renderTemplates(){const t=[{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-7 border-current hover:border-current font-normal leading-12 rounded-full tracking-wide">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-7 text-black leading-12 rounded-full border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-7 border-current hover:border-current font-normal leading-12 tracking-wide rounded-full" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-7 font-normal leading-12 border-transparent rounded-full size-17 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 border-current hover:border-current font-normal leading-12 rounded tracking-wide">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 text-black leading-12 rounded border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-17 px-6 border-current hover:border-current font-normal leading-12 tracking-wide rounded" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded size-17 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-6 font-normal leading-12 border-transparent rounded ml-0 mt-1 size-17 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-9 border-current hover:border-current font-normal leading-relaxed rounded-full tracking-wide">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-9 text-black leading-relaxed rounded-full border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-9 border-current hover:border-current font-normal leading-relaxed tracking-wide rounded-full" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-9 font-normal leading-relaxed border-transparent rounded-full size-18 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-8 border-current hover:border-current font-normal leading-relaxed rounded tracking-wide">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-8 text-black leading-relaxed rounded border-transparent hover:border-transparent font-normal tracking-wide" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 size-18 px-8 border-current hover:border-current font-normal leading-relaxed tracking-wide rounded" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded size-18 tracking-wide hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 py-2 px-8 font-normal leading-relaxed border-transparent rounded ml-0 mt-1 size-18 tracking-wide hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-12 uppercase border-current hover:border-current font-normal leading-relaxed rounded-full tracking-75">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-12 uppercase text-black leading-relaxed rounded-full border-transparent hover:border-transparent font-normal tracking-75" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-12 uppercase border-current hover:border-current font-normal leading-relaxed tracking-75 rounded-full" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-12 uppercase font-normal leading-relaxed border-transparent rounded-full size-16 tracking-75 hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-11 uppercase border-current hover:border-current font-normal leading-relaxed rounded tracking-75">Read More</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-11 uppercase text-black leading-relaxed rounded border-transparent hover:border-transparent font-normal tracking-75" style="background-color: rgb(240, 240, 240);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(255, 127, 0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(83,98,208);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 size-16 px-11 uppercase border-current hover:border-current font-normal leading-relaxed tracking-75 rounded" style="color: rgb(255, 255, 255);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(0, 200, 218);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(55, 148, 59);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded size-16 tracking-75 hover:border-transparent" style="color: rgb(255, 255, 255); background-color: rgb(233,2,0);">Get Started</a>\n                '},{html:'\n                <a href="#" role="button" class="transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-2 mt-2 mb-1 pt-3 pb-3 px-11 uppercase font-normal leading-relaxed border-transparent rounded ml-0 mt-1 size-16 tracking-75 hover:border-transparent" style="color: rgb(0, 0, 0); background-color: rgb(254, 222, 76);">Get Started</a>\n                '},{text:"Order Now",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid rounded-full border-current ml-1 mr-1 px-8 py-2 text-pink-600 hover:text-white  bg-white hover:bg-pink-500 hover:border-transparent size-18 font-semibold tracking-75 leading-relaxed"},{text:"Explore",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline font-semibold border-2 border-solid tracking-200 rounded-full border-current size-12 ml-1 mr-1 py-0 px-3 text-indigo-600 hover:text-white bg-white hover:bg-indigo-500 hover:border-transparent leading-relaxed"},{text:"View Demo",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid border-transparent ml-1 mr-1 hover:border-transparent rounded bg-gray-200 hover:bg-gray-300 size-16 py-1 px-5 font-normal tracking-wide text-gray-800 leading-relaxed"},{text:"Get Started",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid ml-1 mr-1 rounded size-16 text-black py-1 px-5 font-normal border-current hover: hover:border-current tracking-wide leading-relaxed"},{text:"Create",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid border-transparent ml-1 mr-1 hover:border-transparent size-12 rounded bg-yellow-300 text-black bg-white hover:bg-yellow-400 font-normal px-3 py-0 tracking-75 leading-relaxed"},{text:"Hello!",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid border-current ml-1 mr-1 hover:text-white hover:border-transparent rounded-lg size-24 font-normal py-2 tracking-150 px-12 text-orange-500 bg-white hover:bg-orange-500 leading-relaxed"},{text:"Build",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid border-transparent ml-1 mr-1 text-violet-700 hover:border-transparent hover:bg-cyan-200 rounded uppercase size-12 tracking-75 px-4 py-1 font-semibold bg-cyan-200 leading-relaxed"},{text:"Contact",className:"transition-all inline-block whitespace-nowrap border-2 border-solid rounded-none no-underline hover:border-transparent ml-1 mr-1 cursor-pointer bg-white text-red-600 border-current hover:bg-red-600 hover:text-white uppercase size-12 font-semibold py-2 px-6 tracking-150 leading-relaxed"},{text:"Read More",className:"transition-all inline-block whitespace-nowrap cursor-pointer border-2 border-solid border-transparent ml-1 mr-1 hover:border-transparent rounded size-16 py-1 px-5 font-normal tracking-wide text-gray-800 underline leading-relaxed"},{text:"Send a Message",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid ml-1 mr-1 rounded tracking-75 uppercase px-6 py-2 size-12 hover:border-transparent font-semibold bg-gray-200 border-transparent hover:bg-gray-300 text-gray-800 leading-relaxed"},{text:"Our Works",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid ml-1 mr-1 rounded tracking-75 uppercase px-6 py-2 size-12 border-current hover:text-white hover:border-transparent hover:bg-indigo-500 text-indigo-500 font-semibold leading-relaxed"},{text:"Read More",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-1 tracking-75 uppercase py-2 size-14 px-8 rounded font-normal ml-1 border-transparent bg-gray-200 hover:bg-gray-300 hover:border-transparent text-gray-800 leading-relaxed"},{text:"Get a Quote",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid mr-1 tracking-75 uppercase py-2 size-14 px-8 border-current rounded text-black hover:border-current font-normal ml-1 leading-relaxed"},{text:"Try Demo",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid border-transparent hover:border-transparent bg-gray-200 hover:bg-gray-300 size-16 text-black font-normal uppercase py-3 px-11 tracking-75 mr-3 ml-0 rounded-md leading-relaxed"},{text:"Buy Now",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid size-16 tracking-75 font-normal uppercase px-11 py-3 hover:text-white hover:bg-teal-500 bg-teal-400 text-white border-transparent hover:border-transparent ml-0 mr-2 rounded-md leading-relaxed"},{text:"Play",className:"transition-all inline-block whitespace-nowrap cursor-pointer no-underline border-2 border-solid ml-1 mr-1 size-16 text-black tracking-75 font-normal uppercase px-11 border-current hover:border-current py-3 rounded leading-relaxed"}];let e="";for(let i=0;i<t.length;i++)t[i].html?e+=t[i].html:e+=`<a class="${t[i].className}" href="#" role="button" tabindex="0">${t[i].text}</a>`;document.querySelector("#divButtonTemplateList").innerHTML=e;let i=this.buttonModal.querySelectorAll("#divButtonTemplateList a");Array.prototype.forEach.call(i,(t=>{t.addEventListener("click",(e=>{this.builder.uo.saveForUndo();const i=this.builder.activeButton||this.builder.activeLinkButton;return i.removeAttribute("style"),i.removeAttribute("onmouseover"),i.removeAttribute("onmouseout"),i.removeAttribute("data-bg"),i.removeAttribute("data-hover-bg"),i.setAttribute("class",t.getAttribute("class")),t.hasAttribute("style")&&i.setAttribute("style",t.getAttribute("style")),t.hasAttribute("onmouseover")&&i.setAttribute("onmouseover",t.getAttribute("onmouseover")),t.hasAttribute("onmouseout")&&i.setAttribute("onmouseout",t.getAttribute("onmouseout")),t.hasAttribute("data-bg")&&(i.setAttribute("data-bg",t.getAttribute("data-bg")),i.style.backgroundColor=t.getAttribute("data-bg")),t.hasAttribute("data-hover-bg")&&i.setAttribute("data-hover-bg",t.getAttribute("data-hover-bg")),i.classList.remove("active"),"a"===i.tagName.toLowerCase()&&i.setAttribute("role","button"),this.realtime(),this.builder.opts.onChange(),e.preventDefault(),!1}))}))}renderMyButtons(){const t=this.dom;if(!localStorage.getItem("_savedbuttons"))return;let e=JSON.parse(localStorage.getItem("_savedbuttons")),i="";for(let t=0;t<e.length;t++){let n="";""!==e[t].bg&&(n=` data-bg="${e[t].bg}"`);let o="";""!==e[t].hoverBg&&(o=` data-hover-bg="${e[t].hoverBg}"`),""!==o&&""===n&&(n=' data-bg=""'),i+=`<a data-id="${e[t].id}"${n}${o} class="${e[t].className}" href="#" style="${e[t].cssText}">Button<span class="is-button-remove"><svg class="is-icon-flex" style="fill:rgba(255, 255, 266, 1);width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></span></a>`}document.querySelector("#divMyButtonList").innerHTML=i;let n=this.buttonModal.querySelectorAll("#divMyButtonList a");Array.prototype.forEach.call(n,(e=>{e.getAttribute("data-hover-bg")&&(e.setAttribute("onmouseover","if(this.getAttribute('data-hover-bg'))this.style.backgroundColor=this.getAttribute('data-hover-bg');"),e.setAttribute("onmouseout","if(this.getAttribute('data-bg'))this.style.backgroundColor=this.getAttribute('data-bg');else this.style.backgroundColor=''")),e.addEventListener("click",(i=>{this.builder.uo.saveForUndo();const n=this.builder.activeButton||this.builder.activeLinkButton;var o=this.buttonModal.querySelectorAll("#divMyButtonList a");return Array.prototype.forEach.call(o,(e=>{t.removeClass(e,"active")})),t.addClass(e,"active"),n.removeAttribute("style"),n.removeAttribute("onmouseover"),n.removeAttribute("onmouseout"),n.removeAttribute("data-bg"),n.removeAttribute("data-hover-bg"),n.setAttribute("class",e.getAttribute("class")),e.hasAttribute("style")&&n.setAttribute("style",e.getAttribute("style")),e.hasAttribute("onmouseover")&&n.setAttribute("onmouseover",e.getAttribute("onmouseover")),e.hasAttribute("onmouseout")&&n.setAttribute("onmouseout",e.getAttribute("onmouseout")),e.hasAttribute("data-bg")&&(n.setAttribute("data-bg",e.getAttribute("data-bg")),n.style.backgroundColor=e.getAttribute("data-bg")),e.hasAttribute("data-hover-bg")&&n.setAttribute("data-hover-bg",e.getAttribute("data-hover-bg")),n.classList.remove("active"),"a"===n.tagName.toLowerCase()&&n.setAttribute("role","button"),this.builder.opts.onChange(),this.realtime(),i.preventDefault(),!1}))})),n=this.buttonModal.querySelectorAll(".is-button-remove"),Array.prototype.forEach.call(n,(t=>{t.addEventListener("click",(t=>{const e=t.target.closest("a").getAttribute("data-id");if(null!=localStorage.getItem("_savedbuttons")){let i=JSON.parse(localStorage.getItem("_savedbuttons"));for(let n=0;n<i.length;n++)if(i[n].id===parseInt(e)){i.splice(n,1);for(let t=0;t<i.length;t++)i[t].id=t;return localStorage.setItem("_savedbuttons",JSON.stringify(i)),this.renderMyButtons(),t.stopImmediatePropagation(),t.preventDefault(),!1}}return t.stopImmediatePropagation(),t.preventDefault(),!1}))}))}applyStyles(t,e){t.style.backgroundColor="",t.style.color="",t.className=e.className.replace(" active ","").replace("active ","").replace(" active","");const i=e.getAttribute("data-bg");i?(t.setAttribute("data-bg",i),t.style.backgroundColor=i):(t.removeAttribute("data-bg"),t.style.backgroundColor="");const n=e.getAttribute("data-hover-bg");n?t.setAttribute("data-hover-bg",n):t.removeAttribute("data-hover-bg"),e.style.color?t.style.color=e.style.color:e.style.color="",this.applyDefault(t),this.realtime()}applyDefault(t){const e=this.dom;t.removeAttribute("data-hover-bgcolor"),t.removeAttribute("data-hover-color"),t.removeAttribute("data-hover-bordercolor"),e.addClass(t,"whitespace-nowrap"),"a"===t.tagName.toLowerCase()&&t.setAttribute("role","button")}cleanupOldClasses(t){const e=this.dom;e.removeClass(t,"is-btn-ghost1"),e.removeClass(t,"is-btn-ghost2"),e.removeClass(t,"is-upper"),e.removeClass(t,"is-btn-small"),e.removeClass(t,"is-btn"),e.removeClass(t,"is-rounded-30"),e.removeClass(t,"btn-primary"),e.removeClass(t,"btn-default"),e.removeClass(t,"btn")}}class Lg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.builderStuff=i;const o=this.builder.dom;this.dom=o,this.buttonEditor=new Ag(t);let s=i.querySelector("#divLinkTool");if(!s){let t=`<div id="divLinkTool" class="is-tool">\n            <button title="${e.out("Edit Button")}" data-title="${e.out("Edit Button")}" class="link-button-edit" style="display:none;"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-android-create"></use></svg></button>\n                <button title="${e.out("Link")}" data-title="${e.out("Link")}" class="link-edit"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-link"></use></svg></button>\n                <button title="${e.out("Duplicate")}" data-title="${e.out("Duplicate")}" class="link-duplicate"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n                <button title="${e.out("Delete")}" data-title="${e.out("Delete")}" class="link-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            </div>\n            <div class="is-modal createlink" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">  \n                    <label for="inpCreateLinkUrl">${e.out("Link")}:</label>\n                    <div class="link-src">\n                        <input id="inpCreateLinkUrl" class="input-url" type="text"/>\n                        <button title="${e.out("Select")}" class="input-select">\n                            ${this.builder.opts.selectIcon}\n                        </button>\n                        <button title="${e.out(this.builder.opts.otherSelectCaption)}" class="input-select-other" style="display:none;width:50px">\n                            ${this.builder.opts.otherSelectIcon}\n                        </button>\n                        <div class="div-anyfile-upload" style="position: relative; flex: 0 0 auto; width: 43px; height: 43px; box-shadow: rgba(0, 0, 0, 0.32) 0px 3px 6px -6px;">\n                            <form class="form-upload-larger" target="frameTargetAnyfileUpload" method="post" action="${this.builder.opts.fileHandler}" enctype="multipart/form-data" style="overflow:hidden;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:1px;display:flex;align-items: center;justify-content: center;">\n                                <input class="input-anyfile-customval" name="hidRefId" type="hidden" value="${this.builder.customval}" />\n                                <svg class="is-icon-flex"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                <input type="file" onclick="blur()" tabindex="0" class="input-anyfile-upload" name="fileImage" accept="*" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;"/>\n                            </form>\n                            <iframe tabindex="-1" id="frameTargetAnyfileUpload" name="frameTargetAnyfileUpload" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                        </div>\n                    </div>\n                    <label style="display:block;margin-top:14px;">\n                        <input class="input-newwindow" type="checkbox" />  ${e.out("Open new window")}&nbsp;\n                    </label>\n                    <label id="lblOpenLightbox" style="${this.builder.useLightbox?"display:block":"display:none"};margin-top:5px;margin-bottom:14px;">\n                        <input class="input-openlightbox" type="checkbox" />  ${e.out("Open in a lightbox (for image, video or Youtube)")}&nbsp;\n                    </label>\n\n                    <label id="lblCreateLinkText" for="inpCreateLinkText" style="margin-top:14px;display:block">${e.out("Text")}:</label>\n                    <input id="inpCreateLinkText" class="input-text" type="text" style="width:100%;"/>\n                    \n                    <label for="inpCreateLinkTitle" style="margin-top:14px;display:block">${e.out("Title")}:</label>\n                    <input id="inpCreateLinkTitle" class="input-title" type="text" style="width:100%;"/>\n                    \n                    <div style="text-align:right;margin-top:14px;">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n            \n            <div class="is-modal fileselect" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:${this.builder.fileSelectWidth};height:${this.builder.fileSelectHeight};padding:0;">\n                    <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                </div>\n            </div>\n            <div class="is-modal otherselect" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:${this.builder.otherSelectWidth};height:${this.builder.otherSelectHeight};padding:0;">\n                    <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                </div>\n            </div>\n            `;o.appendHtml(i,t),""!==this.builder.opts.fileHandler||this.builder.opts.onFileUpload||(i.querySelector(".div-anyfile-upload").style.display="none");let r=i.querySelector(".input-anyfile-upload");o.addEventListener(r,"change",(t=>{let e=r;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;o.addClass(i,"please-wait"),this.builder.opts.onFileUpload?this.builder.opts.onFileUpload(t):i.submit(),r.value=""})),s=this.builder.iframe?n.querySelector("#divLinkTool"):i.querySelector("#divLinkTool");let l=s.querySelector(".link-edit");o.addEventListener(l,"click",(()=>{this.editLink()}));let a=s.querySelector(".link-button-edit");o.addEventListener(a,"click",(()=>{this.editButton()}));let d=s.querySelector(".link-duplicate");o.addEventListener(d,"click",(()=>{if(this.builder.activeLink)if(this.builder.uo.saveForUndo(),this.builder.opts.emailMode){for(var t=this.builder.activeLink;"table"!==t.tagName.toLowerCase()&&!o.hasClass(t,"button");)t=t.parentNode;let e=t=t.parentNode;const i=e.cloneNode(!0);let n=i.querySelector(".icon-active");n&&o.removeClass(n,"icon-active"),i.style.paddingRight="15px",e.parentNode.insertBefore(i,e),this.showTool(this.builder.activeLink)}else{const t=this.builder.activeLink.cloneNode(!0);let e=t.querySelector(".icon-active");e&&o.removeClass(e,"icon-active"),this.builder.activeLink.parentNode.insertBefore(t,this.builder.activeLink),this.showTool(this.builder.activeLink)}}));let c=s.querySelector(".link-remove");o.addEventListener(c,"click",(()=>{if(this.builder.uo.saveForUndo(),this.builder.opts.emailMode){for(var t=this.builder.activeLink;"table"!==t.tagName.toLowerCase()&&!o.hasClass(t,"button");)t=t.parentNode;let e=t=t.parentNode;e&&e.parentNode.removeChild(e),s.style.display=""}else this.builder.activeLink&&this.builder.activeLink.parentNode.removeChild(this.builder.activeLink),s.style.display="";this.builder.activeLink.querySelector(".icon-active")&&(this.builder.activeIcon=null)}));let u=this.builderStuff.querySelector(".is-modal.createlink"),p=u.querySelector(".input-ok");o.addEventListener(p,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeLink;if(t){let e=u.querySelector(".input-url").value,i=u.querySelector(".input-title").value,n=u.querySelector(".input-text").value;if(""===n&&(n=e),""!==e)t.setAttribute("href",e),u.querySelector(".input-newwindow").checked?t.setAttribute("target","_blank"):t.removeAttribute("target"),u.querySelector(".input-openlightbox").checked?o.addClass(t,"is-lightbox"):o.removeClass(t,"is-lightbox"),this.builder.activeIcon||(t.innerHTML=n),t.setAttribute("title",i);else if(t.outerHTML=t.innerHTML,this.hideTool(),this.builder.activeIcon){this.builder.activeIcon.setAttribute("dummy-sel",""),t.outerHTML=this.builder.activeIcon.outerHTML;let e=document.querySelector("[dummy-sel]");e.removeAttribute("dummy-sel"),this.builder.activeIcon=e,this.builder.activeIcon.click()}this.builder.opts.onChange()}else{e.restoreSelection();let t=u.querySelector(".input-url").value,i=u.querySelector(".input-title").value,n=u.querySelector(".input-text").value;if(""===n&&(n=t),""!==t){let s;if(this.builder.uo.saveForUndo(),this.builder.activeIcon){let n=this.builder.activeIcon.outerHTML;this.builder.activeIcon.outerHTML=`<a dummy-sel="1" href="${t}">${n}</a>`,s=document.querySelector("[dummy-sel]"),s.removeAttribute("dummy-sel"),u.querySelector(".input-newwindow").checked?s.setAttribute("target","_blank"):s.removeAttribute("target"),u.querySelector(".input-openlightbox").checked?o.addClass(s,"is-lightbox"):o.removeClass(s,"is-lightbox"),s.setAttribute("title",i),this.builder.activeIcon=s.childNodes[0],e.appleMobile||(this.builder.activeIcon.click(),o.selectElementContents(this.builder.activeIcon),document.selection?document.selection.empty():window.getSelection().removeAllRanges())}else{const e=this.builder.selectionText,s=this.builder.selectionElm;let r;if(e){r=e;const s=r.getRangeAt(0),l=s.extractContents(),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("title",i),u.querySelector(".input-newwindow").checked?a.setAttribute("target","_blank"):a.removeAttribute("target"),u.querySelector(".input-openlightbox").checked?o.addClass(a,"is-lightbox"):o.removeClass(a,"is-lightbox"),a.appendChild(l),s.insertNode(a),a.innerHTML=n,r.selectAllChildren(a)}else if(s){r=s,s.innerHTML=`<a class="dummylink" href="dummy">${n}</a>`;let e=document.querySelector(".dummylink");e.setAttribute("href",t),e.setAttribute("title",i),u.querySelector(".input-newwindow").checked?e.setAttribute("target","_blank"):e.removeAttribute("target"),u.querySelector(".input-openlightbox").checked?o.addClass(e,"is-lightbox"):o.removeClass(e,"is-lightbox"),o.selectElementContents(e),o.removeClass(e,"dummylink")}}}e.saveSelection(),this.builder.opts.onChange(),this.builder.opts.onRender()}e.hideModal(u)}));let h=u.querySelector(".input-cancel");o.addEventListener(h,"click",(()=>{e.hideModal(u),e.appleMobile||e.restoreSelection()}))}this.linkTool=s}click(t,e){const i=this.dom;let n=!1;t.hasAttribute("data-html")&&(n=!0);let o=!1;t.hasAttribute("data-noedit")&&(o=!0);let s=!1;t.hasAttribute("data-protected")&&(s=!0);const r=e.target;if(this.builder.activeLink=null,this.builder.activeLinkButton=null,"a"!==r.tagName.toLowerCase()&&!i.parentsHasTag(r,"a")||n||o||s)this.hideTool();else{if(r.childNodes.length>0&&r.childNodes[0].tagName&&"i"===r.childNodes[0].tagName.toLowerCase()&&1===r.childNodes.length&&""===r.childNodes[0].innerHTML){const t=document.querySelectorAll(".icon-active");Array.prototype.forEach.call(t,(t=>{i.removeClass(t,"icon-active")})),i.addClass(r.childNodes[0],"icon-active"),i.selectElementContents(r.childNodes[0]),this.builder.activeIcon=r.childNodes[0]}if("img"===r.tagName.toLowerCase())return;let t,n;if("a"===r.tagName.toLowerCase())t=r;else{let e=r;for(;"a"!==e.tagName.toLowerCase();)e=e.parentNode;t=e}this.builder.activeLink=t;let o=i.getStyle(t,"display");"inline-block"!==o&&"block"!==o&&"flex"!==o||(n=!0),n&&(this.builder.activeLinkButton=t),this.showTool(t),e.preventDefault()}}showTool(t){const e=this.dom,i=this.linkTool;let n,o,s=e.getStyle(t,"display");"inline-block"===s||"flex"===s||this.builder.activeIcon?(i.querySelector(".link-duplicate").style.display="block",i.querySelector(".link-remove").style.display="block"):(i.querySelector(".link-duplicate").style.display="none",i.querySelector(".link-remove").style.display="none"),this.builder.useButtonPlugin?i.querySelector(".link-button-edit").style.display="none":t&&this.builder.activeLinkButton?i.querySelector(".link-button-edit").style.display="block":i.querySelector(".link-button-edit").style.display="none",e.hasClass(this.buttonEditor.buttonModal,"active")&&this.buttonEditor.realtime(),o=t.getBoundingClientRect().top+this.builder.win.pageYOffset,this.builder.activeIcon&&(o=this.builder.activeIcon.getBoundingClientRect().top+this.builder.win.pageYOffset),n=t.getBoundingClientRect().left,i.style.display="flex";const r=i.offsetWidth,l=i.offsetHeight;i.style.top=o-l-3+"px",i.style.left=n+t.offsetWidth*this.builder.opts.zoom-r+"px"}hideTool(){this.linkTool.style.display=""}editButton(){this.buttonEditor.open()}createLink(){const t=this.dom,e=new n(this.builder);e.getSelection();var i=t.getSelected();let o=this.builderStuff.querySelector(".is-modal.createlink");if(this.builder.opts.onOtherSelectClick||""!==this.builder.opts.otherSelect){o.querySelector(".input-select-other").style.display="block";let i=o.querySelector(".input-select-other");t.addEventListener(i,"click",(t=>{if(this.builder.opts.onOtherSelectClick)this.builder.opts.onOtherSelectClick({targetInput:o.querySelector(".input-url"),theTrigger:o.querySelector(".input-select-other")});else{let t=this.builderStuff.querySelector(".is-modal.otherselect");this.builder.opts.assetRefresh&&(t.querySelector("iframe").src=this.builder.opts.otherSelect,this.builder.opts.assetRefresh=!1),"about:blank"===t.querySelector("iframe").src&&(t.querySelector("iframe").src=this.builder.opts.otherSelect),e.showModal(t,!1,(()=>{i.removeAttribute("data-focus"),i.focus()}),!1),i.setAttribute("data-focus",!0)}this.builder.targetInput=o.querySelector(".input-url"),this.builder.targetCallback=null,this.builder.targetAssetType="all",t.preventDefault(),t.stopImmediatePropagation()}))}if(this.builder.opts.onFileSelectClick||""!==this.builder.opts.fileselect){o.querySelector(".input-select").style.display="block";let i=o.querySelector(".input-select");t.addEventListener(i,"click",(t=>{if(this.builder.opts.onFileSelectClick)this.builder.opts.onFileSelectClick({targetInput:o.querySelector(".input-url"),theTrigger:o.querySelector(".input-select")});else{let t=this.builderStuff.querySelector(".is-modal.fileselect");this.builder.opts.assetRefresh&&(t.querySelector("iframe").src=this.builder.opts.fileselect,this.builder.opts.assetRefresh=!1),"about:blank"===t.querySelector("iframe").src&&(t.querySelector("iframe").src=this.builder.opts.fileselect),e.showModal(t,!1,(()=>{i.removeAttribute("data-focus"),i.focus()}),!1),i.setAttribute("data-focus",!0)}this.builder.targetInput=o.querySelector(".input-url"),this.builder.targetCallback=null,this.builder.targetAssetType="all",t.preventDefault(),t.stopImmediatePropagation()}))}else o.querySelector(".input-select").style.display="none";o.querySelector(".input-url").value="",o.querySelector(".input-newwindow").checked=!1,o.querySelector(".input-openlightbox").checked=!1,o.querySelector(".input-title").value="",o.querySelector(".input-text").value="",o.querySelector("#lblCreateLinkText").style.display="",o.querySelector("#inpCreateLinkText").style.display="";let s=this.builder.activeLink;if(s){let e=s.getAttribute("href"),i=s.getAttribute("target"),n=s.getAttribute("title"),r=s.innerHTML;o.querySelector(".input-url").value=e,o.querySelector(".input-newwindow").checked="_blank"===i,t.hasClass(s,"is-lightbox")?o.querySelector(".input-openlightbox").checked=!0:o.querySelector(".input-openlightbox").checked=!1,o.querySelector(".input-title").value=n,o.querySelector(".input-text").value=r}else o.querySelector(".input-text").value=i,this.builder.activeIcon&&(o.querySelector("#lblCreateLinkText").style.display="none",o.querySelector("#inpCreateLinkText").style.display="none");e.showModal(o,!0,(()=>{e.appleMobile||e.restoreSelection()}),!0),o.querySelector(".input-url").focus()}editLink(){const t=this.dom,e=new n(this.builder);let i=this.builder.activeLink,o=this.builderStuff.querySelector(".is-modal.createlink"),s=i.querySelector("i");if(o.querySelector("#lblCreateLinkText").style.display="",o.querySelector("#inpCreateLinkText").style.display="",1===i.childElementCount&&s&&t.hasClass(s,"icon")&&(o.querySelector("#lblCreateLinkText").style.display="none",o.querySelector("#inpCreateLinkText").style.display="none"),this.builder.opts.onFileSelectClick||""!==this.builder.opts.fileselect){o.querySelector(".input-select").style.display="block",o.querySelector(".input-url").style.width="444px";let i=o.querySelector(".input-select");t.addEventListener(i,"click",(()=>{if(this.builder.opts.onFileSelectClick)this.builder.opts.onFileSelectClick({targetInput:o.querySelector(".input-url"),theTrigger:o.querySelector(".input-select")});else{let t=this.builderStuff.querySelector(".is-modal.fileselect");this.builder.opts.assetRefresh&&(t.querySelector("iframe").src=this.builder.opts.fileselect,this.builder.opts.assetRefresh=!1),"about:blank"===t.querySelector("iframe").src&&(t.querySelector("iframe").src=this.builder.opts.fileselect),e.showModal(t,!1,null,!1)}this.builder.targetInput=o.querySelector(".input-url"),this.builder.targetCallback=null,this.builder.targetAssetType="all"}))}else o.querySelector(".input-select").style.display="none",o.querySelector(".input-url").style.width="100%";let r=i.getAttribute("href"),l=i.getAttribute("target"),a=i.getAttribute("title"),d=i.innerHTML;o.querySelector(".input-url").value=r,o.querySelector(".input-newwindow").checked="_blank"===l,t.hasClass(i,"is-lightbox")?o.querySelector(".input-openlightbox").checked=!0:o.querySelector(".input-openlightbox").checked=!1,o.querySelector(".input-title").value=a,o.querySelector(".input-text").value=d,e.showModal(o,!0,null,!0),o.querySelector(".input-url").focus()}}class qg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.builderStuff=i;const o=this.builder.dom;this.dom=o,this.buttonEditor=new Ag(t);let s=i.querySelector("#divButtonTool");if(!s){let t=`<div id="divButtonTool" class="is-tool">\n                <button title="${e.out("Edit Button")}" data-title="${e.out("Edit Button")}" class="button-edit"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-android-create"></use></svg></button>\n                <button title="${e.out("Duplicate")}" data-title="${e.out("Duplicate")}" class="button-duplicate"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n                <button title="${e.out("Delete")}" data-title="${e.out("Delete")}" class="button-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            </div>\n            `;o.appendHtml(i,t),s=this.builder.iframe?n.querySelector("#divButtonTool"):i.querySelector("#divButtonTool");let r=s.querySelector(".button-edit");o.addEventListener(r,"click",(()=>{this.editButton()}));let l=s.querySelector(".button-duplicate");o.addEventListener(l,"click",(()=>{if(this.builder.activeButton){this.builder.uo.saveForUndo();const t=this.builder.activeButton.cloneNode(!0);let e=t.querySelector(".elm-active");e&&o.removeClass(e,"elm-active"),this.builder.activeButton.parentNode.insertBefore(t,this.builder.activeButton),this.showTool(this.builder.activeButton)}}));let a=s.querySelector(".button-remove");o.addEventListener(a,"click",(()=>{this.builder.uo.saveForUndo(),this.builder.activeButton&&this.builder.activeButton.parentNode.removeChild(this.builder.activeButton),s.style.display="",this.builder.activeButton=null}))}this.buttonTool=s}click(t,e){let i=!1;t.hasAttribute("data-html")&&(i=!0);let n=!1;t.hasAttribute("data-noedit")&&(n=!0);let o=!1;t.hasAttribute("data-protected")&&(o=!0);const s=e.target;this.builder.activeButton=null;const r=s.closest("button");!r||i||n||o?this.hideTool():(this.builder.activeButton=r,this.showTool(r),e.preventDefault())}editButton(){this.buttonEditor.open()}showTool(t){this.dom.hasClass(this.buttonEditor.buttonModal,"active")&&this.buttonEditor.realtime();const e=this.buttonTool;let i=t.getBoundingClientRect().top+this.builder.win.pageYOffset,n=t.getBoundingClientRect().left;e.style.display="flex";const o=e.offsetWidth,s=e.offsetHeight;e.style.top=i-s-3+"px",e.style.left=n+t.offsetWidth*this.builder.opts.zoom-o+"px"}hideTool(){this.buttonTool.style.display=""}}class Tg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s=i.querySelector(".is-spacer-tool");if(!s){let t=`\n            <div id="divSpacerTool" class="is-tool is-spacer-tool">\n                <button title="${e.out("Decrease")}" data-value="-"><svg class="is-icon-flex"><use xlink:href="#ion-ios-minus-empty"></use></svg></button>\n                <button title="${e.out("Increase")}" data-value="+" style="border-left: none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            </div>\n            `;o.appendHtml(i,t),s=this.builder.iframe?n.querySelector(".is-spacer-tool"):i.querySelector(".is-spacer-tool");const r=s.querySelectorAll("button");Array.prototype.forEach.call(r,(t=>{o.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-value");let i=this.builder.activeSpacer;"-"===e?o.hasClass(i,"height-300")?(o.removeClass(i,"height-300"),o.addClass(i,"height-280")):o.hasClass(i,"height-280")?(o.removeClass(i,"height-280"),o.addClass(i,"height-260")):o.hasClass(i,"height-260")?(o.removeClass(i,"height-260"),o.addClass(i,"height-240")):o.hasClass(i,"height-240")?(o.removeClass(i,"height-240"),o.addClass(i,"height-220")):o.hasClass(i,"height-220")?(o.removeClass(i,"height-220"),o.addClass(i,"height-200")):o.hasClass(i,"height-200")?(o.removeClass(i,"height-200"),o.addClass(i,"height-180")):o.hasClass(i,"height-180")?(o.removeClass(i,"height-180"),o.addClass(i,"height-160")):o.hasClass(i,"height-160")?(o.removeClass(i,"height-160"),o.addClass(i,"height-140")):o.hasClass(i,"height-140")?(o.removeClass(i,"height-140"),o.addClass(i,"height-120")):o.hasClass(i,"height-120")?(o.removeClass(i,"height-120"),o.addClass(i,"height-100")):o.hasClass(i,"height-100")?(o.removeClass(i,"height-100"),o.addClass(i,"height-80")):o.hasClass(i,"height-80")?(o.removeClass(i,"height-80"),o.addClass(i,"height-60")):o.hasClass(i,"height-60")?(o.removeClass(i,"height-60"),o.addClass(i,"height-40")):o.hasClass(i,"height-40")&&(o.removeClass(i,"height-40"),o.addClass(i,"height-20")):o.hasClass(i,"height-20")?(o.removeClass(i,"height-20"),o.addClass(i,"height-40")):o.hasClass(i,"height-40")?(o.removeClass(i,"height-40"),o.addClass(i,"height-60")):o.hasClass(i,"height-60")?(o.removeClass(i,"height-60"),o.addClass(i,"height-80")):o.hasClass(i,"height-80")?(o.removeClass(i,"height-80"),o.addClass(i,"height-100")):o.hasClass(i,"height-100")?(o.removeClass(i,"height-100"),o.addClass(i,"height-120")):o.hasClass(i,"height-120")?(o.removeClass(i,"height-120"),o.addClass(i,"height-140")):o.hasClass(i,"height-140")?(o.removeClass(i,"height-140"),o.addClass(i,"height-160")):o.hasClass(i,"height-160")?(o.removeClass(i,"height-160"),o.addClass(i,"height-180")):o.hasClass(i,"height-180")?(o.removeClass(i,"height-180"),o.addClass(i,"height-200")):o.hasClass(i,"height-200")?(o.removeClass(i,"height-200"),o.addClass(i,"height-220")):o.hasClass(i,"height-220")?(o.removeClass(i,"height-220"),o.addClass(i,"height-240")):o.hasClass(i,"height-240")?(o.removeClass(i,"height-240"),o.addClass(i,"height-260")):o.hasClass(i,"height-260")?(o.removeClass(i,"height-260"),o.addClass(i,"height-280")):o.hasClass(i,"height-280")&&(o.removeClass(i,"height-280"),o.addClass(i,"height-300")),this.showTool(i),this.builder.opts.onChange()}))}))}this.spacerTool=s}click(t){const e=this.dom,i=t.target;e.hasClass(i,"spacer")?(this.builder.activeSpacer=i,document.selection?document.selection.empty():window.getSelection().removeAllRanges(),this.showTool(i)):this.hideTool()}showTool(t){let e=t.getBoundingClientRect().top+this.builder.win.pageYOffset,i=t.getBoundingClientRect().left;this.spacerTool.style.display="flex";const n=this.spacerTool.offsetWidth,o=this.spacerTool.offsetHeight;this.spacerTool.style.top=e+(t.offsetHeight*this.builder.opts.zoom-o)/2+"px",this.spacerTool.style.left=i+(t.offsetWidth*this.builder.opts.zoom-n)/2+"px"}hideTool(){this.spacerTool.style.display=""}}class Mg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s,r=i.querySelector(".is-module-tool");if(!r){let t=`\n            <div class="is-tool is-module-tool">\n                <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n\n            <input id="hidContentModuleCode" type="hidden" />\n            <input id="hidContentModuleSettings" type="hidden" />\n            \n            <div class="is-modal custommodule" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable">\n                        ${e.out("Module Settings")}\n                        <button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">&#10005;</button>\n                    </div>\n                    <iframe tabindex="0" style="position: absolute;top: 0;left: 0;width:100%;height:100%;border:none;border-bottom:90px solid transparent;border-top:40px solid transparent;margin:0;box-sizing:border-box;" src="about:blank"></iframe>\n                    <div style="width:100%;height:90px;padding: 20px; box-sizing: border-box;position:absolute;left:0;bottom:0;overflow:hidden;text-align:right">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div> \n            `;o.appendHtml(i,t),r=this.builder.iframe?n.querySelector(".is-module-tool"):i.querySelector(".is-module-tool"),s=i.querySelector(".is-modal.custommodule");let l=r.querySelector("button");o.addEventListener(l,"click",(async()=>{let t=this.builder.activeModule;o.removeAttributes(document.querySelectorAll("[data-module-active]"),"data-module-active"),t.setAttribute("data-module-active","1");var i=t.getAttribute("data-module"),n=t.getAttribute("data-module-desc");s.querySelector(".is-modal-bar").innerHTML=n?this.util.out(n)+`<button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">\n                    <svg class="is-icon-flex" style="width:30px;height:30px;"><use xlink:href="#ion-ios-close-empty"></use></svg>\n                    </button>`:this.util.out("Module Settings")+`<button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">\n                    <svg class="is-icon-flex" style="width:30px;height:30px;"><use xlink:href="#ion-ios-close-empty"></use></svg>\n                    </button>`;var r=t.getAttribute("data-dialog-width");r&&""!==r||(r="900px");var a=t.getAttribute("data-dialog-height");a&&""!==a||(a="570px"),"slider-builder"===i&&(s.querySelector("div:not(.is-modal-overlay)").style.width="90vw",r="1500px",a="80vh"),s.querySelector("div:not(.is-modal-overlay)").style.maxWidth=r,s.querySelector("div:not(.is-modal-overlay)").style.height=a;let d=s.querySelector(".is-modal-close");o.addEventListener(d,"click",(()=>{this.util.hideModal(s)}));var c=1;const u=t.querySelectorAll("[data-subblock]");Array.prototype.forEach.call(u,(e=>{if(o.hasClass(e.parentNode,"glide__slide--clone"))return;let i=e.innerHTML;t.setAttribute("data-html-"+c,encodeURIComponent(i)),c++})),this.util.showModal(s,!0,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0);const p=s.querySelector("iframe");let h=await fetch(this.builder.opts.modulePath+i+".html");h=await h.text(),h=h.replace(/<script>/g,""+(this.builder.nonce?`<script nonce="${this.builder.nonce}">`:"<script>"));let g=p.contentWindow.document;g.open(),g.write(h),g.close()}));let a=s.querySelector(".input-ok");o.addEventListener(a,"click",(()=>{let t=s.querySelector("iframe");t.contentWindow.construct&&t.contentWindow.construct(),this.builder.uo.saveForUndo();let e=this.builder.activeModule;e.setAttribute("data-html",encodeURIComponent(this.builderStuff.querySelector("#hidContentModuleCode").value)),e.setAttribute("data-settings",encodeURIComponent(this.builderStuff.querySelector("#hidContentModuleSettings").value));let i=this.builderStuff.querySelector("#hidContentModuleCode").value;i=i.replace(/{id}/g,this.util.makeId()),i=i.replace(/<script>/g,""+(this.builder.nonce?`<script nonce="${this.builder.nonce}">`:"<script>")),e.innerHTML="";var n=document.createRange();n.setStart(e,0),e.appendChild(n.createContextualFragment(i));let o=e.querySelectorAll("[data-subblock]");var r=1;Array.prototype.forEach.call(o,(t=>{e.getAttribute("data-html-"+r)&&(t.innerHTML=decodeURIComponent(e.getAttribute("data-html-"+r))),r++}));let l=this.builder.doc.querySelector(".builder-active");l&&this.builder.applyBehaviorOn(l),this.builder.opts.onChange(),this.builder.opts.onRender(),this.util.hideControls(),this.util.repositionColumnTool(!0),this.builder.onRefreshTool&&this.builder.onRefreshTool(),e.click(),this.builder.hideModal(s)}));let d=s.querySelector(".input-cancel");o.addEventListener(d,"click",(()=>{this.builder.hideModal(s)}))}this.moduleTool=r,this.moduleModal=s}click(t){let e=!1;if(t.hasAttribute("data-module")&&(e=!0),e){this.builder.activeModule=t;let e=t;this.moduleTool.style.display="flex";let i=this.moduleTool.offsetWidth,n=e.offsetWidth*this.builder.opts.zoom,o=e.getBoundingClientRect().top+this.builder.win.pageYOffset,s=e.getBoundingClientRect().left-2;s+=n-i;i+s>window.innerWidth&&(s=e.getBoundingClientRect().left),this.moduleTool.style.top=o+"px",this.moduleTool.style.left=s+"px"}else this.builder.activeModule=null,this.moduleTool.style.display=""}}class Og{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;const s=new Ei(t);this.htmlUtil=s;let r=i.querySelector(".is-code-tool");if(!r){let t=`\n            <div class="is-tool is-code-tool">\n                <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            `;o.appendHtml(i,t),r=this.builder.iframe?n.querySelector(".is-code-tool"):i.querySelector(".is-code-tool");let s=r.querySelector("button");o.addEventListener(s,"click",(()=>{let t=this.builder.activeCodeBlock,e=this.builderStuff.querySelector("#tmp_buildercontent");e&&e.parentNode.removeChild(e),o.appendHtml(this.builderStuff,'<div id="tmp_buildercontent" style="position:absolute;top:0;left:0;width:1px;height:1px;overflow:hidden;visibility:hidden;"></div>'),e=this.builderStuff.querySelector("#tmp_buildercontent");var i=1;const n=t.querySelectorAll("is-builder");Array.prototype.forEach.call(n,(n=>{let s=n.innerHTML;e=this.builderStuff.querySelector("#tmp_buildercontent"),e.innerHTML=s;let r=e.querySelectorAll(".elm-active");o.removeClasses(r,"elm-active"),r=e.querySelectorAll(".elm-inspected"),o.removeClasses(r,"elm-inspected"),r=e.querySelectorAll(".cell-active"),o.removeClasses(r,"cell-active"),r=e.querySelectorAll(".row-active"),o.removeClasses(r,"row-active"),r=e.querySelectorAll(".row-outline"),o.removeClasses(r,"row-outline"),r=e.querySelectorAll(".row-outline"),o.removeClasses(r,"row-outline"),r=e.querySelectorAll("[data-click]"),o.removeAttributes(r,"data-click"),r=e.querySelectorAll("[contenteditable]"),o.removeAttributes(r,"contenteditable"),r=e.querySelectorAll("[data-module-active]"),o.removeAttributes(r,"data-module-active"),o.removeElements(e.querySelectorAll(".is-row-tool")),o.removeElements(e.querySelectorAll(".is-col-tool")),o.removeElements(e.querySelectorAll(".is-rowadd-tool")),o.removeElements(e.querySelectorAll(".ovl")),o.removeElements(e.querySelectorAll(".row-add-initial")),r=e.querySelectorAll("[data-keep]"),o.removeAttributes(r,"data-keep"),s=e.innerHTML.trim(),s=s.replace(/<font/g,"<span").replace(/<\/font/g,"</span"),t.setAttribute("data-html-"+i,encodeURIComponent(s)),i++}));let s,r=decodeURIComponent(t.getAttribute("data-html"));r=r.replace(/<script>/g,""+(this.builder.nonce?`<script nonce="${this.builder.nonce}">`:"<script>")),e.parentNode.removeChild(e),s=this.builder.opts.htmlSyntaxHighlighting?this.builderStuff.querySelector(".viewhtmlmonaco"):this.builderStuff.querySelector(".viewhtml");let l=s.querySelector("textarea");r=r.replaceAll("{id}","__id__"),r=(0,He.html)(r),r=r.replaceAll("__id__","{id}"),l.value=r,this.htmlUtil.view("code")}))}this.codeTool=r}click(t){let e=!1;if(t.hasAttribute("data-html")&&!t.hasAttribute("data-module")&&(e=!0),e){this.builder.activeCodeBlock=t;let e=t;this.codeTool.style.display="flex";let i=this.codeTool.offsetWidth,n=e.offsetWidth*this.builder.opts.zoom,o=e.getBoundingClientRect().top+this.builder.win.pageYOffset,s=e.getBoundingClientRect().left-2;s+=n-i;i+s>window.innerWidth&&(s=e.getBoundingClientRect().left),this.codeTool.style.top=o+"px",this.codeTool.style.left=s+"px"}else this.builder.activeCodeBlock=null,this.codeTool.style.display=""}}class Rg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s,r=i.querySelector(".is-iframe-tool");if(!r){let t=`\n            <div class="is-tool is-iframe-tool">\n                <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            \n            <div class="is-modal iframelink" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <input class="input-src" type="text" placeholder="Source" style="width:100%;margin-bottom:12px;"/>\n                    <textarea class="input-embedcode" type="text" placeholder="Embed Code" style="width:100%;height:300px;margin-bottom:12px;display:none;"></textarea>\n                    <div style="text-align:right">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n            \n            `;o.appendHtml(i,t),r=this.builder.iframe?n.querySelector(".is-iframe-tool"):i.querySelector(".is-iframe-tool"),s=i.querySelector(".is-modal.iframelink");let l=r.querySelector("button");o.addEventListener(l,"click",(()=>{let t=this.builder.activeIframe;var e=t.src;s.querySelector(".input-src").value="",s.querySelector(".input-embedcode").value="",null!=/^.*\/\/www.youtube.com\/embed\//.exec(e)||null!=/^.*\/\/player.vimeo.com\/video\//.exec(e)?(s.querySelector(".input-embedcode").style.display="none",s.querySelector(".input-src").style.display="block",s.querySelector(".input-src").value=e,s.querySelector(".input-src").focus()):(s.querySelector(".input-src").style.display="none",s.querySelector(".input-embedcode").style.display="block",s.querySelector(".input-embedcode").value=t.outerHTML),this.util.showModal(s,!0,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0)}));let a=s.querySelector(".input-ok");o.addEventListener(a,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeIframe,i=t.parentNode;if(""!==s.querySelector(".input-src").value){var n=s.querySelector(".input-src").value,o=/^http[s]?:\/\/(((www.youtube.com\/watch\?(feature=player_detailpage&)?)v=)|(youtu.be\/))([^#&?]*)/.exec(n),r=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)\/?/.exec(n);if(null===o&&null===r||-1!==n.indexOf("player.vimeo.com")||-1!==n.indexOf("youtube.com/embed/"))t.src=n;else{if(null!=o&&o.length>=7)n="https://www.youtube.com/embed/"+o[6]+"?rel=0";if(null!=r&&r.length>=7)n="https://player.vimeo.com/video/"+r[6];t.src=n}this.builder.opts.onChange()}else{const n=s.querySelector(".input-embedcode"),o=n.value;if(-1===o.toLowerCase().indexOf("<iframe"))return void(alert(e.out("Please enter <iframe> element."))||n.focus());""!==o&&(t.outerHTML=o),this.builder.activeIframe=i.querySelector("iframe");let r=this.builder.doc.querySelector(".builder-active");r&&this.builder.applyBehaviorOn(r),this.builder.opts.onChange()}this.util.hideModal(s)}));let d=s.querySelector(".input-cancel");o.addEventListener(d,"click",(()=>{this.util.hideModal(s)}))}this.iframeTool=r,this.iframeModal=s}click(t){const e=this.dom;if(!e.hasClass(t.target,"ovl")||!t.target.parentNode.querySelector("audio"))if(e.hasClass(t.target,"ovl")){t.target.style.display="none",this.builder.activeIframe=t.target.parentNode.querySelector("iframe");let e=this.builder.activeIframe;this.iframeTool.style.display="flex";let i=this.iframeTool.offsetWidth,n=e.offsetWidth*this.builder.opts.zoom,o=e.getBoundingClientRect().top+this.builder.win.pageYOffset,s=e.getBoundingClientRect().left-2;s+=n-i;i+s>window.innerWidth&&(s=e.getBoundingClientRect().left),this.iframeTool.style.top=o+"px",this.iframeTool.style.left=s+"px"}else{let t=document.querySelectorAll(".ovl");Array.prototype.forEach.call(t,(t=>{t.style.display="block"})),this.builder.activeIframe=null,this.iframeTool.style.display=""}}}class Bg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s,r=i.querySelector(".is-table-tool");if(!r){let t=`\n            <div class="is-tool is-table-tool">\n                <button title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            <div class="is-modal is-modal-content edittable" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-bar is-draggable">\n                    ${e.out("Table")}\n                    <button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">&#10005;</button>\n                </div>\n                <div style="padding:0">\n                    <div class="is-tabs" data-group="table">\n                        <a title="${e.out("Style")}" id="tabTableGeneral" href="" data-content="divTableGeneral" class="active">${e.out("Style")}</a>\n                        <a title="${e.out("Layout")}" id="tabTableLayout" href="" data-content="divTableLayout">${e.out("Layout")}</a>\n                    </div>\n                    <div id="divTableGeneral" class="is-tab-content active" tabindex="-1" data-group="table" style="display:block">\n\n                        <div style="display:flex;padding-bottom:12px">\n                            <div style="padding-right:15px">\n                                <div>${e.out("Background")}:</div>\n                                <div>\n                                    <button title="${e.out("Background Color")}" class="input-table-bgcolor is-btn-color"></button>\n                                </div>\n                            </div>\n                            <div>\n                                <div>${e.out("Text Color")}:</div>\n                                <div>\n                                    <button title="${e.out("Text Color")}" class="input-table-textcolor is-btn-color"></button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div style="padding-bottom:12px;">\n                            <div>${e.out("Border Thickness")}:</div>\n                            <div>\n                                <select id="selCellBorderWidth" style="width:120px;"><option value="0">No Border</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>  \n                            </div>\n                        </div>\n                        \n                        <div style="padding-bottom:12px;">\n                            <div>${e.out("Border Color")}:</div>\n                            <div>\n                                <button title="${e.out("Border Color")}" class="input-table-bordercolor is-btn-color"></button>\n                            </div>\n                        </div>\n                        \n                        <div style="padding-bottom:12px;">\n                            <div>${e.out("Apply To")}:</div>\n                            <div>\n                                <select id="selTableApplyTo" style="width:120px;">\n                                    <option value="table">${e.out("Table")}</option>\n                                    <option value="currentrow">${e.out("Current Row")}</option>\n                                    <option value="currentcol">${e.out("Current Column")}</option>\n                                    <option value="evenrows">${e.out("Even Rows")}</option>\n                                    <option value="oddrows">${e.out("Odd Rows")}</option>  \n                                    <option value="currentcell">${e.out("Current Cell")}</option>  \n                                </select>\n                            </div>\n                        </div>\n\n                    </div>\n\n                    <div id="divTableLayout" class="is-tab-content" tabindex="-1" data-group="table">\n                    \n                        <div style="padding-bottom:12px;">\n                            <div>${e.out("Insert Row")}:</div>\n                            <div style="display:flex">\n                                <button class="classic" title="${e.out("Above")}" data-table-cmd="rowabove" title="${e.out("Above")}" style="margin-right:15px"> ${e.out("Above")} </button>\n                                <button class="classic" title="${e.out("Below")}" data-table-cmd="rowbelow" title="${e.out("Below")}" style=""> ${e.out("Below")} </button>\n                            </div> \n                        </div>\n                        \n                        <div style="padding-bottom:15px;">\n                            <div>${e.out("Insert Column")}:</div>\n                            <div style="display:flex">\n                                <button class="classic" title="${e.out("Left")}" data-table-cmd="columnleft" title="${e.out("Left")}" style="margin-right:15px"> ${e.out("Left")} </button> \n                                <button class="classic" title="${e.out("Right")}" data-table-cmd="columnright" title="${e.out("Right")}" style=""> ${e.out("Right")} </button> \n                            </div> \n                        </div>\n\n                        <div style="padding-bottom:15px;">\n                            <button class="classic" title="${e.out("Delete Row")}" data-table-cmd="delrow" title="Delete Row" style=""> ${e.out("Delete Row")} </button> \n                        </div>\n\n                        <div style="padding-bottom:15px;">    \n                            <button class="classic" title="${e.out("Delete Column")}" data-table-cmd="delcolumn" title="Delete Column" style=""> ${e.out("Delete Column")} </button> \n                        </div>\n                        \n                        <div>    \n                            <button class="classic" title="${e.out("Merge Cell")}" data-table-cmd="mergecell" style="">${e.out("Merge Cell")}</button> \n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            `;o.appendHtml(i,t),r=this.builder.iframe?n.querySelector(".is-table-tool"):i.querySelector(".is-table-tool"),s=i.querySelector(".is-modal.edittable");let l=r.querySelector("button");o.addEventListener(l,"click",(()=>{o.hasClass(s,"active")?e.hideModal(s):(o.addClass(s,"active"),e.showModal(s))}));let a=s.querySelector(".is-modal-close");o.addEventListener(a,"click",(()=>{o.removeClass(s,"active")}));const d=s.querySelector(".input-table-bgcolor");d.addEventListener("click",(t=>{this.builder.uo.saveForUndo();let e=t.target;this.builder.colorPicker.open((t=>{if(this.builder.activeTd){var i=s.querySelector("#selTableApplyTo").value,n=this.builder.activeTable,o=this.builder.activeTd.parentNode,r=this.builder.activeTd;"currentcell"===i&&(this.builder.activeTd.style.backgroundColor=t);for(var l=0;l<n.rows.length;l++)for(var a=n.rows[l],d=0;d<a.cells.length;d++){var c=a.cells[d];("table"===i||"evenrows"===i&&Ng(l+1)||"oddrows"===i&&!Ng(l+1)||"currentrow"===i&&a===this.builder.activeTd.parentNode||"currentcol"===i&&d===Ig(n,o,r))&&(c.style.backgroundColor=t)}e.style.backgroundColor=t,this.builder.opts.onChange()}}),d.style.backgroundColor,(()=>{d.removeAttribute("data-focus"),d.focus()})),d.setAttribute("data-focus",!0)}));const c=s.querySelector(".input-table-textcolor");c.addEventListener("click",(t=>{this.builder.uo.saveForUndo();let e=t.target;this.builder.colorPicker.open((t=>{if(this.builder.activeTd){var i=s.querySelector("#selTableApplyTo").value,n=this.builder.activeTable,o=this.builder.activeTd.parentNode,r=this.builder.activeTd;"currentcell"===i&&(this.builder.activeTd.style.color=t);for(var l=0;l<n.rows.length;l++)for(var a=n.rows[l],d=0;d<a.cells.length;d++){var c=a.cells[d];("table"===i||"evenrows"===i&&Ng(l+1)||"oddrows"===i&&!Ng(l+1)||"currentrow"===i&&a===this.builder.activeTd.parentNode||"currentcol"===i&&d===Ig(n,o,r))&&(c.style.color=t)}e.style.backgroundColor=t,this.builder.opts.onChange()}}),c.style.backgroundColor,(()=>{c.removeAttribute("data-focus"),c.focus()})),c.setAttribute("data-focus",!0)}));const u=s.querySelector(".input-table-bordercolor");u.addEventListener("click",(t=>{this.builder.uo.saveForUndo();let e=t.target;this.builder.colorPicker.open((t=>{if(this.builder.activeTd){var i=s.querySelector("#selCellBorderWidth").value;"0"===i&&(s.querySelector("#selCellBorderWidth").value=1,i=1);var n=s.querySelector("#selTableApplyTo").value,o=this.builder.activeTable,r=this.builder.activeTd.parentNode,l=this.builder.activeTd;"currentcell"===n&&(this.builder.activeTd.style.borderWidth=i+"px",this.builder.activeTd.style.borderStyle="solid",this.builder.activeTd.style.borderColor=t);for(var a=0;a<o.rows.length;a++)for(var d=o.rows[a],c=0;c<d.cells.length;c++){var u=d.cells[c];("table"===n||"evenrows"===n&&Ng(a+1)||"oddrows"===n&&!Ng(a+1)||"currentrow"===n&&d===this.builder.activeTd.parentNode||"currentcol"===n&&c===Ig(o,r,l))&&(u.style.borderWidth=i+"px",u.style.borderStyle="solid",u.style.borderColor=t)}e.style.backgroundColor=t,this.builder.opts.onChange()}}),u.style.backgroundColor,(()=>{u.removeAttribute("data-focus"),u.focus()})),u.setAttribute("data-focus",!0)}));let p=s.querySelector("#selCellBorderWidth");p.addEventListener("change",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=p.value,e=s.querySelector(".input-table-bordercolor").style.backgroundColor;""===e&&(e="#000000");var i=s.querySelector("#selTableApplyTo").value,n=this.builder.activeTable,o=this.builder.activeTd.parentNode,r=this.builder.activeTd;"currentcell"===i&&(this.builder.activeTd.style.borderWidth=t+"px",this.builder.activeTd.style.borderStyle="solid",this.builder.activeTd.style.borderColor=e,"0"===t&&(this.builder.activeTd.style.borderWidth="",this.builder.activeTd.style.borderStyle="",this.builder.activeTd.style.borderColor="",s.querySelector(".input-table-bordercolor").style.backgroundColor=""));for(var l=0;l<n.rows.length;l++)for(var a=n.rows[l],d=0;d<a.cells.length;d++){var c=a.cells[d];("table"===i||"evenrows"===i&&Ng(l+1)||"oddrows"===i&&!Ng(l+1)||"currentrow"===i&&a===this.builder.activeTd.parentNode||"currentcol"===i&&d===Ig(n,o,r))&&(c.style.borderWidth=t+"px",c.style.borderStyle="solid",c.style.borderColor=e,"0"===t&&(c.style.borderWidth="",c.style.borderStyle="",c.style.borderColor="",s.querySelector(".input-table-bordercolor").style.backgroundColor=""))}this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="rowabove"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable,e=this.builder.activeTd.parentNode,i=t.insertRow(e.rowIndex);for(var n=0;n<e.cells.length;n++){var o=i.insertCell(i.cells.length);this.builder.activeTd.getAttribute("style")&&o.setAttribute("style",this.builder.activeTd.getAttribute("style")),o.style.verticalAlign="top",o.innerHTML="<br>"}this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="rowbelow"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable,e=this.builder.activeTd.parentNode,i=t.insertRow(e.rowIndex+1);for(var n=0;n<e.cells.length;n++){var o=i.insertCell(i.cells.length);this.builder.activeTd.getAttribute("style")&&o.setAttribute("style",this.builder.activeTd.getAttribute("style")),o.style.verticalAlign="top",o.innerHTML="<br>"}this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="columnleft"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable;for(var e=this.builder.activeTd.cellIndex,i=0;i<t.rows.length;i++){var n=t.rows[i].insertCell(e);this.builder.activeTd.getAttribute("style")&&n.setAttribute("style",this.builder.activeTd.getAttribute("style")),n.style.verticalAlign="top",n.innerHTML="<br>"}this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="columnright"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable;for(var e=this.builder.activeTd.cellIndex,i=0;i<t.rows.length;i++){var n=t.rows[i].insertCell(e+1);this.builder.activeTd.getAttribute("style")&&n.setAttribute("style",this.builder.activeTd.getAttribute("style")),n.style.verticalAlign="top",n.innerHTML="<br>"}this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="delrow"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable,e=this.builder.activeTd.parentNode;t.deleteRow(e.rowIndex),this.builder.activeTable=null,this.builder.activeTd=null,0===t.rows.length&&t.parentNode.removeChild(t),this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="delcolumn"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable;for(var e=this.builder.activeTd.cellIndex,i=0;i<t.rows.length;i++)t.rows[i].deleteCell(e);this.builder.activeTable=null,this.builder.activeTd=null,0===t.rows[0].cells.length&&t.parentNode.removeChild(t),this.builder.opts.onChange()})),l=s.querySelector('[data-table-cmd="mergecell"]'),l.addEventListener("click",(()=>{if(!this.builder.activeTd)return;this.builder.uo.saveForUndo();let t=this.builder.activeTable,e=this.builder.activeTd.parentNode,i=this.builder.activeTd;i.colSpan=i.colSpan+1,i.cellIndex+1<t.rows[e.rowIndex].cells.length&&t.rows[e.rowIndex].deleteCell(i.cellIndex+1),this.builder.opts.onChange()}))}this.tableTool=r,this.tableModal=s}click(t){const e=this.dom;if(e.parentsHasElement(t.target,"table")){let i,n,o=t.target;if("td"===o.tagName.toLowerCase())i=o;else{for(;"td"!==o.tagName.toLowerCase();)o=o.parentNode;i=o}for(;"table"!==o.tagName.toLowerCase();)o=o.parentNode;if(n=o,e.hasClass(n,"default")){this.builder.activeTd=i,this.builder.activeTable=n;let t=n;this.tableTool.style.display="flex";let e=this.tableTool.offsetWidth,o=t.offsetWidth*this.builder.opts.zoom,s=t.getBoundingClientRect().top+this.builder.win.pageYOffset,r=t.getBoundingClientRect().left-2;r+=o-e;e+r>window.innerWidth&&(r=t.getBoundingClientRect().left),this.tableTool.style.top=s+"px",this.tableTool.style.left=r+"px"}else this.builder.activeTd=null,this.builder.activeTable=null,this.tableTool.style.display=""}else this.builder.activeTd=null,this.builder.activeTable=null,this.tableTool.style.display="";if(e.hasClass(this.tableModal,"active")&&this.builder.activeTable){let t=this.builder.activeTd;this.tableModal.querySelector(".input-table-bgcolor").style.backgroundColor=t.style.backgroundColor,this.tableModal.querySelector(".input-table-textcolor").style.backgroundColor=t.style.color,this.tableModal.querySelector(".input-table-bordercolor").style.backgroundColor=t.style.borderColor,this.tableModal.querySelector("#selCellBorderWidth").value=parseInt(t.style.borderWidth)}else this.tableModal.querySelector(".input-table-bgcolor").style.backgroundColor="",this.tableModal.querySelector(".input-table-textcolor").style.backgroundColor="",this.tableModal.querySelector(".input-table-bordercolor").style.backgroundColor="",this.tableModal.querySelector("#selCellBorderWidth").value=0}}function Ng(t){return t%2==0}function Ig(t,e,i){for(var n=0,o=!1,s=0;s<e.cells.length;s++)!1===o&&(n+=e.cells[s].colSpan),i===e.cells[s]&&(o=!0);return(n-=i.colSpan-1)-1}class $g{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s=i.querySelector(".is-video-tool");if(!s){let t=`\n            <div class="is-tool is-video-tool">\n                <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            \n            <div class="is-modal videolink" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <label for="inpVideoLinkSource" style="display:block">${e.out("Source")}:</label>\n                    <div class="video-url">\n                        <input id="inpVideoLinkSource" class="input-url" type="text"/>\n                        <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                            ${this.builder.opts.selectIcon}\n                        </button>\n                        <div class="video-larger1 input-upload" style="position:relative;flex:none;box-shadow: 0px 3px 6px -6px rgba(0, 0, 0, 0.32);">\n                            <form class="form-upload-larger" target="frameTargetVideoUpload" method="post" action="${this.builder.opts.videoHandler}" enctype="multipart/form-data" style="position:absolute;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;">\n                                <input id="hidRefId5" name="hidRefId" type="hidden" value="" />\n                                <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                <input title="${e.out("Select")}" id="fileVideo1" name="fileImage" type="file" accept="video/mp4" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                            </form>\n\n                            <iframe tabindex="0" id="frameTargetVideoUpload" name="frameTargetVideoUpload" tabIndex="-1" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                        </div>\n                    </div>\n                    \n                    <label style="display:block;margin-top:14px;">\n                        <input class="input-video-controls" type="checkbox" />  ${e.out("Show Controls")}&nbsp;\n                    </label>\n                    <label style="display:block;margin-top:5px;">\n                        <input class="input-video-loop" type="checkbox" />  ${e.out("Loop")}&nbsp;\n                    </label>\n                    <label style="display:block;margin-top:5px;">\n                        <input class="input-video-autoplay" type="checkbox" />  ${e.out("Autoplay")}&nbsp;\n                    </label>\n                    \n                    <div style="text-align:right;margin-top:14px;">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal videoselect" style="z-index:10005" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div style="max-width:${this.builder.videoSelectWidth};height:${this.builder.videoSelectHeight};padding:0;">\n                    <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                </div>\n            </div>\n            `;o.appendHtml(i,t),s=this.builder.iframe?n.querySelector(".is-video-tool"):i.querySelector(".is-video-tool");const r=i.querySelector(".is-modal.videolink");this.videoTool=s,this.videoModal=r;let l=this.videoTool.querySelector("button");o.addEventListener(l,"click",(()=>{let t=this.builder.activeVideo,e=t.querySelector("source"),i="";e&&(i=e.getAttribute("src")),r.querySelector(".input-url").value=i;const n=r.querySelector(".input-video-controls");t.hasAttribute("controls")?n.checked=!0:n.checked=!1;const o=r.querySelector(".input-video-loop");t.hasAttribute("loop")?o.checked=!0:o.checked=!1;const s=r.querySelector(".input-video-autoplay");t.hasAttribute("autoplay")?s.checked=!0:s.checked=!1,this.util.showModal(r,!0,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0)})),""!==this.builder.opts.videoHandler||this.builder.opts.onVideoUpload||(r.querySelector(".video-larger1").style.display="none"),this.builder.opts.onVideoSelectClick||""!==this.builder.opts.videoSelect||(r.querySelector(".input-select").style.display="none");let a=r.querySelector(".input-select");a&&o.addEventListener(a,"click",(()=>{if(this.builder.opts.onVideoSelectClick)this.builder.opts.onVideoSelectClick({targetInput:r.querySelector(".input-url"),theTrigger:a});else{let t=i.querySelector(".is-modal.videoselect"),n=t.querySelector("iframe");this.builder.opts.assetRefresh&&(n.src=this.builder.opts.videoSelect),"about:blank"===n.src&&(n.src=this.builder.opts.videoSelect),e.showModal(t,!1,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)}this.builder.targetInput=r.querySelector(".input-url"),this.builder.targetCallback=null,this.builder.targetAssetType="video"}));let d=r.querySelector("#fileVideo1");o.addEventListener(d,"change",(t=>{let e=d;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;o.addClass(i,"please-wait"),r.querySelector("#hidRefId5").value=this.builder.opts.customval,this.builder.opts.onVideoUpload?this.builder.opts.onVideoUpload(t):i.submit(),d.value=""}));let c=r.querySelector(".input-ok");o.addEventListener(c,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeVideo;if(r.querySelector(".input-video-controls").checked?t.setAttribute("controls",""):t.removeAttribute("controls"),r.querySelector(".input-video-loop").checked?t.setAttribute("loop",""):t.removeAttribute("loop"),r.querySelector(".input-video-autoplay").checked?t.setAttribute("autoplay",""):t.removeAttribute("autoplay"),""!==r.querySelector(".input-url").value){let e=r.querySelector(".input-url").value,i=t.querySelector("source");e!==i.getAttribute("src")&&(i&&i.setAttribute("src",e),setTimeout((function(){t.pause(),t.load()}),100)),this.builder.opts.onChange()}this.builder.hideModal(r)}));let u=r.querySelector(".input-cancel");o.addEventListener(u,"click",(()=>{this.builder.hideModal(r)}))}}click(t){let e=t.target;if("video"===e.tagName.toLowerCase()){if(e.closest("[data-html]"))return this.builder.activeVideo=null,void(this.videoTool.style.display="");this.builder.activeVideo=e,this.videoTool.style.display="flex";let t=this.videoTool.offsetWidth,i=e.offsetWidth*this.builder.opts.zoom,n=e.getBoundingClientRect().top+this.builder.win.pageYOffset,o=e.getBoundingClientRect().left;o+=i-t;t+o>window.innerWidth&&(o=e.getBoundingClientRect().left),this.videoTool.style.top=n+"px",this.videoTool.style.left=o+"px"}else this.builder.activeVideo=null,this.videoTool.style.display=""}}class Dg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.contentStuff;this.util=e,this.builderStuff=i;const o=this.builder.dom;this.dom=o;let s=i.querySelector(".is-audio-tool");if(!s){let t=`\n            <div class="is-tool is-audio-tool">\n                <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:37px;height:37px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            \n            <div class="is-modal audiolink" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <label for="inpAudioLinkSource" style="display:block">${e.out("Source")}:</label>\n                    <div class="audio-url">\n                        <input id="inpAudioLinkSource" class="input-url" type="text"/>\n                        <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                            ${this.builder.opts.selectIcon}\n                        </button>\n                        <div class="audio-file-upload input-upload" style="position:relative;flex:none;box-shadow: 0px 3px 6px -6px rgba(0, 0, 0, 0.32);">\n                            <form class="form-upload-larger" target="frameTargetAudioUpload" method="post" action="${this.builder.opts.audioHandler}" enctype="multipart/form-data" style="position:absolute;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;">\n                                <input id="hidRefAudio" name="hidRefId" type="hidden" value="" />\n                                <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                <input title="${e.out("Select")}" id="fileAudio1" name="fileImage" type="file" accept="audio/mp3" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                            </form>\n\n                            <iframe tabindex="0" id="frameTargetAudioUpload" name="frameTargetAudioUpload" tabIndex="-1" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                        </div>\n                    </div>\n                    \n                    <div style="text-align:right;margin-top:14px;">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal audioselect" style="z-index:10005" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div style="max-width:${this.builder.audioSelectWidth};height:${this.builder.audioSelectHeight};padding:0;">\n                    <iframe tabindex="0" style="width:100%;height:100%;border: none;display: block;" src="about:blank"></iframe>\n                </div>\n            </div>\n            `;o.appendHtml(i,t),s=this.builder.iframe?n.querySelector(".is-audio-tool"):i.querySelector(".is-audio-tool");const r=i.querySelector(".is-modal.audiolink");this.audioTool=s,this.audioModal=r;let l=this.audioTool.querySelector("button");o.addEventListener(l,"click",(()=>{let t=this.builder.activeAudio.querySelector("source"),e="";t&&(e=t.getAttribute("src")),r.querySelector(".input-url").value=e,this.util.showModal(r,!0,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0)})),""!==this.builder.opts.audioHandler||this.builder.opts.onAudioUpload||(r.querySelector(".audio-file-upload").style.display="none"),this.builder.opts.onAudioSelectClick||""!==this.builder.opts.audioSelect||(r.querySelector(".input-select").style.display="none");let a=r.querySelector(".input-select");a&&o.addEventListener(a,"click",(()=>{if(this.builder.opts.onAudioSelectClick)this.builder.opts.onAudioSelectClick({targetInput:r.querySelector(".input-url"),theTrigger:a});else{let t=i.querySelector(".is-modal.audioselect"),n=t.querySelector("iframe");this.builder.opts.assetRefresh&&(n.src=this.builder.opts.audioSelect),"about:blank"===n.src&&(n.src=this.builder.opts.audioSelect),e.showModal(t,!1,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)}this.builder.targetInput=r.querySelector(".input-url"),this.builder.targetCallback=null,this.builder.targetAssetType="audio"}));let d=r.querySelector("#fileAudio1");o.addEventListener(d,"change",(t=>{let e=d;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;o.addClass(i,"please-wait"),r.querySelector("#hidRefAudio").value=this.builder.opts.customval,this.builder.opts.onAudioUpload?this.builder.opts.onAudioUpload(t):i.submit(),d.value=""}));let c=r.querySelector(".input-ok");o.addEventListener(c,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeAudio;if(""!==r.querySelector(".input-url").value){let e=r.querySelector(".input-url").value,i=t.querySelector("source");e!==i.getAttribute("src")&&(i&&i.setAttribute("src",e),setTimeout((function(){t.pause(),t.load()}),100)),this.builder.opts.onChange()}this.builder.hideModal(r)}));let u=r.querySelector(".input-cancel");o.addEventListener(u,"click",(()=>{this.builder.hideModal(r)}))}}click(t){if(this.dom.hasClass(t.target,"ovl")&&t.target.parentNode.querySelector("audio")){t.target.style.display="none";let e=t.target.parentNode.querySelector("audio");this.builder.activeAudio=e,this.audioTool.style.display="flex";let i=this.audioTool.offsetWidth,n=e.offsetWidth*this.builder.opts.zoom,o=e.getBoundingClientRect().top+this.builder.win.pageYOffset,s=e.getBoundingClientRect().left;s+=n-i;i+s>window.innerWidth&&(s=e.getBoundingClientRect().left),this.audioTool.style.top=o+"px",this.audioTool.style.left=s+"px"}else this.builder.activeAudio=null,this.audioTool.style.display=""}}class Pg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n;let o=i.querySelector("#divSvgTool");if(!o){let t='\n            <div id="divSvgTool" class="is-tool">\n                \n            </div>\n            ';n.appendHtml(i,t),o=i.querySelector("#divSvgTool")}this.svgTool=o}click(){}}class zg{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n,this.hyperlink=new Lg(t),this.button=new qg(t),this.image=new Eg(t),this.spacer=new Tg(t),this.module=new Mg(t),this.code=new Og(t),this.iframe=new Rg(t),this.table=new Bg(t),this.video=new $g(t),this.audio=new Dg(t),this.svg=new Pg(t)}applyBehavior(t){const e=this.dom;let i=!1;t.hasAttribute("data-html")&&(i=!0);let n=!1;t.hasAttribute("data-noedit")&&(n=!0);let o=!1;if(t.hasAttribute("data-protected")&&(o=!0),i||n||o){if(n){let e=t.querySelectorAll("[contenteditable]");Array.prototype.forEach.call(e,(t=>{t.contentEditable=!1}))}return}let s=t.querySelectorAll(".is-social");Array.prototype.forEach.call(s,(t=>{t.contentEditable=!1}));let r=t.querySelectorAll(".spacer");Array.prototype.forEach.call(r,(t=>{t.contentEditable=!1}));let l=t.querySelectorAll("hr");Array.prototype.forEach.call(l,(t=>{t.contentEditable=!1}));let a=t.querySelectorAll("a");Array.prototype.forEach.call(a,(i=>{"inline-block"===e.getStyle(i,"display")&&(i.contentEditable=!0,i.parentNode!==t&&(i.parentNode.contentEditable=!1))}));let d=t.querySelectorAll(".embed-responsive");Array.prototype.forEach.call(d,(t=>{let i=t.querySelector(".ovl");i||(e.appendHtml(t,'<div class="ovl" style="position:absolute;background:#fff;opacity:0.01;cursor:pointer;top:0;left:0px;width:100%;height:100%;z-index:1"></div>'),i=t.querySelector(".ovl"),e.addEventListener(i,"click",(()=>{let t=document.querySelectorAll(".ovl");Array.prototype.forEach.call(t,(t=>{t.style.display="block"})),i.style.display="none"})))}));let c=t.querySelectorAll("audio");Array.prototype.forEach.call(c,(t=>{let i=t.parentNode.querySelector(".ovl");i||(e.appendHtml(t.parentNode,'<div class="ovl" style="position:absolute;background:#fff;opacity:0.01;cursor:pointer;top:0;left:0px;width:100%;height:100%;z-index:1"></div>'),i=t.parentNode.querySelector(".ovl"),e.addEventListener(i,"click",(()=>{let t=document.querySelectorAll(".ovl");Array.prototype.forEach.call(t,(t=>{t.style.display=""})),i.style.display="none"}))),setTimeout((()=>{i.closest(".elm-active")?i.click():i.style.display=""}),300)}))}click(t,e){const i=this.dom,n=e.target;let o=!1;t.hasAttribute("data-noedit")&&(o=!0);let s=!1;t.hasAttribute("data-protected")&&(s=!0);let r=!1,l=!1;if(t.hasAttribute("data-html")&&(r=!0,i.parentsHasAttribute(n,"data-subblock")&&(l=!0)),!r&&!o&&!s||l){const o=document.querySelectorAll(".icon-active");Array.prototype.forEach.call(o,(t=>{i.removeClass(t,"icon-active")})),this.builder.activeIcon=null,"i"===n.tagName.toLowerCase()&&""===n.innerHTML&&(i.addClass(n,"icon-active"),i.selectElementContents(n),this.builder.activeIcon=n,document.selection?document.selection.empty():window.getSelection().removeAllRanges()),this.image.click(e),this.button.click(t,e),this.hyperlink.click(t,e),"a"!==n.tagName.toLowerCase()&&!i.parentsHasTag(n,"a")||r||e.preventDefault(),this.table.click(e),this.iframe.click(e),this.video.click(e),this.audio.click(e),this.spacer.click(e),this.svg.click(e)}else if(this.util.hideControls(),"img"===e.target.tagName.toLowerCase()&&e.target.hasAttribute("data-image-embed")){if(this.image.click(e),e.target.hasAttribute("data-sync")){let t=e.target;t.setAttribute("data-src",t.src)}}else"img"===e.target.tagName.toLowerCase()&&t.hasAttribute("data-image-allowed")&&this.image.click(e);this.code.click(t,e),this.module.click(t,e)}}class Hg{constructor(t={}){this.opts=Object.assign(this,{animateModal:!1,elementToAnimate:"",stuffPlacement:"#_cbhtml"},t),this.id=this.makeId();let e=document.querySelector(this.opts.stuffPlacement);e||(e=document.createElement("div"),e.id="_cbhtml",document.body.appendChild(e)),this.builderStuff=e;const i=document.createElement("div");i.id=this.id,e.appendChild(i),this.objStuff=i}confirm(t,e,i){let n=`<div class="is-modal is-confirm" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content" style="padding-bottom:20px;">\n                <div style="margin: 20px 0 30px;font-size: 14px;">${t}</div>\n                <button title="${this.out("Delete")}" class="input-ok classic">${this.out("Delete")}</button>\n            </div>\n        </div>`,o=this.objStuff.querySelector(".is-confirm");o||(this.objStuff.insertAdjacentHTML("beforeend",n),o=this.builderStuff.querySelector(".is-confirm")),this.show(o,!1,(()=>{o.parentNode.removeChild(o),e(!1)}),i);let s=o.querySelector(".is-confirm .input-ok");this.addEventListener(s,"click",(()=>{this.hide(o),o.parentNode.removeChild(o),e(!0)}))}show(t,e,i,n){this.addClass(t,"active");let o=!1;if(o=null!=n?n:this.opts.animateModal,o){const t=document.querySelectorAll(this.opts.elementToAnimate);Array.prototype.forEach.call(t,(t=>{t.style.transform=`scale(${this.builder.opts.zoom-.02})`,t.style.WebkitTransform=`scale(${this.builder.opts.zoom-.02})`,t.style.MozTransform=`scale(${this.builder.opts.zoom-.02})`,t.setAttribute("scaled-down","1")}))}if(!t.querySelector(".is-modal-overlay")){let n;if(n=e?'<div class="is-modal-overlay overlay-stay"></div>':'<div class="is-modal-overlay"></div>',t.insertAdjacentHTML("afterbegin",n),!e){let e=t.querySelector(".is-modal-overlay");this.addEventListener(e,"click",(()=>{i&&i(),this.hide(t)}))}}}hide(t){if(""!==this.opts.elementToAnimate){const t=document.querySelectorAll(this.opts.elementToAnimate);Array.prototype.forEach.call(t,(t=>{t.getAttribute("scaled-down")&&(t.style.transform=`scale(${this.builder.opts.zoom})`,t.style.WebkitTransform=`scale(${this.builder.opts.zoom})`,t.style.MozTransform=`scale(${this.builder.opts.zoom})`,t.removeAttribute("scaled-down"))}))}this.removeClass(t,"active")}makeId(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<2;i++)t+=e.charAt(Math.floor(Math.random()*e.length));let i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return t+i}addClass(t,e){t&&(this.hasClass(t,e)||(0===t.classList.length?t.className=e:t.className=t.className+" "+e))}removeClass(t,e){t&&t.classList.length>0&&(t.className=t.className.replace(e,""))}hasClass(t,e){return!!t&&(t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className))}addEventListener(t,e,i){t.addEventListener(e,i)}}class Fg{constructor(t={}){this.opts=Object.assign(this,{onPick:function(){},color:"",colors:["#ff9f01","#f57c00","#e64918","#d32f2f","#5d4038","#37474f","#353535","#fbc02c","#b0b42a","#689f39","#c21f5b","#7b21a2","#522da8","#616161","#01b8c9","#009688","#388d3c","#0388d0","#1465c0","#2f3f9e","#9e9e9e"],renderOn:"",animateModal:!1,elementToAnimate:"",stuffPlacement:"#_cbhtml",lang:[]},t),this.id=function(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<2;i++)t+=e.charAt(Math.floor(Math.random()*e.length));let i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return t+i}();let e=document.querySelector(this.opts.stuffPlacement);e||(e=document.createElement("div"),e.id="_cbhtml",e.className="is-ui",document.body.appendChild(e)),this.builderStuff=e;const i=document.createElement("div");i.id=this.id,e.appendChild(i),this.objStuff=i;const n=new Hg({animateModal:this.opts.animateModal,elementToAnimate:this.opts.elementToAnimate,stuffPlacement:this.opts.stuffPlacement});this.modal=n;let o="";if(this.opts.colors.length>0){o+='<div class="color-default">';for(var s=0;s<this.opts.colors.length;s++)"#ffffff"===this.opts.colors[s]?o+='<button title="'+this.opts.colors[s]+'" data-color="'+this.opts.colors[s]+'" style="background:'+this.opts.colors[s]+';outline:rgba(222,222,222,0.75) 1px solid"></button>':o+='<button title="'+this.opts.colors[s]+'" data-color="'+this.opts.colors[s]+'" style="background:'+this.opts.colors[s]+';"></button>';o+="</div>"}let r="";for(s=0;s<105;s++)r+=s%2==0?'<div class="dot-1"></div>':'<div class="dot-2"></div>';let l="";for(s=0;s<25;s++)l+=s%2==0?'<div class="dot-3"></div>':'<div class="dot-4"></div>';let a,d=`<div class="pickcolor" style="width:269px;padding:12px;box-sizing:border-box;">\n            ${o}\n            <div class="color-gradient"></div>\n\n            <div class="div-color-opacity" style="height: 10px; margin: 12px 0px 17px;position:relative;">\n                <div style="position:absolute;top:0;left:0;width:100%;height:21px;display:flex;flex-direction:column;flex-flow:wrap">\n                    ${r}\n                </div>\n                <input type="range" min="0" max="100" value="100" class="color-opacity is-rangeslider" style="position:relative;background: transparent;margin: 0 !important;">\n            </div>\n            <div style="display:flex;margin:25px 0 3px;">\n                <button title="${this.out("B")}" data-color="#000000" style="background:#111;color:#f3f3f3;border:transparent 1px solid;width:35px;height:35px;line-height:35px;font-size:10px;border-right:none;">${this.out("B")}</button>\n                <button title="${this.out("W")}" data-color="#ffffff" style="border: rgb(0 0 0 / 6%) 1px solid;background:#fff;color:#111;width:35px;height:35px;line-height:35px;font-size:10px;">${this.out("W")}</button>\n                <button title="${this.out("Clear")}" data-color="" class="clear" style="width:140px;height:35px;line-height:35px;border-right:none;">${this.out("Clear")}</button>\n                <button title="${this.out("More")}" class="input-hsl" style="width:35px;height:35px;line-height:35px;font-size:10px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>\n            </div>\n            <div style="display:flex">\n                <div style="flex-grow: 0;flex-shrink: 0;flex-basis: 37px;height:34px;box-sizing:border-box;margin-top:8px;position:relative;">\n                    <div style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;flex-flow:wrap;overflow:hidden;">\n                        ${l}\n                    </div>\n                    <button class="is-color-preview" tabindex="0" style="outline:none;cursor:default;position:absolute;top:0;left:0;width:100%;height:100%;transition:none;"></button>\n                </div>\n                <input class="input-text" type="text" style="width:209px;height:35px;margin-top:8px;font-size:13px;"/>\n                <button title="${this.out("Apply")}" class="input-ok" style="height:35px;margin-top:8px;"><svg class="is-icon-flex"><use xlink:href="#icon-ok"></use></svg></use></svg></svg></button>\n            </div>\n        </div>`,c=`<div class="is-modal pickcolor" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content">\n                <div class="is-modal-bar is-draggable"></div>\n                <div>\n\n                    ${o}\n                    <div class="color-gradient"></div>\n        \n                    <div class="div-color-opacity" style="height: 10px; margin: 12px 0px 17px;position:relative;">\n                        <div style="position:absolute;top:0;left:0;width:100%;height:21px;display:flex;flex-direction:column;flex-flow:wrap">\n                            ${r}\n                        </div>\n                        <input type="range" min="0" max="100" value="100" class="color-opacity is-rangeslider" style="position:relative;background: transparent;margin: 0 !important;">\n                    </div>\n                    <div style="display:flex;margin:25px 0 3px;">\n                        <button title="${this.out("B")}" data-color="#000000" style="background:#111;color:#f3f3f3;border:transparent 1px solid;width:35px;height:35px;line-height:35px;font-size:10px;border-right:none;">${this.out("B")}</button>\n                        <button title="${this.out("W")}" data-color="#ffffff" style="background:#fff;color:#111;width:35px;height:35px;line-height:35px;font-size:10px;">${this.out("W")}</button>\n                        <button title="${this.out("Clear")}" data-color="" class="clear" style="width:140px;height:35px;line-height:35px;border-right:none;">${this.out("Clear")}</button>\n                        <button title="${this.out("More")}" class="input-hsl" style="width:35px;height:35px;line-height:35px;font-size:10px;"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>\n                    </div>\n                    <div style="display:flex">\n                        <div style="flex-grow: 0;flex-shrink: 0;flex-basis: 37px;height:35px;box-sizing:border-box;margin-top:8px;position:relative;">\n                            <div style="position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;flex-flow:wrap;overflow:hidden;">\n                                ${l}\n                            </div>\n                            <button class="is-color-preview" tabindex="0" style="outline:none;cursor:default;position:absolute;top:0;left:0;width:100%;height:100%;transition:none;"></button>\n                        </div>\n                        <input class="input-text" type="text" style="width:209px;height:35px;margin-top:8px;font-size:13px;"/>\n                        <button title="${this.out("Apply")}" class="input-ok" style="height:35px;margin-top:8px;"><svg class="is-icon-flex"><use xlink:href="#icon-ok"></use></svg></use></svg></svg></button>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>`;""!==this.opts.renderOn?(a=document.querySelector(this.opts.renderOn),a.insertAdjacentHTML("beforeend",d)):(i.insertAdjacentHTML("beforeend",c),a=i.querySelector(".is-modal.pickcolor")),i.insertAdjacentHTML("beforeend",'<div class="is-modal pickcolormore" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content" style="padding: 12px">\n                <div class="is-modal-bar is-draggable"></div>\n                <div>\n                    \n                    <div class="color-swatch"></div>\n                    \n                    <div class="div-color-hue" style="height: 23px;margin: 10px 0 0;position:relative">\n                        <input type="range" min="0" max="360" value="0" class="color-hue is-rangeslider" style="position:relative;background:transparent;margin:0 !important;z-index:1">\n                    </div>\n\n                </div>\n            </div>\n        </div>');const u=i.querySelector(".is-modal.pickcolormore");this.pickcolor=a,this.pickcolormore=u;const p=t=>{let e=t.querySelectorAll('a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]');if(0===e.length)return;let i=e[0],n=e[e.length-1];n.addEventListener("keydown",(t=>{9!==t.which||t.shiftKey||(t.preventDefault(),i.focus())})),i.addEventListener("keydown",(t=>{9===t.which&&t.shiftKey&&(t.preventDefault(),n.focus())}))};p(a),new zi({selector:"#"+this.id+" .is-draggable"});let h=document.createElement("div");h.style.backgroundColor=this.opts.color;let g,m=h.style.backgroundColor;""!==m&&(g=Jg.color(m),this.baseRGB=g);let f=u.querySelector(".color-swatch"),b=a.querySelector(".color-gradient");if(g){let t;t=""!==m?Kg(g.r,g.g,g.b):0,Gg(f,t);let e=tm(g.r,g.g,g.b);Vg(b,t,e[1])}else{let t;t=0,Gg(f,t);let e=tm(255,255,255);Vg(b,t,e[1])}p(u);let v=a.querySelector(".input-hsl");this.addEventListener(v,"click",(()=>{this.openMore()}));var y=u.querySelector(".color-hue");y.oninput=()=>{let t=y.value/360;Gg(f,361*t)};let x=document.createElement("div");x.style.display="flex",x.style.position="absolute",x.style.width="calc(100% + 1px)",x.style.top=0,x.style.left=0;let w=function(t,e,i,n){let o=[],s=Math.trunc(360/n);for(let r=0;r<n;r++){let n=r*s;o.push(`hsla(${n},${e}%,${t}%,${i})`)}return o}(45,100,1,360);for(s=0;s<w.length-1;s++){let t=document.createElement("div");t.style.backgroundColor=w[s],t.style.width="1px",t.style.height="24px",x.appendChild(t)}u.querySelector(".div-color-hue").appendChild(x);const S=a.querySelector(".color-opacity");S.oninput=()=>{let t=S.value/100,e=this.baseRGB;if(e){let i;i=1===t?"rgb("+e.r+","+e.g+","+e.b+")":"rgba("+e.r+","+e.g+","+e.b+","+t+")",a.querySelector(".is-color-preview").style.backgroundColor=i,a.querySelector(".input-text").value=i,this.opts.onPick(i),S.focus()}},g&&(g.a?S.value=100*g.a:S.value=100);let _=S.value/100,C="",k="";g&&(C=1*_==1?"rgb("+g.r+","+g.g+","+g.b+")":"rgba("+g.r+","+g.g+","+g.b+","+_+")",k="linear-gradient(90deg, rgba("+g.r+","+g.g+","+g.b+",0), rgba("+g.r+","+g.g+","+g.b+",1))"),a.querySelector(".div-color-opacity .color-opacity").style.backgroundImage=k;let E=a.querySelector(".is-color-preview");E.style.background="none",""!==C&&(E.style.backgroundColor=C);let A=a.querySelector(".input-text");A.value=C,this.addEventListener(A,"keydown",(t=>{13!==t.which&&13!==t.keyCode&&"Enter"!==t.key||(this.setColor(t.target.value),t.preventDefault(),t.stopImmediatePropagation())}));let L=a.querySelector(".input-ok");this.addEventListener(L,"click",(()=>{this.setColor(A.value)}));let q=a.querySelectorAll("[data-color]");Array.prototype.forEach.call(q,(t=>{this.addEventListener(t,"click",(t=>{let e=t.target,i=e.getAttribute("data-color"),n=Ug(i);if(this.baseRGB=n,!this.parentsHasClass(e,"color-gradient")&&""!==i)if(n.r===n.g&&n.g===n.b)Yg(b);else{let t=Kg(n.r,n.g,n.b);Gg(f,t),Vg(a.querySelector(".color-gradient"),t,tm(n.r,n.g,n.b)[1])}let o=S.value/100,s="",r="";n&&(s=1*o==1?"rgb("+n.r+","+n.g+","+n.b+")":"rgba("+n.r+","+n.g+","+n.b+","+o+")",r="linear-gradient(90deg, rgba("+n.r+","+n.g+","+n.b+",0), rgba("+n.r+","+n.g+","+n.b+",1))"),a.querySelector(".div-color-opacity .color-opacity").style.backgroundImage=r,a.querySelector(".is-color-preview").style.backgroundColor=s,a.querySelector(".input-text").value=s,this.opts.onPick(s),e.focus()}))})),q=u.querySelectorAll("[data-color]"),Array.prototype.forEach.call(q,(t=>{this.addEventListener(t,"click",(()=>{let e=Ug(t.getAttribute("data-color"));this.baseRGB=e;let i=Kg(e.r,e.g,e.b),n=tm(e.r,e.g,e.b);Vg(b,i,n[1]);let o=S.value/100,s="",r="";e&&(s=1*o==1?"rgb("+e.r+","+e.g+","+e.b+")":"rgba("+e.r+","+e.g+","+e.b+","+o+")",r="linear-gradient(90deg, rgba("+e.r+","+e.g+","+e.b+",0), rgba("+e.r+","+e.g+","+e.b+",1))"),a.querySelector(".div-color-opacity .color-opacity").style.backgroundImage=r,a.querySelector(".is-color-preview").style.backgroundColor=s,a.querySelector(".input-text").value=s,this.opts.onPick(s),t.focus()}))}))}out(t){if(this.opts.lang){let e=this.opts.lang[t];return e||t}return t}openMore(){const t=e=>{if(27===e.keyCode){this.pickcolormore.classList.remove("active"),this.pickcolormore.removeEventListener("keydown",t),this.pickcolor.querySelector(".input-hsl").focus()}};this.modal.show(this.pickcolormore,!1,(()=>{this.pickcolormore.removeEventListener("keydown",t),this.pickcolor.querySelector(".input-hsl").focus()}),!1),this.pickcolormore.addEventListener("keydown",t),this.pickcolormore.querySelector("input").focus()}open(t,e,i){t&&(this.opts.onPick=t),e&&(this.opts.color=e,this.setColor(e,!0));const n=t=>{27===t.keyCode&&(this.pickcolor.classList.remove("active"),this.pickcolor.removeEventListener("keydown",n),i&&i())};this.cancel=i,this.modal.show(this.pickcolor,!1,(()=>{this.pickcolor.removeEventListener("keydown",n),this.cancel&&this.cancel()}),!1),this.pickcolor.addEventListener("keydown",n),this.pickcolor.querySelector(".input-text").focus()}setColor(t,e){let i=this.pickcolor,n=this.pickcolormore;var o=i.querySelector(".color-opacity");let s,r=i.querySelector(".color-gradient"),l=t;if(-1!==l.indexOf("rgb")&&(s=Jg.color(l)),-1!==l.indexOf("#")&&(s=Ug(l)),!s){return Yg(r),o.value=100,i.querySelector(".div-color-opacity .color-opacity").style.backgroundImage="",i.querySelector(".is-color-preview").style.background="none",void(i.querySelector(".input-text").value="")}if(this.baseRGB=s,s.r===s.g&&s.g===s.b)Yg(r);else{let t=n.querySelector(".color-swatch"),e=Kg(s.r,s.g,s.b);Gg(t,e),Vg(r,e,tm(s.r,s.g,s.b)[1])}s.a||0===s.a?o.value=100*s.a:o.value=100;let a=o.value/100,d="",c="";s&&(d=1*a==1?"rgb("+s.r+","+s.g+","+s.b+")":"rgba("+s.r+","+s.g+","+s.b+","+a+")",c="linear-gradient(90deg, rgba("+s.r+","+s.g+","+s.b+",0), rgba("+s.r+","+s.g+","+s.b+",1))"),i.querySelector(".div-color-opacity .color-opacity").style.backgroundImage=c,i.querySelector(".is-color-preview").style.backgroundColor=d,i.querySelector(".input-text").value=d,e||this.opts.onPick(d)}addEventListener(t,e,i){t.addEventListener(e,i)}parentsHasClass(t,e){for(;t;){if("BODY"===t.tagName||"HTML"===t.tagName)return!1;if(!t.classList)return!1;if(t.classList.contains(e))return!0;t=t.parentNode}}}function Ug(t){if(""===t)return null;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function Wg(t){var e="0123456789abcdef",i=parseInt(t);return 0===i||isNaN(t)?"00":(i=Math.round(Math.min(Math.max(0,i),255)),e.charAt((i-i%16)/16)+e.charAt(i%16))}function jg(t){return Wg(t[0])+Wg(t[1])+Wg(t[2])}function Gg(t,e){let i,n,o=10;if(""===t.innerHTML)for(i=0;i<o;++i){let s=document.createElement("div");for(s.style.width="100%",s.classList.add("row-"+i),t.appendChild(s),n=0;n<o;++n){let o=i*(100/9)+5,s=10*n+5;s>50&&s<=55&&(s=50),o>100&&(o=100);let r="#"+jg(Zg(e,o,s)),l=document.createElement("button");l.title=r,l.style.background=r,l.setAttribute("data-color",r),t.querySelector(".row-"+i).appendChild(l)}}else for(i=0;i<o;++i){let s=t.childNodes[i];for(n=0;n<o;++n){let t=s.childNodes[n],o=i*(100/9)+5,r=10*n+5;r>50&&r<=55&&(r=50),o>100&&(o=100);let l="#"+jg(Zg(e,o,r));t.title=l,t.style.background=l,t.setAttribute("data-color",l)}}}function Vg(t,e,i){let n,o,s=100/7*2-100/7;if(""===t.innerHTML)for(n=0;n<5;++n){let r=document.createElement("div");for(r.style.width="100%",r.classList.add("row-"+n),t.appendChild(r),o=0;o<7;++o){let r=o*(100/7);r+=(-1*(n-5)-1)*(s/5),0===o&&(r=o*(100/7));let l="#"+jg(Zg(e,i,r)),a=document.createElement("button");a.title=l,a.style.background=l,a.setAttribute("data-color",l),t.querySelector(".row-"+n).appendChild(a)}}else{let r,l;for(n=0;n<5;++n)for(r=t.childNodes[n],o=0;o<7;++o){l=r.childNodes[o];let t=o*(100/7);t+=(-1*(n-5)-1)*(s/5),6===n&&0===o&&(t=0);let a="#"+jg(Zg(e,i,t));l.title=a,l.style.background=a,l.setAttribute("data-color",a)}}}function Yg(t){let e,i,n=100/7*2-100/7;if(""===t.innerHTML)for(e=0;e<5;++e){let o=document.createElement("div");for(o.style.width="100%",o.classList.add("row-"+e),t.appendChild(o),i=0;i<7;++i){let o=i*(100/7);o+=(-1*(e-5)-1)*(n/5),0===i&&(o=i*(100/7));let s="#"+jg(Zg(0,0,o)),r=document.createElement("div");r.title=s,r.style.background=s,r.setAttribute("data-color",s),t.querySelector(".row-"+e).appendChild(r)}}else{let o,s;for(e=0;e<5;++e)for(o=t.childNodes[e],i=0;i<7;++i){s=o.childNodes[i];let t=i*(100/7);t+=(-1*(e-5)-1)*(n/5),6===e&&0===i&&(t=0);let r="#"+jg(Zg(0,0,t));s.title=r,s.style.background=r,s.setAttribute("data-color",r)}}}function Xg(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Zg(t,e,i){t/=360,e/=100;var n=(i/=100)<=.5?i*(e+1):i+e-i*e,o=2*i-n;return[parseInt(255*Xg(o,n,t+1/3)),parseInt(255*Xg(o,n,t)),parseInt(255*Xg(o,n,t-1/3))]}function Kg(t,e,i){t/=255,e/=255,i/=255;var n,o,s,r=Math.max(t,e,i),l=r-Math.min(t,e,i);if(0===l)n=0;else switch(r){case t:s=0,(o=(e-i)/l)<0&&(s=6),n=o+s;break;case e:n=(o=(i-t)/l)+(s=2);break;case i:n=(o=(t-e)/l)+(s=4)}return 60*n}var Qg,Jg=(Qg=function(t){return parseInt(t,16)},{color:function(t){var e,i,n,o,s=t.slice(0,1);return"#"===s?function(t){var e;return 4===t.length?(e=t.replace("#","").split(""),{r:Qg(e[0]+e[0]),g:Qg(e[1]+e[1]),b:Qg(e[2]+e[2])}):{r:Qg(t.slice(1,3)),g:Qg(t.slice(3,5)),b:Qg(t.slice(5))}}(t):"r"===s.toLowerCase()?(n=(e=t).slice(e.indexOf("(")+1,e.indexOf(")")).split(","),o=!1,n=n.map((function(t,e){return 3!==e?parseInt(t,10):(o=!0,parseFloat(t))})),i={r:n[0],g:n[1],b:n[2]},o&&(i.a=n[3]),i):void console.log("!Ooops! RGBvalues.color("+t+") : HEX, RGB, or RGBa strings only")}});function tm(t,e,i){t/=255,e/=255,i/=255;var n,o,s=Math.max(t,e,i),r=Math.min(t,e,i),l=(s+r)/2;if(s===r)n=o=0;else{var a=s-r;switch(o=l>.5?a/(2-s-r):a/(s+r),s){case t:n=(e-i)/a+(e<i?6:0);break;case e:n=(i-t)/a+2;break;case i:n=(t-e)/a+4}n/=6}return[100*n+.5|0,100*o+.5|0,100*l+.5|0]}class em{constructor(t={}){this.opts=Object.assign(this,{colors:["#ff9f01","#f57c00","#e64918","#d32f2f","#5d4038","#37474f","#353535","#fbc02c","#b0b42a","#689f39","#c21f5b","#7b21a2","#522da8","#616161","#01b8c9","#009688","#388d3c","#0388d0","#1465c0","#2f3f9e","#9e9e9e"],gradientcolors:[["linear-gradient(0deg, rgb(255, 57, 25), rgb(249, 168, 37))"],["linear-gradient(0deg, rgb(255, 57, 25), rgb(255, 104, 15))"],["linear-gradient(0deg, #FF5722, #FF9800)"],["linear-gradient(0deg, #613ca2, rgb(110, 123, 217))"],["linear-gradient(0deg, rgb(65, 70, 206), rgb(236, 78, 130))"],["linear-gradient(0deg, rgb(0, 150, 102), rgb(90, 103, 197))"],["linear-gradient(30deg, rgb(249, 119, 148), rgb(98, 58, 162))"],["linear-gradient(0deg, rgb(223, 70, 137), rgb(90, 103, 197))"],["linear-gradient(0deg, rgb(40, 53, 147), rgb(90, 103, 197))"],["linear-gradient(0deg, rgb(21, 101, 192), rgb(52, 169, 239))"],["linear-gradient(0deg, rgb(32, 149, 219), rgb(139, 109, 230))"],["linear-gradient(0deg, rgb(90, 103, 197), rgb(0, 184, 201))"],["linear-gradient(0deg, rgb(0, 184, 201), rgb(253, 187, 45))"],["linear-gradient(0deg, rgb(255, 208, 100), rgb(239, 98, 159))"],["linear-gradient(0deg, rgb(0, 214, 223), rgb(130, 162, 253))"],["linear-gradient(0deg, rgb(50, 234, 251), rgb(248, 247, 126))"],["linear-gradient(0deg, rgb(141, 221, 255), rgb(255, 227, 255))"],["linear-gradient(0deg, rgb(255, 170, 170), rgb(255, 255, 200))"],["linear-gradient(0deg, rgb(239, 239, 239), rgb(252, 252, 252))"]],animateModal:!1,elementToAnimate:"",stuffPlacement:"#_cbhtml",lang:[]},t),this.id=function(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<2;i++)t+=e.charAt(Math.floor(Math.random()*e.length));let i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return t+i}();let e=document.querySelector(this.opts.stuffPlacement);e||(e=document.createElement("div"),e.id="_cbhtml",e.className="is-ui",document.body.appendChild(e)),this.builderStuff=e;const i=document.createElement("div");i.id=this.id,e.appendChild(i),this.objStuff=i;const n=new Hg({animateModal:this.opts.animateModal,elementToAnimate:this.opts.elementToAnimate,stuffPlacement:this.opts.stuffPlacement});this.modal=n;let o="";for(var s=0;s<this.opts.gradientcolors.length;s++)o+=`<button data-elmgradient="${this.opts.gradientcolors[s][0]}" data-textcolor="${this.opts.gradientcolors[s][1]?this.opts.gradientcolors[s][1]:""}" style="background-image:${this.opts.gradientcolors[s][0]};"></button>`;let r=`\n            <div class="is-modal pickgradientcolor" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable"></div>\n                    <div style="padding:12px 12px 12px">\n                        <div class="div-gradients" style="display: flex;flex-flow: wrap;margin-bottom:10px;">\n                            ${o}\n                            <button class="input-gradient-clear" title="${this.out("Clear")}" data-value="" style="width:35px;height:35px;"><svg class="is-icon-flex" style="width:23px;height:23px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                        </div>\n                        <div class="is-settings" style="margin-bottom:0">\n                            <div class="is-label" style="margin-top:0">${this.out("Custom")}:</div>\n                            <div class="div-custom-gradients" style="height:auto;display: flex;flex-flow: wrap;"></div>\n                            <div>\n                                <button title="${this.out("Select Color")}" class="input-gradient-color1 is-btn-color" data-value="dark" style="border-right:none"></button>\n                                <button title="${this.out("Select Color")}" class="input-gradient-color2 is-btn-color" data-value="dark"></button>\n                                <input type="text" class="input-gradient-deg" value="0" style="width:60px;height:35px;margin-left:7px;margin-right:5px;font-size:14px;"/> deg\n                            </div>\n                        </div>\n                        <div class="is-settings" style="margin-bottom:0">\n                            <button title="${this.out("Add")}" class="input-gradient-save classic" style="width:100%;border:none;"> ${this.out("Add")} </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;i.insertAdjacentHTML("beforeend",r);const l=i.querySelector(".is-modal.pickgradientcolor");this.pickGradient=l;(t=>{let e=t.querySelectorAll('a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex]');if(0===e.length)return;let i=e[0],n=e[e.length-1];n.addEventListener("keydown",(t=>{9!==t.which||t.shiftKey||(t.preventDefault(),i.focus())})),i.addEventListener("keydown",(t=>{9===t.which&&t.shiftKey&&(t.preventDefault(),n.focus())}))})(l),new zi({selector:"#"+this.id+" .is-draggable"});const a=new Fg({colors:this.opts.colors,animateModal:this.opts.animateModal,elementToAnimate:this.opts.container,lang:this.opts.lang});let d=i.querySelector(".input-gradient-color1");d.addEventListener("click",(()=>{a.open((t=>{""===t&&(t="transparent");let e=t,n=i.querySelector(".input-gradient-color2").style.backgroundColor;""===n&&(n="#ffffff");let o=`linear-gradient(${i.querySelector(".input-gradient-deg").value}deg, ${e}, ${n})`;this.targetElement.style.backgroundImage=o,this.opts.onChange&&this.opts.onChange(o),d.style.backgroundColor=t}),d.style.backgroundColor,(()=>{d.removeAttribute("data-focus"),d.focus()})),d.setAttribute("data-focus",!0)}));let c=i.querySelector(".input-gradient-color2");c.addEventListener("click",(()=>{a.open((t=>{""===t&&(t="transparent");let e=i.querySelector(".input-gradient-color1").style.backgroundColor,n=t;""===e&&(e="#ffffff");let o=`linear-gradient(${i.querySelector(".input-gradient-deg").value}deg, ${e}, ${n})`;this.targetElement.style.backgroundImage=o,this.opts.onChange&&this.opts.onChange(o),c.style.backgroundColor=t}),c.style.backgroundColor,(()=>{c.removeAttribute("data-focus"),c.focus()})),c.setAttribute("data-focus",!0)}));let u=i.querySelectorAll(".div-gradients [data-elmgradient]");Array.prototype.forEach.call(u,(t=>{let e=t.getAttribute("data-elmgradient"),n=t.getAttribute("data-textcolor");t.addEventListener("click",(()=>{this.targetElement.style.backgroundImage=e,this.opts.onChange&&this.opts.onChange(e,n);const o=this.targetElement.style.backgroundImage;if(-1!==o.indexOf("linear-gradient")){const t=im(o);if(null!==t)try{let e=t.colorStopList[0].color,i=t.colorStopList[1].color,n=t.line;this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor=e,this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor=i,-1!==n.indexOf("deg")&&(this.objStuff.querySelector(".input-gradient-deg").value=n.replace("deg",""))}catch(t){}}let s=i.querySelectorAll(".div-gradients [data-elmgradient]");Array.prototype.forEach.call(s,(t=>{this.removeClass(t,"active")})),this.addClass(t,"active")}))})),i.querySelector(".input-gradient-clear").addEventListener("click",(()=>{this.targetElement.style.backgroundImage="",this.opts.onChange&&this.opts.onChange(""),this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor="",this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor="",this.objStuff.querySelector(".input-gradient-deg").value="0"}));let p=i.querySelector(".input-gradient-deg");p.addEventListener("keyup",(()=>{let t=i.querySelector(".input-gradient-color1").style.backgroundColor,e=i.querySelector(".input-gradient-color2").style.backgroundColor,n=`linear-gradient(${p.value}deg, ${t}, ${e})`;this.targetElement.style.backgroundImage=n,this.opts.onChange&&this.opts.onChange(n)})),i.querySelector(".input-gradient-save").addEventListener("click",(()=>{let t=i.querySelector(".input-gradient-color1").style.backgroundColor,e=i.querySelector(".input-gradient-color2").style.backgroundColor,n=`linear-gradient(${p.value}deg, ${t}, ${e})`,o=[];if(null!==localStorage.getItem("_customgradcolors")&&(o=JSON.parse(localStorage.getItem("_customgradcolors"))),o.push(n),localStorage.setItem("_customgradcolors",JSON.stringify(o)),null!==localStorage.getItem("_customgradcolors")){let t=JSON.parse(localStorage.getItem("_customgradcolors")),e="";for(var s=0;s<t.length;s++)e+=`<button class="is-elmgrad-item" data-elmgradient="${t[s]}" style="background-image:${t[s]};"><div class="is-elmgrad-remove"><svg class="is-icon-flex" style="fill:rgba(255, 255, 255, 1);width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></div></button>`;this.objStuff.querySelector(".div-custom-gradients").innerHTML=e}let r=this.objStuff.querySelectorAll(".div-custom-gradients [data-elmgradient]");Array.prototype.forEach.call(r,(t=>{let e=t.getAttribute("data-elmgradient");t.addEventListener("click",(()=>{this.targetElement.style.backgroundImage=e,this.opts.onChange&&this.opts.onChange(e);const n=this.targetElement.style.backgroundImage;if(-1!==n.indexOf("linear-gradient")){const t=im(n);if(null!==t)try{let e=t.colorStopList[0].color,i=t.colorStopList[1].color,n=t.line;this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor=e,this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor=i,-1!==n.indexOf("deg")&&(this.objStuff.querySelector(".input-gradient-deg").value=n.replace("deg",""))}catch(t){}}let o=i.querySelectorAll(".div-custom-gradients [data-elmgradient]");Array.prototype.forEach.call(o,(t=>{this.removeClass(t,"active")})),this.addClass(t,"active")}))}));let l=this.objStuff.querySelectorAll(".div-custom-gradients .is-elmgrad-remove");Array.prototype.forEach.call(l,(t=>{t.addEventListener("click",(()=>{let e=[];null!==localStorage.getItem("_customgradcolors")&&(e=JSON.parse(localStorage.getItem("_customgradcolors")));for(var i=t.parentNode.getAttribute("data-elmgradient"),n=0;n<e.length;n++)e[n]===i&&e.splice(n,1);return localStorage.setItem("_customgradcolors",JSON.stringify(e)),t.parentNode.parentNode.removeChild(t.parentNode),!1}))}))}))}out(t){if(this.opts.lang){let e=this.opts.lang[t];return e||t}return t}open(t,e,i){this.opts.onChange=e,this.opts.onFinish=i,this.targetElement=t,this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor="",this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor="",this.objStuff.querySelector(".input-gradient-deg").value="0";const n=t.style.backgroundImage;if(-1!==n.indexOf("linear-gradient")){const t=im(n);if(null!==t)try{let e=t.colorStopList[0].color,i=t.colorStopList[1].color,n=t.line;this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor=e,this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor=i,-1!==n.indexOf("deg")&&(this.objStuff.querySelector(".input-gradient-deg").value=n.replace("deg",""))}catch(t){}}this.original=n;let o=[];if(null!==localStorage.getItem("_customgradcolors")){o=JSON.parse(localStorage.getItem("_customgradcolors"));let t="";for(var s=0;s<o.length;s++)t+=`<button class="is-elmgrad-item" data-elmgradient="${o[s]}" style="background-image:${o[s]};"><div class="is-elmgrad-remove"><svg class="is-icon-flex" style="fill:rgba(255, 255, 255, 1);width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></div></button>`;this.objStuff.querySelector(".div-custom-gradients").innerHTML=t}let r=this.objStuff.querySelectorAll(".div-custom-gradients [data-elmgradient]");Array.prototype.forEach.call(r,(t=>{let e=t.getAttribute("data-elmgradient");t.addEventListener("click",(()=>{this.targetElement.style.backgroundImage=e,this.opts.onChange&&this.opts.onChange(e);const i=this.targetElement.style.backgroundImage;if(-1!==i.indexOf("linear-gradient")){const t=im(i);if(null!==t)try{let e=t.colorStopList[0].color,i=t.colorStopList[1].color,n=t.line;this.objStuff.querySelector(".input-gradient-color1").style.backgroundColor=e,this.objStuff.querySelector(".input-gradient-color2").style.backgroundColor=i,-1!==n.indexOf("deg")&&(this.objStuff.querySelector(".input-gradient-deg").value=n.replace("deg",""))}catch(t){}}let n=this.objStuff.querySelectorAll(".div-custom-gradients [data-elmgradient]");Array.prototype.forEach.call(n,(t=>{this.removeClass(t,"active")})),this.addClass(t,"active")}))}));let l=this.objStuff.querySelectorAll(".div-custom-gradients .is-elmgrad-remove");Array.prototype.forEach.call(l,(t=>{t.addEventListener("click",(()=>{let e=[];null!==localStorage.getItem("_customgradcolors")&&(e=JSON.parse(localStorage.getItem("_customgradcolors")));for(var i=t.parentNode.getAttribute("data-elmgradient"),n=0;n<e.length;n++)e[n]===i&&e.splice(n,1);return localStorage.setItem("_customgradcolors",JSON.stringify(e)),t.parentNode.parentNode.removeChild(t.parentNode),!1}))}));const a=t=>{27===t.keyCode&&(this.pickGradient.classList.remove("active"),this.pickGradient.removeEventListener("keydown",a),this.opts.onFinish&&this.opts.onFinish(!1))};this.modal.show(this.pickGradient,!1,(()=>{this.pickGradient.removeEventListener("keydown",a),this.original===this.targetElement.style.backgroundImage?this.opts.onFinish&&this.opts.onFinish(!1):this.opts.onFinish&&this.opts.onFinish(!0)}),!1),this.pickGradient.addEventListener("keydown",a);this.pickGradient.querySelector("button").focus()}addClass(t,e){t&&(this.hasClass(t,e)||(0===t.classList.length?t.className=e:t.className=t.className+" "+e))}removeClass(t,e){t&&t.classList.length>0&&(t.className=t.className.replace(e,""))}hasClass(t,e){return!!t&&(t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className))}}function im(t){var e,i=om(),n=/.*gradient\s*\(((?:\([^)]*\)|[^)(]*)*)\)/.exec(t);return null!==n?(e=sm(i,n[1])).original.trim()!==n[1].trim()&&(e.parseWarning=!0):e="Failed to find gradient",e}var nm=function(t,e){var i,n="";for(i=0;i<t.length;i++)"string"==typeof t[i]?n+=t[i]:n+=t[i].source;return new RegExp(n,e)},om=function(){var t=/\s*,\s*/,e=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,i=nm(["(?:",/#(?:[a-f0-9]{6}|[a-f0-9]{3})/,"|","(?:rgb|hsl)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/,"|","(?:rgba|hsla)",/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/,"|",/[_a-z-][_a-z0-9-]*/,")"],""),n=nm([i,"(?:\\s+",e,"(?:\\s+",e,")?)?"],""),o=nm(["(?:",n,t,")*",n],""),s=nm(["(?:(",/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,")|",/to\s+((?:(?:left|right)(?:\s+(?:top|bottom))?))/,")"],"");return{gradientSearch:nm(["(?:(",s,")",t,")?(",o,")"],"gi"),colorStopSearch:nm(["\\s*(",i,")","(?:\\s+","(",e,"))?","(?:",t,"\\s*)?"],"gi")}},sm=function(t,e){var i,n,o,s;if(t.gradientSearch.lastIndex=0,null!==(n=t.gradientSearch.exec(e)))for(i={original:n[0],colorStopList:[]},n[1]&&(i.line=n[1]),n[2]&&(i.angle=n[2]),n[3]&&(i.sideCorner=n[3]),t.colorStopSearch.lastIndex=0,o=t.colorStopSearch.exec(n[4]);null!==o;)s={color:o[1]},o[2]&&(s.position=o[2]),i.colorStopList.push(s),o=t.colorStopSearch.exec(n[4]);return i};class rm{constructor(t){this.builder=t;const e=this.builder.util;this.util=e;const i=this.builder.builderStuff,n=this.builder.dom;this.dom=n,this.grid=new Ti(t);let o=i.querySelector(".rowmore"),s="";if(t.opts.rowHtmlEditor&&(s=`<button type="button" title="${e.out("HTML")}" class="row-html">\n                <span><svg class="is-icon-flex" style="margin-right:-3px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></span>${e.out("HTML")}\n            </button>`),!o){let r=`<div class="is-pop rowmore" style="z-index:10002;" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div style="display:flex;flex-flow:wrap;">\n                    <button type="button" title="${e.out("Move Up")}" class="row-up"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></span>${e.out("Move Up")}</button>\n                    <button type="button" title="${e.out("Move Down")}" class="row-down"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></span>${e.out("Move Down")}</button>\n                    <button type="button" title="${e.out("Duplicate")}" class="row-duplicate"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></span>${e.out("Duplicate")}</button>\n                    ${s}\n                    <div class="is-separator"></div>\n                    <button type="button" title="${e.out("Lock")}" class="row-locking"><span><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-lock"></use></svg></span>${e.out("Lock")}</button>\n                    <button type="button" title="${e.out("Settings")}" class="row-settings"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-gear"></use></svg></span>${e.out("Settings")}</button>\n                </div>\n            </div>\n            \n            <div class="is-modal rowsettings" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable">\n                        ${e.out("Row Settings")}\n                        <button class="is-modal-close" title="${e.out("Close")}" tabindex="-1">&#10005;</button>\n                    </div>\n\n                    <div style="padding:0;margin-top:35px;">\n\n                        <div class="is-tabs" data-group="rowsettings">\n                            <a title="${e.out("General")}" id="tabRowGeneral" href="#" data-content="divRowGeneral" class="active">${e.out("General")}</a>\n                            <a title="${e.out("More")}" id="tabRowMore" href="#" data-content="divRowMore">${e.out("More")}</a>\n                        </div>\n                        <div id="divRowGeneral" class="is-tab-content active" data-group="rowsettings" style="display:flex" tabindex="-1">\n                        \n                            <div style="padding-bottom: 3px;">${e.out("Background Color")}:</div>\n                            <div style="display:flex;">\n                                <button title="${e.out("Background Color")}" class="input-row-bgcolor is-btn-color" style="margin-right:15px"></button>\n                                <button title="${e.out("Gradient")}" class="input-row-gradient classic" data-value="+"> ${e.out("Gradient")} </button>\n                            </div>\n\n                            <div style="padding-top:20px;padding-bottom: 3px;">${e.out("Background Image")}:</div>\n                            <div>\n                                <div class="cell-bgimage-preview"></div>\n                                <div style="display: flex">\n                                    <button title="${e.out("Image")}" class="input-cell-bgimage">\n                                        <svg class="is-icon-flex"><use xlink:href="#ion-image"></use></svg>\n                                        <span>${e.out("Image")}</span>\n                                    </button>\n                                    <button title="${e.out("Select")}" class="input-select">\n                                        ${this.builder.opts.selectIcon}\n                                    </button>\n                                    <button title="${e.out("Remove")}" class="input-row-bgremove"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                                    <button title="${e.out("Adjust")}" class="input-row-bgimageadjust" style="width:40px"><svg class="is-icon-flex"><use xlink:href="#ion-wrench"></use></svg></button>\n                                </div>\n                            </div>\n\n                            <div style="padding:30px 0 10px;">\n                                <label class="label-row-grayscale label-checkbox" for="chkRowGrayscale"><input id="chkRowGrayscale" class="chk-row-grayscale" type="checkbox" /> ${e.out("Grayscale")}</label>\n                            </div>\n\n                            <div class="div-row-wrapcolumns" style="display:none;flex-direction:column;padding-bottom:7px">\n                                <div style="padding-top:20px;padding-bottom:3px;">${e.out("Wrap Columns (Breakpoint)")}:</div>\n                                <div style="padding-top:3px;padding-bottom:5px;display:flex;align-items: center;">\n\n                                    <label class="flex mr-3" title="${e.out("Tablet (Landscape)")}">\n                                        <input type="radio" id="rdoColMdWrap" name="boxWrap" value="md">\n                                        <svg class="is-icon-flex" style="margin-left:3px;width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>\n                                    </label>\n                                    <label class="flex mr-3" title="${e.out("Tablet (Portrait)")}">\n                                        <input type="radio" id="rdoColSmWrap" name="boxWrap" value="sm">\n                                        <svg class="is-icon-flex" style="margin-left:3px;width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>\n                                    </label>\n                                    <label class="flex" title="${e.out("Mobile")}">\n                                        <input type="radio" id="rdoColXsWrap" name="boxWrap" value="xs">\n                                        <svg class="is-icon-flex" style="margin-left:3px;width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>\n                                    </label>\n\n                                </div>\n                            </div>\n\n                            <div class="is-separator"></div>\n                         \n                            <div class="div-target" style="display: flex;justify-content: flex-end;padding: 5px 0 0;">\n                                <button title="${e.out("Desktop")}" class="input-device on" data-value="" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-desktop"></use></svg>\n                                </button>\n                                \x3c!--<button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:19px;height:19px;"><use xlink:href="#icon-device-laptop"></use></svg>\n                                </button>--\x3e\n                                <button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>\n                                </button>\n                                <button title="${e.out("Tablet (Portrait)")}" class="input-device" data-value="sm" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>\n                                </button>\n                                <button title="${e.out("Mobile")}" class="input-device" data-value="xs" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:13px;height:13px"><use xlink:href="#icon-device-mobile"></use></svg>\n                                </button>\n                            </div>\n\n                            <div style="padding-top:0;padding-bottom:3px;">${e.out("Visibility")}:</div>\n                            <div class="div-visibility" style="display:flex;">\n                                <button title="${e.out("Visible")}" class="input-visible on" data-value="sm" style="width:100px;height:34px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-eye"></use></svg>\n                                    <span>${e.out("Visible")}</span>\n                                </button>\n                                <button title="${e.out("Hidden")}" class="input-hidden" data-value="xs" style="width:100px;height:34px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-eye-off"></use></svg>\n                                    <span>${e.out("Hidden")}</span>\n                                </button>\n                            </div>\n\n                            <div class="div-colsperline" style="flex-direction:column">\n                                <label style="margin:20px 0 0;display:flex;flex-direction:column">\n                                    <span style="margin:0 4px 3px 0">${e.out("Columns per Line")}:</span>\n                       \n                                    \n                                    <select class="input-numofcols" style="width:50%;display:none">\n                                        <option value="">Default</option>\n                                        <option value="2">2 columns per row</option>\n                                        <option value="3">3 columns per row</option>\n                                        <option value="4">4 columns per row</option>\n                                        <option value="5">5 columns per row</option>\n                                        <option value="6">6 columns per row</option>\n                                    </select>\n                                </label>\n                                <div class="flex">\n                                    <button title="1" class="input-colsperline on" data-value="1" style="width:40px;height:25px;">1</button>\n                                    <button title="2" class="input-colsperline" data-value="2" style="width:40px;height:25px;">2</button>\n                                    <button title="3" class="input-colsperline" data-value="3" style="width:40px;height:25px;">3</button>\n                                    <button title="4" class="input-colsperline" data-value="4" style="width:40px;height:25px;">4</button>\n                                    <button title="5" class="input-colsperline" data-value="5" style="width:40px;height:25px;">5</button>\n                                    <button title="6" class="input-colsperline" data-value="6" style="width:40px;height:25px;">6</button>\n                                    <button title="${e.out("Default")}" class="input-colsperline" data-value="" style="width:120px;height:25px;">${e.out("Default")}</button>\n                                </div>\n                            </div>\n\n                            <div id="divReverseColumns" style="diplay:none">\n                                <label for="chkReverseColumns" style="margin:20px 0 0;display:flex"><input id="chkReverseColumns" type="checkbox"  style="margin:0 7px 0 0"/><span>${e.out("Reverse Columns")}</span></label>\n                            </div>\n                        </div>\n\n                        <div id="divRowMore" class="is-tab-content" data-group="rowsettings" tabindex="-1">\n\n                            <label for="inpRowId">${e.out("Add Row ID")}:</label>\n                            <div>\n                                <input id="inpRowId" class="input-row-id" type="text" onkeypress="return /[0-9a-zA-Z_]/i.test(event.key)" style="height:38px">\n                            </div>\n        \n                            <label for="inpRowCssClasses" style="padding:20px 0 3px;">${e.out("Add Css Classes")}:</label>\n                            <div>\n                                <input id="inpRowCssClasses" class="input-row-classes" type="text" style="height:38px">\n                            </div>\n\n                        </div>\n                    \n                    </div>\n                        \n                </div>\n            </div>\n            \n            `;n.appendHtml(i,r),o=i.querySelector(".rowmore");const l=i.querySelector(".is-modal.rowsettings"),a=document.querySelector(".is-modal.imagesource"),d=document.querySelector(".is-modal.imageadjust"),c=document.querySelector(".is-modal.imageadjust2");this.rowSettings=l,this.imageSource=a,this.imageAdjust=d,this.imageAdjust2=c,this.divRowGeneral=i.querySelector("#divRowGeneral");const u=l.querySelector(".div-colsperline");this.builder.enableColumnsPerLine||(u.style.display="none");let p=o.querySelector(".row-settings");p&&n.addEventListener(p,"click",(()=>{const t=this.rowOverlay();t&&(this.readRowStyles(t),e.saveSelection(),e.showModal(l,!1,(()=>{"flex"===i.querySelector(".is-rte-tool").style.display&&e.restoreSelection()})),e.hidePop(this.rowMore))}));let h=l.querySelector(".input-row-bgcolor");h.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{const i=this.rowOverlay();i&&(i.style.backgroundColor=t,e.style.backgroundColor=t,this.builder.opts.onChange())}),l.querySelector(".input-row-bgcolor").style.backgroundColor,(()=>{h.removeAttribute("data-focus"),h.focus()})),h.setAttribute("data-focus",!0)}));const g=l.querySelector(".input-cell-bgimage");g&&n.addEventListener(g,"click",(()=>{const t=this.rowOverlay();if(!t)return;let e="";t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")&&(e=t.style.backgroundImage.slice(4,-1).replace(/["']/g,"")),this.builder.colTool.openImagePicker(e,(t=>{const e=this.rowOverlay();if(!e)return;this.builder.uo.saveForUndo(),e.style.backgroundImage=`url("${t}")`,e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat";const i=l.querySelector(".cell-bgimage-preview"),n=this.rowSettings.querySelector(".input-row-bgimageadjust"),o=this.rowSettings.querySelector(".input-row-bgremove");n.style.display="none",o.style.display="none",""!==t?(i.innerHTML=`<img src="${t}">`,n.style.display="flex",o.style.display="flex"):i.innerHTML="",this.builder.opts.onChange()}),g)}));const m=l.querySelector(".input-row-bgimageadjust");m&&n.addEventListener(m,"click",(()=>{const t=this.rowOverlay();t&&this.builder.colTool.openImageAdjust(t,m)})),p=l.querySelector(".input-row-bgremove"),p&&n.addEventListener(p,"click",(()=>{const t=this.rowOverlay();if(!t)return;this.builder.uo.saveForUndo(),t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundRepeat="",t.style.backgroundPosition="";const e=l.querySelector(".cell-bgimage-preview"),i=this.rowSettings.querySelector(".input-row-bgimageadjust"),n=this.rowSettings.querySelector(".input-row-bgremove");i.style.display="none",n.style.display="none",e.innerHTML="",this.builder.opts.onChange()})),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(this.divRowGeneral.querySelector(".input-select").style.display="none");const f=this.divRowGeneral.querySelector(".input-select");this.builder.renderSelectAsset(f,"image",(t=>{const e=this.rowOverlay();if(!e)return;this.builder.uo.saveForUndo(),e.style.backgroundImage=`url("${t}")`,e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat";const i=l.querySelector(".cell-bgimage-preview"),n=this.rowSettings.querySelector(".input-row-bgimageadjust"),o=this.rowSettings.querySelector(".input-row-bgremove");n.style.display="none",o.style.display="none",""!==t?(i.innerHTML=`<img src="${t}">`,n.style.display="flex",o.style.display="flex"):i.innerHTML="",this.builder.opts.onChange()}));const b=new em({colors:this.builder.colors,gradientcolors:this.builder.opts.gradientcolors,lang:this.builder.opts.lang});let v=l.querySelector(".input-row-gradient");v.addEventListener("click",(()=>{this.builder.uo.saveForUndo(!0);const t=this.rowOverlay();t&&(b.open(t,(()=>{this.rowSettings.querySelector(".input-row-bgimageadjust").style.display="none";this.rowSettings.querySelector(".input-row-bgremove").style.display="none";this.rowSettings.querySelector(".cell-bgimage-preview").innerHTML="";this.imageSource.querySelector(".input-src").value="",this.builder.opts.onChange()}),(t=>{v.removeAttribute("data-focus"),v.focus()})),v.setAttribute("data-focus",!0))}));const y=l.querySelector(".chk-row-grayscale");y.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const t=this.rowOverlay();t&&(y.checked?t.style.filter="grayscale(1)":t.style.filter&&(t.style.filter=t.style.filter.replace("grayscale(1)","")),this.builder.opts.onChange())}));let x=this.rowSettings.querySelectorAll(".input-device");x.forEach((t=>{t.addEventListener("click",(()=>{let i=e.rowSelected();i&&(this.rowSettings.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.add("on"),this.realtimeVisibility(i))}))}));let w=this.rowSettings.querySelector(".input-visible"),S=this.rowSettings.querySelector(".input-hidden");w.addEventListener("click",(()=>{let t=e.rowSelected();if(!t)return;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let i=this.rowSettings.querySelector(".div-target"),n=this.builder.responsive.readTarget(i);"xs"===n?t.classList.remove("xs-hidden"):"sm"===n?t.classList.remove("sm-hidden"):"md"===n?t.classList.remove("md-hidden"):""===n&&t.classList.remove("desktop-hidden"),w.classList.add("on"),S.classList.remove("on"),this.builder.opts.onChange()})),S.addEventListener("click",(()=>{let t=e.rowSelected();if(!t)return;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let i=this.rowSettings.querySelector(".div-target"),n=this.builder.responsive.readTarget(i);"xs"===n?t.classList.add("xs-hidden"):"sm"===n?t.classList.add("sm-hidden"):"md"===n?t.classList.add("md-hidden"):""===n&&t.classList.add("desktop-hidden"),w.classList.remove("on"),S.classList.add("on"),this.builder.opts.onChange()})),x=this.rowSettings.querySelectorAll(".input-colsperline"),x.forEach((t=>{t.addEventListener("click",(()=>{let i=e.rowSelected();if(!i)return;this.builder.uo.saveForUndo(),this.rowSettings.querySelectorAll(".input-colsperline").forEach((t=>{t.classList.remove("on")})),t.classList.add("on");let n=t.getAttribute("data-value"),o=this.rowSettings.querySelector(".div-target"),s=this.builder.responsive.readTarget(o);"xs"===s?(i.classList.remove("xs-items-1"),i.classList.remove("xs-items-2"),i.classList.remove("xs-items-3"),i.classList.remove("xs-items-4"),i.classList.remove("xs-items-5"),i.classList.remove("xs-items-6"),""!==n&&i.classList.add(`xs-items-${n}`)):"sm"===s?(i.classList.remove("sm-items-1"),i.classList.remove("sm-items-2"),i.classList.remove("sm-items-3"),i.classList.remove("sm-items-4"),i.classList.remove("sm-items-5"),i.classList.remove("sm-items-6"),""!==n&&i.classList.add(`sm-items-${n}`)):"md"===s?(i.classList.remove("md-items-1"),i.classList.remove("md-items-2"),i.classList.remove("md-items-3"),i.classList.remove("md-items-4"),i.classList.remove("md-items-5"),i.classList.remove("md-items-6"),""!==n&&i.classList.add(`md-items-${n}`)):""===s&&(i.classList.remove("desktop-items-1"),i.classList.remove("desktop-items-2"),i.classList.remove("desktop-items-3"),i.classList.remove("desktop-items-4"),i.classList.remove("desktop-items-5"),i.classList.remove("desktop-items-6"),""!==n&&i.classList.add(`desktop-items-${n}`)),this.builder.settings.onChange()}))}));const _=this.rowSettings.querySelector("#chkReverseColumns");_.addEventListener("click",(()=>{let t=e.rowSelected();if(!t)return;this.builder.uo.saveForUndo();let i=this.rowSettings.querySelector(".div-target"),n=this.builder.responsive.readTarget(i);"xs"===n?_.checked?t.classList.add("xs-column-reverse"):t.classList.remove("xs-column-reverse"):"sm"===n?_.checked?t.classList.add("sm-column-reverse"):t.classList.remove("sm-column-reverse"):"md"===n?_.checked?t.classList.add("md-column-reverse"):t.classList.remove("md-column-reverse"):""===n&&(_.checked?t.classList.add("desktop-column-reverse"):t.classList.remove("desktop-column-reverse")),this.builder.settings.onChange()}));let C=l.querySelector(".input-row-id");C.addEventListener("change",(()=>{let t=e.rowSelected();t&&(this.builder.uo.saveForUndo(),""!==C.value?t.setAttribute("id",C.value):t.removeAttribute("id"),this.builder.opts.onChange())}));let k=l.querySelector(".input-row-classes");k.addEventListener("change",(()=>{let t=e.rowSelected();if(!t)return;this.builder.uo.saveForUndo();let i=[],n=t.getAttribute("data-class");n&&(i=n.split(" "));let o=[],s=k.value;o=s.split(" "),i.forEach((e=>{o.includes(e)||t.classList.remove(e)})),o.forEach((e=>{""!==e&&t.classList.add(e)})),t.setAttribute("data-class",s),""===t.getAttribute("data-class")&&t.removeAttribute("data-class"),this.builder.opts.onChange()})),p=o.querySelector(".row-up"),p&&n.addEventListener(p,"click",(()=>{this.grid.moveRowUp()})),p=o.querySelector(".row-down"),p&&n.addEventListener(p,"click",(()=>{this.grid.moveRowDown()})),p=o.querySelector(".row-duplicate"),p&&n.addEventListener(p,"click",(()=>{this.grid.duplicateRow(),e.hidePop(o),e.hideColumnTool(),e.clearControls()})),p=o.querySelector(".row-html"),p&&n.addEventListener(p,"click",(()=>{let i,n=e.cellSelected();if(i=n?n.parentNode:e.rowSelected(),!i)return;new Ei(t).view("row")}));const E=o.querySelector(".row-locking");E&&n.addEventListener(E,"click",(t=>{let i=e.rowSelected();if(!i)return;let s=!1;i.querySelectorAll("[data-noedit]").forEach((t=>{t.hasAttribute("data-html")||(s=!0)})),s?(Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-col-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-row-overlay")||(t.removeAttribute("data-noedit"),t.contentEditable=!0,this.builder.colTool.showHideLockIndicator(t),this.builder.element.applyBehavior(t))})),n.removeClass(E,"on")):(Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-col-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-row-overlay")||(t.setAttribute("data-noedit",""),t.contentEditable=!1,this.util.clearActiveElement(!0),this.builder.colTool.showHideLockIndicator(t),this.builder.element.applyBehavior(t))})),n.addClass(E,"on")),e.hidePop(o),t.preventDefault()}))}this.rowMore=o}realtimeVisibility(t,e){if(e){const t=this.builder.builderStuff.querySelector(".is-modal.content-preview.active");if(t){this.rowSettings.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.contains("is-screen-1920")||t.classList.contains("is-screen-1440")?this.rowSettings.querySelector('.input-device[data-value=""]').classList.add("on"):t.classList.contains("is-screen-1024")?this.rowSettings.querySelector('.input-device[data-value="md"]').classList.add("on"):t.classList.contains("is-screen-768")?this.rowSettings.querySelector('.input-device[data-value="sm"]').classList.add("on"):t.classList.contains("is-screen-375")&&this.rowSettings.querySelector('.input-device[data-value="xs"]').classList.add("on")}}let i=this.rowSettings.querySelector(".div-target"),n=this.rowSettings.querySelector(".div-visibility"),o=this.builder.responsive.readTarget(i),s=this.builder.responsive.getVisibility(t,o);this.builder.responsive.showVisibility(n,s),this.rowSettings.querySelectorAll(".input-colsperline").forEach((t=>{t.classList.remove("on")}));let r=!1;"xs"===o?(r=t.classList.contains("xs-column-reverse"),this.rowSettings.querySelector('.input-colsperline[data-value=""]').style.display="none",t.classList.contains("xs-items-1")?this.rowSettings.querySelector('.input-colsperline[data-value="1"]').classList.add("on"):t.classList.contains("xs-items-2")?this.rowSettings.querySelector('.input-colsperline[data-value="2"]').classList.add("on"):t.classList.contains("xs-items-3")?this.rowSettings.querySelector('.input-colsperline[data-value="3"]').classList.add("on"):t.classList.contains("xs-items-4")?this.rowSettings.querySelector('.input-colsperline[data-value="4"]').classList.add("on"):t.classList.contains("xs-items-5")?this.rowSettings.querySelector('.input-colsperline[data-value="5"]').classList.add("on"):t.classList.contains("xs-items-6")?this.rowSettings.querySelector('.input-colsperline[data-value="6"]').classList.add("on"):this.rowSettings.querySelector('.input-colsperline[data-value="1"]').classList.add("on"),e||this.builder.livePreview.resizePreview(375)):"sm"===o?(r=t.classList.contains("sm-column-reverse"),this.rowSettings.querySelector('.input-colsperline[data-value=""]').style.display="flex",t.classList.contains("sm-items-1")?this.rowSettings.querySelector('.input-colsperline[data-value="1"]').classList.add("on"):t.classList.contains("sm-items-2")?this.rowSettings.querySelector('.input-colsperline[data-value="2"]').classList.add("on"):t.classList.contains("sm-items-3")?this.rowSettings.querySelector('.input-colsperline[data-value="3"]').classList.add("on"):t.classList.contains("sm-items-4")?this.rowSettings.querySelector('.input-colsperline[data-value="4"]').classList.add("on"):t.classList.contains("sm-items-5")?this.rowSettings.querySelector('.input-colsperline[data-value="5"]').classList.add("on"):t.classList.contains("sm-items-6")?this.rowSettings.querySelector('.input-colsperline[data-value="6"]').classList.add("on"):this.rowSettings.querySelector('.input-colsperline[data-value=""]').classList.add("on"),e||this.builder.livePreview.resizePreview(768)):"md"===o?(r=t.classList.contains("md-column-reverse"),this.rowSettings.querySelector('.input-colsperline[data-value=""]').style.display="flex",t.classList.contains("md-items-1")?this.rowSettings.querySelector('.input-colsperline[data-value="1"]').classList.add("on"):t.classList.contains("md-items-2")?this.rowSettings.querySelector('.input-colsperline[data-value="2"]').classList.add("on"):t.classList.contains("md-items-3")?this.rowSettings.querySelector('.input-colsperline[data-value="3"]').classList.add("on"):t.classList.contains("md-items-4")?this.rowSettings.querySelector('.input-colsperline[data-value="4"]').classList.add("on"):t.classList.contains("md-items-5")?this.rowSettings.querySelector('.input-colsperline[data-value="5"]').classList.add("on"):t.classList.contains("md-items-6")?this.rowSettings.querySelector('.input-colsperline[data-value="6"]').classList.add("on"):this.rowSettings.querySelector('.input-colsperline[data-value=""]').classList.add("on"),e||this.builder.livePreview.resizePreview(1024)):(r=t.classList.contains("desktop-column-reverse"),this.rowSettings.querySelector('.input-colsperline[data-value=""]').style.display="flex",t.classList.contains("desktop-items-1")?this.rowSettings.querySelector('.input-colsperline[data-value="1"]').classList.add("on"):t.classList.contains("desktop-items-2")?this.rowSettings.querySelector('.input-colsperline[data-value="2"]').classList.add("on"):t.classList.contains("desktop-items-3")?this.rowSettings.querySelector('.input-colsperline[data-value="3"]').classList.add("on"):t.classList.contains("desktop-items-4")?this.rowSettings.querySelector('.input-colsperline[data-value="4"]').classList.add("on"):t.classList.contains("desktop-items-5")?this.rowSettings.querySelector('.input-colsperline[data-value="5"]').classList.add("on"):t.classList.contains("desktop-items-6")?this.rowSettings.querySelector('.input-colsperline[data-value="6"]').classList.add("on"):this.rowSettings.querySelector('.input-colsperline[data-value=""]').classList.add("on"),e||this.builder.livePreview.resizePreview(1920));this.rowSettings.querySelector("#chkReverseColumns").checked=r}render(t){const e=this.dom,i=this.builder.util,n=this.builder.builderStuff;let o=this.rowMore,s=t.querySelector(".is-row-tool");if(!s){let r=`<div class="is-tool is-row-tool">\n                <div title="${i.out("Move")}" role="button" tabindex="-1" class="row-handle" style="width:100%;cursor:move;text-align:center;"><svg class="is-icon-flex"><use xlink:href="#ion-move"></use></svg></div>\n                <button type="button" tabindex="-1" title="${i.out("More")}" class="row-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n                <button type="button" tabindex="-1" title="${i.out("Grid Editor")}" class="row-grideditor"><svg class="is-icon-flex"><use xlink:href="#ion-grid"></use></svg></button>\n                <button type="button" tabindex="-1" title="${i.out("Delete")}" class="row-remove"><svg class="is-icon-flex"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            </div>\n            <div class="is-tool is-col-tool">\n                <button type="button" tabindex="-1" title="${i.out("Add")}" class="cell-add"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n                <button type="button" tabindex="-1" title="${i.out("More")}" class="cell-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n                <button type="button" tabindex="-1" title="${i.out("Delete")}" class="cell-remove"><svg class="is-icon-flex" style="margin-left:-1px"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            </div>\n            `;e.appendHtml(t,r),s=t.querySelector(".is-row-tool");let l=s.querySelectorAll("[title]");Array.prototype.forEach.call(l,(t=>{t.setAttribute("data-title",t.getAttribute("title")),this.builder.iframe?this.builder.tooltip.set(t,5,3,!0):this.builder.tooltip.set(t,5,3)}));let a=t.querySelector(".is-col-tool");l=a.querySelectorAll("[title]"),Array.prototype.forEach.call(l,(t=>{t.setAttribute("data-title",t.getAttribute("title")),this.builder.iframe?this.builder.tooltip.set(t,5,3,!0):this.builder.tooltip.set(t,5,3)}));let d=window.getComputedStyle(a,null).getPropertyValue("margin-left");0===parseInt(d)&&this.builder.backwardCompatible();const c=a.querySelector(".cell-add");c&&e.addEventListener(c,"click",(()=>{if(!i.cellSelected())return;let t,n,o=this.builder.builderStuff.querySelector(".is-pop.quickadd");if(o.querySelector(".is-pop-tabs").style.display="flex",this.builder.iframe){let e=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,i=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;t=c.getBoundingClientRect().top+e+10,n=c.getBoundingClientRect().left+i+5}else t=c.getBoundingClientRect().top+window.pageYOffset,n=c.getBoundingClientRect().left+window.pageXOffset;i.showPop(o,!1,c),o.style.top=t+35+"px",o.style.left=n+"px",e.removeClass(o,"arrow-bottom"),e.removeClass(o,"arrow-left"),e.removeClass(o,"arrow-right"),e.removeClass(o,"center"),e.removeClass(o,"right"),e.addClass(o,"arrow-top"),e.addClass(o,"left"),"left"===o.querySelector(".active").getAttribute("data-value")?o.setAttribute("data-mode","cell-left"):o.setAttribute("data-mode","cell-right")}));const u=a.querySelector(".cell-more");u&&e.addEventListener(u,"click",(()=>{let t,o,s=i.cellSelected();if(!s)return;if(this.builder.iframe){let e=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,i=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;t=u.getBoundingClientRect().top+e,o=u.getBoundingClientRect().left+i}else t=u.getBoundingClientRect().top+window.pageYOffset,o=u.getBoundingClientRect().left+window.pageXOffset;const r=n.querySelector(".columnmore");i.showPop(r,!1,u),r.style.top=t+35+"px",r.style.left=o-7+"px",e.removeClass(r,"arrow-bottom"),e.removeClass(r,"arrow-left"),e.removeClass(r,"arrow-right"),e.removeClass(r,"center"),e.removeClass(r,"right"),e.addClass(r,"arrow-top"),e.addClass(r,"left");const l=r.querySelector(".cell-locking");s.hasAttribute("data-noedit")?e.addClass(l,"on"):e.removeClass(l,"on")}));const p=a.querySelector(".cell-remove");p&&e.addEventListener(p,"click",(()=>{new Ti(this.builder).removeColumn(),i.clearControls()}));let h=s.querySelector(".row-grideditor");h&&e.addEventListener(h,"click",(()=>{const t=n.querySelector(".grideditor");if(e.hasClass(t,"active")){e.removeClass(t,"active");const i=document.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(i,(t=>{t.removeAttribute("grideditor")}))}else{this.util.showModal(t,!1,(()=>{h.removeAttribute("data-focus"),h.focus()})),h.setAttribute("data-focus",!0);const n=document.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(n,(t=>{t.setAttribute("grideditor","")}));const o=t.querySelector(".grid-outline");document.querySelector(this.builder.opts.container).hasAttribute("gridoutline")?e.addClass(o,"on"):e.removeClass(o,"on");const s=t.querySelector(".cell-locking");let r=i.cellSelected();r&&r.hasAttribute("data-noedit")?e.addClass(s,"on"):e.removeClass(s,"on")}}));const g=s.querySelector(".row-more");g&&e.addEventListener(g,"click",(()=>{let t,n,s,r=i.cellSelected();if(t=r?r.parentNode:i.rowSelected(),!t)return;if(e.removeClass(t,"row-outline"),i.hideColumnTool(),this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,e=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;n=g.getBoundingClientRect().top+t,s=g.getBoundingClientRect().left+e}else n=g.getBoundingClientRect().top+window.pageYOffset,s=g.getBoundingClientRect().left+window.pageXOffset;i.showPop(o,!1,g),o.style.top=n-8+"px",e.removeClass(o,"arrow-bottom"),e.removeClass(o,"arrow-left"),e.removeClass(o,"arrow-right"),e.removeClass(o,"center"),e.removeClass(o,"right"),e.removeClass(o,"left"),"right"===this.builder.opts.rowTool?(o.style.left=s-o.offsetWidth-10+"px",e.addClass(o,"arrow-right"),e.addClass(o,"left")):(o.style.left=s+35+"px",e.addClass(o,"arrow-left"),e.addClass(o,"left"));let l=o.querySelector(".row-html"),a=o.querySelector(".row-duplicate");t.querySelector("[data-html]")?(l&&(l.style.display="none"),a&&(a.style.display="none")):(l&&(l.style.display=""),a&&(a.style.display=""));let d=!1;t.querySelectorAll("[data-noedit]").forEach((t=>{t.hasAttribute("data-html")||(d=!0)}));const c=o.querySelector(".row-locking");d?e.addClass(c,"on"):e.removeClass(c,"on")}));let m=s.querySelector(".row-remove");m&&e.addEventListener(m,"click",(()=>{this.grid.removeRow(),i.clearControls()}))}}readRowStyles(t){this.util.clearActiveElement();let e=t.style.backgroundColor,i=this.rowSettings.querySelector(".input-row-bgcolor");i.style.backgroundColor=e||"transparent";let n="";const o=this.rowSettings.querySelector(".cell-bgimage-preview"),s=this.rowSettings.querySelector(".input-row-bgimageadjust");s.style.display="none";const r=this.rowSettings.querySelector(".input-row-bgremove");r.style.display="none",t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")?(n=t.style.backgroundImage.slice(4,-1).replace(/["']/g,""),o.innerHTML=`<img src="${n}">`,s.style.display="flex",r.style.display="flex"):o.innerHTML="";const l=this.rowSettings.querySelector(".chk-row-grayscale");l.checked=!1,t.style.filter&&-1!==t.style.filter.indexOf("grayscale")&&(l.checked=!0);let a=t.parentNode;this.realtimeVisibility(a,!0);const d=this.rowSettings.querySelector("#divReverseColumns");let c=3;a.querySelector(".is-row-overlay")&&(c=4),a.childElementCount-c>1?d.style.display="flex":d.style.display="none";let u=this.rowSettings.querySelector(".input-row-id");u.value="";const p=a.getAttribute("id");p&&(u.value=p);let h=this.rowSettings.querySelector(".input-row-classes");h.value="";const g=a.getAttribute("data-class");h.value=g}rowOverlay(){let t=this.util.rowSelected();if(!t)return!1;let e=t.querySelector(".is-row-overlay");return e||(this.dom.appendHtml(t,'<div class="is-row-overlay"></div>'),e=t.querySelector(".is-row-overlay")),t.classList.add("relative"),e}}class lm{constructor(t){this.builder=t;const e=this.builder.dom;this.dom=e}render(t){const e=this.dom,i=this.builder.util,n=qi(this.builder);let o=t.querySelector(".is-rowadd-tool");if(!o){const n=`<div class="is-rowadd-tool" style="height:0">\n                <button type="button" tabindex="-1" title="${i.out("Add")}" title="${i.out("Add")}" style="outline:none;line-height:1;margin:0;padding:0;cursor:pointer;background-color:rgba(255,255,255,0.9);"><svg class="is-icon-flex" style="fill:rgba(0, 0, 0, 0.8);width:17px;height:17px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            </div>`;e.appendHtml(t,n),o=t.querySelector(".is-rowadd-tool");let s=o.querySelectorAll("[title]");Array.prototype.forEach.call(s,(t=>{t.setAttribute("data-title",t.getAttribute("title")),this.builder.iframe?this.builder.tooltip.set(t,5,3,!0):this.builder.tooltip.set(t,5,3)}))}let s=o.querySelector("button");e.addEventListener(s,"click",(()=>{n.querySelector(".is-pop-tabs").style.display="none";const t=window.innerHeight;let o,r;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top,e=this.builder.iframe.getBoundingClientRect().left;o=s.getBoundingClientRect().top+t,r=s.getBoundingClientRect().left+e}else o=s.getBoundingClientRect().top,r=s.getBoundingClientRect().left;i.showPop(n,!1,s);const l=n.offsetWidth,a=n.offsetHeight;return t-o>a?(n.style.top=o+window.pageYOffset+27+"px",n.style.left=r-l/2+7+"px",e.removeClass(n,"arrow-bottom"),e.removeClass(n,"arrow-right"),e.removeClass(n,"arrow-left"),e.removeClass(n,"center"),e.addClass(n,"arrow-top"),e.addClass(n,"center")):(n.style.top=o+window.pageYOffset-a-8+"px",n.style.left=r-l/2+7+"px",e.removeClass(n,"arrow-top"),e.removeClass(n,"arrow-right"),e.removeClass(n,"arrow-left"),e.removeClass(n,"center"),e.addClass(n,"arrow-bottom"),e.addClass(n,"center")),n.setAttribute("data-mode","row"),!1}))}}class am{constructor(t){this.builder=t,this.grid=new Ti(t);const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n;let o=i.querySelector(".is-pop.columnmore"),s=`\n            <button type="button" title="${e.out("Increase")}" class="cell-increase"><span><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-increase"></use></svg></span>${e.out("Increase")}</button>\n            <button type="button" title="${e.out("Decrease")}" class="cell-decrease"><span><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-decrease"></use></svg></span>${e.out("Decrease")}</button>      \n        `,r="";if(t.opts.columnHtmlEditor&&(r=`<button type="button" title="${e.out("HTML")}" class="cell-html">\n                <span><svg class="is-icon-flex" style="margin-right:-3px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></span>${e.out("HTML")}\n            </button>`),!o){let l,a,d=`\n            <div class="is-tool is-column-tool">\n                <button type="button" tabindex="-1" title="${e.out("Add")}" class="cell-add"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n                <button type="button" tabindex="-1" title="${e.out("More")}" class="cell-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n                <button type="button" tabindex="-1" title="${e.out("Delete")}" class="cell-remove"><svg class="is-icon-flex" style="margin-left:-1px"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            </div>\n            \n            <div class="is-pop columnmore" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div style="display:flex;flex-flow:wrap;">\n                    <button type="button" title="${e.out("Move Left")}" class="cell-prev"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-left"></use></svg></span>${e.out("Move Left")}</button>\n                    <button type="button" title="${e.out("Move Right")}" class="cell-next"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-right"></use></svg></span>${e.out("Move Right")}</button>\n                    <button type="button" title="${e.out("Move Up")}" class="cell-up"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></span>${e.out("Move Up")}</button>\n                    <button type="button" title="${e.out("Move Down")}" class="cell-down"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></span>${e.out("Move Down")}</button>\n                    ${s}\n                    <button type="button" title="${e.out("Duplicate")}" class="cell-duplicate"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></span>${e.out("Duplicate")}</button>\n                    ${r}\n                    <div class="is-separator"></div>\n                    <button type="button" title="${e.out("Lock")}" class="cell-locking"><span><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-lock"></use></svg></span>${e.out("Lock")}</button>\n                    <button type="button" title="${e.out("Settings")}" class="cell-settings"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-gear"></use></svg></span>${e.out("Settings")}</button>\n                    \n                    \x3c!--\n                    <button title="${e.out("Lock")}" class="cell-locking">\n                        <svg class="is-icon-flex"><use xlink:href="#icon-lock"></use></svg>\n                    </button>\n                    <button title="${e.out("Settings")}" class="cell-settings">\n                        <svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg>\n                        <span>${e.out("Settings")}</span>\n                    </button>\n                    --\x3e\n                </div>\n            </div>\n\n            <div class="is-modal columnsettings" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable">\n                        ${e.out("Column Settings")}\n                        <button class="is-modal-close" title="${e.out("Close")}" tabindex="-1">&#10005;</button>\n                    </div>\n\n                    <div style="padding:0;margin-top:35px;">\n\n                        <div class="is-tabs" data-group="cellsettings">\n                            <a title="${e.out("General")}" id="tabCellGeneral" href="#" data-content="divCellGeneral" class="active">${e.out("General")}</a>\n                            <a title="${e.out("Content")}" id="tabCellContent" href="#" data-content="divCellContent">${e.out("Content")}</a>\n                            ${this.builder.useLightbox?`\n                            <a title="${e.out("On Click")}" id="tabCellClick" href="#" data-content="divCellClick">${e.out("On Click")}</a>\n                            `:""}\n                            <a title="${e.out("More")}" id="tabCellMore" href="#" data-content="divCellMore">${e.out("More")}</a>\n                        </div>\n                        <div id="divCellGeneral" class="is-tab-content active" data-group="cellsettings" style="display:flex" tabindex="-1">\n                        \n                            <div style="padding-bottom: 3px;">${e.out("Background Color")}:</div>\n                            <div style="display:flex;">\n                                <button title="${e.out("Background Color")}" class="input-cell-bgcolor is-btn-color" style="margin-right:15px"></button>\n                                <button title="${e.out("Gradient")}" class="input-cell-gradient classic" data-value="+"> ${e.out("Gradient")} </button>\n                            </div>\n\n                            <div style="padding-top:20px;padding-bottom: 3px;">${e.out("Background Image")}:</div>\n                            <div>\n                                <div class="cell-bgimage-preview"></div>\n                                <div style="display: flex">\n                                    <button title="${e.out("Image")}" class="input-cell-bgimage">\n                                        <svg class="is-icon-flex"><use xlink:href="#ion-image"></use></svg>\n                                        <span>${e.out("Image")}</span>\n                                    </button>\n                                    <button title="${e.out("Select")}" class="input-select">${this.builder.opts.selectIcon}</button>\n                                    <button title="${e.out("Remove")}" class="input-cell-bgremove"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                                    <button title="${e.out("Adjust")}" class="input-cell-bgimageadjust" style="width:40px"><svg class="is-icon-flex"><use xlink:href="#ion-wrench"></use></svg></button>\n                                </div>\n                            </div>\n\n                            <div style="padding-top:20px;padding-bottom:3px;">${e.out("Text Color")}:</div>\n                            <div class="div-content-textcolor">\n                                <button title="0" class="input-cell-textcolor" data-command="dark">${e.out("Dark")}</button>\n                                <button title="10" class="input-cell-textcolor" data-command="light">${e.out("Light")}</button>\n                                \n                                <button title="${e.out("Clear")}" class="input-cell-textcolor" data-command=""><svg class="is-icon-flex" style="flex:none;width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                            </div>\n\n                            <div style="padding:30px 0 10px;">\n                                <label class="label-cell-grayscale label-checkbox" for="chkCellGrayscale"><input id="chkCellGrayscale" class="chk-cell-grayscale" type="checkbox" /> ${e.out("Grayscale")}</label>\n                            </div>\n\n                            <div style="display:none;padding:20px 0 10px;">\n                                <label class="label-cell-hideonmobile label-checkbox" for="chkHideColumnOnMobile"><input id="chkHideColumnOnMobile" class="chk-cell-hideonmobile" type="checkbox" /> ${e.out("Hide Column on Mobile")}</label>\n                            </div>\n\n                            <div class="is-separator"></div>\n                         \n                            <div class="div-target" style="display: flex;justify-content: flex-end;padding: 5px 0 0;">\n                                <button title="${e.out("Desktop")}" class="input-device on" data-value="" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-desktop"></use></svg>\n                                </button>\n                                <button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>\n                                </button>\n                                <button title="${e.out("Tablet (Portrait)")}" class="input-device" data-value="sm" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>\n                                </button>\n                                <button title="${e.out("Mobile")}" class="input-device" data-value="xs" style="width:40px;height:25px;">\n                                    <svg class="is-icon-flex" style="width:13px;height:13px"><use xlink:href="#icon-device-mobile"></use></svg>\n                                </button>\n                            </div>\n\n                            <div style="padding-top:0;padding-bottom:3px;">${e.out("Visibility")}:</div>\n                            <div class="div-visibility" style="display:flex;">\n                                <button title="${e.out("Visible")}" class="input-visible on" style="width:100px;height:34px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-eye"></use></svg>\n                                    <span>${e.out("Visible")}</span>\n                                </button>\n                                <button title="${e.out("Hidden")}" class="input-hidden" style="width:100px;height:34px;">\n                                    <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-eye-off"></use></svg>\n                                    <span>${e.out("Hidden")}</span>\n                                </button>\n                            </div>\n                            \n                            \x3c!--\n                            <div style="display:none;padding-top:20px;padding-bottom:3px;">${e.out("Enlarge Row")}:</div>\n                            <div style="display: none;">\n                                <button title="${e.out("Normal")}" class="input-row-enlarge" data-command="0" style="margin-right:1px;">${e.out("Normal")}</button>\n                                <button title="+10%" class="input-row-enlarge" data-command="10" style="width:50px;margin-right:1px;">+10%</button>\n                                <button title="+20%" class="input-row-enlarge" data-command="20" style="width:50px;margin-right:1px;">+20%</button>\n                                <button title="+30%" class="input-row-enlarge" data-command="30" style="width:50px;margin-right:1px;">+30%</button>\n                                <button title="+40%" class="input-row-enlarge" data-command="40" style="width:50px;margin-right:1px;">+40%</button>\n                                <button title="+50%" class="input-row-enlarge" data-command="50" style="width:50px;margin-right:1px;">+50%</button>\n                                <button title="+60%" class="input-row-enlarge" data-command="60" style="width:50px;margin-right:1px;">+60%</button>\n                            </div>\n                            --\x3e\n\n                        </div>\n\n                        <div id="divCellContent" class="is-tab-content" data-group="cellsettings" tabindex="-1">\n\n                            <div style="padding-bottom:3px;">${e.out("Padding")}:</div>\n\n                            <div class="div-content-padding-pos" style="align-items:center;${this.builder.useCssClasses?"":"display:none"}">\n                                <div style="width:130px">\n                                    <div style="display: flex;justify-content: center;">\n                                        <button title="${e.out("Top")}" class="input-cell-padding-pos on" data-command="top">${e.out("Top")}</button>\n                                    </div>\n                                    <div style="display: flex;justify-content: center;">\n                                        <button title="${e.out("Left")}" class="input-cell-padding-pos on" data-command="left">${e.out("Left")}</button>\n                                        <button title="${e.out("Right")}" class="input-cell-padding-pos on" data-command="right">${e.out("Right")}</button>\n                                    </div>\n                                    <div style="display: flex;justify-content: center;">\n                                        <button title="${e.out("Bottom")}" class="input-cell-padding-pos on" data-command="bottom">${e.out("Bottom")}</button>\n                                    </div>\n                                </div>\n                                <button title="${e.out("All")}" class="input-cell-padding-pos" data-command="all">${e.out("All")}</button>\n                                <button title="x" class="input-cell-padding-pos" data-command="x" style="width:50px">x</button>\n                                <button title="y" class="input-cell-padding-pos" data-command="y" style="width:50px">y</button>\n                            </div>\n\n                            <div class="div-content-padding" style="flex-flow:wrap;margin-top:7px">\n                                <div style="display:flex;flex-flow:wrap;${this.builder.useCssClasses?"display:none":""}">\n                                    <button title="0" class="input-cell-padding" data-command="0">0</button>\n                                    <button title="10" class="input-cell-padding" data-command="10">10</button>\n                                    <button title="20" class="input-cell-padding" data-command="20">20</button>\n                                    <button title="30" class="input-cell-padding" data-command="30">30</button>\n                                    <button title="40" class="input-cell-padding" data-command="40">40</button>\n                                    <button title="50" class="input-cell-padding" data-command="50">50</button>\n                                    <button title="60" class="input-cell-padding" data-command="60">60</button>\n                                </div>\n\n                                <div style="display:flex;flex-flow:wrap;${this.builder.useCssClasses?"":"display:none"}">\n                                    <button title="0" class="input-cell-padding" data-command="0">0</button>\n                                    <button title="20" class="input-cell-padding" data-command="1">10</button>\n                                    <button title="40" class="input-cell-padding" data-command="2">20</button>\n                                    <button title="60" class="input-cell-padding" data-command="3">30</button>\n                                    <button title="60" class="input-cell-padding" data-command="4">40</button>\n                                    <button title="60" class="input-cell-padding" data-command="5">50</button>\n                                    <button title="60" class="input-cell-padding" data-command="6">60</button>\n                                    <button title="60" class="input-cell-padding" data-command="7">70</button>\n                                    <button title="60" class="input-cell-padding" data-command="8">80</button>\n                                    <button title="60" class="input-cell-padding" data-command="9">90</button>\n                                    <button title="60" class="input-cell-padding" data-command="10">100</button>\n                                    <button title="60" class="input-cell-padding" data-command="11">110</button>\n                                    <button title="60" class="input-cell-padding" data-command="12">120</button>\n                                    <button title="60" class="input-cell-padding" data-command="14">140</button>\n                                    <button title="60" class="input-cell-padding" data-command="16">160</button>\n                                    <button title="${e.out("Clear")}" class="input-cell-padding" data-command=""><svg class="is-icon-flex" style="flex:none;width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                                </div>\n                            </div>\n\n                            <div style="padding-top:20px;padding-bottom:3px;">${e.out("Height")}:</div>\n                            <div class="div-content-height">\n                                <button title="Decrease" class="input-cell-height" data-command="-">-</button>\n                                <button title="Increase" class="input-cell-height" data-command="+">+</button>\n                                <button title="300" class="input-cell-height" data-command="300">300</button>\n                                <button title="400" class="input-cell-height" data-command="400">400</button>\n                                <button title="500" class="input-cell-height" data-command="500">500</button>\n                                <button title="600" class="input-cell-height" data-command="600">600</button>\n                                <button title="700" class="input-cell-height" data-command="700">700</button>\n                                <button title="${e.out("Clear")}" class="input-cell-height" data-command=""><svg class="is-icon-flex" style="flex:none;width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                            </div>\n\n                            <div style="padding-top:20px;padding-bottom:3px;">${e.out("Content Alignment")}:</div>\n                            <div style="display:flex;align-items: flex-end;">\n                                <div style="width:128px">\n                                    <div class="div-content-position">\n                                        <button class="cmd-content-pos" data-pos="topleft" title="${e.out("Top Left")}" type="button" style=""><svg class="is-icon-flex" style="transform: rotate(315deg);"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="topcenter" title="${e.out("Top Center")}" type="button"><svg class="is-icon-flex" style=""><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="topright" topright="${e.out("Top Right")}" type="button"><svg class="is-icon-flex" style="transform: rotate(45deg);"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></button>\n                                    </div>\n                                    <div class="div-content-position">\n                                        <button class="cmd-content-pos" data-pos="centerleft" title="${e.out("Center Left")}" type="button"><svg class="is-icon-flex" style=""><use xlink:href="#ion-ios-arrow-thin-left"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="center" title="${e.out("Center")}" type="button"><svg class="is-icon-flex" style="width:6px;height:6px;"><use xlink:href="#ion-android-contract"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="centerright" title="${e.out("Center Right")}" type="button"><svg class="is-icon-flex" style=""><use xlink:href="#ion-ios-arrow-thin-right"></use></svg></button>\n                                    </div>\n                                    <div class="div-content-position">\n                                        <button class="cmd-content-pos" data-pos="bottomleft" title="${e.out("Bottom Left")}" type="button" style=";"><svg class="is-icon-flex" style="transform: rotate(45deg);"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="bottomcenter" title="${e.out("Bottom Center")}" type="button"><svg class="is-icon-flex" style=""><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></button>\n                                        <button class="cmd-content-pos" data-pos="bottomright" title="${e.out("Bottom Right")}" type="button"><svg class="is-icon-flex" style="transform: rotate(315deg);"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></button>\n                                    </div>\n                                </div>\n                                <div class="div-content-position">\n                                    <button title="${e.out("Clear")}" class="cmd-content-pos" data-pos=""><svg class="is-icon-flex" style="flex:none;width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div id="divCellClick" class="is-tab-content" data-group="cellsettings" tabindex="-1">\n\n                            <label for="inpCellLinkSource" style="display:block">${e.out("Open")}:</label>\n                            <div class="image-src">\n                                \x3c!--<div class="div-input-text">--\x3e\n                                <input id="inpCellLinkSource" class="input-src" type="text" style="height:38px;">\n                                \x3c!--<button title="${e.out("Clear")}" class="input-clear"><svg class="is-icon-flex"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                                </div>--\x3e\n                                <button title="${e.out("Select")}" class="input-select" style="flex:none;width:40px;height:38px;">${this.builder.opts.selectIcon}</button>\n\n                                <button title="${e.out(this.builder.opts.otherSelectCaption)}" class="input-select-other" style="display:none;width:40px;height:38px;">\n                                    ${this.builder.opts.otherSelectIcon}\n                                </button>\n                                \n                                <div class="image-larger4" style="position: relative; flex: 0 0 auto; width: 40px; height: 38px; box-shadow: rgba(0, 0, 0, 0.32) 0px 3px 6px -6px;">\n                                    <form class="form-upload-larger" target="frameTargetLinkUpload" method="post" action="${this.builder.opts.largerImageHandler}" enctype="multipart/form-data" style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:1px;display:flex;align-items: center;justify-content: center;">\n                                        <input id="hidRefId4" name="hidRefId" type="hidden" value="">\n                                        <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                        <input onclick="blur()" title="${e.out("Select")}" id="fileImage4" name="fileImage" type="file" accept="image/*,video/mp4" style="position:absolute;top:-30px;left:0;width:100%;height:68px;opacity: 0;cursor: pointer;">\n                                    </form>\n\n                                    <iframe tabindex="-1" id="frameTargetLinkUpload" name="frameTargetLinkUpload" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                                </div>\n                            </div>\n                            <div style="padding-top:20px">\n                                <button class="input-testclick">${e.out("Test")}</button>\n                            </div>\n\n                            <p>${e.out("You can test the On-Click action on page if you lock the column by clicking the lock button")} <svg class="is-icon-flex"><use xlink:href="#icon-lock"></use></svg>.</p>\n\n                        </div>\n\n                        <div id="divCellMore" class="is-tab-content" data-group="cellsettings" tabindex="-1">\n\n                            <label for="inpCellId">${e.out("Add Column ID")}:</label>\n                            <div>\n                                <input id="inpCellId" class="input-cell-id" type="text" onkeypress="return /[0-9a-zA-Z_]/i.test(event.key)" style="height:38px">\n                            </div>\n        \n                            <label for="inpCellCssClasses" style="padding:20px 0 3px;">${e.out("Add Css Classes")}:</label>\n                            <div>\n                                <input id="inpCellCssClasses" class="input-cell-classes" type="text" style="height:38px">\n                            </div>\n\n                        </div>\n\n                    \n                    </div>\n                        \n                </div>\n                \n            </div>\n\n            <div class="is-modal imageadjust" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:420px;">\n                    <div class="is-modal-bar is-draggable">\n                        ${e.out("Background Image Adjustments")}\n                        <button class="is-modal-close" title="${e.out("Close")}" tabindex="-1">&#10005;</button>\n                    </div>\n\n                    <div style="padding:0;margin-top:25px;">\n\n                        <div class="div-target" style="display: flex;justify-content: flex-end;padding: 5px 0 0;">\n                            <button title="${e.out("Desktop")}" class="input-device on" data-value="" style="width:40px;height:25px;">\n                                <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-desktop"></use></svg>\n                            </button>\n                            <button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                                <svg class="is-icon-flex" style="width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>\n                            </button>\n                            <button title="${e.out("Tablet (Portrait)")}" class="input-device" data-value="sm" style="width:40px;height:25px;">\n                                <svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>\n                            </button>\n                            <button title="${e.out("Mobile")}" class="input-device" data-value="xs" style="width:40px;height:25px;">\n                                <svg class="is-icon-flex" style="width:13px;height:13px"><use xlink:href="#icon-device-mobile"></use></svg>\n                            </button>\n                        </div>\n\n                        <div style="padding-bottom:3px;">${e.out("Scale")}:</div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="100" max="500" value="0" class="image-scale-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 20px;">${e.out("Horizontal")}:</div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="0" max="100" value="0" class="image-hor-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 20px;">${e.out("Vertical")}:</div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="0" max="100" value="0" class="image-vert-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 10px;display:flex;justify-content:right;align-items:center;">\n                            <button title="${e.out("Reset")}" class="image-reset" style="display:flex;width:30px;height:30px;"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                        </div>\n\n                    </div>\n\n                </div>\n            </div> \n\n            <div class="is-modal imageadjust2" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:420px;">\n                    <div class="is-modal-bar is-draggable">\n                        ${e.out("Background Image Adjustments")}\n                        <button class="is-modal-close" title="${e.out("Close")}" tabindex="-1">&#10005;</button>\n                    </div>\n\n                    <div style="padding:0;margin-top:25px;">\n\n                        <div style="padding-bottom:3px;display:flex;">\n                            <span>${e.out("Scale")}:</span>\n                        </div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="100" max="500" value="0" class="image-scale-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 20px;display:flex;">\n                            <span>${e.out("Horizontal")}:</span>\n                        </div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="-150" max="150" value="0" class="image-hor-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 20px;display:flex;">\n                            <span>${e.out("Vertical")}:</span>\n                        </div>\n                        <div style="padding-top:4px">\n                            <input type="range" min="-150" max="150" value="0" class="image-vert-slider is-rangeslider">\n                        </div>\n\n                        <div style="padding-bottom:3px;padding-top: 10px;display:flex;justify-content:right;align-items:center;">\n                            <button title="${e.out("Reset")}" class="image-reset" style="display:flex;width:30px;height:30px;"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                        </div>\n                    </div>\n\n                </div>\n            </div> \n\n            <div class="is-modal imagesource" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:550px;">\n\n                    <label for="inpCellImageBgSource" style="display:block">${e.out("Source")}:</label>\n                    <div class="image-src">\n                        <input id="inpCellImageBgSource" class="input-src" type="text">\n                        <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                            ${this.builder.opts.selectIcon}\n                        </button>\n                        <div class="image-larger3 input-upload" style="position: relative; flex: 0 0 auto;box-shadow: rgba(0, 0, 0, 0.32) 0px 3px 6px -6px;">\n                            <form class="form-upload-larger" target="frameTargetCellImageUpload" method="post" action="${this.builder.opts.largerImageHandler}" enctype="multipart/form-data" style="position:absolute;display:flex;justify-content: center;align-items: center;top:0;left:0;width:100%;height:100%;">\n                                <input id="hidRefId3" name="hidRefId" type="hidden" value="">\n                                <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                                <input onclick="blur()" title="${e.out("Select")}" id="fileImage3" name="fileImage" type="file" accept="image/*" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                            </form>\n\n                            <iframe tabindex="-1" tabIndex="0" id="frameTargetCellImageUpload" name="frameTargetCellImageUpload" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                        </div>\n                    </div>\n\n                    <div style="text-align:right;margin-top:20px;">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n\n                </div>\n            </div>\n\n            <div class="is-locked-indicator">\n                <svg class="is-icon-flex"><use xlink:href="#icon-lock"></use></svg>\n            </div>\n            `;n.appendHtml(i,d),this.builder.iframe?this.lockIndicator=this.builder.contentStuff.querySelector(".is-locked-indicator"):this.lockIndicator=i.querySelector(".is-locked-indicator"),o=i.querySelector(".columnmore"),this.cellSettings=i.querySelector(".is-modal.columnsettings"),this.divCellClick=i.querySelector("#divCellClick"),this.divCellGeneral=i.querySelector("#divCellGeneral"),qi(t),a=o.querySelector(".cell-prev"),n.addEventListener(a,"click",(()=>{this.grid.moveColumnPrevious()})),a=o.querySelector(".cell-next"),n.addEventListener(a,"click",(()=>{this.grid.moveColumnNext()})),a=o.querySelector(".cell-up"),n.addEventListener(a,"click",(()=>{this.grid.moveColumnUp(),e.clearControls()})),a=o.querySelector(".cell-down"),n.addEventListener(a,"click",(()=>{this.grid.moveColumnDown(),e.clearControls()})),a=o.querySelector(".cell-increase"),n.addEventListener(a,"click",(()=>{const t=e.cellSelected();if(!t)return;const i=t.parentNode;let n=!1;Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.style.width&&(n=!0)})),n&&(Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||(t.style.width="",t.style.flex="",t.style.height="",t.style.minHeight="")})),e.fixLayout(i)),this.grid.increaseColumn(),Array.from(t.parentNode.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.getAttribute("data-module")&&e.refreshModuleLayout(t)}))})),a=o.querySelector(".cell-decrease"),n.addEventListener(a,"click",(()=>{const t=e.cellSelected();if(!t)return;const i=t.parentNode;let n=!1;Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.style.width&&(n=!0)})),n&&(Array.from(i.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||(t.style.width="",t.style.flex="",t.style.height="",t.style.minHeight="")})),e.fixLayout(i)),this.grid.decreaseColumn(),Array.from(t.parentNode.children).map((t=>{t.classList.contains("is-row-tool")||t.classList.contains("is-rowadd-tool")||t.classList.contains("is-col-tool")||t.getAttribute("data-module")&&e.refreshModuleLayout(t)}))})),a=o.querySelector(".cell-duplicate"),n.addEventListener(a,"click",(()=>{this.grid.duplicateColumn(),e.hidePop(this.columnMore),e.clearControls()})),a=o.querySelector(".cell-html"),a&&n.addEventListener(a,"click",(()=>{if(!e.cellSelected())return;new Ei(this.builder).view("cell")}));const c=document.querySelector(".is-modal.columnsettings"),u=document.querySelector(".is-modal.imagesource"),p=document.querySelector(".is-modal.imageadjust"),h=document.querySelector(".is-modal.imageadjust2");this.cellSettings=c,this.imageSource=u,this.imageAdjust=p,this.imageAdjust2=h;const g=o.querySelector(".cell-locking");g&&n.addEventListener(g,"click",(t=>{let i=e.cellSelected();i&&(i.hasAttribute("data-noedit")?(i.removeAttribute("data-noedit"),i.contentEditable=!0,n.removeClass(g,"on")):(i.setAttribute("data-noedit",""),i.contentEditable=!1,n.addClass(g,"on"),this.util.clearActiveElement(!0)),this.showHideLockIndicator(i),this.builder.element.applyBehavior(i),e.hidePop(this.columnMore),t.preventDefault())})),a=o.querySelector(".cell-settings"),a&&n.addEventListener(a,"click",(()=>{let t=e.cellSelected();t&&(this.readCellStyles(t),e.saveSelection(),e.showModal(c,!1,(()=>{"flex"===i.querySelector(".is-rte-tool").style.display&&e.restoreSelection()})),e.hidePop(this.columnMore))}));let m=c.querySelector(".input-cell-id");m.addEventListener("change",(()=>{let t=e.cellSelected();t&&(this.builder.uo.saveForUndo(),""!==m.value?t.setAttribute("id",m.value):t.removeAttribute("id"),this.builder.opts.onChange())}));let f=c.querySelector(".input-cell-classes");f.addEventListener("change",(()=>{let t=e.cellSelected();if(!t)return;this.builder.uo.saveForUndo();let i=[],n=t.getAttribute("data-class");n&&(i=n.split(" "));let o=[],s=f.value;o=s.split(" "),i.forEach((e=>{o.includes(e)||t.classList.remove(e)})),o.forEach((e=>{""!==e&&t.classList.add(e)})),t.setAttribute("data-class",s),""===t.getAttribute("data-class")&&t.removeAttribute("data-class"),this.builder.opts.onChange()}));let b=c.querySelector(".input-cell-bgcolor");b.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let i=t.target;this.builder.colorPicker.open((t=>{e.cellSelected().style.backgroundColor=t,i.style.backgroundColor=t,this.builder.opts.onChange()}),c.querySelector(".input-cell-bgcolor").style.backgroundColor,(()=>{b.removeAttribute("data-focus"),b.focus()})),b.setAttribute("data-focus",!0)}));const v=c.querySelector(".input-cell-bgimage");v&&n.addEventListener(v,"click",(()=>{let t=e.cellSelected();if(!t)return;let i="";t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")&&(i=t.style.backgroundImage.slice(4,-1).replace(/["']/g,"")),this.openImagePicker(i,(t=>{let i=e.cellSelected();if(!i)return;this.builder.uo.saveForUndo(),i.style.backgroundImage=`url("${t}")`,i.style.backgroundSize="cover",i.style.backgroundRepeat="no-repeat";const n=c.querySelector(".cell-bgimage-preview"),o=this.cellSettings.querySelector(".input-cell-bgimageadjust"),s=this.cellSettings.querySelector(".input-cell-bgremove");o.style.display="none",s.style.display="none",""!==t?(n.innerHTML=`<img src="${t}">`,o.style.display="flex",s.style.display="flex"):n.innerHTML="",this.builder.opts.onChange()}),v)}));const y=c.querySelector(".input-cell-bgimageadjust");y&&n.addEventListener(y,"click",(()=>{let t=e.cellSelected();t&&this.openImageAdjust(t,y)})),a=c.querySelector(".input-cell-bgremove"),a&&n.addEventListener(a,"click",(()=>{let t=e.cellSelected();if(!t)return;this.builder.uo.saveForUndo(),t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundRepeat="",t.style.backgroundPosition="";const i=c.querySelector(".cell-bgimage-preview"),n=this.cellSettings.querySelector(".input-cell-bgimageadjust"),o=this.cellSettings.querySelector(".input-cell-bgremove");n.style.display="none",o.style.display="none",i.innerHTML="",this.builder.opts.onChange()})),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(this.divCellGeneral.querySelector(".input-select").style.display="none");const x=this.divCellGeneral.querySelector(".input-select");this.builder.renderSelectAsset(x,"image",(t=>{let i=e.cellSelected();if(!i)return;this.builder.uo.saveForUndo(),i.style.backgroundImage=`url("${t}")`,i.style.backgroundSize="cover",i.style.backgroundRepeat="no-repeat";const n=c.querySelector(".cell-bgimage-preview"),o=this.cellSettings.querySelector(".input-cell-bgimageadjust"),s=this.cellSettings.querySelector(".input-cell-bgremove");o.style.display="none",s.style.display="none",""!==t?(n.innerHTML=`<img src="${t}">`,o.style.display="flex",s.style.display="flex"):n.innerHTML="",this.builder.opts.onChange()})),""!==this.builder.opts.largerImageHandler||this.builder.opts.onLargerImageUpload||(u.querySelector(".image-larger3").style.display="none"),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(u.querySelector(".input-select").style.display="none");let w=u.querySelector(".image-src");if(this.builder.opts.onImageSelectClick||this.builder.opts.imageselect){const t=u.querySelector(".input-select");t&&n.addEventListener(t,"click",(()=>{if(this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:u.querySelector(".input-src"),theTrigger:t});else{let n=i.querySelector(".is-modal.imageselect"),o=n.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.imageselect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.imageselect),e.showModal(n,!1,(()=>{t.removeAttribute("data-focus"),t.focus()})),t.setAttribute("data-focus",!0)}this.builder.targetInput=u.querySelector(".input-src"),this.builder.targetCallback=null,this.builder.targetAssetType="image"}))}else n.removeClass(w,"image-select");let S=u.querySelector("#fileImage3");n.addEventListener(S,"change",(t=>{let e=S;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;n.addClass(i,"please-wait"),u.querySelector("#hidRefId3").value=this.builder.opts.customval,this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):i.submit(),S.value=""}));const _=u.querySelector(".input-ok");n.addEventListener(_,"click",(()=>{const t=this.imageSource.querySelector(".input-src").value;this.builder.imageSelectedCallback&&this.builder.imageSelectedCallback(t),this.builder.hideModal(u)}));const C=u.querySelector(".input-cancel");n.addEventListener(C,"click",(()=>{this.builder.hideModal(u)}));const k=p.querySelector(".image-scale-slider");k.onfocus=()=>{this.builder.uo.saveForUndo(!0)},k.oninput=()=>{let t=k.value,e=this.builder.elementSelected;if(document.querySelector(".content-preview.is-screen-375.active")&&this.useTarget){let t=e.getAttribute("data-bg-xs");t||(t="");let i=document.createElement("div");i.style.cssText=t,i.style.backgroundSize="cover",e.setAttribute("data-bg-xs",i.style.cssText)}else if(document.querySelector(".content-preview.is-screen-768.active")&&this.useTarget){let t=e.getAttribute("data-bg-sm");t||(t="");let i=document.createElement("div");i.style.cssText=t,i.style.backgroundSize="cover",e.setAttribute("data-bg-sm",i.style.cssText)}else if(document.querySelector(".content-preview.is-screen-1024.active")&&this.useTarget){let t=e.getAttribute("data-bg-md");t||(t="");let i=document.createElement("div");i.style.cssText=t,i.style.backgroundSize="cover",e.setAttribute("data-bg-md",i.style.cssText)}else e.style.backgroundSize=t+"%";e.style.left="",e.style.top="",e.style.width="",e.style.height="",e.removeAttribute("data-x"),e.removeAttribute("data-y"),e.removeAttribute("data-scale")},k.onchange=()=>{(document.querySelector(".content-preview.is-screen-375.active")||document.querySelector(".content-preview.is-screen-768.active")||document.querySelector(".content-preview.is-screen-1024.active"))&&(k.value=0),this.builder.opts.onChange()};const E=h.querySelector(".image-scale-slider");E.onfocus=()=>{this.builder.uo.saveForUndo(!0)},E.oninput=()=>{let t=this.builder.elementSelected,e=E.value;this.scaleWidth?(t.style.width=e+"%",t.style.height=100*e/E.min+"%"):(t.style.height=e+"%",t.style.width=100*e/E.min+"%"),t.setAttribute("data-scale",e)},E.onchange=()=>{this.builder.opts.onChange()};const A=p.querySelector(".image-hor-slider");A.onfocus=()=>{this.builder.uo.saveForUndo(!0)},A.oninput=()=>{let t=A.value,e=this.builder.elementSelected;if(document.querySelector(".content-preview.is-screen-375.active")&&this.useTarget){let i=e.getAttribute("data-bg-xs");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionX=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-xs",n.style.cssText)}else if(document.querySelector(".content-preview.is-screen-768.active")&&this.useTarget){let i=e.getAttribute("data-bg-sm");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionX=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-sm",n.style.cssText)}else if(document.querySelector(".content-preview.is-screen-1024.active")&&this.useTarget){let i=e.getAttribute("data-bg-md");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionX=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-md",n.style.cssText)}else e.style.backgroundPositionX=t+"%";e.style.left="",e.style.top="",e.style.width="",e.style.height="",e.removeAttribute("data-x"),e.removeAttribute("data-y"),e.removeAttribute("data-scale")},A.onchange=()=>{this.builder.opts.onChange()};const L=h.querySelector(".image-hor-slider");L.onfocus=()=>{this.builder.uo.saveForUndo(!0)},L.oninput=()=>{let t=this.builder.elementSelected,e=parseFloat(L.value);t.style.left=`${e}%`,t.style.right="",t.setAttribute("data-x",e)},L.onchange=()=>{this.builder.opts.onChange()};const q=p.querySelector(".image-vert-slider");q.onfocus=()=>{this.builder.uo.saveForUndo(!0)},q.oninput=()=>{let t=q.value,e=this.builder.elementSelected;if(document.querySelector(".content-preview.is-screen-375.active")&&this.useTarget){let i=e.getAttribute("data-bg-xs");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionY=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-xs",n.style.cssText)}else if(document.querySelector(".content-preview.is-screen-768.active")&&this.useTarget){let i=e.getAttribute("data-bg-sm");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionY=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-sm",n.style.cssText)}else if(document.querySelector(".content-preview.is-screen-1024.active")&&this.useTarget){let i=e.getAttribute("data-bg-md");i||(i="");let n=document.createElement("div");n.style.cssText=i,n.style.backgroundPositionY=t+"%",n.style.backgroundSize="cover",e.setAttribute("data-bg-md",n.style.cssText)}else e.style.backgroundPositionY=t+"%";e.style.left="",e.style.top="",e.style.width="",e.style.height="",e.removeAttribute("data-x"),e.removeAttribute("data-y"),e.removeAttribute("data-scale")},q.onchange=()=>{this.builder.opts.onChange()};const T=h.querySelector(".image-vert-slider");T.onfocus=()=>{this.builder.uo.saveForUndo(!0)},T.oninput=()=>{let t=this.builder.elementSelected,e=parseFloat(T.value);t.style.top=`${e}%`,t.style.bottom="",t.setAttribute("data-y",e)},T.onchange=()=>{this.builder.opts.onChange()};p.querySelector(".image-reset").addEventListener("click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.elementSelected;this.resetImage(t),this.builder.opts.onChange()}));h.querySelector(".image-reset").addEventListener("click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.elementSelected;this.resetImage2(t),this.builder.opts.onChange()})),l=c.querySelectorAll(".input-row-enlarge"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();let i=t.getAttribute("data-command"),o=e.cellSelected().parentNode;n.removeClass(o,"expand-10"),n.removeClass(o,"expand-20"),n.removeClass(o,"expand-30"),n.removeClass(o,"expand-40"),n.removeClass(o,"expand-50"),n.removeClass(o,"expand-60"),n.addClass(o,"expand-"+i),this.builder.opts.onChange()}))}));const M=new em({colors:this.builder.colors,gradientcolors:this.builder.opts.gradientcolors,lang:this.builder.opts.lang});let O=c.querySelector(".input-cell-gradient");O.addEventListener("click",(()=>{this.builder.uo.saveForUndo(!0);let t=e.cellSelected();M.open(t,(()=>{this.cellSettings.querySelector(".input-cell-bgimageadjust").style.display="none";this.cellSettings.querySelector(".input-cell-bgremove").style.display="none";this.cellSettings.querySelector(".cell-bgimage-preview").innerHTML="";this.imageSource.querySelector(".input-src").value="",this.builder.opts.onChange()}),(t=>{O.removeAttribute("data-focus"),O.focus()})),O.setAttribute("data-focus",!0)})),l=c.querySelectorAll(".input-cell-textcolor"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();let i=t.getAttribute("data-command"),o=e.cellSelected();"dark"===i?(n.removeClass(o,"is-light-text"),n.addClass(o,"is-dark-text")):"light"===i?(n.removeClass(o,"is-dark-text"),n.addClass(o,"is-light-text")):(n.removeClass(o,"is-dark-text"),n.removeClass(o,"is-light-text"));let s=o.querySelectorAll("*");Array.prototype.forEach.call(s,(t=>{t.style.color&&(t.style.color="")})),this.builder.opts.onChange()}))})),l=c.querySelectorAll(".input-cell-padding-pos"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{let e=t.getAttribute("data-command"),i=this.cellSettings.querySelectorAll(".input-cell-padding-pos");Array.prototype.forEach.call(i,(t=>{n.removeClass(t,"on")})),"all"===e?(n.addClass(this.cellSettings.querySelector('button[data-command="top"]'),"on"),n.addClass(this.cellSettings.querySelector('button[data-command="left"]'),"on"),n.addClass(this.cellSettings.querySelector('button[data-command="right"]'),"on"),n.addClass(this.cellSettings.querySelector('button[data-command="bottom"]'),"on")):"x"===e?(n.addClass(this.cellSettings.querySelector('button[data-command="left"]'),"on"),n.addClass(this.cellSettings.querySelector('button[data-command="right"]'),"on")):"y"===e?(n.addClass(this.cellSettings.querySelector('button[data-command="top"]'),"on"),n.addClass(this.cellSettings.querySelector('button[data-command="bottom"]'),"on")):n.addClass(t,"on");let o=this.cellSettings.querySelectorAll(".input-cell-padding");Array.prototype.forEach.call(o,(t=>{n.removeClass(t,"on")}))}))})),l=c.querySelectorAll(".input-cell-padding"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();let i=t.getAttribute("data-command"),o=e.cellSelected(),s=this.cellSettings.querySelectorAll(".input-cell-padding");if(Array.prototype.forEach.call(s,(t=>{n.removeClass(t,"on")})),this.builder.useCssClasses){let e;n.removeClass(o,"padding-0"),n.removeClass(o,"padding-10"),n.removeClass(o,"padding-20"),n.removeClass(o,"padding-30"),n.removeClass(o,"padding-40"),n.removeClass(o,"padding-50"),n.removeClass(o,"padding-60");let s=this.cellSettings.querySelectorAll(".input-cell-padding-pos.on");if(2===s.length)if(e=s[0].getAttribute("data-command"),"left"===e){let t=this.builder.cssClasses.padding.left;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.right;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.x;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.x[`px_${i}`])}else{let t=this.builder.cssClasses.padding.top;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.bottom;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.y;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.y[`py_${i}`])}else if(4===s.length){let t=this.builder.cssClasses.padding.top;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.bottom;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.left;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.right;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.all;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.x;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}t=this.builder.cssClasses.padding.y;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.all[`p_${i}`])}else if(e=s[0].getAttribute("data-command"),"top"===e){let t=this.builder.cssClasses.padding.top;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.top[`pt_${i}`])}else if("bottom"===e){let t=this.builder.cssClasses.padding.bottom;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.bottom[`pb_${i}`])}else if("left"===e){let t=this.builder.cssClasses.padding.left;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.left[`pl_${i}`])}else if("right"===e){let t=this.builder.cssClasses.padding.right;for(let e=0;e<Object.keys(t).length;e++){let i=Object.values(t)[e];n.removeClass(o,i)}""!==i&&n.addClass(o,this.builder.cssClasses.padding.right[`pr_${i}`])}n.addClass(t,"on")}else n.removeClass(o,"padding-0"),n.removeClass(o,"padding-10"),n.removeClass(o,"padding-20"),n.removeClass(o,"padding-30"),n.removeClass(o,"padding-40"),n.removeClass(o,"padding-50"),n.removeClass(o,"padding-60"),""!==i&&(n.addClass(o,"padding-"+i),n.addClass(t,"on"));this.builder.opts.onChange()}))}));const R=c.querySelector(".chk-cell-grayscale");n.addEventListener(R,"click",(()=>{this.builder.uo.saveForUndo();let t=e.cellSelected();R.checked?t.style.filter="grayscale(1)":t.style.filter&&(t.style.filter=t.style.filter.replace("grayscale(1)","")),this.builder.opts.onChange()}));const B=c.querySelector(".chk-cell-hideonmobile");if(n.addEventListener(B,"click",(()=>{this.builder.uo.saveForUndo();let t=e.cellSelected();B.checked?t.classList.add("hideonmobile"):t.classList.remove("hideonmobile"),this.builder.opts.onChange()})),l=c.querySelectorAll(".input-cell-height"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{let i=this.builder.colHeight;this.builder.uo.saveForUndo();let o=t.getAttribute("data-command"),s=e.cellSelected(),r=this.cellSettings.querySelectorAll(".input-cell-height");if(Array.prototype.forEach.call(r,(t=>{n.removeClass(t,"on")})),""===o)Array.prototype.forEach.call(i,(t=>{n.removeClass(s,"min-height-"+t)}));else if("-"===o){let t=s.offsetHeight;Array.prototype.forEach.call(i,(e=>{if(t-e>0&&t-e<=50)if(Array.prototype.forEach.call(i,(t=>{n.removeClass(s,"min-height-"+t)})),n.addClass(s,"min-height-"+e),300===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="300"');n.addClass(t,"on")}else if(400===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="400"');n.addClass(t,"on")}else if(500===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="500"');n.addClass(t,"on")}else if(600===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="600"');n.addClass(t,"on")}else if(700===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="700"');n.addClass(t,"on")}}))}else if("+"===o){let t=s.offsetHeight;Array.prototype.forEach.call(i,(e=>{if(e-t>0&&e-t<=50)if(Array.prototype.forEach.call(i,(t=>{n.removeClass(s,"min-height-"+t)})),n.addClass(s,"min-height-"+e),300===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="300"');n.addClass(t,"on")}else if(400===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="400"');n.addClass(t,"on")}else if(500===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="500"');n.addClass(t,"on")}else if(600===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="600"');n.addClass(t,"on")}else if(700===e){let t=this.cellSettings.querySelector('.input-cell-height[data-command="700"');n.addClass(t,"on")}}))}else Array.prototype.forEach.call(i,(t=>{n.removeClass(s,"min-height-"+t)})),n.addClass(s,"min-height-"+o),n.addClass(t,"on");this.builder.opts.onChange()}))})),l=c.querySelectorAll(".cmd-content-pos"),Array.prototype.forEach.call(l,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();let i=t.getAttribute("data-pos"),o=e.cellSelected();const s=this.cellSettings.querySelectorAll(".cmd-content-pos");if(Array.prototype.forEach.call(s,(t=>{n.removeClass(t,"on")})),this.builder.useCssClasses)if(""!==i){let e=this.builder.cssClasses.display;if(n.addCssClass(o,e.flex,e),e=this.builder.cssClasses.flexDirection,n.addCssClass(o,e.column,e),"topleft"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.start,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.start,e),n.addClass(t,"on")}if("topcenter"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.start,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.center,e),n.addClass(t,"on")}if("topright"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.start,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.end,e),n.addClass(t,"on")}if("centerleft"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.center,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.start,e),n.addClass(t,"on")}if("center"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.center,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.center,e),n.addClass(t,"on")}if("centerright"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.center,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.end,e),n.addClass(t,"on")}if("bottomleft"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.end,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.start,e),n.addClass(t,"on")}if("bottomcenter"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.end,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.center,e),n.addClass(t,"on")}if("bottomright"===i){let e=this.builder.cssClasses.justifyContent;n.addCssClass(o,e.end,e),e=this.builder.cssClasses.alignItems,n.addCssClass(o,e.end,e),n.addClass(t,"on")}o.style.justifyContent="",o.style.alignItems=""}else n.removeCssClasses(o,this.builder.cssClasses.display),n.removeCssClasses(o,this.builder.cssClasses.flexDirection),n.removeCssClasses(o,this.builder.cssClasses.justifyContent),n.removeCssClasses(o,this.builder.cssClasses.alignItems),o.style.display="",o.style.flexDirection="",o.style.justifyContent="",o.style.alignItems="";else o.style.display="flex",o.style.flexDirection="column","topleft"===i&&(o.style.justifyContent="flex-start",o.style.alignItems="flex-start",n.addClass(t,"on")),"topcenter"===i&&(o.style.justifyContent="flex-start",o.style.alignItems="center",n.addClass(t,"on")),"topright"===i&&(o.style.justifyContent="flex-start",o.style.alignItems="flex-end",n.addClass(t,"on")),"centerleft"===i&&(o.style.justifyContent="center",o.style.alignItems="flex-start",n.addClass(t,"on")),"center"===i&&(o.style.justifyContent="center",o.style.alignItems="center",n.addClass(t,"on")),"centerright"===i&&(o.style.justifyContent="center",o.style.alignItems="flex-end",n.addClass(t,"on")),"bottomleft"===i&&(o.style.justifyContent="flex-end",o.style.alignItems="flex-start",n.addClass(t,"on")),"bottomcenter"===i&&(o.style.justifyContent="flex-end",o.style.alignItems="center",n.addClass(t,"on")),"bottomright"===i&&(o.style.justifyContent="flex-end",o.style.alignItems="flex-end",n.addClass(t,"on"));this.builder.opts.onChange()}))})),this.builder.opts.onOtherSelectClick||""!==this.builder.opts.otherSelect){this.cellSettings.querySelector(".input-select-other").style.display="flex";let t=this.cellSettings.querySelector(".input-select-other");n.addEventListener(t,"click",(n=>{if(this.builder.opts.onOtherSelectClick)this.builder.opts.onOtherSelectClick({targetInput:this.cellSettings.querySelector(".input-src"),theTrigger:this.cellSettings.querySelector(".input-select-other")});else{let n=i.querySelector(".is-modal.otherselect");this.builder.opts.assetRefresh&&(n.querySelector("iframe").src=this.builder.opts.otherSelect,this.builder.opts.assetRefresh=!1),"about:blank"===n.querySelector("iframe").src&&(n.querySelector("iframe").src=this.builder.opts.otherSelect),e.showModal(n,!1,(()=>{t.removeAttribute("data-focus"),t.focus()}),!1),t.setAttribute("data-focus",!0)}this.builder.targetInput=this.cellSettings.querySelector(".input-src"),this.builder.targetCallback=()=>{this.applyClick()},this.builder.targetAssetType="all",n.preventDefault(),n.stopImmediatePropagation()}))}if(""!==this.builder.opts.largerImageHandler||this.builder.opts.onLargerImageUpload||(this.cellSettings.querySelector(".image-larger4").style.display="none"),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(this.divCellClick.querySelector(".input-select").style.display="none"),this.builder.opts.onMediaSelectClick||this.builder.opts.mediaSelect||this.builder.opts.onImageSelectClick||this.builder.opts.imageselect){const t=this.cellSettings.querySelector(".input-src");a=this.divCellClick.querySelector(".input-select"),a&&n.addEventListener(a,"click",(()=>{if(this.builder.targetInput=t,this.builder.targetCallback=()=>{this.applyClick()},this.builder.targetAssetType="media",this.builder.opts.onMediaSelectClick)this.builder.opts.onMediaSelectClick({targetInput:t,theTrigger:a});else if(this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:t,theTrigger:a});else if(this.builder.opts.mediaSelect){let n=i.querySelector(".is-modal.mediaselect"),o=n.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.mediaSelect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.mediaSelect),e.showModal(n,!1,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0),this.builder.targetInput=t,this.builder.targetCallback=()=>{this.applyClick()},this.builder.targetAssetType="media"}else if(this.builder.opts.imageselect){let n=i.querySelector(".is-modal.imageselect"),o=n.querySelector("iframe");this.builder.opts.assetRefresh&&(o.src=this.builder.opts.imageselect,this.builder.opts.assetRefresh=!1),"about:blank"===o.src&&(o.src=this.builder.opts.imageselect),e.showModal(n,!1,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0),this.builder.targetInput=t,this.builder.targetCallback=()=>{this.applyClick()},this.builder.targetAssetType="media"}}))}const N=this.cellSettings.querySelector(".input-src");n.observeElement(N,"value",(()=>{this.applyClick()}));let I=this.cellSettings.querySelector("#fileImage4");n.addEventListener(I,"change",(t=>{let e=I;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;n.addClass(i,"please-wait"),this.cellSettings.querySelector("#hidRefId4").value=this.builder.opts.customval,this.builder.opts.onMediaUpload?this.builder.opts.onMediaUpload(t):this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):i.submit(),I.value=""}));const $=this.cellSettings.querySelector(".input-src");$.addEventListener("focus",(()=>{this.builder.uo.saveForUndo(!0)})),$.addEventListener("keyup",(()=>{let t=this.util.cellSelected();t&&(""===$.value?(n.removeClass(t,"block-click"),t.removeAttribute("data-modal-url")):(n.addClass(t,"block-click"),t.setAttribute("data-modal-url",$.value)),this.builder.opts.onChange())})),this.cellSettings.querySelector(".input-testclick").addEventListener("click",(()=>{let t=this.util.cellSelected();t&&""!==$.value&&this.builder.openMedia(t)}));let D=this.cellSettings.querySelectorAll(".input-device");D.forEach((t=>{t.addEventListener("click",(()=>{let e=this.util.cellSelected();e&&(this.cellSettings.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.add("on"),this.realtimeVisibility(e))}))}));let P=this.cellSettings.querySelector(".input-visible"),z=this.cellSettings.querySelector(".input-hidden");const H=(t,e)=>t.querySelectorAll(`.${e}-hidden`).length>0;P.addEventListener("click",(()=>{let t=this.util.cellSelected();if(!t)return;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let e=this.cellSettings.querySelector(".div-target"),i=this.builder.responsive.readTarget(e);"xs"===i?t.classList.remove("xs-hidden"):"sm"===i?(t.classList.remove("sm-hidden"),H(t.parentNode,"sm")||t.parentNode.classList.remove("sm-autofit")):"md"===i?(t.classList.remove("md-hidden"),H(t.parentNode,"md")||t.parentNode.classList.remove("md-autofit")):""===i&&(t.classList.remove("desktop-hidden"),H(t.parentNode,"desktop")||t.parentNode.classList.remove("desktop-autofit")),P.classList.add("on"),z.classList.remove("on"),this.builder.opts.onChange()})),z.addEventListener("click",(()=>{let t=this.util.cellSelected();if(!t)return;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let e=this.cellSettings.querySelector(".div-target"),i=this.builder.responsive.readTarget(e);"xs"===i?t.classList.add("xs-hidden"):"sm"===i?(t.classList.add("sm-hidden"),t.parentNode.classList.add("sm-autofit")):"md"===i?(t.classList.add("md-hidden"),t.parentNode.classList.add("md-autofit")):""===i&&(t.classList.add("desktop-hidden"),t.parentNode.classList.add("desktop-autofit")),P.classList.remove("on"),z.classList.add("on"),this.builder.opts.onChange()})),D=this.imageAdjust.querySelectorAll(".input-device"),D.forEach((t=>{t.addEventListener("click",(()=>{this.imageAdjust.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.add("on");i.querySelector(".is-modal.content-preview").classList.contains("active")||this.builder.openPreview(),this.realtimeImageAdjust(),this.readImageAdjust(this.builder.elementSelected,this.useTarget)}))}))}this.columnMore=o}applyClick(){const t=this.dom;let e=this.util.cellSelected();if(!e)return;const i=this.cellSettings.querySelector(".input-src");let n=e.getAttribute("data-modal-url");n||(n=""),n!==i.value&&(this.builder.uo.saveForUndo(),t.addClass(e,"block-click"),e.setAttribute("data-modal-url",i.value),this.builder.opts.onChange())}readCellStyles(t){const e=this.dom;this.util.clearActiveElement();let i=t.style.backgroundColor,n=this.cellSettings.querySelector(".input-cell-bgcolor");n.style.backgroundColor=i||"transparent";let o="";const s=this.cellSettings.querySelector(".cell-bgimage-preview"),r=this.cellSettings.querySelector(".input-cell-bgimageadjust");r.style.display="none";const l=this.cellSettings.querySelector(".input-cell-bgremove");l.style.display="none",t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")?(o=t.style.backgroundImage.slice(4,-1).replace(/["']/g,""),s.innerHTML=`<img src="${o}">`,r.style.display="flex",l.style.display="flex"):s.innerHTML="";const a=this.cellSettings.querySelector(".input-src");a.value="";let d=t.getAttribute("data-modal-url");d&&(a.value=d);let c=this.cellSettings.querySelectorAll(".input-cell-padding");if(Array.prototype.forEach.call(c,(t=>{e.removeClass(t,"on")})),e.hasClass(t,"padding-0")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="0"');e.addClass(t,"on")}else if(e.hasClass(t,"padding-10")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="10"');e.addClass(t,"on")}else if(e.hasClass(t,"padding-20")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="20"');e.addClass(t,"on")}else if(e.hasClass(t,"padding-30")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="30"');e.addClass(t,"on")}else if(e.hasClass(t,"padding-40")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="40"');e.addClass(t,"on")}else if(e.hasClass(t,"padding-50")){let t=this.cellSettings.querySelector('.input-cell-padding[data-command="50"');e.addClass(t,"on")}const u=this.cellSettings.querySelector(".chk-cell-grayscale");u.checked=!1,t.style.filter&&-1!==t.style.filter.indexOf("grayscale")&&(u.checked=!0);const p=this.cellSettings.querySelector(".chk-cell-hideonmobile");p.checked=!1,t.classList.contains("hideonmobile")&&(p.checked=!0),c=this.cellSettings.querySelectorAll(".input-cell-height"),Array.prototype.forEach.call(c,(t=>{e.removeClass(t,"on")}));let h=0,g=this.builder.colHeight;if(Array.prototype.forEach.call(g,(i=>{e.hasClass(t,"min-height-"+i)&&(h=i)})),300===h){let t=this.cellSettings.querySelector('.input-cell-height[data-command="300"');e.addClass(t,"on")}else if(400===h){let t=this.cellSettings.querySelector('.input-cell-height[data-command="400"');e.addClass(t,"on")}else if(500===h){let t=this.cellSettings.querySelector('.input-cell-height[data-command="500"');e.addClass(t,"on")}else if(600===h){let t=this.cellSettings.querySelector('.input-cell-height[data-command="600"');e.addClass(t,"on")}else if(700===h){let t=this.cellSettings.querySelector('.input-cell-height[data-command="700"');e.addClass(t,"on")}c=this.cellSettings.querySelectorAll(".cmd-content-pos"),Array.prototype.forEach.call(c,(t=>{e.removeClass(t,"on")}));let m=t.style.alignItems,f=t.style.justifyContent,b="";if("flex-start"===f?"flex-start"===m?b="topleft":"center"===m?b="topcenter":"flex-end"===m&&(b="topright"):"center"===f?"flex-start"===m?b="centerleft":"center"===m?b="center":"flex-end"===m&&(b="centerright"):"flex-end"===f&&("flex-start"===m?b="bottomleft":"center"===m?b="bottomcenter":"flex-end"===m&&(b="bottomright")),"topleft"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="topleft"');e.addClass(t,"on")}else if("topcenter"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="topcenter"');e.addClass(t,"on")}else if("topright"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="topright"');e.addClass(t,"on")}else if("centerleft"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="centerleft"');e.addClass(t,"on")}else if("center"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="center"');e.addClass(t,"on")}else if("centerright"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="centerright"');e.addClass(t,"on")}else if("bottomleft"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="bottomleft"');e.addClass(t,"on")}else if("bottomcenter"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="bottomcenter"');e.addClass(t,"on")}else if("bottomright"===b){let t=this.cellSettings.querySelector('.cmd-content-pos[data-pos="bottomright"');e.addClass(t,"on")}this.realtimeVisibility(t,!0);let v=this.cellSettings.querySelector(".input-cell-id");v.value="";const y=t.getAttribute("id");y&&(v.value=y);let x=this.cellSettings.querySelector(".input-cell-classes");x.value="";const w=t.getAttribute("data-class");x.value=w}realtimeVisibility(t,e){if(e){const t=this.builder.builderStuff.querySelector(".is-modal.content-preview.active");if(t){this.cellSettings.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.contains("is-screen-1920")||t.classList.contains("is-screen-1440")?this.cellSettings.querySelector('.input-device[data-value=""]').classList.add("on"):t.classList.contains("is-screen-1024")?this.cellSettings.querySelector('.input-device[data-value="md"]').classList.add("on"):t.classList.contains("is-screen-768")?this.cellSettings.querySelector('.input-device[data-value="sm"]').classList.add("on"):t.classList.contains("is-screen-375")&&this.cellSettings.querySelector('.input-device[data-value="xs"]').classList.add("on")}}let i=this.cellSettings.querySelector(".div-target"),n=this.cellSettings.querySelector(".div-visibility"),o=this.builder.responsive.readTarget(i),s=this.builder.responsive.getVisibility(t,o);this.builder.responsive.showVisibility(n,s),"xs"===o?e||this.builder.livePreview.resizePreview(375):"sm"===o?e||this.builder.livePreview.resizePreview(768):"md"===o?e||this.builder.livePreview.resizePreview(1024):e||this.builder.livePreview.resizePreview(1920)}openImagePicker(t,e,i){const n=this.imageSource;n.querySelector(".input-src").value=t,this.builder.imageSelectedCallback=e,n.style.zIndex="10005",this.util.showModal(n,!1,(()=>{i&&(i.removeAttribute("data-focus"),i.focus())})),i&&i.setAttribute("data-focus",!0)}readImageAdjust(t,e){const i=this.imageAdjust,n=i.querySelector(".image-scale-slider"),o=i.querySelector(".image-hor-slider"),s=i.querySelector(".image-vert-slider");n.value=100,o.value=0,s.value=0,n.disabled=!1,e&&(o.value=50,s.value=60);let r=document.createElement("div");if(document.querySelector(".content-preview.is-screen-375.active")&&e){let e=t.getAttribute("data-bg-xs");e||(e=""),r.style.cssText=e,n.disabled=!0,n.style.opacity=.6}else if(document.querySelector(".content-preview.is-screen-768.active")&&e){let e=t.getAttribute("data-bg-sm");e||(e=""),r.style.cssText=e,n.disabled=!0,n.style.opacity=.6}else if(document.querySelector(".content-preview.is-screen-1024.active")&&e){let e=t.getAttribute("data-bg-md");e||(e=""),r.style.cssText=e,n.disabled=!0,n.style.opacity=.6}else r.style.cssText=t.style.cssText,n.disabled=!1,n.style.opacity="";if(r.style.backgroundSize){let t,e=r.style.backgroundSize;t=isNaN(parseInt(e))?100:parseInt(e),-1!==e.indexOf("%")&&(n.value=t)}if(r.style.backgroundPositionX){let t,e=r.style.backgroundPositionX;t=isNaN(parseInt(e))?0:parseInt(e),-1!==e.indexOf("%")&&(o.value=t)}if(r.style.backgroundPositionY){let t,e=r.style.backgroundPositionY;t=isNaN(parseInt(e))?0:parseInt(e),-1!==e.indexOf("%")&&(s.value=t)}this.builder.elementSelected=t}openImageAdjust(t,e,i){this.useTarget=!!i;const n=this.imageAdjust.querySelector(".div-target");n.style.display=i?"flex":"none";const o=this.builderStuff.querySelector(".is-modal.content-preview");this.imageAdjust.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),o.classList.contains("active")||this.imageAdjust.querySelector('.input-device[data-value=""]').classList.add("on"),this.readImageAdjust(t,i),this.imageAdjust.style.zIndex="10005",this.util.showModal(this.imageAdjust,!1,(()=>{e&&(e.removeAttribute("data-focus"),e.focus())})),e&&e.setAttribute("data-focus",!0),this.realtimeImageAdjust(!0)}realtimeImageAdjust(t){if(t){const t=this.builder.builderStuff.querySelector(".is-modal.content-preview.active");if(t){this.imageAdjust.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.contains("is-screen-1920")||t.classList.contains("is-screen-1440")?this.imageAdjust.querySelector('.input-device[data-value=""]').classList.add("on"):t.classList.contains("is-screen-1024")?this.imageAdjust.querySelector('.input-device[data-value="md"]').classList.add("on"):t.classList.contains("is-screen-768")?this.imageAdjust.querySelector('.input-device[data-value="sm"]').classList.add("on"):t.classList.contains("is-screen-375")&&this.imageAdjust.querySelector('.input-device[data-value="xs"]').classList.add("on")}}let e=this.imageAdjust.querySelector(".div-target"),i=this.builder.responsive.readTarget(e);"xs"===i?t||this.builder.livePreview.resizePreview(375):"sm"===i?t||this.builder.livePreview.resizePreview(768):"md"===i?t||this.builder.livePreview.resizePreview(1024):t||this.builder.livePreview.resizePreview(1920)}resetImage(t){const e=this.imageAdjust,i=e.querySelector(".image-scale-slider"),n=e.querySelector(".image-hor-slider"),o=e.querySelector(".image-vert-slider");n.value=50,o.value=60,i.value=0,(t.classList.contains("cell-active")||t.classList.contains("is-row-overlay"))&&(n.value=0,o.value=0),t.style.backgroundPositionX="",t.style.backgroundPositionY="",t.style.backgroundSize="cover",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.removeAttribute("data-x"),t.removeAttribute("data-y"),t.removeAttribute("data-scale"),t.removeAttribute("data-bg-xs"),t.removeAttribute("data-bg-sm"),t.removeAttribute("data-bg-md")}resetImage2(t){const e=this.imageAdjust2,i=e.querySelector(".image-scale-slider"),n=e.querySelector(".image-hor-slider"),o=e.querySelector(".image-vert-slider");let s,r,l=t.parentNode.offsetWidth,a=t.parentNode.offsetHeight;r=new Image,r.src=t.style.backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,""),r.onload=()=>{if(s={width:r.naturalWidth,height:r.naturalHeight},this.dimension=s,l/a<=s.width/s.height){this.scaleWidth=!0,this.scaleHeight=!1;let e=a*(s.width/s.height);e=e/l*100,t.style.width||(t.style.width=e+"%",t.style.height=""),i.min=e;let r=.5*-(e-100);n.value=r,t.style.left=r+"%",t.setAttribute("data-x",r),o.value=0,t.style.top="0%",t.setAttribute("data-y",0),i.value=e,t.style.width=e+"%",t.setAttribute("data-scale",e),t.style.height="100%"}else{this.scaleHeight=!0,this.scaleWidth=!1;let e=l*(s.height/s.width);e=e/a*100,t.style.height||(t.style.height=e+"%",t.style.width=""),i.min=e;let r=.6*-(e-100);o.value=r,t.style.top=r+"%",t.setAttribute("data-y",r),n.value=0,t.style.left="0%",t.setAttribute("data-x",0),i.value=e,t.style.height=e+"%",t.setAttribute("data-scale",e),t.style.width="100%"}}}openImageAdjust2(t,e){const i=this.imageAdjust2,n=i.querySelector(".image-scale-slider"),o=i.querySelector(".image-hor-slider"),s=i.querySelector(".image-vert-slider");n.value=0,o.value=0,s.value=15;const r=t.getAttribute("data-scale");r&&(n.value=r);const l=t.getAttribute("data-x");l&&(o.value=l);const a=t.getAttribute("data-y");a&&(s.value=a);let d,c,u=t.parentNode.offsetWidth,p=t.parentNode.offsetHeight;c=new Image,c.src=t.style.backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,""),c.onload=()=>{if(d={width:c.naturalWidth,height:c.naturalHeight},this.dimension=d,u/p<=d.width/d.height){this.scaleWidth=!0,this.scaleHeight=!1;let e=p*(d.width/d.height);e=e/u*100,t.style.width||(t.style.width=e+"%",t.style.height=""),n.min=e,l||(o.value=.5*-(e-100),t.style.left=.5*-(e-100)+"%",s.value=0);t.getAttribute("data-scale")||(n.value=e)}else{this.scaleHeight=!0,this.scaleWidth=!1;let e=u*(d.height/d.width);e=e/p*100,t.style.height||(t.style.height=e+"%",t.style.width=""),n.min=e,a||(s.value=.6*-(e-100),t.style.top=.6*-(e-100)+"%",o.value=0);t.getAttribute("data-scale")||(n.value=e)}},this.builder.elementSelected=t,i.style.zIndex="10005",this.util.showModal(i,!1,(()=>{e&&(e.removeAttribute("data-focus"),e.focus())})),e&&e.setAttribute("data-focus",!0)}showHideLockIndicator(t){const e=this.lockIndicator;if(t.hasAttribute("data-noedit")){let i,n;this.builder.iframe?(i=t.getBoundingClientRect().top+this.builder.win.pageYOffset,n=t.getBoundingClientRect().left+this.builder.win.pageXOffset):(i=t.getBoundingClientRect().top+window.pageYOffset,n=t.getBoundingClientRect().left+window.pageXOffset);const o=t.offsetWidth*this.builder.zoom;e.style.display="flex",e.style.top=i+4+"px",e.style.left=n+o-33+"px"}else e.style.display=""}click(t){const e=this.dom;this.columnTool=t.parentNode.querySelector(".is-col-tool"),this.columnTool.style.left=t.offsetLeft+"px",this.columnTool.style.top=t.offsetTop+"px";const i=this.columnMore.querySelector(".cell-increase"),n=this.columnMore.querySelector(".cell-decrease");if(e.parentsHasAttribute(t,"nogrid")){this.columnMore.querySelector(".cell-prev").style.display="none",this.columnMore.querySelector(".cell-next").style.display="none",this.columnMore.querySelector(".cell-up").style.display="none",this.columnMore.querySelector(".cell-down").style.display="none",i&&(i.style.display="none"),n&&(n.style.display="none"),this.columnMore.querySelector(".cell-duplicate").style.display="none",this.columnMore.querySelector(".cell-prev").setAttribute("disabled","disabled"),this.columnMore.querySelector(".cell-next").setAttribute("disabled","disabled"),this.columnMore.querySelector(".cell-up").setAttribute("disabled","disabled"),this.columnMore.querySelector(".cell-down").setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),n.setAttribute("disabled","disabled"),this.columnMore.querySelector(".cell-duplicate").setAttribute("disabled","disabled");let e=this.columnMore.querySelector(".cell-html");e&&(e.style.display=""),this.columnTool.querySelector(".cell-add").style.display="none",this.columnTool.querySelector(".cell-remove").style.display="none",this.columnTool.querySelector(".cell-add").setAttribute("disabled","disabled"),this.columnTool.querySelector(".cell-remove").setAttribute("disabled","disabled"),t.getAttribute("data-html")&&(this.columnMore.querySelector(".cell-html").style.display="none",this.columnTool.querySelector(".cell-more").style.display="none",this.columnMore.querySelector(".cell-html").setAttribute("disabled","disabled"),this.columnTool.querySelector(".cell-more").setAttribute("disabled","disabled"))}else{this.columnMore.querySelector(".cell-prev").style.display="",this.columnMore.querySelector(".cell-next").style.display="",this.columnMore.querySelector(".cell-up").style.display="",this.columnMore.querySelector(".cell-down").style.display="",i&&(i.style.display=""),n&&(n.style.display=""),this.columnMore.querySelector(".cell-duplicate").style.display="",this.columnMore.querySelector(".cell-prev").removeAttribute("disabled"),this.columnMore.querySelector(".cell-next").removeAttribute("disabled"),this.columnMore.querySelector(".cell-up").removeAttribute("disabled"),this.columnMore.querySelector(".cell-down").removeAttribute("disabled"),i&&i.removeAttribute("disabled"),n&&n.removeAttribute("disabled"),this.columnMore.querySelector(".cell-duplicate").removeAttribute("disabled");let e=this.columnMore.querySelector(".cell-html");e&&(e.style.display="",e.removeAttribute("disabled")),this.columnTool.querySelector(".cell-add").style.display="",this.columnTool.querySelector(".cell-remove").style.display="",this.columnTool.querySelector(".cell-add").removeAttribute("disabled"),this.columnTool.querySelector(".cell-remove").removeAttribute("disabled");let o=t.parentNode,s=3;o.querySelector(".is-row-overlay")&&(s=4),o.childElementCount-s==1?(this.columnMore.querySelector(".cell-prev").style.display="none",this.columnMore.querySelector(".cell-next").style.display="none",i&&(i.style.display="none"),n&&(n.style.display="none"),this.columnMore.querySelector(".cell-prev").setAttribute("disabled","disabled"),this.columnMore.querySelector(".cell-next").setAttribute("disabled","disabled"),i&&i.setAttribute("disabled","disabled"),n&&n.setAttribute("disabled","disabled")):(this.columnMore.querySelector(".cell-prev").style.display="",this.columnMore.querySelector(".cell-next").style.display="",i&&(i.style.display=""),n&&(n.style.display=""),this.columnMore.querySelector(".cell-prev").removeAttribute("disabled"),this.columnMore.querySelector(".cell-next").removeAttribute("disabled"),i&&i.removeAttribute("disabled"),n&&n.removeAttribute("disabled"));let r=this.columnMore.querySelector(".cell-duplicate");t.getAttribute("data-html")?(e&&(e.style.display="none",e.setAttribute("disabled","disabled")),r&&(r.style.display="none",r.setAttribute("disabled","disabled"))):(e&&(e.style.display="",e.removeAttribute("disabled")),r&&(r.style.display="",r.removeAttribute("disabled")))}let o=t.parentNode;if(o.hasAttribute("data-protected")){o.querySelector(".is-row-tool").style.display="none",this.columnTool.style.display="none";let t=o.querySelector(".is-rowadd-tool");t&&(t.style.display="none")}else{this.columnTool.style.display="",e.parentsHasAttribute(t,"data-protected")?(this.columnTool.querySelector(".cell-add").style.display="none",this.columnTool.querySelector(".cell-remove").style.display="none",this.columnTool.querySelector(".cell-more").style.display="none"):(this.columnTool.querySelector(".cell-add").style.display="",this.columnTool.querySelector(".cell-remove").style.display="",this.columnTool.querySelector(".cell-more").style.display="")}t.classList.contains("column-lock")?(this.columnTool.querySelector(".cell-add").style.display="none",this.columnTool.querySelector(".cell-remove").style.display="none",this.columnMore.querySelector(".cell-prev").style.display="none",this.columnMore.querySelector(".cell-next").style.display="none",this.columnMore.querySelector(".cell-up").style.display="none",this.columnMore.querySelector(".cell-down").style.display="none",this.columnMore.querySelector(".cell-increase").style.display="none",this.columnMore.querySelector(".cell-decrease").style.display="none",this.columnMore.querySelector(".cell-duplicate").style.display="none",this.columnMore.querySelector(".is-separator").style.display="none",this.columnMore.querySelector(".cell-locking").style.display="none"):(this.columnMore.querySelector(".is-separator").style.display="",this.columnMore.querySelector(".cell-locking").style.display="")}}const dm=new o;class cm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector(".editstyles");if(!n){let t=`\n            <div class="is-modal is-modal-content editstyles">\n                <div class="is-modal-bar is-draggable">\n                    <div class="is-modal-close" role="button" tabindex="0" title="${e.out("Close")}">&#10005;</div>\n                </div>\n                <div style="padding:12px">\n                    <div class="is-settings" style="display:inline-block;width:100%;margin-bottom:0;">\n                        <div>${e.out("Style")}:</div>\n                        <div>\n                            <textarea id="inpElmInlineStyle" style="width:100%;height:256px;margin:0px;border:none;font-size: 14px;line-height: 1.5;letter-spacing: 0;"></textarea>\n                        </div>\n                    </div>\n                    <div class="is-settings" style="display:inline-block;width:100%;margin-bottom:0;">\n                        <div>${e.out("Class")}:</div>\n                        <div>\n                            <input type="text" id="inpElmClassName" value="" style="width:100%;padding-left: 16px;font-family: courier, monospace;font-size: 14px;line-height: 2;letter-spacing: 1px;border:none;"/>\n                        </div>\n                    </div>\n                </div>\n            </div>           \n            `;dm.appendHtml(i,t),n=i.querySelector(".editstyles");let o=n.querySelector(".is-modal-close");dm.addEventListener(o,"click",(()=>{dm.removeClass(n,"active");var t=this.builderStuff.querySelector(".is-side.elementstyles");if(!dm.hasClass(t,"active")){let t=document.querySelectorAll("[data-saveforundo]");Array.prototype.forEach.call(t,(t=>{t.removeAttribute("data-saveforundo")})),t=document.querySelectorAll(".elm-inspected"),Array.prototype.forEach.call(t,(t=>{dm.removeClass(t,"elm-inspected")}))}}));let s=n.querySelector("#inpElmClassName");s.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=n.querySelector("#inpElmClassName").value,i=!1;dm.hasClass(t,"elm-active")&&(i=!0);let o=!1;dm.hasClass(t,"elm-active")&&(o=!0);let s=!1;dm.hasClass(t,"row-active")&&(s=!0),t.setAttribute("class",e),i&&dm.addClass(t,"elm-active"),o&&dm.addClass(t,"cell-active"),s&&dm.addClass(t,"row-active"),dm.addClass(t,"elm-inspected"),this.builder.opts.onChange()})),s=n.querySelector("#inpElmInlineStyle"),s.addEventListener("keyup",(()=>{this.builder.inspectedElement.style.cssText=n.querySelector("#inpElmInlineStyle").value,this.builder.opts.onChange()}))}this.modalStyles=n}toggleStyleEditor(){dm.hasClass(this.modalStyles,"active")?dm.removeClass(this.modalStyles,"active"):dm.addClass(this.modalStyles,"active")}refresh(){this.modalStyles.querySelector("#inpElmInlineStyle").value=this.builder.inspectedElement.style.cssText;let t=this.builder.inspectedElement.getAttribute("class");t&&(t=t.replace("elm-active",""),t=t.replace("cell-active",""),t=t.replace("row-active",""),t=t.replace("elm-inspected",""),t=t.replace("  "," ").trim()),this.modalStyles.querySelector("#inpElmClassName").value=t}}const um=new o;class pm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementGeneral");this.panelStuff=o;const s=`\n                <div class="is-settings" style="width: 100%">\n                    <div class="is-label" style="margin:0 0 3px">${e.out("Background Color")}:</div>\n                    <div>\n                        <button title="${e.out("Background Color")}" class="input-elm-bgcolor is-btn-color" style="margin-right:15px"></button>\n                        <button title="${e.out("Gradient")}" class="input-elm-gradient classic" data-value="+"> ${e.out("Gradient")} </button>\n                    </div>\n                </div>\n\n                <div style="padding-top:20px;padding-bottom: 3px;">${e.out("Background Image")}:</div>\n                <div class="is-settings" style="width: 100%">\n                    <div class="elm-bgimage-preview"></div>\n                    <div style="display: flex">\n                        <button title="${e.out("Image")}" class="input-elm-bgimage">\n                            <svg class="is-icon-flex"><use xlink:href="#ion-image"></use></svg>\n                            <span style="margin-left: 5px;">${e.out("Image")}</span>\n                        </button>\n                        <button title="${e.out("Select")}" class="input-select">\n                            ${this.builder.opts.selectIcon}\n                        </button>\n                        <button title="${e.out("Remove")}" class="input-elm-bgremove"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                        <button title="${e.out("Adjust")}" class="input-elm-bgimageadjust" style="width:40px"><svg class="is-icon-flex" style="width:13px;height:13px;flex:none"><use xlink:href="#ion-wrench"></use></svg></button>\n                    </div>\n                </div>\n\n                <div class="is-settings" style="padding-top:20px;width: 100%">\n                    <label class="label-elm-grayscale label-checkbox" for="chkElmGrayscale"><input id="chkElmGrayscale" class="chk-elm-grayscale" type="checkbox" /> ${e.out("Grayscale")}</label>\n                </div>\n\n                <div class="is-separator" style="margin-top:28px;margin-bottom:5px;"></div>\n                         \n                <div class="is-settings" style="padding-top:0;margin-top:0;width: 100%">\n                    <div class="div-target" style="display: flex;justify-content: flex-end;padding: 5px 0 0;">\n                        <button title="${e.out("Desktop")}" class="input-device on" data-value="" style="width:40px;height:25px;">\n                            <svg class="is-icon-flex" style="width:16px;height:16px;flex:none"><use xlink:href="#icon-device-desktop"></use></svg>\n                        </button>\n                        \x3c!--<button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                            <svg class="is-icon-flex" style="width:19px;height:19px;flex:none"><use xlink:href="#icon-device-laptop"></use></svg>\n                        </button>--\x3e\n                        <button title="${e.out("Laptop/Tablet (Landscape)")}" class="input-device" data-value="md" style="width:40px;height:25px;">\n                            <svg class="is-icon-flex" style="width:16px;height:16px;flex:none;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>\n                        </button>\n                        <button title="${e.out("Tablet (Portrait)")}" class="input-device" data-value="sm" style="width:40px;height:25px;">\n                            <svg class="is-icon-flex" style="width:16px;height:16px;flex:none"><use xlink:href="#icon-device-tablet"></use></svg>\n                        </button>\n                        <button title="${e.out("Mobile")}" class="input-device" data-value="xs" style="width:40px;height:25px;">\n                            <svg class="is-icon-flex" style="width:13px;height:13px;flex:none"><use xlink:href="#icon-device-mobile"></use></svg>\n                        </button>\n                    </div>\n\n                    <div style="padding-top:0;padding-bottom:3px;">${e.out("Visibility")}:</div>\n                    <div class="div-visibility" style="display:flex;">\n                        <button title="${e.out("Visible")}" class="input-visible on" data-value="sm" style="width:100px;height:34px;">\n                            <svg class="is-icon-flex" style="width:16px;height:16px;flex:none"><use xlink:href="#icon-eye"></use></svg>\n                            <span>${e.out("Visible")}</span>\n                        </button>\n                        <button title="${e.out("Hidden")}" class="input-hidden" data-value="xs" style="width:100px;height:34px;">\n                            <svg class="is-icon-flex" style="width:16px;height:16px;flex:none"><use xlink:href="#icon-eye-off"></use></svg>\n                            <span>${e.out("Hidden")}</span>\n                        </button>\n                    </div>\n                </div>\n\n\n        `;um.appendHtml(o,s);let r=o.querySelector(".input-elm-bgcolor");r.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.backgroundColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),o.querySelector(".input-elm-bgcolor").style.backgroundColor,(()=>{r.removeAttribute("data-focus"),r.focus()})),r.setAttribute("data-focus",!0)}));const l=new em({colors:this.builder.colors,gradientcolors:this.builder.opts.gradientcolors,lang:this.builder.opts.lang});let a=o.querySelector(".input-elm-gradient");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo(!0),l.open(this.builder.inspectedElement,(()=>{n.refresh(),this.builder.opts.onChange()}),(t=>{t&&n.refresh(),a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)}));const d=o.querySelector(".input-elm-bgimage");d&&um.addEventListener(d,"click",(()=>{const t=this.builder.inspectedElement;let e="";t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")&&(e=t.style.backgroundImage.slice(4,-1).replace(/["']/g,"")),this.builder.colTool.openImagePicker(e,(t=>{this.builder.uo.saveForUndo();const e=this.builder.inspectedElement;this.builder.uo.saveForUndo(),e.style.backgroundImage=`url("${t}")`,e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat";const i=o.querySelector(".elm-bgimage-preview"),s=this.panelStuff.querySelector(".input-elm-bgimageadjust"),r=this.panelStuff.querySelector(".input-elm-bgremove");s.style.display="none",r.style.display="none",""!==t?(i.innerHTML=`<img src="${t}">`,s.style.display="flex",r.style.display="flex"):i.innerHTML="",n.refresh(),this.builder.opts.onChange()}),d)}));const c=o.querySelector(".input-elm-bgimageadjust");c&&um.addEventListener(c,"click",(()=>{const t=this.builder.inspectedElement;this.builder.colTool.openImageAdjust(t,c)}));const u=o.querySelector(".input-elm-bgremove");u&&um.addEventListener(u,"click",(()=>{const t=this.builder.inspectedElement;this.builder.uo.saveForUndo(),t.style.backgroundImage="",t.style.backgroundSize="",t.style.backgroundRepeat="",t.style.backgroundPosition="";const e=o.querySelector(".elm-bgimage-preview"),i=this.panelStuff.querySelector(".input-elm-bgimageadjust"),s=this.panelStuff.querySelector(".input-elm-bgremove");i.style.display="none",s.style.display="none",e.innerHTML="",n.refresh(),this.builder.opts.onChange()})),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(o.querySelector(".input-select").style.display="none");const p=o.querySelector(".input-select");this.builder.renderSelectAsset(p,"image",(t=>{const e=this.builder.inspectedElement;this.builder.uo.saveForUndo(),e.style.backgroundImage=`url("${t}")`,e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat";const i=o.querySelector(".elm-bgimage-preview"),s=this.panelStuff.querySelector(".input-elm-bgimageadjust"),r=this.panelStuff.querySelector(".input-elm-bgremove");s.style.display="none",r.style.display="none",""!==t?(i.innerHTML=`<img src="${t}">`,s.style.display="flex",r.style.display="flex"):i.innerHTML="",n.refresh(),this.builder.opts.onChange()}));const h=o.querySelector(".chk-elm-grayscale");h.addEventListener("click",(()=>{this.builder.uo.saveForUndo();const t=this.builder.inspectedElement;h.checked?t.style.filter="grayscale(1)":t.style.filter&&(t.style.filter=t.style.filter.replace("grayscale(1)","")),n.refresh(),this.builder.opts.onChange()})),o.querySelectorAll(".input-device").forEach((t=>{t.addEventListener("click",(()=>{const e=this.builder.inspectedElement;o.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.add("on"),this.realtimeVisibility(e)}))}));let g=o.querySelector(".input-visible"),m=o.querySelector(".input-hidden");g.addEventListener("click",(()=>{const t=this.builder.inspectedElement;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let e=o.querySelector(".div-target"),i=this.builder.responsive.readTarget(e);"xs"===i?t.classList.remove("xs-hidden"):"sm"===i?t.classList.remove("sm-hidden"):"md"===i?t.classList.remove("md-hidden"):""===i&&t.classList.remove("desktop-hidden"),g.classList.add("on"),m.classList.remove("on"),this.builder.opts.onChange()})),m.addEventListener("click",(()=>{const t=this.builder.inspectedElement;this.builder.uo.saveForUndo(),t.classList.remove("hideonmobile");let e=o.querySelector(".div-target"),i=this.builder.responsive.readTarget(e);"xs"===i?t.classList.add("xs-hidden"):"sm"===i?t.classList.add("sm-hidden"):"md"===i?t.classList.add("md-hidden"):""===i&&t.classList.add("desktop-hidden"),g.classList.remove("on"),m.classList.add("on"),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff,i=t.style.backgroundColor,n=e.querySelector(".input-elm-bgcolor");n.style.backgroundColor=i||"transparent";let o="";const s=e.querySelector(".elm-bgimage-preview"),r=e.querySelector(".input-elm-bgimageadjust");r.style.display="none";const l=e.querySelector(".input-elm-bgremove");l.style.display="none",t.style.backgroundImage&&-1!==t.style.backgroundImage.indexOf("url(")?(o=t.style.backgroundImage.slice(4,-1).replace(/["']/g,""),s.innerHTML=`<img src="${o}">`,r.style.display="flex",l.style.display="flex"):s.innerHTML="";const a=e.querySelector(".chk-elm-grayscale");a.checked=!1,t.style.filter&&-1!==t.style.filter.indexOf("grayscale")&&(a.checked=!0),this.realtimeVisibility(t,!0)}realtimeVisibility(t,e){if(e){const t=this.builder.builderStuff.querySelector(".is-modal.content-preview.active");if(t){this.panelStuff.querySelectorAll(".input-device").forEach((t=>{t.classList.remove("on")})),t.classList.contains("is-screen-1920")||t.classList.contains("is-screen-1440")?this.panelStuff.querySelector('.input-device[data-value=""]').classList.add("on"):t.classList.contains("is-screen-1024")?this.panelStuff.querySelector('.input-device[data-value="md"]').classList.add("on"):t.classList.contains("is-screen-768")?this.panelStuff.querySelector('.input-device[data-value="sm"]').classList.add("on"):t.classList.contains("is-screen-375")&&this.panelStuff.querySelector('.input-device[data-value="xs"]').classList.add("on")}}let i=this.panelStuff.querySelector(".div-target"),n=this.panelStuff.querySelector(".div-visibility"),o=this.builder.responsive.readTarget(i),s=this.builder.responsive.getVisibility(t,o);this.builder.responsive.showVisibility(n,s),"xs"===o?e||this.builder.livePreview.resizePreview(375):"sm"===o?e||this.builder.livePreview.resizePreview(768):"md"===o?e||this.builder.livePreview.resizePreview(1024):e||this.builder.livePreview.resizePreview(1920)}}const hm=new o;class gm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementBox");this.panelStuff=o;const s=`\n                <div class="is-settings" style="width:110px">\n                    <div><label for="inpElmWidth">${e.out("Width")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmWidth" value="" style="width:45px"/>\n                        <select id="inpElmWidthUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div><label for="inpElmHeight">${e.out("Height")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmHeight" value="" style="width:45px"/>\n                        <select id="inpElmHeightUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div><label for="inpElmMaxWidth">${e.out("Max Width")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmMaxWidth" value="" style="width:45px"/>\n                        <select id="inpElmMaxWidthUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div><label for="inpElmMaxHeight">${e.out("Max Height")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmMaxHeight" value="" style="width:45px"/>\n                        <select id="inpElmMaxHeightUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div><label for="inpElmMinWidth">${e.out("Min Width")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmMinWidth" value="" style="width:45px"/>\n                        <select id="inpElmMinWidthUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div><label for="inpElmMinHeight">${e.out("Min Height")}:</label></div>\n                    <div style="display:flex">\n                        <input type="text" id="inpElmMinHeight" value="" style="width:45px"/>\n                        <select id="inpElmMinHeightUnit"">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="%">%</option>\n                        </select>\n                    </div>\n                </div>\n                \n                <div class="is-settings" style="width:110px;">\n                    <div>${e.out("Overflow x")}:</div>\n                    <div>\n                        <select id="inpElmOverflowX"">\n                            <option value=""></option>\n                            <option value="auto">Auto</option>\n                            <option value="hidden">Hidden</option>\n                        </select>\n                    </div>\n                </div>\n                <div class="is-settings" style="width:110px;">\n                    <div>${e.out("Overflow y")}:</div>\n                    <div>\n                        <select id="inpElmOverflowY"">\n                            <option value=""></option>\n                            <option value="auto">Auto</option>\n                            <option value="hidden">Hidden</option>\n                        </select>\n                    </div>\n                </div>\n        `;hm.appendHtml(o,s);let r=o.querySelector("#inpElmMaxWidth");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),r.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMaxWidth").value,i=o.querySelector("#inpElmMaxWidthUnit").value;isNaN(e)||""===e?t.style.maxWidth="":t.style.maxWidth=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmMaxWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMaxWidth").value,i=o.querySelector("#inpElmMaxWidthUnit").value;isNaN(e)||""===e?t.style.maxWidth="":t.style.maxWidth=e+i,n.refresh(),this.builder.opts.onChange()}));let l=o.querySelector("#inpElmMaxHeight");l.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),l.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMaxHeight").value,i=o.querySelector("#inpElmMaxHeightUnit").value;isNaN(e)||""===e?t.style.maxHeight="":t.style.maxHeight=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmMaxHeightUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMaxHeight").value,i=o.querySelector("#inpElmMaxHeightUnit").value;isNaN(e)||""===e?t.style.maxHeight="":t.style.maxHeight=e+i,n.refresh(),this.builder.opts.onChange()}));let a=o.querySelector("#inpElmMinWidth");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),a.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMinWidth").value,i=o.querySelector("#inpElmMinWidthUnit").value;isNaN(e)||""===e?t.style.minWidth="":t.style.minWidth=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmMinWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMinWidth").value,i=o.querySelector("#inpElmMinWidthUnit").value;isNaN(e)||""===e?t.style.minWidth="":t.style.minWidth=e+i,n.refresh(),this.builder.opts.onChange()}));let d=o.querySelector("#inpElmMinHeight");d.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),d.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMinHeight").value,i=o.querySelector("#inpElmMinHeightUnit").value;isNaN(e)||""===e?t.style.minHeight="":t.style.minHeight=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmMinHeightUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmMinHeight").value,i=o.querySelector("#inpElmMinHeightUnit").value;isNaN(e)||""===e?t.style.minHeight="":t.style.minHeight=e+i,n.refresh(),this.builder.opts.onChange()}));let c=o.querySelector("#inpElmWidth");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmWidth").value,i=o.querySelector("#inpElmWidthUnit").value;isNaN(e)||""===e?t.style.width="":t.style.width=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmWidth").value,i=o.querySelector("#inpElmWidthUnit").value;isNaN(e)||""===e?t.style.width="":t.style.width=e+i,n.refresh(),this.builder.opts.onChange()}));let u=o.querySelector("#inpElmHeight");u.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),u.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmHeight").value,i=o.querySelector("#inpElmHeightUnit").value;isNaN(e)||""===e?t.style.height="":t.style.height=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmHeightUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmHeight").value,i=o.querySelector("#inpElmHeightUnit").value;isNaN(e)||""===e?t.style.height="":t.style.height=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmOverflowX").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmOverflowX").value;t.style.overflowX=e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmOverflowY").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmOverflowY").value;t.style.overflowY=e,n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmMaxWidth"),n=e.querySelector("#inpElmMaxWidthUnit");i.value="",n.value="px";let o=t.style.maxWidth,s=parseInt(o);isNaN(s)||(-1!==o.indexOf("%")&&(n.value="%"),-1!==o.indexOf("px")&&(n.value="px"),-1!==o.indexOf("vw")&&(n.value="vw"),-1!==o.indexOf("vh")&&(n.value="vh"),-1!==o.indexOf("em")&&(n.value="em"),i.value=s);const r=e.querySelector("#inpElmMaxHeight"),l=e.querySelector("#inpElmMaxHeightUnit");r.value="",l.value="px",o=t.style.maxHeight;let a=parseInt(o);isNaN(a)||(-1!==o.indexOf("%")&&(l.value="%"),-1!==o.indexOf("px")&&(l.value="px"),-1!==o.indexOf("vw")&&(l.value="vw"),-1!==o.indexOf("vh")&&(l.value="vh"),-1!==o.indexOf("em")&&(l.value="em"),r.value=a);const d=e.querySelector("#inpElmMinWidth"),c=e.querySelector("#inpElmMinWidthUnit");d.value="",c.value="px",o=t.style.minWidth;let u=parseInt(o);isNaN(u)||(-1!==o.indexOf("%")&&(c.value="%"),-1!==o.indexOf("px")&&(c.value="px"),-1!==o.indexOf("vw")&&(c.value="vw"),-1!==o.indexOf("vh")&&(c.value="vh"),-1!==o.indexOf("em")&&(c.value="em"),d.value=u);const p=e.querySelector("#inpElmMinHeight"),h=e.querySelector("#inpElmMinHeightUnit");p.value="",h.value="px",o=t.style.minHeight;let g=parseInt(o);isNaN(g)||(-1!==o.indexOf("%")&&(h.value="%"),-1!==o.indexOf("px")&&(h.value="px"),-1!==o.indexOf("vw")&&(h.value="vw"),-1!==o.indexOf("vh")&&(h.value="vh"),-1!==o.indexOf("em")&&(h.value="em"),p.value=g);const m=e.querySelector("#inpElmWidth"),f=e.querySelector("#inpElmWidthUnit");m.value="",f.value="px",o=t.style.width;let b=parseInt(o);isNaN(b)||(-1!==o.indexOf("%")&&(f.value="%"),-1!==o.indexOf("px")&&(f.value="px"),-1!==o.indexOf("vw")&&(f.value="vw"),-1!==o.indexOf("vh")&&(f.value="vh"),-1!==o.indexOf("em")&&(f.value="em"),m.value=b);const v=e.querySelector("#inpElmHeight"),y=e.querySelector("#inpElmHeightUnit");v.value="",y.value="px",o=t.style.height;let x=parseInt(o);isNaN(x)||(-1!==o.indexOf("%")&&(y.value="%"),-1!==o.indexOf("px")&&(y.value="px"),-1!==o.indexOf("vw")&&(y.value="vw"),-1!==o.indexOf("vh")&&(y.value="vh"),-1!==o.indexOf("em")&&(y.value="em"),v.value=x);const w=e.querySelector("#inpElmOverflowX");o=t.style.overflowX,w.value=o;const S=e.querySelector("#inpElmOverflowY");o=t.style.overflowY,S.value=o}}const mm=new o;class fm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementSpacing");this.panelStuff=o;const s=`\n            <div style="margin-top: 13px;font-weight: bold;width:100%">${e.out("Padding")}</div>\n            \n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Top")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmPaddingTop" value="" style="width:45px"/>\n                    <select id="inpElmPaddingTopUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Bottom")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmPaddingBottom" value="" style="width:45px"/>\n                    <select id="inpElmPaddingBottomUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Left")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmPaddingLeft" value="" style="width:45px"/>\n                    <select id="inpElmPaddingLeftUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Right")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmPaddingRight" value="" style="width:45px"/>\n                    <select id="inpElmPaddingRightUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n            \n            <div style="margin-top: 25px;font-weight: bold;width:100%">${e.out("Margin")}</div>\n            \n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Top")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmMarginTop" value="" style="width:45px"/>\n                    <select id="inpElmMarginTopUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                        <option value="auto">auto</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Bottom")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmMarginBottom" value="" style="width:45px"/>\n                    <select id="inpElmMarginBottomUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                        <option value="auto">auto</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Left")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmMarginLeft" value="" style="width:45px"/>\n                    <select id="inpElmMarginLeftUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                        <option value="auto">auto</option>\n                    </select>\n                </div>\n            </div>\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Right")}:</div>\n                <div style="display:flex;">\n                    <input type="text" id="inpElmMarginRight" value="" style="width:45px"/>\n                    <select id="inpElmMarginRightUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                        <option value="auto">auto</option>\n                    </select>\n                </div>\n            </div>\n\n            <div style="display:none">\n                <div style="margin-top: 25px;font-weight: bold;width:100%">${e.out("Responsive Positioning")}:</div>\n                \n                <div class="is-settings" style="width:100%;">\n                    <div>\n                        <label for="chkResetMarginLeft" style="letter-spacing: 0.5px;"><input type="checkbox" id="chkResetMarginLeft" value="" /> ${e.out("Reset margin left on small screen")} </label>\n                    </div>\n                </div>\n                <div class="is-settings" style="margin-top:0;width:100%;">\n                    <div>\n                        <label for="chkResetMarginRight" style="letter-spacing: 0.5px;"><input type="checkbox" id="chkResetMarginRight" value="" /> ${e.out("Reset margin right on small screen")} </label>\n                    </div>\n                </div>\n            </div>\n        `;mm.appendHtml(o,s);let r=o.querySelector("#inpElmMarginLeft");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let l=o.querySelector("#inpElmMarginLeftUnit");r.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=r.value,i=l.value;isNaN(e)||""===e?t.style.marginLeft="":t.style.marginLeft=e+i,"auto"===i&&(t.style.marginLeft="auto"),n.refresh(),this.builder.opts.onChange()})),l.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=r.value,i=l.value;"auto"===i?(t.style.marginLeft="auto",r.value=""):t.style.marginLeft=e+i,n.refresh(),this.builder.opts.onChange()}));let a=o.querySelector("#inpElmMarginRight");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let d=o.querySelector("#inpElmMarginRightUnit");a.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=a.value,i=d.value;isNaN(e)||""===e?t.style.marginRight="":t.style.marginRight=e+i,"auto"===i&&(t.style.marginRight="auto"),n.refresh(),this.builder.opts.onChange()})),d.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=a.value,i=d.value;"auto"===i?(t.style.marginRight="auto",a.value=""):t.style.marginRight=e+i,n.refresh(),this.builder.opts.onChange()}));let c=o.querySelector("#inpElmMarginTop");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let u=o.querySelector("#inpElmMarginTopUnit");c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=c.value,i=u.value;isNaN(e)||""===e?t.style.marginTop="":t.style.marginTop=e+i,"auto"===i&&(t.style.marginTop="auto"),n.refresh(),this.builder.opts.onChange()})),u.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=c.value,i=u.value;"auto"===i?(t.style.marginTop="auto",c.value=""):t.style.marginTop=e+i,n.refresh(),this.builder.opts.onChange()}));let p=o.querySelector("#inpElmMarginBottom");p.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let h=o.querySelector("#inpElmMarginBottomUnit");p.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=p.value,i=h.value;isNaN(e)||""===e?t.style.marginBottom="":t.style.marginBottom=e+i,"auto"===i&&(t.style.marginBottom="auto"),n.refresh(),this.builder.opts.onChange()})),h.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=p.value,i=h.value;"auto"===i?(t.style.marginBottom="auto",p.value=""):t.style.marginBottom=e+i,n.refresh(),this.builder.opts.onChange()}));let g=o.querySelector("#inpElmPaddingLeft");g.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let m=o.querySelector("#inpElmPaddingLeftUnit");g.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=g.value,i=m.value;isNaN(e)||""===e?t.style.paddingLeft="":t.style.paddingLeft=e+i,n.refresh(),this.builder.opts.onChange()})),m.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=g.value,i=m.value;isNaN(e)||""===e?t.style.paddingLeft="":t.style.paddingLeft=e+i,n.refresh(),this.builder.opts.onChange()}));let f=o.querySelector("#inpElmPaddingRight");f.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let b=o.querySelector("#inpElmPaddingRightUnit");f.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=f.value,i=b.value;isNaN(e)||""===e?t.style.paddingRight="":t.style.paddingRight=e+i,n.refresh(),this.builder.opts.onChange()})),b.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=f.value,i=b.value;isNaN(e)||""===e?t.style.paddingRight="":t.style.paddingRight=e+i,n.refresh(),this.builder.opts.onChange()}));let v=o.querySelector("#inpElmPaddingTop");v.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let y=o.querySelector("#inpElmPaddingTopUnit");v.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=v.value,i=y.value;isNaN(e)||""===e?t.style.paddingTop="":t.style.paddingTop=e+i,n.refresh(),this.builder.opts.onChange()})),y.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=v.value,i=y.value;isNaN(e)||""===e?t.style.paddingTop="":t.style.paddingTop=e+i,n.refresh(),this.builder.opts.onChange()}));let x=o.querySelector("#inpElmPaddingBottom");x.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));let w=o.querySelector("#inpElmPaddingBottomUnit");x.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=x.value,i=w.value;isNaN(e)||""===e?t.style.paddingBottom="":t.style.paddingBottom=e+i,n.refresh(),this.builder.opts.onChange()})),w.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=x.value,i=w.value;isNaN(e)||""===e?t.style.paddingBottom="":t.style.paddingBottom=e+i,n.refresh(),this.builder.opts.onChange()}));let S=o.querySelector("#chkResetMarginLeft");S.addEventListener("click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;S.checked?mm.addClass(t,"margin-left-1024-reset"):mm.removeClass(t,"margin-left-1024-reset"),n.refresh(),this.builder.opts.onChange()}));let _=o.querySelector("#chkResetMarginRight");_.addEventListener("click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;_.checked?mm.addClass(t,"margin-right-1024-reset"):mm.removeClass(t,"margin-right-1024-reset"),n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e,i=this.panelStuff;const n=i.querySelector("#inpElmMarginTop"),o=i.querySelector("#inpElmMarginTopUnit");n.value="",o.value="px",e=t.style.marginTop;let s=parseInt(e);isNaN(s)?e&&-1!==e.indexOf("auto")&&(o.value="auto",n.value=""):(-1!==e.indexOf("%")&&(o.value="%"),-1!==e.indexOf("px")&&(o.value="px"),-1!==e.indexOf("vw")&&(o.value="vw"),-1!==e.indexOf("vh")&&(o.value="vh"),-1!==e.indexOf("em")&&(o.value="em"),n.value=s);const r=i.querySelector("#inpElmMarginBottom"),l=i.querySelector("#inpElmMarginBottomUnit");r.value="",l.value="px",e=t.style.marginBottom;let a=parseInt(e);isNaN(a)?e&&-1!==e.indexOf("auto")&&(l.value="auto",r.value=""):(-1!==e.indexOf("%")&&(l.value="%"),-1!==e.indexOf("px")&&(l.value="px"),-1!==e.indexOf("vw")&&(l.value="vw"),-1!==e.indexOf("vh")&&(l.value="vh"),-1!==e.indexOf("em")&&(l.value="em"),r.value=a);const d=i.querySelector("#inpElmMarginLeft"),c=i.querySelector("#inpElmMarginLeftUnit");d.value="",c.value="px",e=t.style.marginLeft;let u=parseInt(e);isNaN(u)?e&&-1!==e.indexOf("auto")&&(c.value="auto",d.value=""):(-1!==e.indexOf("%")&&(c.value="%"),-1!==e.indexOf("px")&&(c.value="px"),-1!==e.indexOf("vw")&&(c.value="vw"),-1!==e.indexOf("vh")&&(c.value="vh"),-1!==e.indexOf("em")&&(c.value="em"),d.value=u);const p=i.querySelector("#inpElmMarginRight"),h=i.querySelector("#inpElmMarginRightUnit");p.value="",h.value="px",e=t.style.marginRight;let g=parseInt(e);isNaN(g)?e&&-1!==e.indexOf("auto")&&(h.value="auto",p.value=""):(-1!==e.indexOf("%")&&(h.value="%"),-1!==e.indexOf("px")&&(h.value="px"),-1!==e.indexOf("vw")&&(h.value="vw"),-1!==e.indexOf("vh")&&(h.value="vh"),-1!==e.indexOf("em")&&(h.value="em"),p.value=g);const m=i.querySelector("#inpElmPaddingTop"),f=i.querySelector("#inpElmPaddingTopUnit");m.value="",f.value="px",e=t.style.paddingTop;let b=parseInt(e);isNaN(b)||(-1!==e.indexOf("%")&&(f.value="%"),-1!==e.indexOf("px")&&(f.value="px"),-1!==e.indexOf("vw")&&(f.value="vw"),-1!==e.indexOf("vh")&&(f.value="vh"),-1!==e.indexOf("em")&&(f.value="em"),m.value=b);const v=i.querySelector("#inpElmPaddingBottom"),y=i.querySelector("#inpElmPaddingBottomUnit");v.value="",y.value="px",e=t.style.paddingBottom;let x=parseInt(e);isNaN(x)||(-1!==e.indexOf("%")&&(y.value="%"),-1!==e.indexOf("px")&&(y.value="px"),-1!==e.indexOf("vw")&&(y.value="vw"),-1!==e.indexOf("vh")&&(y.value="vh"),-1!==e.indexOf("em")&&(y.value="em"),v.value=x);const w=i.querySelector("#inpElmPaddingLeft"),S=i.querySelector("#inpElmPaddingLeftUnit");w.value="",S.value="px",e=t.style.paddingLeft;let _=parseInt(e);isNaN(_)||(-1!==e.indexOf("%")&&(S.value="%"),-1!==e.indexOf("px")&&(S.value="px"),-1!==e.indexOf("vw")&&(S.value="vw"),-1!==e.indexOf("vh")&&(S.value="vh"),-1!==e.indexOf("em")&&(S.value="em"),w.value=_);const C=i.querySelector("#inpElmPaddingRight"),k=i.querySelector("#inpElmPaddingRightUnit");C.value="",k.value="px",e=t.style.paddingRight;let E=parseInt(e);isNaN(E)||(-1!==e.indexOf("%")&&(k.value="%"),-1!==e.indexOf("px")&&(k.value="px"),-1!==e.indexOf("vw")&&(k.value="vw"),-1!==e.indexOf("vh")&&(k.value="vh"),-1!==e.indexOf("em")&&(k.value="em"),C.value=E),mm.hasClass(t,"margin-left-1024-reset")?i.querySelector("#chkResetMarginLeft").checked=!0:i.querySelector("#chkResetMarginLeft").checked=!1,mm.hasClass(t,"margin-right-1024-reset")?i.querySelector("#chkResetMarginRight").checked=!0:i.querySelector("#chkResetMarginRight").checked=!1}}const bm=new o;class vm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementBorder");this.panelStuff=o;const s=`\n                <div style="margin-top: 13px;font-weight: bold;line-height: 1.7;">${e.out("Border")}</div>\n                \n                <div class="is-settings">\n                    <div style="display:flex;">\n                        <input type="text" id="inpElmBorderWidth" value="" style="width:45px"/>\n                        <select id="inpElmBorderWidthUnit" style="margin-right:15px;">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="none">none</option>\n                        </select>\n                        <select id="inpElmBorderStyle" style="margin-right:15px;">\n                            <option value=""></option>\n                            <option value="solid">Solid</option>\n                            <option value="dashed">Dashed</option>\n                            <option value="dotted">Dotted</option>\n                        </select>\n                        <button title="${e.out("Border Color")}" class="input-elm-bordercolor is-btn-color"></button>                             \n                    </div>\n                </div>\n                \n                <div style="margin-top: 25px;font-weight: bold;line-height: 1.7;">${e.out("Individual Sides")}</div>\n                \n                <div class="is-settings">\n                    <div>${e.out("Border Top")}:</div>\n                    <div style="display:flex;">\n                        <input type="text" id="inpElmBorderTopWidth" value="" style="width:45px"/>\n                        <select id="inpElmBorderTopWidthUnit" style="margin-right:15px;">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="none">none</option>\n                        </select>\n                        <select id="inpElmBorderTopStyle" style="margin-right:15px;">\n                            <option value=""></option>\n                            <option value="solid">Solid</option>\n                            <option value="dashed">Dashed</option>\n                            <option value="dotted">Dotted</option>\n                        </select>\n                        <button title="${e.out("Border Top Color")}" class="input-elm-bordertopcolor is-btn-color"></button>\n                    </div>\n                </div>\n                \n                <div class="is-settings">\n                    <div>${e.out("Border Bottom")}:</div>\n                    <div style="display:flex;">\n                        <input type="text" id="inpElmBorderBottomWidth" value="" style="width:45px"/>\n                        <select id="inpElmBorderBottomWidthUnit" style="margin-right:15px;">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="none">none</option>\n                        </select>\n                        <select id="inpElmBorderBottomStyle" style="margin-right:15px;">\n                            <option value=""></option>\n                            <option value="solid">Solid</option>\n                            <option value="dashed">Dashed</option>\n                            <option value="dotted">Dotted</option>\n                        </select>\n                        <button title="${e.out("Border Bottom Color")}" class="input-elm-borderbottomcolor is-btn-color"></button>\n                    </div>\n                </div>\n                \n                <div class="is-settings">\n                    <div>${e.out("Border Left")}:</div>\n                    <div style="display:flex;">\n                        <input type="text" id="inpElmBorderLeftWidth" value="" style="width:45px"/>\n                        <select id="inpElmBorderLeftWidthUnit" style="margin-right:15px;">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="none">none</option>\n                        </select>\n                        <select id="inpElmBorderLeftStyle" style="margin-right:15px;">\n                            <option value=""></option>\n                            <option value="solid">Solid</option>\n                            <option value="dashed">Dashed</option>\n                            <option value="dotted">Dotted</option>\n                        </select>\n                        <button title="${e.out("Border Left Color")}" class="input-elm-borderleftcolor is-btn-color"></button>\n                    </div>\n                </div>\n                \n                <div class="is-settings">\n                    <div>${e.out("Border Right")}:</div>\n                    <div style="display:flex;">\n                        <input type="text" id="inpElmBorderRightWidth" value="" style="width:45px"/>\n                        <select id="inpElmBorderRightWidthUnit" style="margin-right:15px;">\n                            <option value="px">px</option>\n                            <option value="em">em</option>\n                            <option value="vw">vw</option>\n                            <option value="vh">vh</option>\n                            <option value="none">none</option>\n                        </select>\n                        <select id="inpElmBorderRightStyle" style="margin-right:15px;">\n                            <option value=""></option>\n                            <option value="solid">Solid</option>\n                            <option value="dashed">Dashed</option>\n                            <option value="dotted">Dotted</option>\n                        </select>\n                        <button title="${e.out("Border Right Color")}" class="input-elm-borderrightcolor is-btn-color"></button> \n                    </div>\n                </div>                \n        `;bm.appendHtml(o,s);let r=o.querySelector(".input-elm-bordercolor");r.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.borderColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),r.style.backgroundColor,(()=>{r.removeAttribute("data-focus"),r.focus()})),r.setAttribute("data-focus",!0)}));let l=o.querySelector(".input-elm-bordertopcolor");l.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.borderTopColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),l.style.backgroundColor,(()=>{l.removeAttribute("data-focus"),l.focus()})),l.setAttribute("data-focus",!0)}));let a=o.querySelector(".input-elm-borderbottomcolor");a.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.borderBottomColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),a.style.backgroundColor,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)}));let d=o.querySelector(".input-elm-borderleftcolor");d.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.borderLeftColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),d.style.backgroundColor,(()=>{d.removeAttribute("data-focus"),d.focus()})),d.setAttribute("data-focus",!0)}));let c=o.querySelector(".input-elm-borderrightcolor");c.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.borderRightColor=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),c.style.backgroundColor,(()=>{c.removeAttribute("data-focus"),c.focus()})),c.setAttribute("data-focus",!0)}));let u=o.querySelector("#inpElmBorderWidth");u.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),u.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderWidth").value;isNaN(e)||""===e?(t.style.borderStyle="solid",t.style.borderWidth="",t.style.borderStyle=""):(t.style.borderStyle="solid",t.style.borderWidth=e+o.querySelector("#inpElmBorderWidthUnit").value,t.style.borderStyle=o.querySelector("#inpElmBorderStyle").value),n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderWidthUnit").value;"none"===e?(t.style.border="none",t.style.borderWidth="",t.style.borderStyle=""):t.style.borderWidth=o.querySelector("#inpElmBorderWidth").value+e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderStyle").value;t.style.borderStyle=e,n.refresh(),this.builder.opts.onChange()}));let p=o.querySelector("#inpElmBorderTopWidth");p.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),p.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderTopWidth").value;isNaN(e)||""===e?(t.style.borderTopStyle="solid",t.style.borderTopWidth="",t.style.borderTopStyle=""):(t.style.borderTopStyle="solid",t.style.borderTopWidth=e+o.querySelector("#inpElmBorderTopWidthUnit").value,t.style.borderTopStyle=o.querySelector("#inpElmBorderTopStyle").value),n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderTopWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderTopWidthUnit").value;"none"===e?(t.style.borderTop="none",t.style.borderTopWidth="",t.style.borderTopStyle="",this.panelStuff.querySelector("#inpElmBorderTopWidth").value="",this.panelStuff.querySelector("#inpElmBorderTopStyle").value=""):t.style.borderTopWidth=o.querySelector("#inpElmBorderTopWidth").value+e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderTopStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderTopStyle").value;t.style.borderTopStyle=e,n.refresh(),this.builder.opts.onChange()}));let h=o.querySelector("#inpElmBorderBottomWidth");h.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),h.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderBottomWidth").value;isNaN(e)||""===e?(t.style.borderBottomStyle="solid",t.style.borderBottomWidth="",t.style.borderBottomStyle=""):(t.style.borderBottomStyle="solid",t.style.borderBottomWidth=e+o.querySelector("#inpElmBorderBottomWidthUnit").value,t.style.borderBottomStyle=o.querySelector("#inpElmBorderBottomStyle").value),n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderBottomWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderBottomWidthUnit").value;"none"===e?(t.style.borderBottom="none",t.style.borderBottomWidth="",t.style.borderBottomStyle="",this.panelStuff.querySelector("#inpElmBorderBottomWidth").value="",this.panelStuff.querySelector("#inpElmBorderBottomStyle").value=""):t.style.borderBottomWidth=o.querySelector("#inpElmBorderBottomWidth").value+e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderBottomStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderBottomStyle").value;t.style.borderBottomStyle=e,n.refresh(),this.builder.opts.onChange()}));let g=o.querySelector("#inpElmBorderLeftWidth");g.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),g.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderLeftWidth").value;isNaN(e)||""===e?(t.style.borderLeftStyle="solid",t.style.borderLeftWidth="",t.style.borderLeftStyle=""):(t.style.borderLeftStyle="solid",t.style.borderLeftWidth=e+o.querySelector("#inpElmBorderLeftWidthUnit").value,t.style.borderLeftStyle=o.querySelector("#inpElmBorderLeftStyle").value),n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderLeftWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderLeftWidthUnit").value;"none"===e?(t.style.borderLeft="none",t.style.borderLeftWidth="",t.style.borderLeftStyle="",this.panelStuff.querySelector("#inpElmBorderLeftWidth").value="",this.panelStuff.querySelector("#inpElmBorderLeftStyle").value=""):t.style.borderLeftWidth=o.querySelector("#inpElmBorderLeftWidth").value+e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderLeftStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderLeftStyle").value;t.style.borderLeftStyle=e,n.refresh(),this.builder.opts.onChange()}));let m=o.querySelector("#inpElmBorderRightWidth");m.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),m.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderRightWidth").value;isNaN(e)||""===e?(t.style.borderRightStyle="solid",t.style.borderRightWidth="",t.style.borderRightStyle=""):(t.style.borderRightStyle="solid",t.style.borderRightWidth=e+o.querySelector("#inpElmBorderRightWidthUnit").value,t.style.borderRightStyle=o.querySelector("#inpElmBorderRightStyle").value),n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderRightWidthUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderRightWidthUnit").value;"none"===e?(t.style.borderRight="none",t.style.borderRightWidth="",t.style.borderRightStyle="",this.panelStuff.querySelector("#inpElmBorderRightWidth").value="",this.panelStuff.querySelector("#inpElmBorderRightStyle").value=""):t.style.borderRightWidth=o.querySelector("#inpElmBorderRightWidth").value+e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmBorderRightStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;var e=o.querySelector("#inpElmBorderRightStyle").value;t.style.borderRightStyle=e,n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){this.panelStuff.querySelector(".input-elm-bordercolor").style.backgroundColor=t.style.borderColor,this.panelStuff.querySelector(".input-elm-bordertopcolor").style.backgroundColor=t.style.borderTopColor,this.panelStuff.querySelector(".input-elm-borderbottomcolor").style.backgroundColor=t.style.borderBottomColor,this.panelStuff.querySelector(".input-elm-borderleftcolor").style.backgroundColor=t.style.borderLeftColor,this.panelStuff.querySelector(".input-elm-borderrightcolor").style.backgroundColor=t.style.borderRightColor,this.panelStuff.querySelector("#inpElmBorderWidth").value="",this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="",this.panelStuff.querySelector("#inpElmBorderStyle").value="";var e=t.style.borderWidth,i=parseInt(e);isNaN(i)?-1!==(e=t.style.border).indexOf("none")&&(this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="none",this.panelStuff.querySelector("#inpElmBorderWidth").value="",this.panelStuff.querySelector("#inpElmBorderStyle").value=""):(-1!==e.indexOf("px")&&(this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="px"),-1!==e.indexOf("vw")&&(this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="vw"),-1!==e.indexOf("vh")&&(this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="vh"),-1!==e.indexOf("em")&&(this.panelStuff.querySelector("#inpElmBorderWidthUnit").value="em"),this.panelStuff.querySelector("#inpElmBorderWidth").value=i,-1!==(e=t.style.borderStyle).indexOf("solid")&&(this.panelStuff.querySelector("#inpElmBorderStyle").value="solid"),-1!==e.indexOf("dashed")&&(this.panelStuff.querySelector("#inpElmBorderStyle").value="dashed"),-1!==e.indexOf("dotted")&&(this.panelStuff.querySelector("#inpElmBorderStyle").value="dotted")),this.panelStuff.querySelector("#inpElmBorderTopWidth").value="",this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="",this.panelStuff.querySelector("#inpElmBorderTopStyle").value="",e=t.style.borderTopWidth;var n=parseInt(e);isNaN(n)?-1!==(e=t.style.borderTop).indexOf("none")&&(this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="none",this.panelStuff.querySelector("#inpElmBorderTopWidth").value="",this.panelStuff.querySelector("#inpElmBorderTopStyle").value=""):(-1!==e.indexOf("px")&&(this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="px"),-1!==e.indexOf("vw")&&(this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="vw"),-1!==e.indexOf("vh")&&(this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="vh"),-1!==e.indexOf("em")&&(this.panelStuff.querySelector("#inpElmBorderTopWidthUnit").value="em"),this.panelStuff.querySelector("#inpElmBorderTopWidth").value=n,-1!==e.indexOf("solid")&&(this.panelStuff.querySelector("#inpElmBorderTopStyle").value="solid"),-1!==e.indexOf("dashed")&&(this.panelStuff.querySelector("#inpElmBorderTopStyle").value="dashed"),-1!==e.indexOf("dotted")&&(this.panelStuff.querySelector("#inpElmBorderTopStyle").value="dotted")),this.panelStuff.querySelector("#inpElmBorderBottomWidth").value="",this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="",this.panelStuff.querySelector("#inpElmBorderBottomStyle").value="",e=t.style.borderBottomWidth;var o=parseInt(e);isNaN(o)?-1!==(e=t.style.borderBottom).indexOf("none")&&(this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="none",this.panelStuff.querySelector("#inpElmBorderBottomWidth").value="",this.panelStuff.querySelector("#inpElmBorderBottomStyle").value=""):(-1!==e.indexOf("px")&&(this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="px"),-1!==e.indexOf("vw")&&(this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="vw"),-1!==e.indexOf("vh")&&(this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="vh"),-1!==e.indexOf("em")&&(this.panelStuff.querySelector("#inpElmBorderBottomWidthUnit").value="em"),this.panelStuff.querySelector("#inpElmBorderBottomWidth").value=o,-1!==e.indexOf("solid")&&(this.panelStuff.querySelector("#inpElmBorderBottomStyle").value="solid"),-1!==e.indexOf("dashed")&&(this.panelStuff.querySelector("#inpElmBorderBottomStyle").value="dashed"),-1!==e.indexOf("dotted")&&(this.panelStuff.querySelector("#inpElmBorderBottomStyle").value="dotted")),this.panelStuff.querySelector("#inpElmBorderLeftWidth").value="",this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="",this.panelStuff.querySelector("#inpElmBorderLeftStyle").value="",e=t.style.borderLeftWidth;var s=parseInt(e);isNaN(s)?-1!==(e=t.style.borderLeft).indexOf("none")&&(this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="none",this.panelStuff.querySelector("#inpElmBorderLeftWidth").value="",this.panelStuff.querySelector("#inpElmBorderLeftStyle").value=""):(-1!==e.indexOf("px")&&(this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="px"),-1!==e.indexOf("vw")&&(this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="vw"),-1!==e.indexOf("vh")&&(this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="vh"),-1!==e.indexOf("em")&&(this.panelStuff.querySelector("#inpElmBorderLeftWidthUnit").value="em"),this.panelStuff.querySelector("#inpElmBorderLeftWidth").value=s,-1!==e.indexOf("solid")&&(this.panelStuff.querySelector("#inpElmBorderLeftStyle").value="solid"),-1!==e.indexOf("dashed")&&(this.panelStuff.querySelector("#inpElmBorderLeftStyle").value="dashed"),-1!==e.indexOf("dotted")&&(this.panelStuff.querySelector("#inpElmBorderLeftStyle").value="dotted")),this.panelStuff.querySelector("#inpElmBorderRightWidth").value="",this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="",this.panelStuff.querySelector("#inpElmBorderRightStyle").value="",e=t.style.borderRightWidth;var r=parseInt(e);isNaN(r)?-1!==(e=t.style.borderRight).indexOf("none")&&(this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="none",this.panelStuff.querySelector("#inpElmBorderRightWidth").value="",this.panelStuff.querySelector("#inpElmBorderRightStyle").value=""):(-1!==e.indexOf("px")&&(this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="px"),-1!==e.indexOf("vw")&&(this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="vw"),-1!==e.indexOf("vh")&&(this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="vh"),-1!==e.indexOf("em")&&(this.panelStuff.querySelector("#inpElmBorderRightWidthUnit").value="em"),this.panelStuff.querySelector("#inpElmBorderRightWidth").value=r,-1!==e.indexOf("solid")&&(this.panelStuff.querySelector("#inpElmBorderRightStyle").value="solid"),-1!==e.indexOf("dashed")&&(this.panelStuff.querySelector("#inpElmBorderRightStyle").value="dashed"),-1!==e.indexOf("dotted")&&(this.panelStuff.querySelector("#inpElmBorderRightStyle").value="dotted"))}}const ym=new o;class xm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementText");this.panelStuff=o;const s=`\n            <div class="is-settings" style="width:115px;">\n                <div>Text Color:</div>\n                <div>\n                    <button title="${e.out("Text Color")}" class="input-elm-color is-btn-color"></button>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Font Size")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmFontSize" value="" style="width:45px"/>\n                    <select id="inpElmFontSizeUnit">\n                        <option value=""></option>\n                        <option value="px">px</option>\n                        <option value="pt">pt</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="vmin">vmin</option>\n                        <option value="vmax">vmax</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Text Align")}:</div>\n                <div>\n                    <select id="inpElmTextAlign">\n                        <option value=""></option>\n                        <option value="left">${e.out("Left")}</option>\n                        <option value="center">${e.out("Center")}</option>\n                        <option value="right">${e.out("Right")}</option>\n                        <option value="justify">${e.out("Full")}</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Line Height")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmLineHeight" value="" style="width:45px"/>\n                    <select id="inpElmLineHeightUnit">\n                        <option value=""></option>\n                        <option value="px">px</option>\n                        <option value="pt">pt</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Font Weight")}:</div>\n                <div>\n                    <select id="inpElmFontWeight">\n                        <option value=""></option>\n                        <option value="100">100</option>\n                        <option value="200">200</option>\n                        <option value="300">300</option>\n                        <option value="400">400</option>\n                        <option value="500">500</option>\n                        <option value="600">600</option>\n                        <option value="700">700</option>\n                        <option value="800">800</option>\n                        <option value="900">900</option>\n                        <option value="bold">${e.out("Bold")}</option>\n                        <option value="normal">${e.out("Normal")}</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Font Style")}:</div>\n                <div>\n                    <select id="inpElmFontStyle">\n                        <option value=""></option>\n                        <option value="italic">${e.out("Italic")}</option>\n                        <option value="normal">${e.out("Normal")}</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Text Transform")}:</div>\n                <div>\n                    <select id="inpElmTextTransform">\n                        <option value=""></option>\n                        <option value="uppercase">${e.out("Uppercase")}</option>\n                        <option value="lowercase">${e.out("Lowercase")}</option>\n                        <option value="capitalize">${e.out("Capitalize")}</option>\n                        <option value="none">${e.out("None")}</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Text Decoration")}:</div>\n                <div>\n                    <select id="inpElmTextDecoration">\n                        <option value=""></option>\n                        <option value="underline">${e.out("Underline")}</option>\n                        <option value="line-through">${e.out("Line Through")}</option>\n                        <option value="overline">${e.out("Overline")}</option>\n                        <option value="none">${e.out("None")}</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Letter Spacing")}:</div>\n                <div>\n                    <input type="text" id="inpElmLetterSpacing" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:115px;">\n                <div>${e.out("Word Spacing")}:</div>\n                <div>\n                    <input type="text" id="inpElmWordSpacing" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div>${e.out("Font Family")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmFontFamily" value="" style="width:100%"/>\n                    <button title="${e.out("Select Font")}" class="input-elm-fontfamily classic" style="border-left: none;width:45px;padding:0;"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n                </div>\n            </div>\n        `;ym.appendHtml(o,s);const r=`\n            <div class="is-modal pickfontfamily" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable"> ${e.out("Font")} </div>\n                    <div style="margin-top:35px;padding:0px;height:300px;position:relative;">\n                        <iframe tabindex="0" src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;border: none;"></iframe>\n                    </div>\n                </div>\n            </div>\n        `;ym.appendHtml(i,r);const l=i.querySelector(".is-modal.pickfontfamily");let a=o.querySelector(".input-elm-color");a.addEventListener("click",(t=>{this.builder.uo.saveForUndo(!0);let e=t.target;this.builder.colorPicker.open((t=>{this.builder.inspectedElement.style.color=t,e.style.backgroundColor=t,n.refresh(),this.builder.opts.onChange()}),a.style.backgroundColor,(()=>{a.removeAttribute("data-focus"),a.focus()})),a.setAttribute("data-focus",!0)})),o.querySelector("#inpElmTextAlign").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmTextAlign").value;t.style.textAlign=e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmFontWeight").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFontWeight").value;t.style.fontWeight=e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmFontStyle").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFontStyle").value;t.style.fontStyle=e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmTextTransform").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmTextTransform").value;t.style.textTransform=e,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmTextDecoration").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmTextDecoration").value;t.style.textDecoration=e,n.refresh(),this.builder.opts.onChange()}));let d=o.querySelector("#inpElmFontSize");d.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),d.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFontSize").value;if(""===e)return void(t.style.fontSize="");let i=o.querySelector("#inpElmFontSizeUnit").value;""===i&&(o.querySelector("#inpElmFontSizeUnit").value="px",i="px"),isNaN(e)||""===e?t.style.fontSize="":t.style.fontSize=e+i;const s=this.builder.opts.fontSizeClassValues;for(var r=0;r<=s.length-1;r++)ym.hasClass(t,"size-"+s[r])&&ym.removeClass(t,"size-"+s[r]);n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmFontSizeUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFontSize").value,i=o.querySelector("#inpElmFontSizeUnit").value;isNaN(e)||""===e?t.style.fontSize="":t.style.fontSize=e+i,n.refresh(),this.builder.opts.onChange()}));let c=o.querySelector("#inpElmLineHeight");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmLineHeight").value,i=o.querySelector("#inpElmLineHeightUnit").value;isNaN(e)||""===e?t.style.lineHeight="":t.style.lineHeight=e+i,n.refresh(),this.builder.opts.onChange()})),o.querySelector("#inpElmLineHeightUnit").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmLineHeightUnit").value,i=o.querySelector("#inpElmLineHeight").value;isNaN(i)||""===i?t.style.lineHeight="":t.style.lineHeight=i+e,n.refresh(),this.builder.opts.onChange()}));let u=o.querySelector("#inpElmLetterSpacing");u.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),u.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmLetterSpacing").value;isNaN(e)||""===e?t.style.letterSpacing="":t.style.letterSpacing=e+"px",n.refresh(),this.builder.opts.onChange()}));let p=o.querySelector("#inpElmWordSpacing");p.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),p.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmWordSpacing").value;isNaN(e)||""===e?t.style.wordSpacing="":t.style.wordSpacing=e+"px",n.refresh(),this.builder.opts.onChange()}));let h=o.querySelector("#inpElmFontFamily");if(h.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),h.addEventListener("keyup",(()=>{let t=o.querySelector("#inpElmFontFamily").value;this.builder.inspectedElement.style.fontFamily=t,n.refresh(),this.builder.opts.onChange()})),!this.builder.renderIframeLater){let t=l.querySelector("iframe").contentWindow.document;t.open(),this.builder.opts.emailMode?t.write(this.util.getFontFamilyEmail(!0)):t.write(this.util.getFontFamilyHTML(!0)),t.close()}let g=o.querySelector(".input-elm-fontfamily");g.addEventListener("click",(()=>{let t=this.builder.inspectedElement;this.util.showModal(l,!1,(()=>{g.removeAttribute("data-focus"),g.focus()})),g.setAttribute("data-focus",!0);var e=t.style.fontFamily;const i=l.querySelector("iframe");let n=i.contentDocument||i.contentWindow.document;if(""!==e){let t=e.split(",")[0];if(t=t.replace('"',"").replace('"',""),t=t.toLowerCase().trim(),n){[].forEach.call(n.querySelectorAll("#divFontList > li"),(e=>{var i=e.getAttribute("data-font-family");(i=(i=i.split(",")[0]).trim().toLowerCase())===t&&""!==i?ym.addClass(e,"on"):ym.removeClass(e,"on")}));let e=n.querySelector("#divFontList");var o=e.querySelector(".on");o&&(o.focus(),e.scrollTop=e.scrollTop+o.getBoundingClientRect().top-90)}}else n&&[].forEach.call(n.querySelectorAll("#divFontList > li"),(t=>{ym.removeClass(t,"on")}))}))}readElementStyles(t){this.panelStuff.querySelector(".input-elm-color").style.backgroundColor=t.style.color,this.panelStuff.querySelector("#inpElmTextAlign").value="";var e=t.style.textAlign;this.panelStuff.querySelector("#inpElmTextAlign").value=e,this.panelStuff.querySelector("#inpElmFontSize").value="";var i=parseFloat(t.style.fontSize);let n;isNaN(i)||(this.panelStuff.querySelector("#inpElmFontSize").value=i),this.panelStuff.querySelector("#inpElmFontSizeUnit").value="px";var o=t.style.fontSize;-1!==o.indexOf("px")&&(n="px"),-1!==o.indexOf("pt")&&(n="pt"),-1!==o.indexOf("em")&&(n="em"),-1!==o.indexOf("vw")&&(n="vw"),-1!==o.indexOf("vh")&&(n="vh"),-1!==o.indexOf("vmin")&&(n="vmin"),-1!==o.indexOf("vmax")&&(n="vmax"),-1!==o.indexOf("%")&&(n="%"),this.panelStuff.querySelector("#inpElmFontSizeUnit").value=n,this.panelStuff.querySelector("#inpElmFontWeight").value="";var s=t.style.fontWeight;this.panelStuff.querySelector("#inpElmFontWeight").value=s,this.panelStuff.querySelector("#inpElmFontStyle").value="";var r=t.style.fontStyle;this.panelStuff.querySelector("#inpElmFontStyle").value=r,this.panelStuff.querySelector("#inpElmTextTransform").value="";var l=t.style.textTransform;this.panelStuff.querySelector("#inpElmTextTransform").value=l,this.panelStuff.querySelector("#inpElmTextDecoration").value="";var a=t.style.textDecoration;if(this.panelStuff.querySelector("#inpElmTextDecoration").value=a,this.panelStuff.querySelector("#inpElmLineHeight").value="",isNaN(t.style.lineHeight)){var d=parseFloat(t.style.lineHeight);isNaN(d)||(this.panelStuff.querySelector("#inpElmLineHeight").value=d)}else this.panelStuff.querySelector("#inpElmLineHeight").value=t.style.lineHeight;let c;this.panelStuff.querySelector("#inpElmLineHeightUnit").value="",-1!==(o=t.style.lineHeight).indexOf("px")&&(c="px"),-1!==o.indexOf("pt")&&(c="pt"),this.panelStuff.querySelector("#inpElmLineHeightUnit").value=c,this.panelStuff.querySelector("#inpElmLetterSpacing").value="";var u=parseFloat(t.style.letterSpacing);isNaN(u)||(this.panelStuff.querySelector("#inpElmLetterSpacing").value=u),this.panelStuff.querySelector("#inpElmWordSpacing").value="";var p=parseFloat(t.style.wordSpacing);isNaN(p)||(this.panelStuff.querySelector("#inpElmWordSpacing").value=p),this.panelStuff.querySelector("#inpElmFontFamily").value="";var h=t.style.fontFamily;""!==h&&(this.panelStuff.querySelector("#inpElmFontFamily").value=h)}}const wm=new o;class Sm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementCorner");this.panelStuff=o;const s=`\n            <div style="margin-top: 13px;font-weight: bold;width:100%;">${e.out("Corners")}</div>\n\n            <div class="is-settings" style="width:100%;margin-bottom:9px;">\n                <div>${e.out("Border Radius")}:</div>\n                <div>\n                    <input type="text" id="inpElmBorderRadius" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div style="margin-top: 25px;font-weight: bold;width:100%;">${e.out("Individual Corners")}</div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Top Left")}:</div>\n                <div>\n                    <input type="text" id="inpElmBorderTopLeftRadius" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Top Right")}:</div>\n                <div>\n                    <input type="text" id="inpElmBorderTopRightRadius" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Bottom Left")}:</div>\n                <div>\n                    <input type="text" id="inpElmBorderBottomLeftRadius" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Bottom Right")}:</div>\n                <div>\n                    <input type="text" id="inpElmBorderBottomRightRadius" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n        `;wm.appendHtml(o,s);const r=o.querySelector("#inpElmBorderRadius");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),r.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBorderRadius").value;isNaN(e)||""===e?t.style.borderRadius="":t.style.borderRadius=e+"px",n.refresh(),this.builder.opts.onChange()}));const l=o.querySelector("#inpElmBorderTopLeftRadius");l.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),l.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBorderTopLeftRadius").value;isNaN(e)||""===e?t.style.borderTopLeftRadius="":t.style.borderTopLeftRadius=e+"px",n.refresh(),this.builder.opts.onChange()}));const a=o.querySelector("#inpElmBorderTopRightRadius");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),a.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBorderTopRightRadius").value;isNaN(e)||""===e?t.style.borderTopRightRadius="":t.style.borderTopRightRadius=e+"px",n.refresh(),this.builder.opts.onChange()}));const d=o.querySelector("#inpElmBorderBottomLeftRadius");d.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),d.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBorderBottomLeftRadius").value;isNaN(e)||""===e?t.style.borderBottomLeftRadius="":t.style.borderBottomLeftRadius=e+"px",n.refresh(),this.builder.opts.onChange()}));const c=o.querySelector("#inpElmBorderBottomRightRadius");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBorderBottomRightRadius").value;isNaN(e)||""===e?t.style.borderBottomRightRadius="":t.style.borderBottomRightRadius=e+"px",n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmBorderRadius");i.value="";let n=t.style.borderRadius,o=parseInt(n);isNaN(o)||(i.value=o);const s=e.querySelector("#inpElmBorderTopLeftRadius");s.value="",n=t.style.borderTopLeftRadius;let r=parseInt(n);isNaN(r)||(s.value=r);const l=e.querySelector("#inpElmBorderTopRightRadius");l.value="",n=t.style.borderTopRightRadius;let a=parseInt(n);isNaN(a)||(l.value=a);const d=e.querySelector("#inpElmBorderBottomLeftRadius");d.value="",n=t.style.borderBottomLeftRadius;let c=parseInt(n);isNaN(c)||(d.value=c);const u=e.querySelector("#inpElmBorderBottomRightRadius");u.value="",n=t.style.borderBottomRightRadius;let p=parseInt(n);isNaN(p)||(u.value=p)}}const _m=new o;class Cm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementShadow");this.panelStuff=o;const s=`\n            <div style="margin-top:13px;font-weight:bold;width:100%;">${e.out("Shadow")}</div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("x Offset")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmBoxShadowX" value="" style="width:45px"/>\n                    <select id="inpElmBoxShadowXUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("y Offset")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmBoxShadowY" value="" style="width:45px"/>\n                    <select id="inpElmBoxShadowYUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Blur")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmBoxShadowBlur" value="" style="width:45px"/>\n                    <select id="inpElmBoxShadowBlurUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Spread")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmBoxShadowSpread" value="" style="width:45px"/>\n                    <select id="inpElmBoxShadowSpreadUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div>${e.out("Shadow Color")}:</div>\n                <div>\n                <button title="${e.out("Shadow Color")}" class="input-elm-shadowcolor is-btn-color"></button>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div>${e.out("Outer/Inner Shadow")}:</div>\n                <div>\n                    <select id="inpElmBoxShadowInset">\n                        <option value="">Outset</option>\n                        <option value="inset">Inset</option>\n                    </select>\n                </div>\n            </div>\n        `;_m.appendHtml(o,s);let r=o.querySelector(".input-elm-shadowcolor");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo(!0),this.builder.colorPicker.open((t=>{r.style.backgroundColor=t,this.updateShadow(this.builder.inspectedElement),n.refresh(),this.builder.opts.onChange()}),r.style.backgroundColor,(()=>{r.removeAttribute("data-focus"),r.focus()})),r.setAttribute("data-focus",!0)}));let l=o.querySelectorAll("#inpElmBoxShadowX,#inpElmBoxShadowY,#inpElmBoxShadowBlur,#inpElmBoxShadowSpread");Array.prototype.forEach.call(l,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),t.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;this.updateShadow(t),n.refresh(),this.builder.opts.onChange()}))})),l=o.querySelectorAll("#inpElmBoxShadowXUnit,#inpElmBoxShadowYUnit,#inpElmBoxShadowBlurUnit,#inpElmBoxShadowSpreadUnit"),Array.prototype.forEach.call(l,(t=>{t.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;this.updateShadow(t),n.refresh(),this.builder.opts.onChange()}))}));o.querySelector("#inpElmBoxShadowInset").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;this.updateShadow(t),n.refresh(),this.builder.opts.onChange()}))}updateShadow(t){let e=this.panelStuff;var i=e.querySelector(".input-elm-shadowcolor").style.backgroundColor,n=e.querySelector("#inpElmBoxShadowInset").value,o=e.querySelector("#inpElmBoxShadowX").value,s=e.querySelector("#inpElmBoxShadowXUnit").value,r="";isNaN(o)||""===o||(r=o+s),o=e.querySelector("#inpElmBoxShadowY").value,s=e.querySelector("#inpElmBoxShadowYUnit").value;var l="";isNaN(o)||""===o||(l=o+s),o=e.querySelector("#inpElmBoxShadowBlur").value,s=e.querySelector("#inpElmBoxShadowBlurUnit").value;var a="";isNaN(o)||""===o||(a=o+s),o=e.querySelector("#inpElmBoxShadowSpread").value,s=e.querySelector("#inpElmBoxShadowSpreadUnit").value;var d="";isNaN(o)||""===o||(d=o+s),t.style.boxShadow=(r+" "+l+" "+a+" "+d+" "+i+" "+n).trim()}readElementStyles(t){let e,i,n=this.panelStuff,o=t.style.boxShadow,s=n.querySelectorAll("#inpElmBoxShadowX,#inpElmBoxShadowY,#inpElmBoxShadowBlur,#inpElmBoxShadowSpread");if(Array.prototype.forEach.call(s,(t=>{t.value=""})),s=n.querySelectorAll("#inpElmBoxShadowXUnit,#inpElmBoxShadowYUnit,#inpElmBoxShadowBlurUnit,#inpElmBoxShadowSpreadUnit"),Array.prototype.forEach.call(s,(t=>{t.value="px"})),n.querySelector("#inpElmBoxShadowInset").value="",-1!==o.indexOf("inset")&&(n.querySelector("#inpElmBoxShadowInset").value="inset",o=o.replace("inset","")),""!==o){-1!==o.indexOf("rgb")&&(e=o.substr(o.indexOf("rgb")),e=e.substr(0,e.indexOf(")")+1),n.querySelector(".input-elm-shadowcolor").style.backgroundColor=e,i=o.split("rgb")[1].indexOf(")"),o=o.split("rgb")[0]+o.split("rgb")[1].substr(i+2)),-1!==o.indexOf("#")&&(e=o.substr(o.indexOf("#")),e=e.substr(0,e.indexOf(" ")),n.querySelector(".input-elm-shadowcolor").style.backgroundColor=e,i=o.split("#")[1].indexOf(" "),o=o.split("#")[0]+o.split("#")[1].substr(i+2));let t=o.split(" "),s=t.length;i=1;for(let e=0;e<s;e++)1===i&&(n.querySelector("#inpElmBoxShadowX").value=parseInt(t[e]),-1!==t[e].indexOf("px")?n.querySelector("#inpElmBoxShadowXUnit").value="px":-1!==t[e].indexOf("em")?n.querySelector("#inpElmBoxShadowXUnit").value="em":n.querySelector("#inpElmBoxShadowX").value=""),2===i&&(n.querySelector("#inpElmBoxShadowY").value=parseInt(t[e]),-1!==t[e].indexOf("px")?n.querySelector("#inpElmBoxShadowYUnit").value="px":-1!==t[e].indexOf("em")?n.querySelector("#inpElmBoxShadowYUnit").value="em":n.querySelector("#inpElmBoxShadowY").value=""),3===i&&(n.querySelector("#inpElmBoxShadowBlur").value=parseInt(t[e]),-1!==t[e].indexOf("px")?n.querySelector("#inpElmBoxShadowBlurUnit").value="px":-1!==t[e].indexOf("em")?n.querySelector("#inpElmBoxShadowBlurUnit").value="em":n.querySelector("#inpElmBoxShadowBlur").value=""),4===i&&(n.querySelector("#inpElmBoxShadowSpread").value=parseInt(t[e]),-1!==t[e].indexOf("px")?n.querySelector("#inpElmBoxShadowSpreadUnit").value="px":-1!==t[e].indexOf("em")?n.querySelector("#inpElmBoxShadowSpreadUnit").value="em":n.querySelector("#inpElmBoxShadowSpread").value=""),i++}}}const km=new o;class Em{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementDisplay");this.panelStuff=o;const s=`\n            <div style="margin-top:13px;font-weight:bold;">${e.out("Display")}</div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="display:flex">\n                    <select id="inpElmDisplay" style="width:110px;">\n                        <option value=""></option>\n                        <option value="block">Block</option>\n                        <option value="inline-block">Inline Block</option>\n                        <option value="inline">Inline</option>\n                        <option value="flex">Flex</option>\n                        <option value="none">None</option>\n                    </select>\n                </div>\n            </div>\n\n            <div style="margin-top:25px;font-weight:bold;width:100%;">${e.out("Flex")}</div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Direction")}:</div>\n                <div style="display:flex">\n                    <select id="inpElmFlexDirection" style="width:110px;">\n                        <option value=""></option>\n                        <option value="row">Row</option>\n                        <option value="row-reverse">Row Reverse</option>\n                        <option value="column">Column</option>\n                        <option value="column-reverse">Column Reverse</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Wrap")}:</div>\n                <div style="display:flex">\n                    <select id="inpElmFlexWrap" style="width:110px;">\n                        <option value=""></option>\n                        <option value="no-wrap">No Wrap</option>\n                        <option value="wrap">Wrap</option>\n                        <option value="wrap-reverse">Wrap Reverse</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div>${e.out("Justify Content")}:</div>\n                <div style="display:flex">\n                    <select id="inpElmJustifyContent" style="width:110px;">\n                        <option value=""></option>\n                        <option value="center">Center</option>\n                        <option value="flex-start">Flex Start</option>\n                        <option value="flex-end">Flex End</option>\n                        <option value="space-around">Space Around</option>\n                        <option value="space-between">Space Between</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Align Items")}:</div>\n                <div style="display:flex">\n                    <select id="inpElmAlignItems" style="width:110px;">\n                        <option value=""></option>\n                        <option value="center">Center</option>\n                        <option value="flex-start">Flex Start</option>\n                        <option value="flex-end">Flex End</option>\n                        <option value="stretch">Stretch</option>\n                        <option value="baseline">Baseline</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Align Content")}:</div>\n                <div style="display:flex">\n                    <select id="inpElmAlignContent" style="width:110px;">\n                        <option value=""></option>\n                        <option value="center">Center</option>\n                        <option value="flex-start">Flex Start</option>\n                        <option value="flex-end">Flex End</option>\n                        <option value="stretch">Stretch</option>\n                        <option value="space-around">Space Around</option>\n                        <option value="space-between">Space Between</option>\n                    </select>\n                </div>\n            </div>\n        `;km.appendHtml(o,s);o.querySelector("#inpElmDisplay").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmDisplay").value;t.style.display=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmFlexDirection").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFlexDirection").value;t.style.flexDirection=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmFlexWrap").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFlexWrap").value;t.style.flexWrap=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmJustifyContent").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmJustifyContent").value;t.style.justifyContent=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmAlignItems").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmAlignItems").value;t.style.alignItems=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmAlignContent").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmAlignContent").value;t.style.alignContent=e,n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmDisplay");i.value="";let n=t.style.display;n&&(i.value=n);const o=e.querySelector("#inpElmFlexDirection");o.value="",n=t.style.flexDirection,n&&(o.value=n);const s=e.querySelector("#inpElmFlexWrap");s.value="",n=t.style.flexWrap,n&&(s.value=n);const r=e.querySelector("#inpElmJustifyContent");r.value="",n=t.style.justifyContent,n&&(r.value=n);const l=e.querySelector("#inpElmAlignItems");l.value="",n=t.style.alignItems,n&&(l.value=n);const a=e.querySelector("#inpElmAlignContent");a.value="",n=t.style.alignContent,n&&(a.value=n)}}const Am=new o;class Lm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementPosition");this.panelStuff=o;const s=`\n            <div style="margin-top:13px;font-weight:bold;width:100%;">${e.out("Position")}</div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="display:flex">\n                    <select id="inpElmPosition">\n                        <option value=""></option>\n                        <option value="relative">Relative</option>\n                        <option value="absolute">Absolute</option>\n                        <option value="fixed">Fixed</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Top")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmTop" value="" style="width:45px"/>\n                    <select id="inpElmTopUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Left")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmLeft" value="" style="width:45px"/>\n                    <select id="inpElmLeftUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Bottom")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmBottom" value="" style="width:45px"/>\n                    <select id="inpElmBottomUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div>${e.out("Right")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmRight" value="" style="width:45px"/>\n                    <select id="inpElmRightUnit">\n                        <option value="px">px</option>\n                        <option value="em">em</option>\n                        <option value="vw">vw</option>\n                        <option value="vh">vh</option>\n                        <option value="%">%</option>\n                    </select>\n                </div>\n            </div>\n\n            <div style="margin-top: 25px;font-weight: bold;width:100%;">${e.out("Float")}</div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="display:flex">\n                    <select id="inpElmFloat">\n                        <option value=""></option>\n                        <option value="left">Left</option>\n                        <option value="right">Right</option>\n                        <option value="none">None</option>\n                    </select>\n                </div>\n            </div>\n        `;Am.appendHtml(o,s);o.querySelector("#inpElmPosition").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmPosition").value;t.style.position=e,n.refresh(),this.builder.opts.onChange()}));o.querySelector("#inpElmFloat").addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=o.querySelector("#inpElmFloat").value;t.style.float=e,n.refresh(),this.builder.opts.onChange()}));const r=o.querySelector("#inpElmTop");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));const l=o.querySelector("#inpElmTopUnit");r.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=r.value,i=l.value;isNaN(e)||""===e?t.style.top="":t.style.top=e+i,n.refresh(),this.builder.opts.onChange()})),l.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=r.value,i=l.value;isNaN(e)||""===e?t.style.top="":t.style.top=e+i,n.refresh(),this.builder.opts.onChange()}));const a=o.querySelector("#inpElmBottom");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));const d=o.querySelector("#inpElmBottomUnit");a.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=a.value,i=d.value;isNaN(e)||""===e?t.style.bottom="":t.style.bottom=e+i,n.refresh(),this.builder.opts.onChange()})),d.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=a.value,i=d.value;isNaN(e)||""===e?t.style.bottom="":t.style.bottom=e+i,n.refresh(),this.builder.opts.onChange()}));const c=o.querySelector("#inpElmLeft");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));const u=o.querySelector("#inpElmLeftUnit");c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=c.value,i=u.value;isNaN(e)||""===e?t.style.left="":t.style.left=e+i,n.refresh(),this.builder.opts.onChange()})),u.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=c.value,i=u.value;isNaN(e)||""===e?t.style.left="":t.style.left=e+i,n.refresh(),this.builder.opts.onChange()}));const p=o.querySelector("#inpElmRight");p.addEventListener("click",(()=>{this.builder.uo.saveForUndo()}));const h=o.querySelector("#inpElmRightUnit");p.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=p.value,i=h.value;isNaN(e)||""===e?t.style.right="":t.style.right=e+i,n.refresh(),this.builder.opts.onChange()})),h.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=p.value,i=h.value;isNaN(e)||""===e?t.style.right="":t.style.right=e+i,n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmPosition");i.value="";let n=t.style.position;i.value=n;const o=e.querySelector("#inpElmFloat");o.value="",n=t.style.float,o.value=n;const s=e.querySelector("#inpElmTop"),r=e.querySelector("#inpElmTopUnit");s.value="",r.value="px",n=t.style.top;let l=parseInt(n);isNaN(l)||(-1!==n.indexOf("%")&&(r.value="%"),-1!==n.indexOf("px")&&(r.value="px"),-1!==n.indexOf("vw")&&(r.value="vw"),-1!==n.indexOf("vh")&&(r.value="vh"),-1!==n.indexOf("em")&&(r.value="em"),s.value=l);const a=e.querySelector("#inpElmBottom"),d=e.querySelector("#inpElmBottomUnit");a.value="",d.value="px",n=t.style.bottom;let c=parseInt(n);isNaN(c)||(-1!==n.indexOf("%")&&(d.value="%"),-1!==n.indexOf("px")&&(d.value="px"),-1!==n.indexOf("vw")&&(d.value="vw"),-1!==n.indexOf("vh")&&(d.value="vh"),-1!==n.indexOf("em")&&(d.value="em"),a.value=c);const u=e.querySelector("#inpElmLeft"),p=e.querySelector("#inpElmLeftUnit");u.value="",p.value="px",n=t.style.left;let h=parseInt(n);isNaN(h)||(-1!==n.indexOf("%")&&(p.value="%"),-1!==n.indexOf("px")&&(p.value="px"),-1!==n.indexOf("vw")&&(p.value="vw"),-1!==n.indexOf("vh")&&(p.value="vh"),-1!==n.indexOf("em")&&(p.value="em"),u.value=h);const g=e.querySelector("#inpElmRight"),m=e.querySelector("#inpElmRightUnit");g.value="",m.value="px",n=t.style.right;let f=parseInt(n);isNaN(f)||(-1!==n.indexOf("%")&&(m.value="%"),-1!==n.indexOf("px")&&(m.value="px"),-1!==n.indexOf("vw")&&(m.value="vw"),-1!==n.indexOf("vh")&&(m.value="vh"),-1!==n.indexOf("em")&&(m.value="em"),g.value=f)}}const qm=new o;class Tm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=new cm(t);let o=i.querySelector("#divElementEffect");this.panelStuff=o;const s=`\n            <div style="margin-top:13px;font-weight:bold;">${e.out("Effects")}</div>\n\n            <div class="is-settings" style="width:100%;">\n                <div>${e.out("Opacity")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmOpacity" value="" style="width:45px"/>\n                </div>\n            </div>\n\n            <div style="margin-top:25px;font-weight:bold;width:100%;">${e.out("Filters")}</div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Blur")}:</div>\n                <div>\n                    <input type="text" id="inpElmBlur" value="" style="width:45px"/> &nbsp;px\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Brightness")}:</div>\n                <div>\n                    <input type="text" id="inpElmBrightness" value="" style="width:45px"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Contrast")}:</div>\n                <div>\n                    <input type="text" id="inpElmContrast" value="" style="width:45px"/> &nbsp;%\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Grayscale")}:</div>\n                <div>\n                    <input type="text" id="inpElmGrayscale" value="" style="width:45px"/> &nbsp;%\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Hue Rotate")}:</div>\n                <div>\n                    <input type="text" id="inpElmHueRotate" value="" style="width:45px"/> &nbsp;<span style="font-size:12px">deg</span>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Invert")}:</div>\n                <div>\n                    <input type="text" id="inpElmInvert" value="" style="width:45px"/> &nbsp;%\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Saturate")}:</div>\n                <div>\n                    <input type="text" id="inpElmSaturate" value="" style="width:45px"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div>${e.out("Sepia")}:</div>\n                <div>\n                    <input type="text" id="inpElmSepia" value="" style="width:45px"/> &nbsp;%\n                </div>\n            </div>\n        `;qm.appendHtml(o,s);const r=o.querySelector("#inpElmOpacity");let l;r.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),r.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmOpacity").value;t.style.opacity=e,n.refresh(),this.builder.opts.onChange()}));const a=o.querySelector("#inpElmBlur");a.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),a.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBlur").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("blur")&&(isNaN(e)||""===e?s[l]="":s[l]="blur("+e+"px)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" blur("+e+"px)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const d=o.querySelector("#inpElmBrightness");d.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),d.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmBrightness").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("brightness")&&(isNaN(e)||""===e?s[l]="":s[l]="brightness("+e+")",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" brightness("+e+")";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const c=o.querySelector("#inpElmContrast");c.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),c.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmContrast").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("contrast")&&(isNaN(e)||""===e?s[l]="":s[l]="contrast("+e+"%)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" contrast("+e+"%)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const u=o.querySelector("#inpElmGrayscale");u.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),u.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmGrayscale").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("grayscale")&&(isNaN(e)||""===e?s[l]="":s[l]="grayscale("+e+"%)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" grayscale("+e+"%)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const p=o.querySelector("#inpElmHueRotate");p.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),p.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmHueRotate").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("hue-rotate")&&(isNaN(e)||""===e?s[l]="":s[l]="hue-rotate("+e+"deg)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" hue-rotate("+e+"deg)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const h=o.querySelector("#inpElmInvert");h.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),h.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmInvert").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("invert")&&(isNaN(e)||""===e?s[l]="":s[l]="invert("+e+"%)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" invert("+e+"%)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const g=o.querySelector("#inpElmSaturate");g.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),g.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmSaturate").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("saturate")&&(isNaN(e)||""===e?s[l]="":s[l]="saturate("+e+")",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" saturate("+e+")";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}));const m=o.querySelector("#inpElmSepia");m.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),m.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement,e=o.querySelector("#inpElmSepia").value,i=t.style.filter;i=i.replace("none","");let s=i.split(" "),r=!1;for(l=0;l<s.length;l++){-1!==s[l].indexOf("sepia")&&(isNaN(e)||""===e?s[l]="":s[l]="sepia("+e+"%)",r=!0)}if(r)for(i="",l=0;l<s.length;l++)i+=" "+s[l];else i=i+" sepia("+e+"%)";""===i.trim()?t.style.filter="none":t.style.filter=i,n.refresh(),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmOpacity");i.value="";let n=t.style.opacity;n&&(i.value=n);let o=t.style.filter.split(" ");const s=e.querySelector("#inpElmBlur");s.value="";const r=e.querySelector("#inpElmBrightness");r.value="";const l=e.querySelector("#inpElmGrayscale");l.value="";const a=e.querySelector("#inpElmContrast");a.value="";const d=e.querySelector("#inpElmHueRotate");d.value="";const c=e.querySelector("#inpElmInvert");c.value="";const u=e.querySelector("#inpElmSaturate");u.value="";const p=e.querySelector("#inpElmSepia");let h;p.value="";for(let t=0;t<o.length;t++)n=o[t],-1!==n.indexOf("blur")&&(h=n.replace("blur(","").replace(")",""),h=parseInt(h),s.value=h),-1!==n.indexOf("brightness")&&(h=n.replace("brightness(","").replace(")",""),h=parseInt(h),r.value=h),-1!==n.indexOf("grayscale")&&(h=n.replace("grayscale(","").replace(")",""),h=parseInt(h),l.value=h),-1!==n.indexOf("contrast")&&(h=n.replace("contrast(","").replace(")",""),h=parseInt(h),a.value=h),-1!==n.indexOf("hue-rotate")&&(h=n.replace("hue-rotate(","").replace(")",""),h=parseInt(h),d.value=h),-1!==n.indexOf("invert")&&(h=n.replace("invert(","").replace(")",""),h=parseInt(h),c.value=h),-1!==n.indexOf("saturate")&&(h=n.replace("saturate(","").replace(")",""),h=parseInt(h),u.value=h),-1!==n.indexOf("sepia")&&(h=n.replace("sepia(","").replace(")",""),h=parseInt(h),p.value=h)}}const Mm=new o;class Om{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector("#divElementAttribute");this.panelStuff=n;const o=`\n            <div style="margin-top:13px;font-weight:bold;width:100%;">${e.out("Attributes")}</div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="width:100%">${e.out("Names")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttr1" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="width:100%">${e.out("Values")}:</div>\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttrVal1" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttr2" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttrVal2" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttr3" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttrVal3" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttr4" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttrVal4" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttr5" value="" style="width:90%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:120px;float:left;">\n                <div style="display:flex">\n                    <input type="text" id="inpElmAttrVal5" value="" style="width:90%"/>\n                </div>\n            </div>\n        `;Mm.appendHtml(n,o);let s=n.querySelectorAll("#inpElmAttr1,#inpElmAttr2,#inpElmAttr3,#inpElmAttr4,#inpElmAttr5,#inpElmAttrVal1,#inpElmAttrVal2,#inpElmAttrVal3,#inpElmAttrVal4,#inpElmAttrVal5");Array.prototype.forEach.call(s,(t=>{t.addEventListener("click",(()=>{this.builder.uo.saveForUndo()})),t.addEventListener("keyup",(()=>{let t=this.builder.inspectedElement;this.updateAttributes(t),this.builder.opts.onChange()}))}))}updateAttributes(t){let e={};Array.prototype.forEach.call(t.attributes,(t=>{e[t.name]=t.value}));for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&"id"!==i&&"style"!==i&&"class"!==i&&"href"!==i&&"src"!==i&&"contenteditable"!==i&&"data-filename"!==i&&t.removeAttribute(i);const i=this.panelStuff;let n,o;n=i.querySelector("#inpElmAttr1").value,o=i.querySelector("#inpElmAttrVal1").value,""!==n&&t.setAttribute(n,o),n=i.querySelector("#inpElmAttr2").value,o=i.querySelector("#inpElmAttrVal2").value,""!==n&&t.setAttribute(n,o),n=i.querySelector("#inpElmAttr3").value,o=i.querySelector("#inpElmAttrVal3").value,""!==n&&t.setAttribute(n,o),n=i.querySelector("#inpElmAttr4").value,o=i.querySelector("#inpElmAttrVal4").value,""!==n&&t.setAttribute(n,o),n=i.querySelector("#inpElmAttr5").value,o=i.querySelector("#inpElmAttrVal5").value,""!==n&&t.setAttribute(n,o)}readElementStyles(t){const e=this.panelStuff;let i=e.querySelectorAll("#inpElmAttr1,#inpElmAttr2,#inpElmAttr3,#inpElmAttr4,#inpElmAttr5,#inpElmAttrVal1,#inpElmAttrVal2,#inpElmAttrVal3,#inpElmAttrVal4,#inpElmAttrVal5");Array.prototype.forEach.call(i,(t=>{t.value=""}));var n=1;Array.prototype.forEach.call(t.attributes,(t=>{"id"!==t.name&&"style"!==t.name&&"class"!==t.name&&"href"!==t.name&&"src"!==t.name&&"contenteditable"!==t.name&&"data-filename"!==t.name&&"data-saveforundo"!==t.name&&(e.querySelector("#inpElmAttr"+n).value=t.name,e.querySelector("#inpElmAttrVal"+n).value=t.value,n+=1)}))}}const Rm=new o;class Bm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector("#divElementMore");this.panelStuff=n;const o=`\n\n            <div class="is-settings" style="width:100%;margin-bottom:9px;">\n                <div>${e.out("Add Element ID")}:</div>\n                <div>\n                    <input type="text" id="inpElmId" value="" style="width:100%"/>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;margin-bottom:9px;">\n                <div>${e.out("Add Css Classes")}:</div>\n                <div>\n                    <input type="text" id="inpElmCssClasses" value="" style="width:100%"/>\n                </div>\n            </div>\n\n        `;Rm.appendHtml(n,o);const s=n.querySelector("#inpElmId");s.addEventListener("change",(()=>{let t=this.builder.inspectedElement;this.builder.uo.saveForUndo(),""!==s.value?t.setAttribute("id",s.value):t.removeAttribute("id"),this.builder.opts.onChange()}));const r=n.querySelector("#inpElmCssClasses");r.addEventListener("change",(()=>{let t=this.builder.inspectedElement;this.builder.uo.saveForUndo();let e=[],i=t.getAttribute("data-class");i&&(e=i.split(" "));let n=[],o=r.value;n=o.split(" "),e.forEach((e=>{n.includes(e)||t.classList.remove(e)})),n.forEach((e=>{""!==e&&t.classList.add(e)})),t.setAttribute("data-class",o),""===t.getAttribute("data-class")&&t.removeAttribute("data-class"),this.builder.opts.onChange()}))}readElementStyles(t){let e=this.panelStuff;const i=e.querySelector("#inpElmId");i.value="";const n=t.getAttribute("id");n&&(i.value=n);const o=e.querySelector("#inpElmCssClasses");o.value="";const s=t.getAttribute("data-class");o.value=s}}const Nm=new o;class Im{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector("#divElementAnimation");this.panelStuff=n;const o=`\n            <div style="margin-top:13px;font-weight:bold;">${e.out("Animate")}</div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="display:flex">\n                    <select id="selElmAnim">\n                        <option value=""></option>\n                        <option value="fade">fade</option>\n                        <option value="fade-up">fade-up</option>\n                        <option value="fade-down">fade-down</option>\n                        <option value="fade-left">fade-left</option>\n                        <option value="fade-right">fade-right</option>\n                        <option value="fade-up-right">fade-up-right</option>\n                        <option value="fade-up-left">fade-up-left</option>\n                        <option value="fade-down-right">fade-down-right</option>\n                        <option value="fade-down-left">fade-down-left</option>\n                        <option value="flip-up">flip-up</option>\n                        <option value="flip-down">flip-down</option>\n                        <option value="flip-left">flip-left</option>\n                        <option value="flip-right">flip-right</option>\n                        <option value="slide-up">slide-up</option>\n                        <option value="slide-down">slide-down</option>\n                        <option value="slide-left">slide-left</option>\n                        <option value="slide-right">slide-right</option>\n                        <option value="zoom-in">zoom-in</option>\n                        <option value="zoom-in-up">zoom-in-up</option>\n                        <option value="zoom-in-down">zoom-in-down</option>\n                        <option value="zoom-in-left">zoom-in-left</option>\n                        <option value="zoom-in-right">zoom-in-right</option>\n                        <option value="zoom-out">zoom-out</option>\n                        <option value="zoom-out-up">zoom-out-up</option>\n                        <option value="zoom-out-down">zoom-out-down</option>\n                        <option value="zoom-out-left">zoom-out-left</option>\n                        <option value="zoom-out-right">zoom-out-right</option>\n                    </select>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div> ${e.out("Delay")}:</div>\n                <div>\n                    <select id="selElmAnimDelay">\n                        <option value=""></option>\n                        <option value="0">0</option>\n                        <option value="100">100</option>\n                        <option value="200">200</option>\n                        <option value="300">300</option>\n                        <option value="400">400</option>\n                        <option value="500">500</option>\n                        <option value="600">600</option>\n                        <option value="700">700</option>\n                        <option value="800">800</option>\n                        <option value="900">900</option>\n                        <option value="1000">1000</option>\n                        <option value="1100">1100</option>\n                        <option value="1200">1200</option>\n                        <option value="1300">1300</option>\n                        <option value="1400">1400</option>\n                        <option value="1500">1500</option>\n                        <option value="1600">1600</option>\n                        <option value="1700">1700</option>\n                        <option value="1800">1800</option>\n                        <option value="1900">1900</option>\n                        <option value="2000">2000</option>\n                        <option value="2100">2100</option>\n                        <option value="2200">2200</option>\n                        <option value="2300">2300</option>\n                        <option value="2400">2400</option>\n                        <option value="2500">2500</option>\n                        <option value="2600">2600</option>\n                        <option value="2700">2700</option>\n                        <option value="2800">2800</option>\n                        <option value="2900">2900</option>\n                        <option value="3000">3000</option>\n                    </select> &nbsp;ms\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:110px;">\n                <div> ${e.out("Duration")}:</div>\n                <div>\n                    <select id="selElmAnimDuration">\n                        <option value=""></option>\n                        <option value="0">0</option>\n                        <option value="100">100</option>\n                        <option value="200">200</option>\n                        <option value="300">300</option>\n                        <option value="400">400</option>\n                        <option value="500">500</option>\n                        <option value="600">600</option>\n                        <option value="700">700</option>\n                        <option value="800">800</option>\n                        <option value="900">900</option>\n                        <option value="1000">1000</option>\n                        <option value="1100">1100</option>\n                        <option value="1200">1200</option>\n                        <option value="1300">1300</option>\n                        <option value="1400">1400</option>\n                        <option value="1500">1500</option>\n                        <option value="1600">1600</option>\n                        <option value="1700">1700</option>\n                        <option value="1800">1800</option>\n                        <option value="1900">1900</option>\n                        <option value="2000">2000</option>\n                        <option value="2100">2100</option>\n                        <option value="2200">2200</option>\n                        <option value="2300">2300</option>\n                        <option value="2400">2400</option>\n                        <option value="2500">2500</option>\n                        <option value="2600">2600</option>\n                        <option value="2700">2700</option>\n                        <option value="2800">2800</option>\n                        <option value="2900">2900</option>\n                        <option value="3000">3000</option>\n                    </select> &nbsp;ms\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="margin-top:15px">\n                    <label for="chkAnimateOnce"><input type="checkbox" id="chkAnimateOnce" value=""> ${e.out("Animate Once")} </label>\n                </div>\n            </div>\n\n            <div class="is-settings" style="width:100%;">\n                <div style="display:flex">\n                    <button title="${e.out("Test")}" id="btnPreviewAnim" class="classic" value=""> ${e.out("TEST")} </button>\n                </div>\n            </div>\n        `;Nm.appendHtml(n,o);let s=n.querySelector("#selElmAnim");s.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=n.querySelector("#selElmAnim").value;""===e?t.removeAttribute("data-aos"):(t.setAttribute("data-aos",e),n.querySelector("#btnPreviewAnim").click()),this.builder.opts.onChange()})),s=n.querySelector("#selElmAnimDelay"),s.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=n.querySelector("#selElmAnimDelay").value;""===e?t.removeAttribute("data-aos-delay"):t.setAttribute("data-aos-delay",e),this.builder.opts.onChange()})),s=n.querySelector("#selElmAnimDuration"),s.addEventListener("change",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement,e=n.querySelector("#selElmAnimDuration").value;""===e?t.removeAttribute("data-aos-duration"):t.setAttribute("data-aos-duration",e),this.builder.opts.onChange()}));let r=n.querySelector("#chkAnimateOnce");r.addEventListener("click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.inspectedElement;n.querySelector("#chkAnimateOnce").checked?t.setAttribute("data-aos-once","true"):t.removeAttribute("data-aos-once"),this.builder.opts.onChange()})),r=n.querySelector("#btnPreviewAnim"),r.addEventListener("click",(()=>{let t=this.builder.inspectedElement,e=t.getAttribute("data-aos-duration");t.removeAttribute("data-aos-duration"),t.style.visibility="hidden",window.AOS&&window.AOS.init({duration:1}),Nm.removeClass(t,"aos-init"),Nm.removeClass(t,"aos-animate"),setTimeout((function(){t.style.visibility="",window.AOS&&window.AOS.init({duration:1200}),e&&t.setAttribute("data-aos-duration",e)}),10)}))}readElementStyles(t){this.panelStuff.querySelector("#selElmAnimDelay").value="";let e=t.getAttribute("data-aos-delay");this.panelStuff.querySelector("#selElmAnimDelay").value=e,this.panelStuff.querySelector("#selElmAnimDuration").value="",e=t.getAttribute("data-aos-duration"),this.panelStuff.querySelector("#selElmAnimDuration").value=e,this.panelStuff.querySelector("#chkAnimateOnce").checked=!1;let i=t.getAttribute("data-aos-once");i&&"true"===i&&(this.panelStuff.querySelector("#chkAnimateOnce").checked=!0),this.panelStuff.querySelector("#selElmAnim").value="",e=t.getAttribute("data-aos"),this.panelStuff.querySelector("#selElmAnim").value=e}}const $m=new o;let Dm=[];class Pm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector(".elementstyles");if(!n){let o=`\n            <div class="is-side${"right"===this.builder.opts.sidePanel?"":" fromleft"} elementstyles" style="display:none;" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <div class="elm-list" style="z-index:1;width:100%;height:100px;position:absolute;top:0px;left:0px;box-sizing:border-box;display:flex;align-items:center;flex-wrap: wrap;padding:10px 23px 10px 18px;"></div>\n                    \n                    <button tabindex="-1" title="${e.out("Close")}" class="is-side-close" style="z-index:1;background:transparent;width:25px;height:25px;position:absolute;top:10px;right:13px;box-sizing:border-box;padding:0;line-height:25px;font-size: 12px;text-align:center;cursor:pointer;"><svg class="is-icon-flex" style="width:25px;height:25px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                    \n                    <div style="position: absolute;bottom:7px;right:7px;width:40px;height:25px;z-index:1;display:flex">\n                        <button title="${e.out("css")}" class="elm-editstyle classic" style="width: 40px;height: 25px;font-family: sans-serif;font-size: 10px;padding: 0px;font-weight: bold;">${e.out("css")}</button>\n                    </div>\n                        \n                    <div style="width:100%;height:100%;overflow-y:auto;overflow-x:hidden;position:absolute;top:0px;left:0px;box-sizing:border-box;border-top:100px solid transparent;padding:0px;">\n                            \n                        <div class="is-tabs" data-group="element" style="padding-right:0;padding-bottom:0;">\n                            <a title="${e.out("General")}" id="tabElementGeneral" href="" data-content="divElementGeneral" class="active">${e.out("General")}</a>\n                            <a title="${e.out("Box")}" id="tabElementBox" href="" data-content="divElementBox">${e.out("Box")}</a>\n                            <a title="${e.out("Spacing")}" id="tabElementSpacing" href="" data-content="divElementSpacing">${e.out("Spacing")}</a>\n                            <a title="${e.out("Text")}" id="tabElementText" href="" data-content="divElementText">${e.out("Text")}</a>\n                            <a title="${e.out("More")}" id="tabElementMore" data-menu="divElementMoreItems" href=""><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-more"></use></svg></a>\n                        </div>\n                        \n                        <ul id="divElementMoreItems" style="top: 50px;left: 140px;" class="is-tabs-more" data-group="element" tabindex="-1" aria-modal="true" aria-hidden="true">\n                            <li title="${e.out("Border")}" id="tabElementBorder" data-content="divElementBorder" tabindex="0">${e.out("Border")}</li>\n                            <li title="${e.out("Corners")}" id="tabElementCorner" data-content="divElementCorner" tabindex="0">${e.out("Corners")}</li>\n                            <li title="${e.out("Shadow")}" id="tabElementShadow" data-content="divElementShadow" tabindex="0">${e.out("Shadow")}</li>\n                            <li title="${e.out("Display")}" id="tabElementDisplay" data-content="divElementDisplay" tabindex="0">${e.out("Display")}</li>\n                            <li title="${e.out("Position")}" id="tabElementPosition" data-content="divElementPosition" tabindex="0">${e.out("Position")}</li>\n                            <li title="${e.out("Effects")}" id="tabElementEffect" data-content="divElementEffect" tabindex="0">${e.out("Effects")}</li>\n                            <li style="display:none" title="${e.out("Attributes")}" id="tabElementAttribute" data-content="divElementAttribute" tabindex="0">${e.out("Attributes")}</li>\n                            ${!0===this.builder.opts.elementAnimate?`<li title="${e.out("Animation")}" id="tabElementAnimation" data-content="divElementAnimation" tabindex="0">${e.out("Animation")}</li>`:""}\n                            <li title="${e.out("More")}" id="tabElementMore" data-content="divElementMore" tabindex="0">${e.out("More")}</li>\n                        </ul>\n                        \n                        <div id="divElementGeneral" class="is-tab-content active" tabindex="-1" data-group="element" style="display:flex;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementBox" class="is-tab-content active" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementSpacing" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementBorder" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementText" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementCorner" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementShadow" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementDisplay" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementPosition" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementEffect" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementAttribute" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                        \n                        <div id="divElementAnimation" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n\n                        <div id="divElementMore" class="is-tab-content" tabindex="-1" data-group="element" style="display:none;flex-flow:wrap;padding:12px 20px;">\n                        </div>\n                    </div>\n            </div>              \n            `;$m.appendHtml(i,o),this.elementStyleEditor=new cm(t),n=i.querySelector(".elementstyles");let s=n.querySelector(".is-side-close");$m.addEventListener(s,"click",(()=>{this.hidePanel()})),s=n.querySelector(".elm-editstyle"),$m.addEventListener(s,"click",(()=>{this.elementStyleEditor.toggleStyleEditor()}))}this.panel=n;const o=new gm(t);this.elementBoxStyles=o;const s=new pm(t);this.elementGeneralStyles=s;const r=new fm(t);this.elementSpacingStyles=r;const l=new vm(t);this.elementBorderStyles=l;const a=new xm(t);this.elementTextStyles=a;const d=new Sm(t);this.elementCornerStyles=d;const c=new Cm(t);this.elementShadowStyles=c;const u=new Em(t);this.elementDisplayStyles=u;const p=new Lm(t);this.elementPositionStyles=p;const h=new Tm(t);this.elementEffectStyles=h;const g=new Om(t);this.elementAttributeStyles=g;const m=new Bm(t);this.elementMoreStyles=m;const f=new Im(t);this.elementAnimationStyles=f}click(){($m.hasClass(this.panel,"active")||$m.hasClass(this.elementStyleEditor.modalStyles,"active"))&&this.inspect(this.builder.inspectedElement)}inspect(t){this.elementGeneralStyles.readElementStyles(t),this.elementBoxStyles.readElementStyles(t),this.elementSpacingStyles.readElementStyles(t),this.elementBorderStyles.readElementStyles(t),this.elementTextStyles.readElementStyles(t),this.elementCornerStyles.readElementStyles(t),this.elementShadowStyles.readElementStyles(t),this.elementDisplayStyles.readElementStyles(t),this.elementPositionStyles.readElementStyles(t),this.elementEffectStyles.readElementStyles(t),this.elementAttributeStyles.readElementStyles(t),this.elementMoreStyles.readElementStyles(t),this.elementAnimationStyles.readElementStyles(t);let e=this.panel,i=this.builder.doc.querySelectorAll("[data-saveforundo]");Array.prototype.forEach.call(i,(t=>{t.removeAttribute("data-saveforundo")})),t.setAttribute("data-saveforundo",""),i=this.builder.doc.querySelectorAll(".elm-inspected"),Array.prototype.forEach.call(i,(t=>{$m.removeClass(t,"elm-inspected")})),setTimeout((()=>{$m.addClass(t,"elm-inspected")}),10),e.querySelector(".elm-list").innerHTML="";let n=t,o=0;for(Dm=[];!$m.hasClass(n,"is-builder")&&(Dm.push(n),n)&&n.tagName;){var s=n.tagName.toLowerCase(),r=$m.createElement("a");r.setAttribute("data-index",o),o++,r.setAttribute("href","#"),r.innerHTML=s,""===e.querySelector(".elm-list").innerHTML?($m.addClass(r,"active"),e.querySelector(".elm-list").insertAdjacentHTML("afterbegin",r.outerHTML)):(e.querySelector(".elm-list").insertAdjacentHTML("afterbegin","&nbsp;>&nbsp; "),e.querySelector(".elm-list").insertAdjacentHTML("afterbegin",r.outerHTML)),n=n.parentNode}const l=e.querySelectorAll(".elm-list a");Array.prototype.forEach.call(l,(t=>{$m.addEventListener(t,"click",(e=>{let i=t.getAttribute("data-index");this.builder.inspectedElement=Dm[i],this.inspect(Dm[i]),this.builder.doc.querySelector(".elm-inspected.elm-active")||(this.builderStuff.querySelector(".is-element-tool").style.display="none"),e.preventDefault(),e.stopImmediatePropagation()}))})),this.elementStyleEditor.refresh()}showPanel(){var t=this.builderStuff.querySelector(".is-side.elementstyles");t.style.display="block";let e=this.builderStuff.querySelectorAll(".is-side");Array.prototype.forEach.call(e,(t=>{$m.removeClass(t,"active")})),setTimeout((()=>{$m.addClass(t,"active");let e=t.querySelector(".is-tab-content.active");e.focus(),this.builder.tabs.setupTabKey(e);t.addEventListener("keydown",(t=>{27===t.keyCode&&this.hidePanel()}))}),10),this.inspect(this.builder.inspectedElement)}hidePanel(){var t=this.builderStuff.querySelector(".is-side.elementstyles");$m.removeClass(t,"active");let e=this.builder.doc.querySelectorAll("[data-saveforundo]");Array.prototype.forEach.call(e,(t=>{t.removeAttribute("data-saveforundo")})),e=this.builder.doc.querySelectorAll(".elm-inspected"),Array.prototype.forEach.call(e,(t=>{$m.removeClass(t,"elm-inspected")}))}}class zm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n;const o=new Pm(t);this.elementPanel=o;let s=i.querySelector(".is-element-tool"),r=i.querySelector(".elmmore");if(!s){let t=`<div class="is-tool is-element-tool">\n                <button type="button" tabindex="-1" title="${e.out("Add")}" class="elm-add"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n                <button type="button" tabindex="-1" title="${e.out("More")}" class="elm-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n                <button type="button" tabindex="-1" title="${e.out("Delete")}" class="elm-remove"><svg class="is-icon-flex" style="margin-left:-1px"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                <button type="button" tabindex="-1" title="${e.out("Settings")}" class="elm-settings"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n            </div>\n            <div class="is-pop elmmore" style="z-index:10002;" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div style="display:flex;flex-flow:wrap;">\n                    <button type="button" title="${e.out("Move Up")}" class="elm-up"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></span>${e.out("Move Up")}</button>\n                    <button type="button" title="${e.out("Move Down")}" class="elm-down"><span><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></span>${e.out("Move Down")}</button>\n                    <button type="button" title="${e.out("Duplicate")}" class="elm-duplicate"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></span>${e.out("Duplicate")}</button>\n                    ${this.builder.opts.elementEditor?`\n                    <button type="button" title="${e.out("Settings")}" class="elm-settings"><span><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-gear"></use></svg></span>${e.out("Settings")}</button>\n                    `:""} \n                </div>\n            </div>\n            `;n.appendHtml(i,t),s=this.builder.iframe?this.builder.contentStuff.querySelector(".is-element-tool"):i.querySelector(".is-element-tool"),r=i.querySelector(".elmmore");let o=s.querySelectorAll("[title]");Array.prototype.forEach.call(o,(t=>{t.setAttribute("data-title",t.getAttribute("title"))}))}this.elementTool=s,this.elementMore=r;const l=qi(t),a=s.querySelector(".elm-add");n.addEventListener(a,"click",(()=>{l.querySelector(".is-pop-tabs").style.display="none";const t=window.innerHeight;let i,o;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top,e=this.builder.iframe.getBoundingClientRect().left;i=a.getBoundingClientRect().top+t,o=a.getBoundingClientRect().left+e}else i=a.getBoundingClientRect().top,o=a.getBoundingClientRect().left;e.showPop(l,!1,a);const s=l.offsetWidth,r=l.offsetHeight;return t-i>r?(l.style.top=i+window.pageYOffset+27+"px",l.style.left=o-s/2+10+"px",n.removeClass(l,"arrow-bottom"),n.removeClass(l,"arrow-right"),n.removeClass(l,"arrow-left"),n.removeClass(l,"center"),n.addClass(l,"arrow-top"),n.addClass(l,"center")):(l.style.top=i+window.pageYOffset-r-8+"px",l.style.left=o-s/2+10+"px",n.removeClass(l,"arrow-top"),n.removeClass(l,"arrow-right"),n.removeClass(l,"arrow-left"),n.removeClass(l,"center"),n.addClass(l,"arrow-bottom"),n.addClass(l,"center")),l.setAttribute("data-mode","elm"),!1}));const d=s.querySelector(".elm-remove");n.addEventListener(d,"click",(()=>{e.confirm(e.out("Are you sure you want to delete this element?"),(t=>{if(t){this.builder.uo.saveForUndo();let t=this.builder.activeElement,o=!1;t.closest(".is-subblock")&&(o=!0),t.parentNode.removeChild(t),this.elementTool.style.display="none";let s=this.builder.activeCol;if(s){let t=s.parentNode;0===s.childElementCount&&4===t.childElementCount?(t.parentNode.removeChild(t),e.checkEmpty()):0===s.childElementCount&&(t.removeChild(s),e.fixLayout(t))}const r=this.builder.doc.querySelectorAll(".is-subblock");if(Array.prototype.forEach.call(r,(t=>{const e=n.elementChildren(t);let i=!0;e.forEach((()=>{i=!1})),i&&(t.innerHTML='<div class="spacer height-40" contentEditable="false"></div>')})),e.clearControls(),o){let t=this.builder.activeCol,n=t.querySelectorAll("[data-subblock]");var i=1;Array.prototype.forEach.call(n,(e=>{if(e.closest(".glide__slide--clone"))return;let n=e.innerHTML;t.setAttribute("data-html-"+i,encodeURIComponent(n)),i++})),e.refreshModuleLayout(t)}this.builder.opts.onChange()}}))}));const c=s.querySelector(".elm-more");n.addEventListener(c,"click",(()=>{const t=window.innerHeight;let i,o;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top,e=this.builder.iframe.getBoundingClientRect().left;i=c.getBoundingClientRect().top+t,o=c.getBoundingClientRect().left+e}else i=c.getBoundingClientRect().top,o=c.getBoundingClientRect().left;e.showPop(r,!1,c);const s=r.offsetWidth,l=r.offsetHeight;t-i>l?(r.style.top=i+window.pageYOffset+27+"px",r.style.left=o-s/2+10+"px",n.removeClass(r,"arrow-bottom"),n.removeClass(r,"arrow-right"),n.removeClass(r,"arrow-left"),n.removeClass(r,"center"),n.addClass(r,"arrow-top"),n.addClass(r,"center")):(r.style.top=i+window.pageYOffset-l-8+"px",r.style.left=o-s/2+10+"px",n.removeClass(r,"arrow-top"),n.removeClass(r,"arrow-right"),n.removeClass(r,"arrow-left"),n.removeClass(r,"center"),n.addClass(r,"arrow-bottom"),n.addClass(r,"center"))}));const u=r.querySelector(".elm-up");n.addEventListener(u,"click",(()=>{let t=this.builder.activeElement;if(t.previousElementSibling)this.builder.uo.saveForUndo(),t.parentNode.insertBefore(t,t.previousElementSibling),setTimeout((()=>{this.position()}),30),this.builder.opts.onChange();else{let e=t;for(;!n.hasClass(e.parentNode,"cell-active")&&!e.parentNode.hasAttribute("data-subblock");)e=e.parentNode;e.previousElementSibling&&e!==t&&(this.builder.uo.saveForUndo(),e.parentNode.insertBefore(e,e.previousElementSibling),setTimeout((()=>{this.position()}),30),this.builder.opts.onChange())}}));const p=r.querySelector(".elm-down");n.addEventListener(p,"click",(()=>{let t=this.builder.activeElement;if(t.nextElementSibling)this.builder.uo.saveForUndo(),t.parentNode.insertBefore(t.nextElementSibling,t),setTimeout((()=>{this.position()}),30),this.builder.opts.onChange();else{let e=t;for(;!n.hasClass(e.parentNode,"cell-active")&&!e.parentNode.hasAttribute("data-subblock");)e=e.parentNode;e.nextElementSibling&&e!==t&&(this.builder.uo.saveForUndo(),e.parentNode.insertBefore(e.nextElementSibling,e),setTimeout((()=>{this.position()}),30),this.builder.opts.onChange())}}));const h=r.querySelector(".elm-duplicate");n.addEventListener(h,"click",(()=>{this.builder.uo.saveForUndo();let t=this.builder.activeElement;const e=t.cloneNode(!0);n.moveAfter(e,t),setTimeout((()=>{e.click(),this.position(e);let t=this.builder.doc.querySelector(".builder-active");t&&this.builder.applyBehaviorOn(t),this.builder.opts.onChange()}),100)}));const g=s.querySelector(".elm-settings");g&&n.addEventListener(g,"click",(()=>{e.hidePop(r),this.elementPanel.showPanel()}));const m=r.querySelector(".elm-settings");m&&n.addEventListener(m,"click",(()=>{e.hidePop(r),this.elementPanel.showPanel()}))}hide(){const t=this.dom;this.elementTool.style.display="";let e=this.builder.doc.querySelectorAll(".elm-active");Array.prototype.forEach.call(e,(e=>{t.removeClass(e,"elm-active")}))}position(){const t=this.dom;let e=this.elementTool,i=this.elementMore;t.addClass(i,"transition1");let n=e.querySelector(".elm-more");const o=window.innerHeight;let s,r;if(this.builder.iframe){let t=this.builder.iframe.getBoundingClientRect().top,e=this.builder.iframe.getBoundingClientRect().left;s=n.getBoundingClientRect().top,r=n.getBoundingClientRect().left,s+=t,r+=e}else s=n.getBoundingClientRect().top,r=n.getBoundingClientRect().left;const l=e.querySelector(".elm-more");this.util.showPop(i,!1,l);const a=i.offsetWidth,d=i.offsetHeight;o-s>d?(i.style.top=s+window.pageYOffset+27+"px",i.style.left=r-a/2+10+"px",t.removeClass(i,"arrow-bottom"),t.removeClass(i,"arrow-right"),t.removeClass(i,"arrow-left"),t.removeClass(i,"center"),t.addClass(i,"arrow-top"),t.addClass(i,"center")):(i.style.top=s+window.pageYOffset-d-8+"px",i.style.left=r-a/2+10+"px",t.removeClass(i,"arrow-top"),t.removeClass(i,"arrow-right"),t.removeClass(i,"arrow-left"),t.removeClass(i,"center"),t.addClass(i,"arrow-bottom"),t.addClass(i,"center")),setTimeout((()=>{t.removeClass(i,"transition1")}),300)}click(t,e){const i=this.dom,n=e.target;this.elementTool.style.display="none";let o=this.builder.doc.querySelectorAll(".elm-active");Array.prototype.forEach.call(o,(t=>{i.removeClass(t,"elm-active")}));let s=null,r=!1;t.hasAttribute("data-noedit")&&(r=!0);let l=!1;t.hasAttribute("data-protected")&&(l=!0);let a=!1;t.hasAttribute("data-html")&&(a=!0);let d=!1;if(i.parentsHasClass(n,"is-subblock")&&(d=!0),(a||r||l)&&!d);else{const t=n.tagName.toLowerCase();if("h1"===t||"h2"===t||"h3"===t||"h4"===t||"h5"===t||"h6"===t||"p"===t||"pre"===t||"blockquote"===t||"li"===t||"img"===t||"iframe"===t){if(s=n,"img"===t){i.hasClass(n.parentNode,"img-circular")&&(s=n.parentNode),i.getParentByTag(n,"a")&&(s=n.parentNode)}}else if(i.hasClass(n,"cell-active")||n.hasAttribute("data-subblock"));else if(i.hasClass(n,"cell-active")||n.parentNode.hasAttribute("data-subblock"))s=n;else{let t=n;for(;"BODY"!==t.tagName&&"HTML"!==t.tagName;){let e=t.tagName.toLowerCase();if(i.hasClass(t,"spacer")||"h1"===e||"h2"===e||"h3"===e||"h4"===e||"h5"===e||"h6"===e||"p"===e||"pre"===e||"blockquote"===e||"li"===e||"img"===e||"iframe"===e){s=t;break}if(i.hasClass(t.parentNode,"cell-active")||t.parentNode.hasAttribute("data-subblock")){s=t;break}t=t.parentNode}}}if(this.builder.activeElement=s,s){let t=s;this.pos(),i.addClass(t,"elm-active")}this.builder.inspectedElement=e.target,this.elementPanel.click(e)}refresh(){if(this.builder.activeElement){this.elementTool.style.display="",setTimeout((()=>{this.pos()}),300)}}repositionElementTool(t){if(this.builder.activeElement)try{if(t){"flex"===this.elementTool.style.display&&this.pos()}else this.pos()}catch(t){}}pos(){let t,e,i=this.elementTool,n=this.builder.activeElement;if(n.closest(".is-dock"))return;this.builder.iframe?(t=n.getBoundingClientRect().top+this.builder.win.pageYOffset,e=n.getBoundingClientRect().left+this.builder.win.pageXOffset):(t=n.getBoundingClientRect().top+window.pageYOffset,e=n.getBoundingClientRect().left+window.pageXOffset);const o=n.offsetWidth*this.builder.opts.zoom,s=n.offsetHeight*this.builder.opts.zoom;i.style.display="flex",i.style.top=t+s+"px",i.style.left=e+o-i.offsetWidth+"px";const r=window.innerWidth;e+o>r&&(i.style.left=r-i.offsetWidth+"px")}}class Hm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff,n=this.builder.dom;this.dom=n;let o="";if(this.builder.themes){o='<div class="div-themes">';let t=0;this.builder.themes.forEach((i=>{""===i[1]?o+=`<button type="button" title="${e.out("Set theme")}" class="input-setcolor" data-index="${t}" style="background:${i[0]};border:rgba(0,0,0,0.15) 1px solid;"></button>`:"light"===i[1]?o+=`<button type="button" title="${e.out("Set theme")}" class="input-setcolor" data-index="${t}" style="background:${i[0]};border:rgb(132 132 132 / 16%) 1px solid;"></button>`:o+=`<button type="button" title="${e.out("Set theme")}" class="input-setcolor" data-index="${t}" style="background:${i[0]};"></button>`,t++})),o+="</div>"}let s=i.querySelector(".viewconfig");if(!s){let r=`<div class="is-modal viewconfig" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content">\n                    <div class="is-modal-bar is-draggable">${e.out("Preferences")}</div>\n                \n                    <div style="display:flex;flex-wrap:wrap;width:100%;padding-top:32px;">\n                        <div style="width:50%">\n                            <label id="divBuilderMode" style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Builder Mode")}:&nbsp;\n                                <select class="select-buildermode">\n                                    <option value="">${e.out("Default")}</option>\n                                    <option value="minimal">${e.out("Minimal")}</option>\n                                    <option value="clean">${e.out("Clean")}</option>\n                                </select>\n                            </label>\n                            \n                            <label id="divOutlineMode" style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Outline Mode")}:&nbsp;\n                                <select class="select-outlinemode">\n                                    <option value="">${e.out("Row & column")}</option>\n                                    <option value="row">${e.out("Row only")}</option>\n                                </select>\n                            </label>\n\n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Outline Style")}:&nbsp;\n                                <select class="select-outlinestyle">\n                                    <option value="">${e.out("Colored")}</option>\n                                    <option value="grayoutline">${e.out("Gray")}</option>\n                                </select>\n                            </label>\n                            \n                            <label style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-hiderowcoloutline" type="checkbox" /> ${e.out("Hide Outline")}&nbsp;\n                            </label>  \n\n                            <label id="divHideCellTool" style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-hidecelltool" type="checkbox" />  ${e.out("Hide Column Tool")}&nbsp;\n                            </label>\n\n\n                            <label style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-hidesnippetaddtool" type="checkbox" />  ${e.out("Hide Snippet (+) Tool")}&nbsp;\n                            </label>\n\n                            <label style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-hideelementtool" type="checkbox" /> ${e.out("Hide element tool")}&nbsp;\n                            </label>  \n\n                            <label style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-hideelementhighlight" type="checkbox" /> ${e.out("Hide element highlight")}&nbsp;\n                            </label>  \n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Row Tool Position")}:&nbsp;\n                                <select class="select-rowtool">\n                                    <option value="right">${e.out("Right")}</option>\n                                    <option value="left">${e.out("Left")}</option>\n                                </select>\n                            </label>   \n\n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Tool Style")}:&nbsp;\n                                <select class="select-toolstyle">\n                                    <option value="">${e.out("Colored")}</option>\n                                    <option value="gray">${e.out("Mono")}</option>\n                                </select>\n                            </label>  \n\n                        </div>\n                        <div style="width:50%">\n\n                            <label class="option-opensnippets" style="display:block;margin-top:10px;margin-bottom:10px;">\n                                <input class="input-opensnippets" type="checkbox" />  ${e.out("Open snippets sidebar on start")}&nbsp;\n                            </label>\n\n                            <label style="display:${"#divSnippetList"===t.opts.snippetList?"block":"none"};margin-top:10px;margin-bottom:5px;">\n                               ${e.out("Snippets sidebar visibility")}:&nbsp;\n                                <select class="select-snippetssidebardisplay">\n                                    <option value="auto">${e.out("Auto")}</option>\n                                    <option value="always">${e.out("Always Visible")}</option>\n                                </select>\n                            </label>\n\n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Toolbar visibility")}:&nbsp;\n                                <select class="select-editingtoolbardisplay">\n                                    <option value="auto">${e.out("Auto")}</option>\n                                    <option value="always">${e.out("Always Visible")}</option>\n                                </select>\n                            </label>\n\n                            <label style="${this.builder.isTouchSupport?"display:none;":"display:block;"}margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Toolbar position")}:&nbsp;\n                                <select class="select-editingtoolbar">\n                                    <option value="topfull">${e.out("Top (Full Width)")}</option>\n                                    <option value="top">${e.out("Top")}</option>\n                                    <option value="left">${e.out("Left")}</option>\n                                    <option value="right">${e.out("Right")}</option>\n                                </select>\n                            </label> \n\n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("Paste result")}:&nbsp;\n                                <select class="select-pasteresult">\n                                    <option value="html-without-styles">${e.out("HTML (without styles)")}</option>\n                                    <option value="html">${e.out("HTML (with styles)")}</option>\n                                    <option value="text">${e.out("Text only")}</option>\n                                </select>\n                            </label>  \n\n                            <label style="display:block;margin-top:10px;margin-bottom:5px;">\n                                ${e.out("HTML View")}:&nbsp;\n                                <select class="select-htmlview">\n                                    <option value="shorten">${e.out("Shorten HTML")}</option>\n                                    <option value="actual">${e.out("Actual")}</option>\n                                </select>\n                            </label>  \n\n                            ${this.builder.themes?`\n                                <label style="${this.builder.isTouchSupport?"display:none;":"display:block;"}margin-top:10px;margin-bottom:5px;">\n                                    ${e.out("Theme")}:&nbsp;\n                                </label> \n                                ${o}\n                            `:""}\n\n                        </div>\n                    </div>\n                    <div style="text-align:right;margin-top:30px">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>`;n.appendHtml(i,r),s=i.querySelector(".viewconfig"),"#divSnippetList"===t.opts.snippetList&&t.opts.snippetJSON.snippets.length>0||(s.querySelector(".option-opensnippets").style.display="none");let l=s.querySelector(".input-cancel");if(n.addEventListener(l,"click",(()=>{e.hideModal(s)})),l=s.querySelector(".input-ok"),n.addEventListener(l,"click",(()=>{this.update(),e.hideModal(s)})),null!==localStorage.getItem("_hiderowcoloutline")&&("1"===localStorage.getItem("_hiderowcoloutline")?this.builder.opts.rowcolOutline=!1:this.builder.opts.rowcolOutline=!0),this.setOutline(!this.builder.opts.rowcolOutline),null!==localStorage.getItem("_outlinemode")&&(this.builder.opts.outlineMode=localStorage.getItem("_outlinemode")),this.setOutlineMode(this.builder.opts.outlineMode),null!==localStorage.getItem("_outlinestyle")&&(this.builder.opts.outlineStyle=localStorage.getItem("_outlinestyle")),this.setOutlineStyle(this.builder.opts.outlineStyle),null!==localStorage.getItem("_pasteresult")&&(this.builder.opts.paste=localStorage.getItem("_pasteresult")),null!==localStorage.getItem("_htmlview")){let t=localStorage.getItem("_htmlview");this.builder.opts.shortenHTML="shorten"===t}if(null!==localStorage.getItem("_hidecelltool")&&("1"===localStorage.getItem("_hidecelltool")?this.builder.opts.columnTool=!1:this.builder.opts.columnTool=!0),this.setColumnTool(!this.builder.opts.columnTool),null!==localStorage.getItem("_hidesnippetaddtool")&&("1"===localStorage.getItem("_hidesnippetaddtool")?this.builder.opts.snippetAddTool=!1:this.builder.opts.snippetAddTool=!0),this.setSnippetAddTool(!this.builder.opts.snippetAddTool),null!==localStorage.getItem("_hideelementtool")&&("1"===localStorage.getItem("_hideelementtool")?this.builder.opts.elementTool=!1:this.builder.opts.elementTool=!0),this.setElementTool(!this.builder.opts.elementTool),null!==localStorage.getItem("_hideelementhighlight")&&("1"===localStorage.getItem("_hideelementhighlight")?this.builder.opts.elementHighlight=!1:this.builder.opts.elementHighlight=!0),this.setElementHighlight(!this.builder.opts.elementHighlight),null!==localStorage.getItem("_opensnippets")&&("1"===localStorage.getItem("_opensnippets")?this.builder.opts.snippetOpen=!0:this.builder.opts.snippetOpen=!1),null!==localStorage.getItem("_buildermode")&&(this.builder.opts.builderMode=localStorage.getItem("_buildermode")),this.setBuilderMode(this.builder.opts.builderMode),null!==localStorage.getItem("_rowtool")&&(this.builder.opts.rowTool=localStorage.getItem("_rowtool")),this.setRowToolPosition(this.builder.opts.rowTool),null!==localStorage.getItem("_toolstyle")&&(this.builder.opts.toolStyle=localStorage.getItem("_toolstyle")),this.setToolStyle(this.builder.opts.toolStyle),null!==localStorage.getItem("_editingtoolbardisplay")&&(this.builder.opts.toolbarDisplay=localStorage.getItem("_editingtoolbardisplay")),null!==localStorage.getItem("_snippetssidebardisplay")&&(this.builder.opts.snippetsSidebarDisplay=localStorage.getItem("_snippetssidebardisplay")),null!=localStorage.getItem("_editingtoolbar")&&(this.builder.opts.toolbar=localStorage.getItem("_editingtoolbar")),this.setToolbar(this.builder.opts.toolbar),null!=localStorage.getItem("_theme")){const t=localStorage.getItem("_theme");if(this.builder.themeIndex=t,this.builder.themes&&this.builder.themes.length>0){const e=this.builder.themes[t];e&&(this.builder.setUIColor(e[1],e[2]),this.builder.renderIframeLater=!0)}}else this.builder.setUIColor("",""),this.builder.renderIframeLater=!0;this.builder.renderIframeLater||e.getUIStyles(),this.builder.opts.emailMode&&(this.builder.opts.outlineMode="row",this.builder.opts.columnTool=!1,this.builder.opts.builderMode="",null!=localStorage.getItem("_outlinemode")&&localStorage.setItem("_outlinemode","row"),null!==localStorage.getItem("_hidecelltool")&&localStorage.setItem("_hidecelltool","1"),null!==localStorage.getItem("_buildermode")&&localStorage.setItem("_buildermode",""),this.setColumnTool(!0),this.setBuilderMode(""),this.setEmailMode(),i.querySelector("#divHideCellTool").style.display="none",i.querySelector("#divOutlineMode").style.display="none",i.querySelector("#divBuilderMode").style.display="none")}this.config=s;document.querySelectorAll(".input-setcolor").forEach((t=>{t.addEventListener("click",(e=>{const i=t.getAttribute("data-index"),n=this.builder.themes[i];this.builder.setUIColor(n[1],n[2]),this.builder.themeIndex=i,e.preventDefault(),e.stopImmediatePropagation()}))}))}view(){const t=new n(this.builder);let e=this.config;t.showModal(e,!1,null,!1),this.builder.opts.rowcolOutline?e.querySelector(".input-hiderowcoloutline").checked=!1:e.querySelector(".input-hiderowcoloutline").checked=!0,this.builder.opts.columnTool?e.querySelector(".input-hidecelltool").checked=!1:e.querySelector(".input-hidecelltool").checked=!0,this.builder.opts.snippetAddTool?e.querySelector(".input-hidesnippetaddtool").checked=!1:e.querySelector(".input-hidesnippetaddtool").checked=!0,this.builder.opts.elementTool?e.querySelector(".input-hideelementtool").checked=!1:e.querySelector(".input-hideelementtool").checked=!0,this.builder.opts.elementHighlight?e.querySelector(".input-hideelementhighlight").checked=!1:e.querySelector(".input-hideelementhighlight").checked=!0,this.builder.opts.snippetOpen?e.querySelector(".input-opensnippets").checked=!0:e.querySelector(".input-opensnippets").checked=!1,this.config.querySelector(".select-buildermode").value=this.builder.opts.builderMode,this.config.querySelector(".select-rowtool").value=this.builder.opts.rowTool,this.config.querySelector(".select-outlinemode").value=this.builder.opts.outlineMode,this.config.querySelector(".select-outlinestyle").value=this.builder.opts.outlineStyle,this.config.querySelector(".select-toolstyle").value=this.builder.opts.toolStyle,this.config.querySelector(".select-pasteresult").value=this.builder.opts.paste,this.config.querySelector(".select-editingtoolbardisplay").value=this.builder.opts.toolbarDisplay,this.config.querySelector(".select-editingtoolbar").value=this.builder.opts.toolbar,this.config.querySelector(".select-snippetssidebardisplay").value=this.builder.opts.snippetsSidebarDisplay,this.builder.opts.shortenHTML?this.config.querySelector(".select-htmlview").value="shorten":this.config.querySelector(".select-htmlview").value="actual"}update(){let t=this.config.querySelector(".input-hiderowcoloutline").checked;t?(this.builder.opts.rowcolOutline=!1,localStorage.setItem("_hiderowcoloutline","1")):(this.builder.opts.rowcolOutline=!0,localStorage.setItem("_hiderowcoloutline","0")),this.setOutline(t),this.config.querySelector(".input-hidecelltool").checked?(this.builder.opts.columnTool=!1,localStorage.setItem("_hidecelltool","1"),this.setColumnTool(!0)):(this.builder.opts.columnTool=!0,localStorage.setItem("_hidecelltool","0"),this.setColumnTool(!1)),this.config.querySelector(".input-hidesnippetaddtool").checked?(this.builder.opts.snippetAddTool=!1,localStorage.setItem("_hidesnippetaddtool","1"),this.setSnippetAddTool(!0)):(this.builder.opts.snippetAddTool=!0,localStorage.setItem("_hidesnippetaddtool","0"),this.setSnippetAddTool(!1)),this.config.querySelector(".input-hideelementtool").checked?(this.builder.opts.elementTool=!1,localStorage.setItem("_hideelementtool","1"),this.setElementTool(!0)):(this.builder.opts.elementTool=!0,localStorage.setItem("_hideelementtool","0"),this.setElementTool(!1)),this.config.querySelector(".input-hideelementhighlight").checked?(this.builder.opts.elementHighlight=!1,localStorage.setItem("_hideelementhighlight","1"),this.setElementHighlight(!0)):(this.builder.opts.elementHighlight=!0,localStorage.setItem("_hideelementhighlight","0"),this.setElementHighlight(!1)),this.config.querySelector(".input-opensnippets").checked?(this.builder.opts.snippetOpen=!0,localStorage.setItem("_opensnippets","1")):(this.builder.opts.snippetOpen=!1,localStorage.setItem("_opensnippets","0"));let e=this.config.querySelector(".select-buildermode").value;this.builder.opts.builderMode=e,localStorage.setItem("_buildermode",e),this.setBuilderMode(e);let i=this.config.querySelector(".select-rowtool").value;this.builder.opts.rowTool=i,localStorage.setItem("_rowtool",i),this.setRowToolPosition(i);let n=this.config.querySelector(".select-outlinemode").value;this.builder.opts.outlineMode=n,localStorage.setItem("_outlinemode",n),this.setOutlineMode(n);let o=this.config.querySelector(".select-outlinestyle").value;this.builder.opts.outlineStyle=o,localStorage.setItem("_outlinestyle",o),this.setOutlineStyle(o);let s=this.config.querySelector(".select-toolstyle").value;this.builder.opts.toolStyle=s,localStorage.setItem("_toolstyle",s),this.setToolStyle(s);let r=this.config.querySelector(".select-pasteresult").value;this.builder.opts.paste=r,localStorage.setItem("_pasteresult",r);let l=this.config.querySelector(".select-editingtoolbardisplay").value;this.builder.opts.toolbarDisplay=l,localStorage.setItem("_editingtoolbardisplay",l);let a=this.config.querySelector(".select-snippetssidebardisplay").value;this.builder.opts.snippetsSidebarDisplay=a,localStorage.setItem("_snippetssidebardisplay",a);let d=this.config.querySelector(".select-editingtoolbar").value;this.builder.opts.toolbar=d,localStorage.setItem("_editingtoolbar",d),this.setToolbar(d);let c=this.config.querySelector(".select-htmlview").value;if(this.builder.opts.shortenHTML="shorten"===c,localStorage.setItem("_htmlview",c),this.builder.themes){const t=this.builder.themeIndex;this.builder.themeIndex&&localStorage.setItem("_theme",t)}let u=this.builder.builderStuff.querySelectorAll(".is-rte-pop");Array.prototype.forEach.call(u,(t=>{t.style.display=""}))}setToolbar(t){const e=this.dom,i=this.builder.builderStuff,n=this.builder.contentStuff;"topfull"===t?(i.setAttribute("toolbarfull",""),i.removeAttribute("toolbarleft",""),i.removeAttribute("toolbarright",""),this.builder.iframe&&(n.removeAttribute("toolbarleft",""),n.removeAttribute("toolbarright",""))):"top"===t?(i.removeAttribute("toolbarleft",""),i.removeAttribute("toolbarright",""),i.removeAttribute("toolbarfull",""),this.builder.iframe&&(n.removeAttribute("toolbarleft",""),n.removeAttribute("toolbarright",""))):"left"===t?(i.setAttribute("toolbarleft",""),i.removeAttribute("toolbarright",""),i.removeAttribute("toolbarfull",""),this.builder.iframe&&(n.setAttribute("toolbarleft",""),n.removeAttribute("toolbarright",""))):"right"===t&&(i.setAttribute("toolbarright",""),i.removeAttribute("toolbarleft",""),i.removeAttribute("toolbarfull",""),this.builder.iframe&&(n.setAttribute("toolbarright",""),n.removeAttribute("toolbarleft","")));const o=i.querySelector(".is-rte-tool"),s=i.querySelector(".rte-more-options"),r=i.querySelector(".elementrte-more-options");o&&this.builder.rte.positionToolbar(),s&&(e.removeClass(s,"active"),e.addClass(s,"deactive"),e.removeClass(r,"active"),e.addClass(r,"deactive"))}setEmailMode(){if(this.builder.builderStuff.setAttribute("emailmode",""),this.builder.iframe){this.builder.contentStuff.setAttribute("emailmode","")}}setElementTool(t){const e=this.builder.builderStuff;if(t?e.setAttribute("hideelementtool",""):e.removeAttribute("hideelementtool",""),this.builder.iframe){const e=this.builder.contentStuff;t?e.setAttribute("hideelementtool",""):e.removeAttribute("hideelementtool","")}}setElementHighlight(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{t?e.setAttribute("hideelementhighlight",""):e.removeAttribute("hideelementhighlight","")}))}setOutlineStyle(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{"grayoutline"===t?e.setAttribute("grayoutline",""):e.removeAttribute("grayoutline")}))}setColumnTool(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);t?Array.prototype.forEach.call(e,(t=>{t.setAttribute("hidecolumntool","")})):Array.prototype.forEach.call(e,(t=>{t.removeAttribute("hidecolumntool")}))}setSnippetAddTool(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{t?e.setAttribute("hidesnippetaddtool",""):e.removeAttribute("hidesnippetaddtool","")}))}setToolStyle(t){const e=this.builder.builderStuff;if("gray"===t?e.setAttribute("gray",""):e.removeAttribute("gray",""),this.builder.iframe){const e=this.builder.contentStuff;"gray"===t?e.setAttribute("gray",""):e.removeAttribute("gray","")}const i=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(i,(e=>{"gray"===t?e.setAttribute("gray",""):e.removeAttribute("gray")}))}setOutlineMode(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{"row"===t?e.setAttribute("rowoutline",""):e.removeAttribute("rowoutline")}))}setOutline(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{t?e.setAttribute("hideoutline",""):e.removeAttribute("hideoutline")}))}setRowToolPosition(t){const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(e=>{"right"===t?e.removeAttribute("leftrowtool"):e.setAttribute("leftrowtool","")}))}setBuilderMode(t){const e=this.builder.builderStuff;if(""===t?(e.removeAttribute("minimal"),e.removeAttribute("clean")):"minimal"===t?(e.setAttribute("minimal",""),e.removeAttribute("clean")):"clean"===t&&(e.setAttribute("clean",""),e.removeAttribute("minimal")),this.builder.iframe){const e=this.builder.contentStuff;""===t?(e.removeAttribute("minimal"),e.removeAttribute("clean")):"minimal"===t?(e.setAttribute("minimal",""),e.removeAttribute("clean")):"clean"===t&&(e.setAttribute("clean",""),e.removeAttribute("minimal"))}const i=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(i,(e=>{""===t?(e.removeAttribute("minimal"),e.removeAttribute("clean")):"minimal"===t?(e.setAttribute("minimal",""),e.removeAttribute("clean")):"clean"===t&&(e.setAttribute("clean",""),e.removeAttribute("minimal"))}))}initBuilder(t){const e=this.builder.opts.builderMode;""===e?(t.removeAttribute("minimal"),t.removeAttribute("clean")):"minimal"===e?(t.setAttribute("minimal",""),t.removeAttribute("clean")):"clean"===e&&(t.setAttribute("clean",""),t.removeAttribute("minimal"));"right"===this.builder.opts.rowTool?t.removeAttribute("leftrowtool"):t.setAttribute("leftrowtool","");!this.builder.opts.rowcolOutline?t.setAttribute("hideoutline",""):t.removeAttribute("hideoutline");"row"===this.builder.opts.outlineMode?t.setAttribute("rowoutline",""):t.removeAttribute("rowoutline");"gray"===this.builder.opts.toolStyle?t.setAttribute("gray",""):t.removeAttribute("gray");!this.builder.opts.snippetAddTool?t.setAttribute("hidesnippetaddtool",""):t.removeAttribute("hidesnippetaddtool","");"grayoutline"===this.builder.opts.outlineStyle?t.setAttribute("grayoutline",""):t.removeAttribute("grayoutline");!this.builder.opts.elementHighlight?t.setAttribute("hideelementhighlight",""):t.removeAttribute("hideelementhighlight","")}}const Fm=new o;class Um{constructor(t={},e){this.opts=Object.assign(this,{onPick:function(){},quickColors:{black:"bg-black",white:"bg-white",transparent:""},baseColors:{amber:{preview:"bg-amber-500",colors:["bg-amber-50","bg-amber-100","bg-amber-200","bg-amber-300","bg-amber-400","bg-amber-500","bg-amber-600","bg-amber-700","bg-amber-800","bg-amber-900"]},orange:{preview:"bg-orange-500",colors:["bg-orange-50","bg-orange-100","bg-orange-200","bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700","bg-orange-800","bg-orange-900"]},red:{preview:"bg-red-600",colors:["bg-red-50","bg-red-100","bg-red-200","bg-red-300","bg-red-400","bg-red-500","bg-red-600","bg-red-700","bg-red-800","bg-red-900"]},rose:{preview:"bg-rose-700",colors:["bg-rose-50","bg-rose-100","bg-rose-200","bg-rose-300","bg-rose-400","bg-rose-500","bg-rose-600","bg-rose-700","bg-rose-800","bg-rose-900"]},fuchsia:{preview:"bg-fuchsia-700",colors:["bg-fuchsia-50","bg-fuchsia-100","bg-fuchsia-200","bg-fuchsia-300","bg-fuchsia-400","bg-fuchsia-500","bg-fuchsia-600","bg-fuchsia-700","bg-fuchsia-800","bg-fuchsia-900"]},gray:{preview:"bg-gray-700",colors:["bg-gray-50","bg-gray-100","bg-gray-200","bg-gray-300","bg-gray-400","bg-gray-500","bg-gray-600","bg-gray-700","bg-gray-800","bg-gray-900"]},yellow:{preview:"bg-yellow-500",colors:["bg-yellow-50","bg-yellow-100","bg-yellow-200","bg-yellow-300","bg-yellow-400","bg-yellow-500","bg-yellow-600","bg-yellow-700","bg-yellow-800","bg-yellow-900"]},lime:{preview:"bg-lime-600",colors:["bg-lime-50","bg-lime-100","bg-lime-200","bg-lime-300","bg-lime-400","bg-lime-500","bg-lime-600","bg-lime-700","bg-lime-800","bg-lime-900"]},green:{preview:"bg-green-700",colors:["bg-green-50","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500","bg-green-600","bg-green-700","bg-green-800","bg-green-900"]},pink:{preview:"bg-pink-600",colors:["bg-pink-50","bg-pink-100","bg-pink-200","bg-pink-300","bg-pink-400","bg-pink-500","bg-pink-600","bg-pink-700","bg-pink-800","bg-pink-900"]},violet:{preview:"bg-violet-700",colors:["bg-violet-50","bg-violet-100","bg-violet-200","bg-violet-300","bg-violet-400","bg-violet-500","bg-violet-600","bg-violet-700","bg-violet-800","bg-violet-900"]},purple:{preview:"bg-purple-700",colors:["bg-purple-50","bg-purple-100","bg-purple-200","bg-purple-300","bg-purple-400","bg-purple-500","bg-purple-600","bg-purple-700","bg-purple-800","bg-purple-900"]},cyan:{preview:"bg-cyan-400",colors:["bg-cyan-50","bg-cyan-100","bg-cyan-200","bg-cyan-300","bg-cyan-400","bg-cyan-500","bg-cyan-600","bg-cyan-700","bg-cyan-800","bg-cyan-900"]},teal:{preview:"bg-teal-500",colors:["bg-teal-50","bg-teal-100","bg-teal-200","bg-teal-300","bg-teal-400","bg-teal-500","bg-teal-600","bg-teal-700","bg-teal-800","bg-teal-900"]},emerald:{preview:"bg-emerald-600",colors:["bg-emerald-50","bg-emerald-100","bg-emerald-200","bg-emerald-300","bg-emerald-400","bg-emerald-500","bg-emerald-600","bg-emerald-700","bg-emerald-800","bg-emerald-900"]},sky:{preview:"bg-sky-500",colors:["bg-sky-50","bg-sky-100","bg-sky-200","bg-sky-300","bg-sky-400","bg-sky-500","bg-sky-600","bg-sky-700","bg-sky-800","bg-sky-900"]},blue:{preview:"bg-blue-600",colors:["bg-blue-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-400","bg-blue-500","bg-blue-600","bg-blue-700","bg-blue-800","bg-blue-900"]},indigo:{preview:"bg-indigo-600",colors:["bg-indigo-50","bg-indigo-100","bg-indigo-200","bg-indigo-300","bg-indigo-400","bg-indigo-500","bg-indigo-600","bg-indigo-700","bg-indigo-800","bg-indigo-900"]}},stuffPlacement:"#_cbhtml",lang:[]},t);let i=document.querySelector(this.opts.stuffPlacement);i||(i=document.createElement("div"),i.id="_cbhtml",i.className="is-ui",document.body.appendChild(i)),this.builderStuff=i,this.mode=e;const n=new Hg({stuffPlacement:this.opts.stuffPlacement});this.modal=n;let o=document.querySelector(".pickcolorclass");if(!o){let t=`<div class="is-modal pickcolorclass" style="z-index:10005">\n                <div class="is-modal-content" style="padding: 12px;max-width:295px;">\n                    <div class="is-modal-bar is-draggable" style="height:12px"></div>\n                    <div>\n                        <div class="color-list"></div>\n                        <div class="color-details"></div>\n                        <div class="color-quick" style="display:flex">\n                            <button class="quick-color" data-value="${this.opts.quickColors.black}" style="background-color:#222;color:#f7f7f7;display:flex;justify-content:center;align-items:center;width:54px;height:54px;cursor:pointer;">${this.out("B")}</button>\n                            <button class="quick-color" data-value="${this.opts.quickColors.white}" style="border: rgb(0 0 0 / 6%) 1px solid;border-top:none;border-left:none;background-color:#fff;color:#333;display:flex;justify-content:center;align-items:center;width:54px;height:54px;cursor:pointer;">${this.out("W")}</button>\n                            <button class="quick-color" data-value="${this.opts.quickColors.transparent}" style="display:flex;justify-content:center;align-items:center;width:162px;height:54px;cursor:pointer;">${this.out("Clear")}</button>\n                        </div>\n                    </div>\n                </div>\n            </div>`;i.insertAdjacentHTML("beforeend",t),o=document.querySelector(".pickcolorclass")}this.modalPicker=o;const s=o.querySelector(".color-list"),r=this.opts.baseColors;let l="";for(let t=0;t<Object.keys(r).length;t++){let e=Object.values(r)[t];l+=`<div class="${e.preview} base-color" data-value="${e.preview}" data-base="${Object.keys(r)[t]}" style="width:45px;height:45px;cursor:pointer;"></div>`}l=`<div style="display:flex;flex-flow:wrap;width:270px;height:135px;flex-direction:row;">${l}</div>`,s.innerHTML=l,this.showColorGradient("gray");let a=document.querySelectorAll(".base-color");Array.prototype.forEach.call(a,(t=>{Fm.addEventListener(t,"click",(()=>{const e=t.getAttribute("data-base");this.showColorGradient(e);let i=t.getAttribute("data-value");"text"===this.mode&&(i=i.replace("bg-","text-")),this.opts.onPick(i)}))})),a=document.querySelectorAll(".quick-color"),Array.prototype.forEach.call(a,(t=>{Fm.addEventListener(t,"click",(e=>{e.preventDefault();let i=t.getAttribute("data-value");"text"===this.mode&&(i=i.replace("bg-","text-")),this.opts.onPick(i)}))}))}showColorGradient(t){const e=this.modalPicker.querySelector(".color-details"),i=this.opts.baseColors[t].colors;let n="";for(let t=i.length-1;t>=0;t--){const e=i[t];n+=`<div class="${e} detail-color" data-value="${e}" style="width:54px;height:54px;cursor:pointer;"></div>`}n=`<div style="display:flex;flex-flow:wrap;width:270px;height:108px;flex-direction:column;">${n}</div>`,e.innerHTML=n;const o=document.querySelectorAll(".detail-color");Array.prototype.forEach.call(o,(t=>{Fm.addEventListener(t,"click",(()=>{let e=t.getAttribute("data-value");"text"===this.mode&&(e=e.replace("bg-","text-")),this.opts.onPick(e)}))}))}open(t,e){t&&(this.opts.onPick=t),this.mode=e,this.modal.show(this.modalPicker,!1,null,!1)}out(t){if(this.opts.lang){let e=this.opts.lang[t];return e||t}return t}}class Wm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i,this.dom=this.builder.dom;const n=this.dom;this.elementStyleEditor=new cm(t),this.hyperlink=new Lg(t);let o,s,r,l,a,d,c,u,p,h,g,m,f,b,v,y=i.querySelector("#divRteTool");if(!y){if(t.plugins.length>0){let e=["|","addsnippet","bold","italic","underline","formatting","color","removeformat","align","textsettings","createlink","tags","undo","redo","zoom","livepreview","icon","image","list","font","formatpara","gridtool","html","preferences","more","left","center","right","full"];const i=i=>{let n=i;return i.forEach((i=>{i=i.toLowerCase();let o=e.filter((t=>t===i));0===o.length&&(o=t.plugins.filter((t=>t.name===i)),0===o.length&&(n=n.filter((t=>t!==i))))})),n};t.opts.buttons=i(t.opts.buttons),t.opts.buttonsMore=i(t.opts.buttonsMore),t.opts.elementButtons=i(t.opts.elementButtons),t.opts.elementButtonsMore=i(t.opts.elementButtonsMore),t.opts.iconButtons=i(t.opts.iconButtons),t.opts.iconButtonsMore=i(t.opts.iconButtonsMore)}let _="";var x="";if(t.opts.customTags.length>0){_=`<button tabindex="-1" title="${e.out("Tags")}" class="rte-tags"><svg class="is-icon-flex" style="width:14px;height:14px"><use xlink:href="#ion-code-working"></use></svg></button>`;for(let e=0;e<t.opts.customTags.length;e++)x+=`<button data-value="${t.opts.customTags[e][1]}"> ${t.opts.customTags[e][0]} </button>`}let C="";for(var w=0;w<t.opts.buttonsMore.length;w++){var S=t.opts.buttonsMore[w].toLowerCase();"createlink"===S?C+=`<button tabindex="-1" title="${e.out("Hyperlink")}" class="rte-link"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#ion-link"></use></svg></button>`:"icon"!==S||this.builder.opts.emailMode?C+="removeformat"===S?`<button tabindex="-1" title="${e.out("Clean")}" class="rte-clean"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>`:"bold"===S?`<button tabindex="-1" title="${e.out("Bold")}" class="rte-format" data-command="bold"><span style="font-family:serif;font-size:14px;">B</span></button>`:"italic"===S?`<button tabindex="-1" title="${e.out("Italic")}" class="rte-format" data-command="italic"><span style="font-family:serif;font-size:16px;font-style:italic;">i</span></button>`:"underline"===S?`<button tabindex="-1" title="${e.out("Underline")}" class="rte-format" data-command="underline"><span style="font-family:serif;font-size:14px;text-decoration:underline;">U</span></button>`:"align"===S?`<button tabindex="-1" title="${e.out("Align")}" class="rte-align"><svg class="is-icon-flex" style="width:12px;height:12px;margin-top:-2px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"list"===S?`<button tabindex="-1" title="${e.out("List")}" class="rte-list"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#icon-list-bullet"></use></svg></button>`:"color"===S?`<button tabindex="-1" title="${e.out("Color")}" class="rte-color"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-contrast"></use></svg></button>`:"formatting"===S?`<button tabindex="-1" title="${e.out("Formatting")}" class="rte-formatting"><span style="font-family:serif;font-size:15px;display:inline-block;">A</span></button>`:"tags"===S?_:"image"===S?`<button tabindex="-1" title="${e.out("Image")}" class="rte-image"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-image"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"formatpara"===S?`<button tabindex="-1" title="${e.out("Paragraph")}" class="rte-paragraph"><span style="font-family:serif;font-size:14px;display:inline-block;margin-top:2px;">H</span></button>`:"font"===S?`<button tabindex="-1" title="${e.out("Font")}" class="rte-fontfamily"><span style="font-family:serif;font-size:18px;text-transform:none;display:inline-block;margin-top: -3px;">a</span></button>`:"textsettings"===S?`<button tabindex="-1" title="${e.out("Text Settings")}" class="rte-textsettings"><svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#ion-ios-settings"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`:C+=`<button tabindex="-1" title="${e.out("Icon")}" class="rte-icon"><svg class="is-icon-flex" style="width:14px;height:14px;margin-top:2px;"><use xlink:href="#ion-android-happy"></use></svg></button>`}let k="";for(w=0;w<t.opts.buttons.length;w++)"bold"===(S=t.opts.buttons[w].toLowerCase())?k+=`<button tabindex="-1" title="${e.out("Bold")}" class="rte-format" data-command="bold"><span style="font-family:serif;font-size:14px;">B</span></button>`:"italic"===S?k+=`<button tabindex="-1" title="${e.out("Italic")}" class="rte-format" data-command="italic"><span style="font-family:serif;font-size:16px;font-style:italic;">i</span></button>`:"underline"===S?k+=`<button tabindex="-1" title="${e.out("Underline")}" class="rte-format" data-command="underline"><span style="font-family:serif;font-size:14px;text-decoration:underline;">U</span></button>`:"createlink"===S?k+=`<button tabindex="-1" title="${e.out("Hyperlink")}" class="rte-link"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#ion-link"></use></svg></button>`:"align"===S?k+=`<button tabindex="-1" title="${e.out("Align")}" class="rte-align"><svg class="is-icon-flex" style="width:12px;height:12px;margin-top:-2px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"formatpara"===S?k+=`<button tabindex="-1" title="${e.out("Paragraph")}" class="rte-paragraph"><span style="font-family:serif;font-size:14px;display:inline-block;margin-top:2px;">H</span></button>`:"color"===S?k+=`<button tabindex="-1" title="${e.out("Color")}" class="rte-color"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-contrast"></use></svg></button>`:"formatting"===S?k+=`<button tabindex="-1" title="${e.out("Formatting")}" class="rte-formatting"><span style="font-family:serif;font-size:15px;display:inline-block;">A</span></button>`:"list"===S?k+=`<button tabindex="-1" title="${e.out("List")}" class="rte-list"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#icon-list-bullet"></use></svg></button>`:"textsettings"===S?k+=`<button tabindex="-1" title="${e.out("Text Settings")}" class="rte-textsettings"><svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#ion-ios-settings"></use></svg></button>`:"icon"!==S||this.builder.opts.emailMode?k+="tags"===S?_:"removeformat"===S?`<button tabindex="-1" title="${e.out("Clean")}" class="rte-format" data-command="clean"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>`:"font"===S?`<button tabindex="-1" title="${e.out("Font")}" class="rte-fontfamily"><span style="font-family:serif;font-size:18px;text-transform:none;display:inline-block;margin-top: -3px;">a</span></button>`:"image"===S?`<button tabindex="-1" title="${e.out("Image")}" class="rte-image"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-image"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;width:17px;height:17px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"more"===S&&""!==C?`<button tabindex="-1" title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`:k+=`<button tabindex="-1" title="${e.out("Icon")}" class="rte-icon"><svg class="is-icon-flex" style="width:14px;height:14px;margin-top:2px"><use xlink:href="#ion-android-happy"></use></svg></button>`;this.builder.opts.toolbarAddSnippetButton&&-1===k.indexOf("rte-addsnippet")&&-1===C.indexOf("rte-addsnippet")&&(k=`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`+k),""!==C&&-1===k.indexOf("rte-more")&&(k+=`<button tabindex="-1" title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let E="";for(w=0;w<t.opts.elementButtonsMore.length;w++)E+="left"===(S=t.opts.elementButtonsMore[w].toLowerCase())?`<button tabindex="-1" title="${e.out("Align Left")}" data-align="left"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-left"></use></svg></button>`:"center"===S?`<button tabindex="-1" title="${e.out("Align Center")}" data-align="center"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-center"></use></svg></button>`:"right"===S?`<button tabindex="-1" title="${e.out("Align Right")}" data-align="right"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-right"></use></svg></button>`:"full"===S?`<button tabindex="-1" title="${e.out("Align Full")}" data-align="justify"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`;let A="";for(w=0;w<t.opts.elementButtons.length;w++)A+="left"===(S=t.opts.elementButtons[w].toLowerCase())?`<button tabindex="-1" title="${e.out("Align Left")}" data-align="left"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-left"></use></svg></button>`:"center"===S?`<button tabindex="-1" title="${e.out("Align Center")}" data-align="center"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-center"></use></svg></button>`:"right"===S?`<button tabindex="-1" title="${e.out("Align Right")}" data-align="right"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-right"></use></svg></button>`:"full"===S?`<button tabindex="-1" title="${e.out("Align Full")}" data-align="justify"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;width:17px;height:17px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"more"===S&&""!==E?`<button tabindex="-1" title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`;this.builder.opts.toolbarAddSnippetButton&&-1===A.indexOf("rte-addsnippet")&&-1===E.indexOf("rte-addsnippet")&&(A=`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`+A),""!==E&&-1===A.indexOf("rte-more")&&(A+=`<button title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let L="",q="";for(w=0;w<t.opts.iconButtonsMore.length;w++)"createlink"===(S=t.opts.iconButtonsMore[w].toLowerCase())?L+=`<button tabindex="-1" title="${e.out("Hyperlink")}" class="rte-link"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#ion-link"></use></svg></button>`:"icon"!==S||this.builder.opts.emailMode?L+="align"===S?`<button tabindex="-1" title="${e.out("Align")}" class="rte-align"><svg class="is-icon-flex" style="width:12px;height:12px;margin-top:-2px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"color"===S?`<button tabindex="-1" title="${e.out("Color")}" class="rte-color"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-contrast"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"textsettings"===S?`<button tabindex="-1" title="${e.out("Text Settings")}" class="rte-textsettings"><svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#ion-ios-settings"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`:L+=`<button tabindex="-1" title="${e.out("Icon")}" class="rte-icon"><svg class="is-icon-flex" style="width:14px;height:14px;margin-top:2px;"><use xlink:href="#ion-android-happy"></use></svg></button>`;for(w=0;w<t.opts.iconButtons.length;w++)"createlink"===(S=t.opts.iconButtons[w].toLowerCase())?q+=`<button tabindex="-1" title="${e.out("Hyperlink")}" class="rte-link"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#ion-link"></use></svg></button>`:"icon"!==S||this.builder.opts.emailMode?q+="align"===S?`<button tabindex="-1" title="${e.out("Align")}" class="rte-align"><svg class="is-icon-flex" style="width:12px;height:12px;margin-top:-2px;"><use xlink:href="#icon-align-full"></use></svg></button>`:"color"===S?`<button tabindex="-1" title="${e.out("Color")}" class="rte-color"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-contrast"></use></svg></button>`:"gridtool"===S?`<button tabindex="-1" title="${e.out("Grid Tool")}" class="rte-grideditor"><svg class="is-icon-flex" style="margin-right:-3px;"><use xlink:href="#ion-grid"></use></svg></button>`:"html"===S?`<button tabindex="-1" title="${e.out("HTML")}" class="rte-html"><svg class="is-icon-flex" style="margin-right:-3px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:14px;height:14px;"><use xlink:href="#ion-ios-arrow-right"></use></svg></button>`:"preferences"===S?`<button tabindex="-1" title="${e.out("Preferences")}" class="rte-preferences"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-wrench"></use></svg></button>`:"addsnippet"===S?`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`:"textsettings"===S?`<button tabindex="-1" title="${e.out("Text Settings")}" class="rte-textsettings"><svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#ion-ios-settings"></use></svg></button>`:"undo"===S?`<button tabindex="-1" title="${e.out("Undo")}" class="rte-undo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-undo"></use></svg></button>`:"redo"===S?`<button tabindex="-1" title="${e.out("Redo")}" class="rte-redo"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#ion-ios-redo"></use></svg></button>`:"zoom"===S?`<button tabindex="-1" title="${e.out("Zoom")}" class="rte-zoom"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-zoom-in"></use></svg></button>`:"livepreview"===S?`<button tabindex="-1" title="${e.out("Live Preview")}" class="rte-livepreview"><svg class="is-icon-flex" style="margin-top:2px;width:15px;height:15px;"><use xlink:href="#icon-device-desktop"></use></svg></button>`:"more"===S&&""!==C?`<button tabindex="-1" title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`:"|"===S?'<div class="rte-separator"></div>':`<button tabindex="-1" title="button not found" data-plugin="${S}"></button>`:q+=`<button tabindex="-1" title="${e.out("Icon")}" class="rte-icon"><svg class="is-icon-flex" style="width:14px;height:14px;margin-top:2px;"><use xlink:href="#ion-android-happy"></use></svg></button>`;this.builder.opts.toolbarAddSnippetButton&&-1===q.indexOf("rte-addsnippet")&&-1===L.indexOf("rte-addsnippet")&&(q=`<button tabindex="-1" title="${e.out("Add Snippet")}" class="rte-addsnippet"><svg class="is-icon-flex" style="width:18px;height:18px;margin-top:-1px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>`+q),""!==L&&-1===q.indexOf("rte-more")&&(q+=`<button tabindex="-1" title="${e.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let T="";for(w=0;w<t.opts.defaultFontSizes.length;w++)T+=`<button title="${t.opts.defaultFontSizes[w]}px" data-value="${t.opts.defaultFontSizes[w]}">${t.opts.defaultFontSizes[w]}</button>`;let M=`<div class="is-rte-tool" style="position:fixed;flex-direction:column;display:none;">\n                <div class="rte-for-text" style="display:flex">\n                    ${k}\n                </div>\n                <div class="rte-for-icon" class="" style="display:flex">\n                    ${q}\n                </div>\n            </div>\n\n            <div class="is-elementrte-tool" style="position:fixed;flex-direction:column;display:none;">\n                <div style="display:flex">\n                    ${A}\n                </div>\n            </div>\n\n            <div class="rte-formatting-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                    <button tabindex="-1" title="${e.out("Strikethrough")}" class="rte-format" data-command="strikethrough" style="float:left"><svg class="is-icon-flex" style="width:17px;height:17px;"><use xlink:href="#icon-strike"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Superscript")}" class="rte-format" data-command="superscript" style="float:left"><span style="font-family:serif;font-size:13px;">x</span><sup style="font-size:10px">2</sup></button>\n                    <button tabindex="-1" title="${e.out("Subscript")}" class="rte-format" data-command="subscript" style="float:left"><span style="font-family:serif;font-size:13px;">x</span><sub style="font-size:10px">2</sub></button>\n                    <button tabindex="-1" title="${e.out("Uppercase")}" class="rte-format" data-command="uppercase" style="float:left"><span style="font-family:serif;font-size:14px;display:inline-block;text-transform: none;">Aa</span></button>\n                    <button tabindex="-1" title="${e.out("Clean")}" class="rte-format" data-command="clean"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#icon-clean"></use></svg></button>\n                </div>\n            </div>\n\n            <div class="rte-align-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                    <button tabindex="-1" title="${e.out("Align Left")}" data-align="left"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-left"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Align Center")}" data-align="center"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-center"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Align Right")}" data-align="right"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-right"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Align Full")}" data-align="justify"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-align-full"></use></svg></button>\n                </div>\n            </div>\n\n            <div class="rte-list-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                    <button tabindex="-1" title="${e.out("Bullets")}" data-action="insertUnorderedList"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-list-bullet"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Numbering")}" data-action="insertOrderedList"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-list-number"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Indent")}" data-action="indent"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-indent"></use></svg></button>\n                    <button tabindex="-1" title="${e.out("Outdent")}" data-action="outdent"><svg class="is-icon-flex" style="width:14px;height:14px;"><use xlink:href="#icon-outdent"></use></svg></use></svg></svg></button>\n                </div>\n            </div>\n\n            <div class="rte-paragraph-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <ul>\n                    <li title="${e.out("Heading 1")}" data-block="h1" tabindex="0"><h1>Heading 1</h1></li>\n                    <li title="${e.out("Heading 2")}" data-block="h2" tabindex="0"><h2>Heading 2</h2></li>\n                    <li title="${e.out("Heading 3")}" data-block="h3" tabindex="0"><h3>Heading 3</h3></li>\n                    <li title="${e.out("Heading 4")}" data-block="h4" tabindex="0"><h4>Heading 4</h4></li>\n                    <li title="${e.out("Paragraph")}" data-block="p" tabindex="0"><p>Paragraph</p></li>\n                    <li title="${e.out("Preformatted")}" data-block="pre" tabindex="0"><p style="font-family:courier, monospace;">Preformatted</p></li>\n                </ul>\n            </div>\n\n            <div class="rte-fontfamily-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <iframe tabindex="0" src="about:blank"></iframe>\n            </div>\n\n            <div class="rte-color-picker is-rte-pop" data-command="forecolor" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-pop-tabs">\n                    <div class="is-pop-tab-item active" data-value="forecolor">${e.out("Forecolor")}</div>\n                    <div class="is-pop-tab-item" data-value="backcolor">${e.out("Backcolor")}</div>\n                </div>\n                <div class="rte-color-picker-area"></div>\n            </div>\n            \n            <div class="rte-textsetting-options ${this.builder.simpleTextSettings?"simple":""} is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                    <div class="is-label">${e.out("Font Size")}</div>\n                    <div class="rte-fontsize-options" style="display: flex;flex-flow: wrap;">\n                        ${T}\n\n                        <button title="${e.out("Decrease")}" data-value="-" style="font-size:13px">-</button>\n                        <button title="${e.out("Increase")}" data-value="+" style="font-size:13px">+</button>\n                        <button title="${e.out("Clear")}" data-value=""><svg class="is-icon-flex" style="width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                    </div>\n                    <div class="is-label separator label-fontweight">${e.out("Font Weight")}</div>\n                    <div class="rte-fontweight-options" style="display: flex;flex-flow: wrap;">\n                        <button title="100" data-value="100">100</button>\n                        <button title="200" data-value="200">200</button>\n                        <button title="300" data-value="300">300</button>\n                        <button title="400" data-value="400">400</button>\n                        <button title="500" data-value="500">500</button>\n                        <button title="600" data-value="600">600</button>\n                        <button title="700" data-value="700">700</button>\n                        <button title="800" data-value="800">800</button>\n                        <button title="900" data-value="900">900</button>\n                        <button title="${e.out("Clear")}" data-value=""><svg class="is-icon-flex" style="width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                    </div>\n                    <div class="is-label separator">${e.out("Line Spacing")}</div>\n                    <div class="rte-lineheight-options" style="display: flex;flex-flow: wrap;">\n                        <button title="1" data-value="1">1</button>\n                        <button title="1.2" data-value="1.2">1.2</button>\n                        <button title="1.4" data-value="1.4">1.4</button>\n                        <button title="1.6" data-value="1.6">1.6</button>\n                        <button title="1.8" data-value="1.8">1.8</button>\n                        <button title="2" data-value="2">2</button>\n                        <button title="2.2" data-value="2.2">2.2</button>\n                        <button title="${e.out("Decrease")}" data-value="-" style="font-size:13px">-</button>\n                        <button title="${e.out("Increase")}" data-value="+" style="font-size:13px">+</button>\n                        <button title="${e.out("Clear")}" data-value=""><svg class="is-icon-flex" style="width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                    </div>\n                    <div class="is-label separator">${e.out("Letter Spacing")}</div>\n                    <div class="rte-letterspacing-options" style="display: flex;flex-flow: wrap;">\n                        <button title="1" data-value="1">1</button>\n                        <button title="2" data-value="2">2</button>\n                        <button title="${e.out("Decrease")}" data-value="-" style="font-size:13px">-</button>\n                        <button title="${e.out("Increase")}" data-value="+" style="font-size:13px">+</button>\n                        <button title="${e.out("Clear")}" data-value=""><svg class="is-icon-flex" style="width:18px;height:18px;margin-top: 2px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="rte-zoom-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                    <div class="is-label">${e.out("Zoom")}</div>\n                    <div style="padding-top:4px">\n                        <input type="range" min="50" max="100" value="1" class="rte-zoom-slider is-rangeslider">\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal viewzoom" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:250px;height:150px;display:flex;flex-flow:column;justify-content:center;">\n                    <div class="is-modal-bar is-draggable">${e.out("Zoom")}</div>\n                \n                    <div style="display:flex;flex-wrap:wrap;width:100%;padding-top:32px;">\n                        <input type="range" min="50" max="100" value="1" class="inp-zoom-slider is-rangeslider">\n                    </div>\n                </div>\n            </div>\n\n            <div class="is-modal insertimage" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-content" style="max-width:560px;">\n                    <div class="is-browse-area">\n                        <div class="is-drop-area">\n                            <input id="fileInsertImage" type="file" accept="image/*" />\n                            <div class="drag-text">\n                                <p style="display:flex;justify-content:center;align-items:center;"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-camera"></use></svg> <span style="margin-left:5px;margin-top:3px;"> ${e.out("Drag and drop an image or click to browse.")} </span></p>\n                            </div>\n                        </div>\n                        <div class="is-preview-area">\n                            <div><img id="imgInsertImagePreview" alt="" /><button><i class="ion-ios-close-empty"></i></button></div>\n                        </div>\n                    </div>    \n                    <label for="inpInsertImageSrc" style="margin:10px 0 5px;display:block;">${e.out("Or Specify Image Source")}:</label>\n                    ${"function(){}"!==(this.builder.opts.onImageSelectClick+"").replace(/\s/g,"")||""!==this.builder.opts.imageselect?`<div class="image-src" style="margin-bottom: 12px;"><input id="inpInsertImageSrc" class="input-src" type="text" placeholder="${e.out("Source")}">\n                    <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                        ${this.builder.opts.selectIcon}\n                    </button></div>`:`<div class="image-src" style="margin-bottom: 12px;"><input id="inpInsertImageSrc" class="input-src" type="text" placeholder="${e.out("Source")}"></div>`}\n                    <div style="text-align:right">\n                        <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                        <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="rte-icon-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <iframe tabindex="0" id="ifrIconInsert" src="about:blank"></iframe>\n            </div>\n\n            <div class="rte-customtag-options is-rte-pop scroll" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>${x}</div>\n            </div>\n\n            <div class="rte-more-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="rte-for-text">\n                ${C}\n                </div>\n                <div class="rte-for-icon">\n                ${L}\n                </div>\n            </div>\n\n            <div class="elementrte-more-options is-rte-pop" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div>\n                ${E}\n                </div>\n            </div>\n            `;n.appendHtml(i,M),y=i.querySelector(".is-rte-tool"),o=i.querySelector(".is-elementrte-tool"),u=i.querySelector(".rte-more-options"),p=i.querySelector(".elementrte-more-options"),s=i.querySelector(".rte-align-options"),r=i.querySelector(".rte-formatting-options"),l=i.querySelector(".rte-color-picker"),a=i.querySelector(".rte-list-options"),d=i.querySelector(".rte-fontfamily-options"),c=i.querySelector(".rte-paragraph-options"),h=i.querySelector(".rte-textsetting-options"),g=i.querySelector(".rte-zoom-options"),m=i.querySelector(".rte-icon-options"),f=i.querySelector(".rte-customtag-options"),b=i.querySelector(".rte-zoom-slider"),v=i.querySelector(".inp-zoom-slider");let O=y.querySelectorAll("[title]");Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=o.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=s.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=r.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=a.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=u.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),O=p.querySelectorAll("[title]"),Array.prototype.forEach.call(O,(t=>{t.setAttribute("data-title",t.getAttribute("title"))})),this.builder.isTouchSupport&&this.builder.doc.addEventListener("selectionchange",(function(){n.checkEditable()&&(""!==n.getSelected().trim()&&e.saveSelection())}),!1)}this.rteTool=y,this.elementRteTool=o,this.rteAlignOptions=s,this.rteFormattingOptions=r,this.rteColorPicker=l,this.rteListOptions=a,this.rteFontFamilyOptions=d,this.rteParagraphOptions=c,this.rteMoreOptions=u,this.elementRteMoreOptions=p,this.rteTextSettingOptions=h,this.rteZoomOptions=g,this.rteIconOptions=m,this.rteCustomTagOptions=f,this.rteZoomSlider=b,this.inpZoomSlider=v,this.positionToolbar(),i.querySelectorAll("button.rte-formatting").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteFormattingOptions,i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left;e.style.display="flex";const s=e.offsetWidth,r=e.offsetHeight;n.hasClass(e,"active")?this.util.hideRtePop(e):this.util.showRtePop(e,(()=>{if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";e.focus()}),t)}))})),i.querySelectorAll("button.rte-align").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteAlignOptions,i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left;e.style.display="flex";const s=e.offsetWidth,r=e.offsetHeight;n.hasClass(e,"active")?this.util.hideRtePop(e):this.util.showRtePop(e,(()=>{if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";e.focus()}),t)}))})),i.querySelectorAll("button.rte-list").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteListOptions;n.hasClass(e,"active")?(n.removeClass(e,"active"),n.addClass(e,"deactive")):this.util.showRtePop(e,(()=>{const i=t.getBoundingClientRect().top,n=t.getBoundingClientRect().left,o=e.offsetWidth,s=e.offsetHeight;if("left"===this.builder.opts.toolbar)e.style.top=i-s/2+20+"px",e.style.left=n+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-s/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-n+9+"px"}else e.style.top=i+54-6+"px",e.style.left=n-o/2+23+"px",e.style.right="auto";e.focus()}),t)}))}));const _=t=>{this.builder.uo.saveForUndo();const i=t.getAttribute("data-value");e.pasteHtmlAtCaret(i,!0),this.util.hideRtePop(this.rteCustomTagOptions)},C=t=>{t.preventDefault(),_(t.target)},k=t=>{t.preventDefault(),t.stopImmediatePropagation(),38===t.keyCode&&t.target.previousElementSibling?t.target.previousElementSibling.focus():40===t.keyCode&&t.target.nextElementSibling?t.target.nextElementSibling.focus():27===t.keyCode?this.util.hideRtePop(this.rteCustomTagOptions):13!==t.keyCode&&32!==t.keyCode||_(t.target)};i.querySelectorAll(".rte-customtag-options button").forEach((t=>{t.addEventListener("keydown",k),t.addEventListener("click",C)})),this.rteCustomTagOptions.addEventListener("keydown",(t=>{if(40===t.keyCode&&t.target.nextElementSibling){this.rteCustomTagOptions.querySelector("button").focus()}}));const E=this.rteCustomTagOptions.querySelectorAll("[data-value]");Array.prototype.forEach.call(E,(t=>{n.addEventListener(t,"click",(t=>{_(t.target)}))})),i.querySelectorAll("button.rte-tags").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteCustomTagOptions;n.hasClass(e,"active")?this.util.hideRtePop(e):this.util.showRtePop(e,(()=>{const i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left,s=e.offsetWidth,r=e.offsetHeight;if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";if(n.parentsHasClass(t,"rte-more-options"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",t.getBoundingClientRect().left+45-parseInt(this.rteMoreOptions.style.left)<e.offsetWidth?e.style.left=parseInt(this.rteMoreOptions.style.left)+"px":parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-t.getBoundingClientRect().left+45<e.offsetWidth&&(e.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-s+"px"),e.style.right="auto";e.focus()}),t)}))}));const A=t=>{this.builder.uo.saveForUndo(),e.restoreSelection();const o=t.getAttribute("data-block"),s=n.getSelection();if(!s)return;const r=s.anchorNode;let l;if(r&&(l=r.nodeType!==Node.TEXT_NODE&&r.nodeType!==Node.COMMENT_NODE?r:r.parentElement),!l)return;let a=l.closest("h1")||l.closest("h2")||l.closest("h3")||l.closest("h4")||l.closest("h5")||l.closest("h6")||l.closest("pre")||l.closest("p");if(a){a.setAttribute("data-replacetagname","1");const t=document.createElement(o);for(var d=0,c=a.attributes.length;d<c;++d){var u=a.attributes.item(d).nodeName,p=a.attributes.item(d).nodeValue;t.setAttribute(u,p)}for(;a.firstChild;)t.appendChild(a.firstChild);a.parentNode.replaceChild(t,a);const e=document.querySelector('[data-replacetagname="1"]');e&&(e.removeAttribute("data-replacetagname"),n.selectElementContents(e))}e.saveSelection(),this.builder.opts.onChange(),i.querySelectorAll(".rte-paragraph-options li").forEach((t=>{t.classList.remove("on")})),t.classList.add("on"),t.focus()},L=t=>{t.preventDefault();let e=t.target;A(e)},q=t=>{t.preventDefault(),38===t.keyCode&&t.target.previousElementSibling?t.target.previousElementSibling.focus():40===t.keyCode&&t.target.nextElementSibling?t.target.nextElementSibling.focus():13!==t.keyCode&&32!==t.keyCode||A(t.target)};if(i.querySelectorAll(".rte-paragraph-options li").forEach((t=>{t.addEventListener("keydown",q),t.addEventListener("click",L)})),i.querySelectorAll("button.rte-paragraph").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteParagraphOptions;n.hasClass(e,"active")?this.util.hideRtePop(e):this.util.showRtePop(e,(()=>{const i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left,s=e.offsetWidth,r=e.offsetHeight;if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";if(n.parentsHasClass(t,"rte-more-options"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-s+"px",e.style.right="auto"}),t),this.getState();var i=e.querySelector(".on");i&&i.focus()}))})),!this.builder.renderIframeLater){let t=d.querySelector("iframe").contentWindow.document;t.open(),this.builder.opts.emailMode?t.write(e.getFontFamilyEmail()):t.write(e.getFontFamilyHTML()),t.close()}if(i.querySelectorAll("button.rte-fontfamily").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteFontFamilyOptions;if(n.hasClass(e,"active"))this.util.hideRtePop(e);else{this.util.showRtePop(e,(()=>{const i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left,s=e.offsetWidth,r=e.offsetHeight;if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";if(n.parentsHasClass(t,"rte-more-options"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-s+"px",e.style.right="auto"}),t),this.getState();let o=e.querySelector("iframe").contentWindow.document.querySelector("#divFontList");var i=o.querySelector(".on");i?(i.focus(),o.scrollTop=o.scrollTop+i.getBoundingClientRect().top-90):o.querySelector("li").focus()}}))})),!this.builder.renderIframeLater){let t=m.querySelector("iframe").contentWindow.document;t.open(),t.write(this.getIconsHTML()),t.close()}let T=i.querySelectorAll("button.rte-icon");T.forEach((t=>{t.addEventListener("click",(t=>{this.openIcon(t)}))})),i.querySelectorAll("button.rte-color").forEach((t=>{t.addEventListener("click",(()=>{const e=this.rteColorPicker;if(n.hasClass(e,"active"))this.util.hideRtePop(e);else{this.util.showRtePop(e,(()=>{const i=t.getBoundingClientRect().top,n=t.getBoundingClientRect().left,o=e.offsetWidth;if("left"===this.builder.opts.toolbar)e.style.top=this.rteTool.style.top,e.style.left=n+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=this.rteTool.style.top,e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-n+9+"px"}else e.style.top=i+54-6+"px",e.style.left=n-o/2+23+"px",e.style.right="auto"}),t),this.builder.uo.saveForUndo(!0),e.querySelector(".input-text").focus()}}))})),i.querySelectorAll("button.rte-preferences").forEach((t=>{t.addEventListener("click",(()=>{this.builder.viewPreferences()}))})),i.querySelectorAll("button.rte-html").forEach((t=>{t.addEventListener("click",(()=>{this.builder.viewHtml()}))})),i.querySelectorAll("button.rte-grideditor").forEach((t=>{t.addEventListener("click",(()=>{const t=this.builderStuff.querySelector(".grideditor");n.addClass(t,"active");const e=this.builder.doc.querySelectorAll(this.builder.opts.container);Array.prototype.forEach.call(e,(t=>{t.setAttribute("grideditor","")}))}))})),i.querySelectorAll("button.rte-undo").forEach((t=>{t.addEventListener("click",(()=>{this.builder.uo.doUndo()}))})),i.querySelectorAll("button.rte-redo").forEach((t=>{t.addEventListener("click",(()=>{this.builder.uo.doRedo()}))})),i.querySelectorAll("button.rte-addsnippet").forEach((t=>{t.addEventListener("click",(()=>{this.viewSnippets()}))})),i.querySelectorAll("button.rte-link").forEach((t=>{t.addEventListener("click",(()=>{this.hyperlink.createLink()}))})),i.querySelectorAll("button.rte-image").forEach((t=>{t.addEventListener("click",(()=>{this.insertImage()}))}));const M=this.builderStuff.querySelector(".insertimage"),O=M.querySelector("#fileInsertImage");n.addEventListener(O,"change",(t=>{var e=t.target;if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(t){M.querySelector(".is-drop-area").style.display="none",M.querySelector("#imgInsertImagePreview").src=t.target.result,M.querySelector(".is-preview-area").style.display="block",O.setAttribute("disabled","disabled");let i=e.files[0].name;M.querySelector("#imgInsertImagePreview").setAttribute("data-filename",i)},i.readAsDataURL(e.files[0]),M.querySelector(".input-src").value=""}}));const R=M.querySelector(".input-ok");n.addEventListener(R,"click",(()=>{if(!this.builder.activeCol)return void e.hideModal(M);this.builder.uo.saveForUndo(),e.restoreSelection();let t="";if(t="none"===M.querySelector(".is-drop-area").style.display?M.querySelector("#imgInsertImagePreview").src:M.querySelector(".input-src").value,""===t)return;let i=M.querySelector("#imgInsertImagePreview").getAttribute("data-filename");e.pasteHtmlAtCaret('<img data-filename="'+i+'" src="'+t+'" alt="" />',!1),e.hideModal(M);let n=this.builder.doc.querySelector(".builder-active");n&&this.builder.applyBehaviorOn(n),e.saveSelection(),this.builder.opts.onChange(),this.builder.opts.onRender()}));const B=M.querySelector(".input-cancel");n.addEventListener(B,"click",(()=>{e.hideModal(M)}));const N=M.querySelector(".is-drop-area");n.addEventListener(N,"dragover",(()=>{n.addClass(N,"image-dropping")})),n.addEventListener(N,"dragleave",(()=>{n.removeClass(N,"image-dropping")}));const I=M.querySelector(".is-preview-area button");n.addEventListener(I,"click",(()=>{M.querySelector("#fileInsertImage").value="",M.querySelector(".is-preview-area").style.display="none",O.removeAttribute("disabled"),N.style.display="block",n.removeClass(N,"image-dropping")}));const $=M.querySelector(".input-src");if(n.addEventListener($,"keyup",(()=>{""!==$.value&&(M.querySelector("#fileInsertImage").value="",M.querySelector(".is-preview-area").style.display="none",O.removeAttribute("disabled"),N.style.display="block",n.removeClass(N,"image-dropping"))})),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(M.querySelector(".input-select").style.display="none"),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect){n.addClass(M.querySelector(".image-src"),"image-select");const t=M.querySelector(".input-select");t&&n.addEventListener(t,"click",(()=>{if(this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:M.querySelector(".input-src"),theTrigger:t});else{let t=this.builderStuff.querySelector(".is-modal.imageselect"),i=t.querySelector("iframe");this.builder.opts.assetRefresh&&(i.src=this.builder.opts.imageselect,this.builder.opts.assetRefresh=!1),"about:blank"===i.src&&(i.src=this.builder.opts.imageselect),e.showModal(t)}this.builder.targetInput=M.querySelector(".input-src"),this.builder.targetCallback=null,this.builder.targetAssetType="image"}))}else n.removeClass($,"image-select");i.querySelectorAll("button.rte-livepreview").forEach((t=>{n.addEventListener(t,"click",(()=>{i.querySelector(".is-modal.content-preview").classList.contains("active")?this.builder.closePreview():this.builder.openPreview()}))})),i.querySelectorAll("button.rte-zoom").forEach((t=>{n.addEventListener(t,"click",(()=>{this.rteZoomSlider.value=100*this.builder.opts.zoom;const e=this.rteZoomOptions,i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left;e.style.display="flex";const s=e.offsetWidth,r=e.offsetHeight;n.hasClass(e,"active")?this.util.hideRtePop(e):this.util.showRtePop(e,(()=>{if("none"!==this.rteTool.style.display){if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else{e.style.top=i+54-6+"px";const t=parseInt(this.rteTool.style.left)+this.rteTool.offsetWidth,n=o-s/2+23+s,r=0;e.style.left=n>t?parseInt(this.rteTool.style.left)+this.rteTool.offsetWidth-s+r+"px":o-s/2+23+"px",e.style.right="auto"}if(n.parentsHasClass(t,"rte-more-options"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-s+"px",e.style.right="auto"}else{if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else{e.style.top=i+54-6+"px";const t=parseInt(this.elementRteTool.style.left)+this.elementRteTool.offsetWidth,n=o-s/2+23+s;e.style.left=n>t?parseInt(this.elementRteTool.style.left)+this.elementRteTool.offsetWidth-s+"px":o-s/2+23+"px",e.style.right="auto"}if(n.parentsHasClass(t,"elementrte-more-optionss"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.elementRteMoreOptions.style.top)+this.elementRteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.elementRteMoreOptions.style.top)+this.elementRteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=parseInt(this.elementRteMoreOptions.style.left)+this.elementRteMoreOptions.offsetWidth-s+"px",e.style.right="auto"}e.focus()}),t)}))})),this.rteZoomSlider.value=100*this.builder.opts.zoom,this.rteZoomSlider.onfocus=()=>{this.builder.onZoomStart&&this.builder.onZoomStart()},this.rteZoomSlider.oninput=()=>{let t=this.rteZoomSlider.value/100;this.builder.opts.zoom=t,localStorage.setItem("_zoom",t),this.builder.setZoomOnArea();let e=this.builder.doc.querySelectorAll(".is-tool");if(Array.prototype.forEach.call(e,(t=>{t.style.display=""})),e=this.builder.doc.querySelectorAll(".is-row-tool"),e.forEach((t=>{t.style.display="none"})),e=this.builder.doc.querySelectorAll(".is-col-tool"),e.forEach((t=>{t.style.display="none"})),e=this.builder.doc.querySelectorAll(".is-rowadd-tool"),e.forEach((t=>{t.style.opacity=0})),this.builder.onZoom){let t=this.rteZoomSlider.value/100;this.builder.onZoom(t)}},this.rteZoomSlider.onchange=()=>{setTimeout((()=>{if(""!==this.builder.opts.page){const t=this.builder.doc.querySelector(this.builder.opts.page);this.builder.setZoomOnControl(t)}else{this.builder.doc.querySelectorAll(this.builder.opts.container).forEach((t=>{this.builder.setZoomOnControl(t)}))}this.builder.elmTool.repositionElementTool();let t=this.builder.doc.querySelectorAll(".is-row-tool");if(t.forEach((t=>{t.style.display=""})),t=this.builder.doc.querySelectorAll(".is-rowadd-tool"),t.forEach((t=>{t.style.opacity=""})),t=this.builder.doc.querySelectorAll(".is-col-tool"),t.forEach((t=>{t.style.display=""})),this.builder.onZoomEnd){let t=this.rteZoomSlider.value/100;this.builder.onZoomEnd(t)}}),300)},this.inpZoomSlider.onfocus=()=>{this.builder.onZoomStart&&this.builder.onZoomStart()},this.inpZoomSlider.oninput=()=>{let t=this.inpZoomSlider.value/100;this.builder.opts.zoom=t,localStorage.setItem("_zoom",t),this.builder.setZoomOnArea();let e=this.builder.doc.querySelectorAll(".is-tool");if(Array.prototype.forEach.call(e,(t=>{t.style.display=""})),e=this.builder.doc.querySelectorAll(".is-row-tool"),e.forEach((t=>{t.style.display="none"})),e=this.builder.doc.querySelectorAll(".is-col-tool"),e.forEach((t=>{t.style.display="none"})),e=this.builder.doc.querySelectorAll(".is-rowadd-tool"),e.forEach((t=>{t.style.opacity=0})),this.builder.onZoom){let t=this.inpZoomSlider.value/100;this.builder.onZoom(t)}},this.inpZoomSlider.onchange=()=>{setTimeout((()=>{if(""!==this.builder.opts.page){const t=this.builder.doc.querySelector(this.builder.opts.page);this.builder.setZoomOnControl(t)}else{this.builder.doc.querySelectorAll(this.builder.opts.container).forEach((t=>{this.builder.setZoomOnControl(t)}))}this.builder.elmTool.repositionElementTool();let t=this.builder.doc.querySelectorAll(".is-row-tool");if(t.forEach((t=>{t.style.display=""})),t=this.builder.doc.querySelectorAll(".is-rowadd-tool"),t.forEach((t=>{t.style.opacity=""})),t=this.builder.doc.querySelectorAll(".is-col-tool"),t.forEach((t=>{t.style.display=""})),this.builder.onZoomEnd){let t=this.rteZoomSlider.value/100;this.builder.onZoomEnd(t)}if(this.builder.onZoomEnd){let t=this.inpZoomSlider.value/100;this.builder.onZoomEnd(t)}this.rteZoomSlider.value=this.inpZoomSlider.value}),300)},i.querySelectorAll("button.rte-textsettings").forEach((t=>{n.addEventListener(t,"click",(()=>{const e=this.rteTextSettingOptions,i=t.getBoundingClientRect().top,o=t.getBoundingClientRect().left;e.style.display="flex";const s=e.offsetWidth,r=e.offsetHeight;n.hasClass(e,"active")?this.util.hideRtePop(e):(this.getTextSettingsState(),this.util.showRtePop(e,(()=>{if("left"===this.builder.opts.toolbar)e.style.top=i-r/2+20+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=i-r/2+20+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";if(n.parentsHasClass(t,"rte-more-options"))if("left"===this.builder.opts.toolbar)e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left=o+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-r+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-o+9+"px"}else e.style.top=i+54-6+"px",e.style.left=o-s/2+23+"px",e.style.right="auto";e.focus()}),t))}))}));const D=t=>{9!==t.which||t.shiftKey?9===t.which&&t.shiftKey&&t.target===document.querySelector(".rte-textsetting-options button")&&(document.querySelector(".rte-letterspacing-options button:last-child").focus(),t.preventDefault()):t.target===document.querySelector(".rte-letterspacing-options button:last-child")&&(document.querySelector(".rte-textsetting-options button").focus(),t.preventDefault())};(z=h.querySelectorAll("button")).forEach((t=>{t.addEventListener("keydown",D)})),this.rteTool.querySelectorAll("button.rte-more").forEach((t=>{t.addEventListener("click",(()=>{this.showRteMore()}))}));let P=this.elementRteTool.querySelector("button.rte-more");P&&n.addEventListener(P,"click",(()=>{this.showElementRteMore()}));var z=Array.prototype.slice.call(this.rteTool.querySelectorAll(".rte-format")).concat(Array.prototype.slice.call(this.rteFormattingOptions.querySelectorAll(".rte-format"))).concat(Array.prototype.slice.call(this.rteMoreOptions.querySelectorAll(".rte-format")));Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{let i;this.builder.uo.saveForUndo();try{let t;this.builder.win.getSelection?(t=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,i=3===t.nodeType?t.parentNode:t):this.builder.doc.selection&&(t=this.builder.doc.selection.createRange(),i=this.builder.doc.selection.createRange().parentElement())}catch(t){return}const o=t.getAttribute("data-command");var s=n.getSelected();if("bold"===o)if(this.builder.useCssClasses)n.execCommandToggle("fontWeight","",this.builder.cssClasses);else if(""===s.trim()){var r=i.tagName.toLowerCase();"b"===r?(n.selectElementContents(i),this.builder.doc.execCommand("bold",!1,null)):"bold"===i.style.fontWeight||i.style.fontWeight>400?i.style.fontWeight="":i.style.fontWeight="bold"}else this.builder.doc.execCommand("bold",!1,null);if("italic"===o)if(this.builder.useCssClasses)n.execCommandToggle("fontStyle","",this.builder.cssClasses);else if(""===s.trim())if("i"===(r=i.tagName.toLowerCase()))n.selectElementContents(i),this.builder.doc.execCommand("italic",!1,null);else{let t=window.getComputedStyle(i).getPropertyValue("font-style");i.style.fontStyle="italic"===t?"normal":"italic"}else this.builder.doc.execCommand("italic",!1,null);if("underline"===o&&(this.builder.useCssClasses?n.execCommandToggle("textUnderline","",this.builder.cssClasses):""===s.trim()?"u"===(r=i.tagName.toLowerCase())?(n.selectElementContents(i),this.builder.doc.execCommand("underline",!1,null)):-1!==i.style.textDecoration.indexOf("underline")?i.style.textDecoration="":i.style.textDecoration="underline":this.builder.doc.execCommand("underline",!1,null)),"strikethrough"===o&&(this.builder.useCssClasses?n.execCommandToggle("textLinethrough","",this.builder.cssClasses):""===s.trim()?"strike"===(r=i.tagName.toLowerCase())?(n.selectElementContents(i),this.builder.doc.execCommand("strikethrough",!1,null)):-1!==i.style.textDecoration.indexOf("line-through")?i.style.textDecoration="":i.style.textDecoration="line-through":this.builder.doc.execCommand("strikethrough",!1,null)),"superscript"===o&&(this.builder.useCssClasses?n.execCommandToggle("extend","superscript",this.builder.cssClasses):this.builder.doc.execCommand("superscript",!1,null)),"subscript"===o&&(this.builder.useCssClasses?n.execCommandToggle("extend","subscript",this.builder.cssClasses):this.builder.doc.execCommand("subscript",!1,null)),"uppercase"===o)if(this.builder.useCssClasses)n.execCommandToggle("textTransform","",this.builder.cssClasses);else{let t=window.getComputedStyle(i).getPropertyValue("text-transform");i.style.textTransform="uppercase"===t?"lowercase":"lowercase"===t?"capitalize":"capitalize"===t?"none":"none"===t?"uppercase":"none"}if("clean"===o&&(this.builder.useCssClasses?(this.builder.doc.execCommand("removeFormat",!1,null),n.execCommandToggle("clean","",this.builder.cssClasses)):""===s.trim()?(i.style.cssText="",i.className=""):i.innerText.replace(/(\r\n|\n|\r)/gm,"")===s.trim().replace(/(\r\n|\n|\r)/gm,"")?(i.style.cssText="",i.className="",this.builder.doc.execCommand("removeFormat",!1,null),this.builder.doc.execCommand("removeFormat",!1,null)):(this.builder.doc.execCommand("removeFormat",!1,null),this.builder.doc.execCommand("removeFormat",!1,null))),this.getState(),this.builder.isTouchSupport||e.saveSelection(),""===s.trim()&&(e.restoreSelection(),this.builder.isTouchSupport)){this.rteTool.querySelector("button").focus()}this.builder.opts.onChange()}))})),z=this.rteAlignOptions.querySelectorAll("button[data-align]"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{if(this.builder.uo.saveForUndo(),e.restoreSelection(),this.builder.isTouchSupport){this.rteTool.querySelector("button").focus()}const i=t.getAttribute("data-align");let o;try{let t;this.builder.win.getSelection?(t=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,o=3===t.nodeType?t.parentNode:t):this.builder.doc.selection&&(t=this.builder.doc.selection.createRange(),o=this.builder.doc.selection.createRange().parentElement())}catch(t){return}let s=o,r=s.closest("table.button");if(r){if("center"===i)if("center"!==r.parentNode.tagName.toLowerCase()){let t=document.createElement("CENTER");r.parentNode.insertBefore(t,r),t.appendChild(r)}else r.setAttribute("align","");else r.setAttribute("align",i);n.removeClass(r,"float-center")}else{for(;"p"!==s.tagName.toLowerCase()&&"h1"!==s.tagName.toLowerCase()&&"h2"!==s.tagName.toLowerCase()&&"h3"!==s.tagName.toLowerCase()&&"h4"!==s.tagName.toLowerCase()&&"h5"!==s.tagName.toLowerCase()&&"h6"!==s.tagName.toLowerCase()&&"pre"!==s.tagName.toLowerCase()&&"blockquote"!==s.tagName.toLowerCase()&&"div"!==s.tagName.toLowerCase()&&"td"!==s.tagName.toLowerCase()&&"th"!==s.tagName.toLowerCase();)s=s.parentNode;this.builder.useCssClasses?(s.style.textAlign="",n.removeClass(s,this.builder.cssClasses.textAlign.left),n.removeClass(s,this.builder.cssClasses.textAlign.center),n.removeClass(s,this.builder.cssClasses.textAlign.right),n.removeClass(s,this.builder.cssClasses.textAlign.justify),"left"===i&&n.addClass(s,this.builder.cssClasses.textAlign.left),"center"===i&&n.addClass(s,this.builder.cssClasses.textAlign.center),"right"===i&&n.addClass(s,this.builder.cssClasses.textAlign.right),"justify"===i&&n.addClass(s,this.builder.cssClasses.textAlign.justify)):s.style.textAlign=i}this.getState(),e.saveSelection(),this.builder.opts.onChange()}))})),z=this.elementRteTool.querySelectorAll("button[data-align]"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-align");let i=this.builder.inspectedElement;for(;"p"!==i.tagName.toLowerCase()&&"h1"!==i.tagName.toLowerCase()&&"h2"!==i.tagName.toLowerCase()&&"h3"!==i.tagName.toLowerCase()&&"h4"!==i.tagName.toLowerCase()&&"h5"!==i.tagName.toLowerCase()&&"h6"!==i.tagName.toLowerCase()&&"pre"!==i.tagName.toLowerCase()&&"blockquote"!==i.tagName.toLowerCase()&&"div"!==i.tagName.toLowerCase()&&"td"!==i.tagName.toLowerCase()&&"th"!==i.tagName.toLowerCase();)i=i.parentNode;this.builder.useCssClasses?(i.style.textAlign="",n.removeClass(i,this.builder.cssClasses.textAlign.left),n.removeClass(i,this.builder.cssClasses.textAlign.center),n.removeClass(i,this.builder.cssClasses.textAlign.right),n.removeClass(i,this.builder.cssClasses.textAlign.justify),"left"===e&&n.addClass(i,this.builder.cssClasses.textAlign.left),"center"===e&&n.addClass(i,this.builder.cssClasses.textAlign.center),"right"===e&&n.addClass(i,this.builder.cssClasses.textAlign.right),"justify"===e&&n.addClass(i,this.builder.cssClasses.textAlign.justify)):i.style.textAlign=e,this.getState(),this.builder.opts.onChange()}))})),z=this.elementRteMoreOptions.querySelectorAll("button[data-align]"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo();const e=t.getAttribute("data-align");let i=this.builder.inspectedElement;for(;"p"!==i.tagName.toLowerCase()&&"h1"!==i.tagName.toLowerCase()&&"h2"!==i.tagName.toLowerCase()&&"h3"!==i.tagName.toLowerCase()&&"h4"!==i.tagName.toLowerCase()&&"h5"!==i.tagName.toLowerCase()&&"h6"!==i.tagName.toLowerCase()&&"pre"!==i.tagName.toLowerCase()&&"blockquote"!==i.tagName.toLowerCase()&&"div"!==i.tagName.toLowerCase()&&"td"!==i.tagName.toLowerCase()&&"th"!==i.tagName.toLowerCase();)i=i.parentNode;this.builder.useCssClasses?(i.style.textAlign="",n.removeClass(i,this.builder.cssClasses.textAlign.left),n.removeClass(i,this.builder.cssClasses.textAlign.center),n.removeClass(i,this.builder.cssClasses.textAlign.right),n.removeClass(i,this.builder.cssClasses.textAlign.justify),"left"===e&&n.addClass(i,this.builder.cssClasses.textAlign.left),"center"===e&&n.addClass(i,this.builder.cssClasses.textAlign.center),"right"===e&&n.addClass(i,this.builder.cssClasses.textAlign.right),"justify"===e&&n.addClass(i,this.builder.cssClasses.textAlign.justify)):i.style.textAlign=e,this.getState(),this.builder.opts.onChange()}))})),z=this.rteListOptions.querySelectorAll("button[data-action]"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{this.builder.uo.saveForUndo(),e.restoreSelection();let i=this.builder.activeCol,o=i.querySelectorAll("span");Array.prototype.forEach.call(o,(t=>{t.setAttribute("data-keep","")}));const s=t.getAttribute("data-action");if(this.builder.doc.execCommand(s,!1,null),i=this.builder.activeCol,o=i.querySelectorAll("span"),Array.prototype.forEach.call(o,(t=>{t.getAttribute("data-keep")||(t.outerHTML=t.innerHTML)})),Array.prototype.forEach.call(o,(t=>{t.getAttribute("data-keep")&&n.removeAttribute(t,"data-keep")})),this.getState(),e.saveSelection(),this.builder.opts.onChange(),this.builder.isTouchSupport){this.rteTool.querySelector("button").focus()}}))}));let H=l.querySelectorAll(".is-pop-tab-item");Array.prototype.forEach.call(H,(t=>{n.addEventListener(t,"click",(t=>{this.builder.uo.saveForUndo(!0);let e=l.querySelectorAll(".is-pop-tab-item");Array.prototype.forEach.call(e,(t=>{n.removeClass(t,"active")})),n.addClass(t.target,"active"),"forecolor"===l.querySelector(".active").getAttribute("data-value")?l.setAttribute("data-command","forecolor"):l.setAttribute("data-command","backcolor")}))})),new Fg({colors:this.builder.opts.colors,onPick:t=>{let i;e.restoreSelection();try{let t;this.builder.win.getSelection?(t=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,i=3===t.nodeType?t.parentNode:t):this.builder.doc.selection&&(t=this.builder.doc.selection.createRange(),i=this.builder.doc.selection.createRange().parentElement())}catch(t){if(!this.builder.activeIcon)return;i=this.builder.activeIcon}this.builder.activeIcon&&(i=this.builder.activeIcon);const o=l.getAttribute("data-command");var s=n.getSelected();if(""===s.trim())"forecolor"===o?i.style.color=t:i.style.backgroundColor=t;else if(i.innerText===s)"forecolor"===o?i.style.color=t:i.style.backgroundColor=t;else{"forecolor"===o?this.builder.doc.execCommand("ForeColor",!1,t):this.builder.doc.execCommand("BackColor",!1,t);for(var r=this.builder.doc.getElementsByTagName("font"),a=0,d=r.length;a<d;++a){""!==r[a].color&&"forecolor"===o&&(r[a].removeAttribute("color"),r[a].style.color=t)}}if(this.builder.isTouchSupport||e.saveSelection(),""===s.trim()&&e.restoreSelection(),this.builder.isTouchSupport){this.rteTool.querySelector("button").focus()}this.builder.opts.onChange()},renderOn:".rte-color-picker-area",animateModal:this.builder.opts.animateModal,elementToAnimate:this.builder.opts.container,lang:this.builder.opts.lang}),z=h.querySelectorAll(".rte-fontsize-options button"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{let i=t.getAttribute("data-value");e.restoreSelection(),this.builder.uo.saveForUndo();const o=n.getSelection();if(!o)return;const s=o.anchorNode;let r=1;if(s){const t=s.nodeType!==Node.TEXT_NODE&&s.nodeType!==Node.COMMENT_NODE?s:s.parentElement;r=Number(window.getComputedStyle(t).getPropertyValue("font-size").match(/\d+/)[0])}const l=h.querySelectorAll(".rte-fontsize-options button");Array.prototype.forEach.call(l,(t=>{t.classList.remove("on")})),n.execCommand("font-size",r+1+"px",((t,e)=>{if(!t&&this.builder.activeIcon){let t=this.builder.activeIcon;this.builder.opts.fontSizeClassValues.length>0?this.applyClassFontSize(t,i):this.applyInlineFontSize(t,i)}e&&(this.builder.opts.fontSizeClassValues.length>0?this.applyClassFontSize(e,i):this.applyInlineFontSize(e,i),e.style.fontSize="")})),e.saveSelection(),this.getTextSettingsState(),this.builder.opts.onChange()}))})),z=h.querySelectorAll(".rte-fontweight-options button"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{let i=t.getAttribute("data-value");e.restoreSelection(),this.builder.uo.saveForUndo();const o=h.querySelectorAll(".rte-fontweight-options button");Array.prototype.forEach.call(o,(t=>{t.classList.remove("on")})),n.execCommand("font-weight",i,((t,e)=>{this.builder.useCssClasses&&e&&this.applyClassFontWeight(e,i)})),e.saveSelection(),this.getState(),this.getTextSettingsState(),this.builder.opts.onChange()}))})),z=h.querySelectorAll(".rte-lineheight-options button"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{let i=t.getAttribute("data-value");e.restoreSelection(),this.builder.uo.saveForUndo();const o=h.querySelectorAll(".rte-lineheight-options button");if(Array.prototype.forEach.call(o,(t=>{t.classList.remove("on")})),this.builder.useCssClasses){const t=n.getSelection();if(!t)return;const e=t.anchorNode;let o,s;if(e&&(o=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.COMMENT_NODE?e:e.parentElement),!o)return;const r=this.builder.cssClasses.leading;if(""===i)s="";else if("+"===i||"-"===i)for(let t=0;t<Object.keys(r).length;t++){let e=Object.values(r)[t];if(o.closest(`.${e}`)){if("+"===i){if(t+1===Object.keys(r).length)return;s=Object.values(r)[t+1];break}if("-"===i){if(t-1<0)return;s=Object.values(r)[t-1];break}}}else"1"===i?s=r.leading_10:"1.2"===i?s=r.leading_12:"1.4"===i?s=r.leading_14:"1.6"===i?s=r.leading_16:"1.8"===i?s=r.leading_18:"2"===i?s=r.leading_20:"2.2"===i&&(s=r.leading_22);s||("+"===i?s=r.leading_16:"-"===i&&(s=r.leading_14));const l=n.getParentBlock(o);l&&(l.style.lineHeight=""),n.execCommandClass(s,r,!0,"block")}else{let t;try{let e;this.builder.win.getSelection?(e=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,t=3===e.nodeType?e.parentNode:e):this.builder.doc.selection&&(e=this.builder.doc.selection.createRange(),t=this.builder.doc.selection.createRange().parentElement())}catch(e){if(!this.builder.activeIcon)return;t=this.builder.activeIcon}this.builder.activeIcon&&(t=this.builder.activeIcon);let e=t;for(;e;){if("BODY"===e.tagName||"HTML"===e.tagName)return!1;if("inline"!==window.getComputedStyle(e).getPropertyValue("display")){t=e;break}e=e.parentNode}let o,s=!1,r=t.style.lineHeight;if(r&&-1===r.indexOf("px")?r=parseFloat(r):s=!0,s){let e=Number(window.getComputedStyle(t).getPropertyValue("font-size").match(/\d+/)[0]);r=Number(window.getComputedStyle(t).getPropertyValue("line-height").match(/\d+/)[0]),e>r?r=e/r:e<r?r/=e:r=1}"+"===i?o=r+.1:"-"===i?(o=r-.1,o<.2&&(o=.2)):o=""===i?"":i,n.doFunction(t,(function(t){"inline"!==window.getComputedStyle(t).getPropertyValue("display")&&(t.style.lineHeight=o)}),!0)}e.saveSelection(),this.getTextSettingsState(),this.builder.opts.onChange()}))})),z=h.querySelectorAll(".rte-letterspacing-options button"),Array.prototype.forEach.call(z,(t=>{n.addEventListener(t,"click",(()=>{let i=t.getAttribute("data-value");e.restoreSelection(),this.builder.uo.saveForUndo();const o=h.querySelectorAll(".rte-letterspacing-options button");if(Array.prototype.forEach.call(o,(t=>{t.classList.remove("on")})),this.builder.useCssClasses){const t=n.getSelection();if(!t)return;const e=t.anchorNode;let o,s;if(e&&(o=e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.COMMENT_NODE?e:e.parentElement),!o)return;const r=this.builder.cssClasses.tracking;if(""===i)s="";else if("+"===i||"-"===i)for(let t=0;t<Object.keys(r).length;t++){let e=Object.values(r)[t];if(n.hasClass(o,e)){if("+"===i){if(t+1===Object.keys(r).length)return;s=Object.values(r)[t+1];break}if("-"===i){if(t-1<0)return;s=Object.values(r)[t-1];break}}}else"1"===i&&(s=r.tracking_025),"2"===i&&(s=r.tracking_050);s||("+"===i?s=r.tracking_025:"-"===i&&(s=r.tracking__025)),this.builder.activeElement&&(this.builder.activeElement.style.letterSpacing=""),o.style.letterSpacing="",s===r.tracking_000&&(s=""),n.execCommandClass(s,r)}else{let t;try{let e;this.builder.win.getSelection?(e=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,t=3===e.nodeType?e.parentNode:e):this.builder.doc.selection&&(e=this.builder.doc.selection.createRange(),t=this.builder.doc.selection.createRange().parentElement())}catch(e){if(!this.builder.activeIcon)return;t=this.builder.activeIcon}this.builder.activeIcon&&(t=this.builder.activeIcon);let e,o=parseInt(window.getComputedStyle(t).getPropertyValue("letter-spacing"));isNaN(o)&&(o=0),e="+"===i?o+1+"px":"-"===i?o-1+"px":""===i?"":i+"px",n.doFunction(t,(function(t){t.style.letterSpacing=e}),!0)}e.saveSelection(),this.getTextSettingsState(),this.builder.opts.onChange()}))})),this.builder.doc.addEventListener("click",this.builder.doRteClick=t=>{var e=(t=t||window.event).target||t.srcElement;if(!this.builderStuff)return;if(this.builderStuff.getAttribute("preventDevault"))return void setTimeout((()=>{this.builderStuff.removeAttribute("preventDevault")}),30);let i,o,s,r,l;"flex"===this.rteMoreOptions.style.display&&(i=n.parentsHasClass(e,"rte-more"),o=n.parentsHasClass(e,"rte-more-options"),s=n.parentsHasClass(e,"is-rte-pop"),r=n.parentsHasClass(e,"is-modal"),l=!1,e.tagName&&(l="i"===e.tagName.toLowerCase()&&""===e.innerHTML&&n.parentsHasClass(T,"rte-more-options")),i||o||s||r||l||(this.rteMoreOptions.style.display="",n.removeClass(this.rteMoreOptions,"active"),n.addClass(this.rteMoreOptions,"deactive"))),"flex"===this.elementRteMoreOptions.style.display&&(i=n.parentsHasClass(e,"rte-more"),o=n.parentsHasClass(e,"elementrte-more-options"),s=n.parentsHasClass(e,"is-rte-pop"),r=n.parentsHasClass(e,"is-modal"),l=!1,i||o||s||r||l||(this.elementRteMoreOptions.style.display="",n.removeClass(this.elementRteMoreOptions,"active"),n.addClass(this.elementRteMoreOptions,"deactive")))}),this.builderStuff.insertAdjacentHTML("afterbegin","\n        <style>\n            #_cbhtml[toolbarfull] .is-rte-tool,\n            #_cbhtml[toolbarfull] .is-elementrte-tool {\n                top: 0;\n                left: 0;\n                width: 100vw;\n                align-items: center;\n                box-shadow: rgba(0, 0, 0, 0.07) -1px 1px 0px 0px;\n            }\n            #_cbhtml[toolbarfull] .is-rte-pop {\n                box-shadow: rgba(0, 0, 0, 0.05) 0px 1px 0px 1px;\n            }\n        </style>\n        "),"auto"!==this.builder.toolbarDisplay&&this.showDefaultToolbar()}zoomStart(){this.builder.onZoomStart&&this.builder.onZoomStart()}zoom(t){let e=t.value/100;this.builder.opts.zoom=e,localStorage.setItem("_zoom",e),this.builder.setZoomOnArea();let i=this.builder.doc.querySelectorAll(".is-tool");if(Array.prototype.forEach.call(i,(t=>{t.style.display=""})),i=this.builder.doc.querySelectorAll(".is-row-tool"),i.forEach((t=>{t.style.display="none"})),i=this.builder.doc.querySelectorAll(".is-col-tool"),i.forEach((t=>{t.style.display="none"})),i=this.builder.doc.querySelectorAll(".is-rowadd-tool"),i.forEach((t=>{t.style.opacity=0})),this.builder.onZoom){let e=t.value/100;this.builder.onZoom(e)}}zoomEnd(t){setTimeout((()=>{if(""!==this.builder.opts.page){const t=this.builder.doc.querySelector(this.builder.opts.page);this.builder.setZoomOnControl(t)}else{this.builder.doc.querySelectorAll(this.builder.opts.container).forEach((t=>{this.builder.setZoomOnControl(t)}))}this.builder.elmTool.repositionElementTool();let e=this.builder.doc.querySelectorAll(".is-row-tool");if(e.forEach((t=>{t.style.display=""})),e=this.builder.doc.querySelectorAll(".is-rowadd-tool"),e.forEach((t=>{t.style.opacity=""})),e=this.builder.doc.querySelectorAll(".is-col-tool"),e.forEach((t=>{t.style.display=""})),this.builder.onZoomEnd){let e=t.value/100;this.builder.onZoomEnd(e)}}),300)}insertImage(){const t=this.dom,e=this.builderStuff.querySelector(".insertimage").querySelector("#fileInsertImage"),i=this.builderStuff.querySelector(".insertimage");this.util.showModal(i,!0,(function(){}),!1),i.querySelector("#inpInsertImageSrc").focus(),i.querySelector("#fileInsertImage").value="",i.querySelector(".is-preview-area").style.display="none",e.removeAttribute("disabled"),i.querySelector(".is-drop-area").style.display="block",t.removeClass(i.querySelector(".is-drop-area"),"image-dropping"),i.querySelector(".input-src").value=""}viewSnippets(){const t=new Li(this.builder);let e=this.builderStuff.querySelector(".snippets");this.util.showModal(e,!1,null,!1);var i=e.querySelector("iframe").contentWindow.document;""===i.body.innerHTML&&(i.open(),i.write(t.getSnippetsHtml()),i.close())}openIcon(t){const e=this.dom;let i=t.target;const n=this.rteIconOptions,o=i.getBoundingClientRect().top,s=i.getBoundingClientRect().left;n.style.display="flex";const r=n.offsetWidth,l=n.offsetHeight;e.hasClass(n,"active")?this.util.hideRtePop(n):this.util.showRtePop(n,(()=>{if("left"===this.builder.opts.toolbar)n.style.top=o-l/2+20+"px",n.style.left=s+54+"px",n.style.right="auto";else if("right"===this.builder.opts.toolbar){n.style.top=o-l/2+20+"px",n.style.left="auto";const t=document.body.clientWidth;n.style.right=t-s+9+"px"}else n.style.top=o+54-6+"px",n.style.left=s-r/2+23+"px",n.style.right="auto",i.getBoundingClientRect().left+45-parseInt(this.rteTool.style.left)<n.offsetWidth?n.style.left=parseInt(this.rteTool.style.left)+"px":parseInt(this.rteTool.style.left)+this.rteTool.offsetWidth-i.getBoundingClientRect().left+45<n.offsetWidth&&(n.style.left=parseInt(this.rteTool.style.left)+this.rteTool.offsetWidth-r+"px");if(e.parentsHasClass(i,"rte-more-options"))if("left"===this.builder.opts.toolbar)n.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-l+"px",n.style.left=s+54+"px",n.style.right="auto";else if("right"===this.builder.opts.toolbar){n.style.top=parseInt(this.rteMoreOptions.style.top)+this.rteMoreOptions.offsetHeight-l+"px",n.style.left="auto";const t=document.body.clientWidth;n.style.right=t-s+9+"px"}else n.style.top=o+54-6+"px",i.getBoundingClientRect().left+45-parseInt(this.rteMoreOptions.style.left)<n.offsetWidth?n.style.left=parseInt(this.rteMoreOptions.style.left)+"px":parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-i.getBoundingClientRect().left+45<n.offsetWidth&&(n.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-r+"px"),e.hasClass(this.builder.inspectedElement,"icon")&&(n.style.left=parseInt(this.rteMoreOptions.style.left)+this.rteMoreOptions.offsetWidth-r+"px"),n.style.right="auto";n.focus()}),i)}showRteMore(){const t=this.dom,e=this.rteMoreOptions;t.hasClass(e,"active")?(t.removeClass(e,"active"),t.addClass(e,"deactive")):(this.positionRteMore(),t.removeClass(e,"deactive"),t.addClass(e,"active"))}positionRteMore(){let t,e;const i=this.rteTool.querySelectorAll("button.rte-more");let n=0;i.forEach((i=>{i.getBoundingClientRect().top>0&&(t=i.getBoundingClientRect().top,e=i.getBoundingClientRect().left,n=i.offsetWidth)}));const o=this.rteMoreOptions;o.style.display="flex";const s=o.offsetWidth,r=o.offsetHeight;if("left"===this.builder.opts.toolbar)o.style.top=parseFloat(this.rteTool.style.top)+this.rteTool.offsetHeight-r+"px",o.style.left=e+54+"px",o.style.right="auto";else if("right"===this.builder.opts.toolbar){o.style.top=parseFloat(this.rteTool.style.top)+this.rteTool.offsetHeight-r+"px",o.style.left="auto";const t=document.body.clientWidth;o.style.right=t-e+9+"px"}else{const i=0;o.style.top=t+54-6+"px",o.style.left=parseFloat(this.rteTool.style.left)+this.rteTool.offsetWidth-s+i+"px",o.style.right="auto",this.builderStuff.hasAttribute("toolbarfull")&&(o.style.left=e-s+n+"px")}}showElementRteMore(){const t=this.dom,e=this.elementRteMoreOptions;t.hasClass(e,"active")?(t.removeClass(e,"active"),t.addClass(e,"deactive")):(this.positionElementRteMore(),t.removeClass(e,"deactive"),t.addClass(e,"active"))}positionElementRteMore(){const t=this.elementRteTool.querySelector("button.rte-more"),e=this.elementRteMoreOptions,i=t.getBoundingClientRect().top,n=t.getBoundingClientRect().left;e.style.display="flex";const o=e.offsetWidth,s=e.offsetHeight;if("left"===this.builder.opts.toolbar)e.style.top=parseFloat(this.elementRteTool.style.top)+this.elementRteTool.offsetHeight-s+"px",e.style.left=n+54+"px",e.style.right="auto";else if("right"===this.builder.opts.toolbar){e.style.top=parseFloat(this.elementRteTool.style.top)+this.elementRteTool.offsetHeight-s+"px",e.style.left="auto";const t=document.body.clientWidth;e.style.right=t-n+9+"px"}else{const s=0;e.style.top=i+54-6+"px",e.style.left=parseFloat(this.elementRteTool.style.left)+this.elementRteTool.offsetWidth-o+s+"px",e.style.right="auto",this.builderStuff.hasAttribute("toolbarfull")&&(e.style.left=n-o+t.offsetWidth+"px")}}applyInlineFontSize(t,e){const i=this.dom;let n,o=Number(window.getComputedStyle(t).getPropertyValue("font-size").match(/\d+/)[0]);n="+"===e?o+1+"px":"-"===e?o-1+"px":""===e?"":e+"px",i.doFunction(t,(function(t){t.style.fontSize=n}),!0)}applyClassFontSize(t,e){const i=this.dom;let n=Number(window.getComputedStyle(t).getPropertyValue("font-size").match(/\d+/)[0]),o="";o="+"===e||"-"===e||""===e?e:"size-"+e;const s=this.builder.opts.fontSizeClassValues;for(var r="",l=0;l<=s.length-1;l++)if(i.hasClass(t,"size-"+s[l])){r="size-"+s[l];let e=s[l];i.doFunction(t,(t=>{i.removeClass(t,"size-"+e)}),!0)}else{let e=s[l];i.doFunction(t,(t=>{i.removeClass(t,"size-"+e)}),!0)}if(""===r&&("+"===o||"-"===o))for(l=0;l<=s.length-1;l++)n>=s[l]&n<s[l+1]&&(r="size-"+s[l]);if("+"===o){l=1*r.replace("size-","");var a=s.indexOf(l);a<s.length-1&&(r="size-"+s[a+1]),i.doFunction(t,(function(t){i.addClass(t,r)}),!0)}else"-"===o?(l=1*r.replace("size-",""),(a=s.indexOf(l))>=1&&(r="size-"+s[a-1]),i.doFunction(t,(function(t){i.addClass(t,r)}),!0)):""===o||i.doFunction(t,(function(t){i.addClass(t,o)}),!0);i.doFunction(t,(function(t){t.style.fontSize=""}),!0),i.cleanClassSize(t,o)}applyClassFontWeight(t,e){const i=this.dom;let n=this.builder.cssClasses.fontWeight;for(let e=0;e<Object.keys(n).length;e++){let o=Object.values(n)[e];i.hasClass(t,o)&&i.removeClass(t,o),i.doFunction(t,(t=>{i.hasClass(t,o)&&i.removeClass(t,o)}),!0)}let o="";"100"===e&&(o=this.builder.cssClasses.fontWeight.thin),"200"===e&&(o=this.builder.cssClasses.fontWeight.extralight),"300"===e&&(o=this.builder.cssClasses.fontWeight.light),"400"===e&&(o=this.builder.cssClasses.fontWeight.normal),"500"===e&&(o=this.builder.cssClasses.fontWeight.medium),"600"===e&&(o=this.builder.cssClasses.fontWeight.semibold),"700"===e&&(o=this.builder.cssClasses.fontWeight.bold),"800"===e&&(o=this.builder.cssClasses.fontWeight.extrabold),"900"===e&&(o=this.builder.cssClasses.fontWeight.black),""===o||i.addClass(t,o),i.doFunction(t,(function(t){t.style.fontWeight=""}),!0),i.cleanClassSize(t,o)}hideAlignButtons(){let t,e,i=this.elementRteTool.querySelectorAll("button[data-align]");Array.prototype.forEach.call(i,(i=>{i.style.display="none",i.previousElementSibling&&i.previousElementSibling.classList.contains("rte-separator")&&(t=i.previousElementSibling),i.nextElementSibling&&i.nextElementSibling.classList.contains("rte-separator")&&(e=i.nextElementSibling)})),t&&e&&(e.style.display="none"),i=this.elementRteMoreOptions.querySelectorAll("button[data-align]"),Array.prototype.forEach.call(i,(t=>{t.style.display="none"}))}showAlignButtons(){let t=this.elementRteTool.querySelectorAll(".rte-separator");Array.prototype.forEach.call(t,(t=>{t.style.display=""}));let e=this.elementRteTool.querySelectorAll("button[data-align]");Array.prototype.forEach.call(e,(t=>{t.style.display=""})),e=this.elementRteMoreOptions.querySelectorAll("button[data-align]"),Array.prototype.forEach.call(e,(t=>{t.style.display=""}))}showDefaultToolbar(){this.elementRteTool.style.display="flex",this.rteTool.style.display="none",this.hideAlignButtons(),this.positionToolbar()}click(t){const e=this.dom;let i=this.builder.inspectedElement;this.rteTool.style.display="none",this.elementRteTool.style.display="none";let n=!1;t.hasAttribute("data-noedit")&&(n=!0);let o=!1;t.hasAttribute("data-protected")&&(o=!0);let s=!1,r=!1;t.hasAttribute("data-html")&&(s=!0,i.closest(".is-subblock")&&(r=!0)),this.rteTool.querySelector(".rte-for-text").style.display="flex",this.rteTool.querySelector(".rte-for-icon").style.display="none",this.rteMoreOptions.querySelector(".rte-for-text").style.display="flex",this.rteMoreOptions.querySelector(".rte-for-icon").style.display="none",!s&&!n&&!o||r?("img"===i.tagName.toLowerCase()||e.hasClass(i,"is-social")||e.hasClass(i,"is-rounded-button-medium")||e.hasClass(i,"cell-active"))&&!e.getSelected()?"none"!==this.elementRteTool.style.display&&""!==this.elementRteTool.style.display||(this.elementRteTool.style.display="flex",this.rteTool.style.display="none",this.showAlignButtons(),this.positionToolbar()):e.hasClass(i,"spacer")||"video"===i.tagName.toLowerCase()||e.hasClass(i,"ovl")||t.getAttribute("data-html")&&!r?"none"!==this.elementRteTool.style.display&&""!==this.elementRteTool.style.display||(this.elementRteTool.style.display="flex",this.rteTool.style.display="none",this.hideAlignButtons(),this.positionToolbar()):e.hasClass(i,"icon")?"none"!==this.rteTool.style.display&&""!==this.rteTool.style.display||(this.rteTool.style.display="flex",this.elementRteTool.style.display="none",this.rteTool.querySelector(".rte-for-text").style.display="none",this.rteTool.querySelector(".rte-for-icon").style.display="flex",this.rteMoreOptions.querySelector(".rte-for-text").style.display="none",this.rteMoreOptions.querySelector(".rte-for-icon").style.display="flex",this.positionToolbar()):e.textSelection()?"none"!==this.rteTool.style.display&&""!==this.rteTool.style.display||(this.rteTool.style.display="flex",this.elementRteTool.style.display="none",this.positionToolbar()):"none"!==this.elementRteTool.style.display&&""!==this.elementRteTool.style.display||(this.elementRteTool.style.display="flex",this.rteTool.style.display="none",this.showAlignButtons(),this.positionToolbar()):"none"!==this.elementRteTool.style.display&&""!==this.elementRteTool.style.display||(this.elementRteTool.style.display="flex",this.rteTool.style.display="none",this.hideAlignButtons(),this.positionToolbar()),this.util.saveSelection(),this.getState()}getState(){const t=this.dom;this.builder.doc.queryCommandState("bold")?t.addClass(this.rteTool.querySelector("button[data-command=bold]"),"on"):t.removeClass(this.rteTool.querySelector("button[data-command=bold]"),"on"),this.builder.doc.queryCommandState("italic")?t.addClass(this.rteTool.querySelector("button[data-command=italic]"),"on"):t.removeClass(this.rteTool.querySelector("button[data-command=italic]"),"on"),this.builder.doc.queryCommandState("underline")?t.addClass(this.rteTool.querySelector("button[data-command=underline]"),"on"):t.removeClass(this.rteTool.querySelector("button[data-command=underline]"),"on"),this.builder.doc.queryCommandState("strikethrough")?t.addClass(this.rteFormattingOptions.querySelector("[data-command=strikethrough]"),"on"):t.removeClass(this.rteFormattingOptions.querySelector("[data-command=strikethrough]"),"on"),this.builder.doc.queryCommandState("superscript")?t.addClass(this.rteFormattingOptions.querySelector("[data-command=superscript]"),"on"):t.removeClass(this.rteFormattingOptions.querySelector("[data-command=superscript]"),"on"),this.builder.doc.queryCommandState("subscript")?t.addClass(this.rteFormattingOptions.querySelector("[data-command=subscript]"),"on"):t.removeClass(this.rteFormattingOptions.querySelector("[data-command=subscript]"),"on");let e=t.textSelection();if(!e)return;"uppercase"===e.style.textTransform?t.addClass(this.rteFormattingOptions.querySelector("[data-command=uppercase]"),"on"):t.removeClass(this.rteFormattingOptions.querySelector("[data-command=uppercase]"),"on"),this.builder.doc.queryCommandState("JustifyFull")?t.addClass(this.rteAlignOptions.querySelector("[data-align=justify]"),"on"):t.removeClass(this.rteAlignOptions.querySelector("[data-align=justify]"),"on"),this.builder.doc.queryCommandState("JustifyLeft")?t.addClass(this.rteAlignOptions.querySelector("[data-align=left]"),"on"):t.removeClass(this.rteAlignOptions.querySelector("[data-align=left]"),"on"),this.builder.doc.queryCommandState("JustifyRight")?t.addClass(this.rteAlignOptions.querySelector("[data-align=right]"),"on"):t.removeClass(this.rteAlignOptions.querySelector("[data-align=right]"),"on"),this.builder.doc.queryCommandState("JustifyCenter")?t.addClass(this.rteAlignOptions.querySelector("[data-align=center]"),"on"):t.removeClass(this.rteAlignOptions.querySelector("[data-align=center]"),"on");var i=this.builder.doc.queryCommandValue("FontName").split(",")[0];i=(i=(i=(i=i.replace(/"/g,"")).replace(/'/g,"")).replace(/&quot;/g,"")).trim().toLowerCase();let n=this.rteTool.querySelector("button.rte-fontfamily");if(n=n||this.rteMoreOptions.querySelector("button.rte-fontfamily"),n){const e=this.rteFontFamilyOptions.querySelector("iframe");let n=e.contentDocument||e.contentWindow.document;n&&[].forEach.call(n.querySelectorAll("#divFontList > li"),(e=>{var n=e.getAttribute("data-font-family");(n=(n=(n=n.split(",")[0]).replace(/'/g,"")).trim().toLowerCase())===i&&""!==n?t.addClass(e,"on"):t.removeClass(e,"on")}))}let o=this.rteParagraphOptions.querySelectorAll("[data-block]");Array.prototype.forEach.call(o,(e=>{t.removeClass(e,"on")}));var s=this.builder.doc.queryCommandValue("FormatBlock");"normal"===(s=s.toLowerCase())&&(s="p"),"heading 1"===s&&(s="h1"),"heading 2"===s&&(s="h2"),"heading 3"===s&&(s="h3"),"heading 4"===s&&(s="h4"),"formatted"===s&&(s="pre"),"p"!==s&&"h1"!==s&&"h2"!==s&&"h3"!==s&&"h4"!==s&&"pre"!==s||t.addClass(this.rteParagraphOptions.querySelector('[data-block="'+s+'"]'),"on")}getTextSettingsState(){const t=this.dom,e=this.rteTextSettingOptions,i=t.getSelection();if(!i)return;const n=i.anchorNode;let o;n&&(o=n.nodeType!==Node.TEXT_NODE&&n.nodeType!==Node.COMMENT_NODE?n:n.parentElement);let s=e.querySelectorAll(".rte-fontsize-options button");if(Array.prototype.forEach.call(s,(t=>{t.classList.remove("on")})),o){const i=this.builder.opts.fontSizeClassValues;for(let n=0;n<=i.length-1;n++)if(t.hasClass(o,"size-"+i[n])){const t=e.querySelectorAll(".rte-fontsize-options button");Array.prototype.forEach.call(t,(t=>{let e=t.getAttribute("data-value");parseInt(e)===i[n]&&t.classList.add("on")}))}}if(s=e.querySelectorAll(".rte-fontweight-options button"),Array.prototype.forEach.call(s,(t=>{t.classList.remove("on")})),o){let i=this.builder.cssClasses.fontWeight;for(let n=0;n<Object.keys(i).length;n++){let s=Object.values(i)[n];if(t.hasClass(o,s)){const t=e.querySelectorAll(".rte-fontweight-options button");Array.prototype.forEach.call(t,(t=>{let e,n=t.getAttribute("data-value");s===i.thin&&(e="100"),s===i.extralight&&(e="200"),s===i.light&&(e="300"),s===i.normal&&(e="400"),s===i.medium&&(e="500"),s===i.semibold&&(e="600"),s===i.bold&&(e="700"),s===i.extrabold&&(e="800"),s===i.black&&(e="900"),n===e&&t.classList.add("on")}))}}}s=e.querySelectorAll(".rte-lineheight-options button"),Array.prototype.forEach.call(s,(t=>{t.classList.remove("on")}));const r=t.getParentBlock(o);if(r){let i=this.builder.cssClasses.leading;for(let n=0;n<Object.keys(i).length;n++){let o=Object.values(i)[n];if(t.hasClass(r,o)){const t=e.querySelectorAll(".rte-lineheight-options button");Array.prototype.forEach.call(t,(t=>{let e,n=t.getAttribute("data-value");o===i.leading_10&&(e="1"),o===i.leading_12&&(e="1.2"),o===i.leading_14&&(e="1.4"),o===i.leading_16&&(e="1.6"),o===i.leading_18&&(e="1.8"),o===i.leading_20&&(e="2"),o===i.leading_22&&(e="2.2"),n===e&&t.classList.add("on")}))}}}if(s=e.querySelectorAll(".rte-letterspacing-options button"),Array.prototype.forEach.call(s,(t=>{t.classList.remove("on")})),o){let i=this.builder.cssClasses.tracking;for(let n=0;n<Object.keys(i).length;n++){let s=Object.values(i)[n];if(t.hasClass(o,s)){const t=e.querySelectorAll(".rte-letterspacing-options button");Array.prototype.forEach.call(t,(t=>{let e,n=t.getAttribute("data-value");s===i.tracking_025&&(e="1"),s===i.tracking_050&&(e="2"),n===e&&t.classList.add("on")}))}}}}getIconsStyle(){return`\n            html, body {height:100%}\n            body {overflow:hidden;margin:0;\n                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                font-size:100%; \n                line-height:1.7;\n            }\n            button {\n                border: none;\n                background: transparent;\n                border-radius: 1px;\n            }\n            #divIcons {display:flex;flex-direction:row;flex-wrap:wrap;margin:0;padding:9px 11px 9px 9px;height:100%;overflow-y:scroll !important;box-sizing:border-box;}\n            #divIcons > button {\n                width:38px;height:36px;font-size:14px;cursor:pointer;overflow:hidden;\n                text-align:center;position:relative;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                margin: 1px;\n            }                \n            // #divIcons > button:hover {background:#f5f5f5;}\n\n            #divIcons {\n                background: ${this.builder.styleToolBackground};\n            }\n            #divIcons > button {\n                color: ${this.builder.styleButtonColor};\n            }\n            #divIcons > button * {\n                pointer-events: none;\n            }\n            #divIcons > button svg {\n                fill: ${this.builder.styleButtonSvgFill};\n            }\n\n            #divIcons > button:hover {\n                background: ${this.builder.styleButtonBackgroundHover};\n            }\n            #divIcons > button:focus {\n                // outline: ${this.builder.styleOutlineColor} 2px solid;\n                outline: none;\n                background: ${this.builder.styleButtonBackgroundHover};\n            }\n\n            .dark #divIcons > button {\n                opacity: 0.93;\n            }\n\n            /* Scrollbar for toolbar/RTE, not modal */\n\n            .dark * {\n                scrollbar-width: thin;\n                scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n            }\n            .dark *::-webkit-scrollbar {\n                width: 12px;\n            }\n            .dark *::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            .dark *::-webkit-scrollbar-thumb {\n                background-color:rgba(255, 255, 255, 0.3);\n            } \n\n            .colored-dark * {\n                scrollbar-width: thin;\n                scrollbar-color: rgb(100, 100, 100) auto;\n            }\n            .colored-dark *::-webkit-scrollbar {\n                width: 12px;\n            }\n            .colored-dark *::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            .colored-dark *::-webkit-scrollbar-thumb {\n                background-color:rgb(100, 100, 100);\n            } \n\n            .colored * {\n                scrollbar-width: thin;\n                scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n            }\n            .colored *::-webkit-scrollbar {\n                width: 12px;\n            }\n            .colored *::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            .colored *::-webkit-scrollbar-thumb {\n                background-color: rgba(0, 0, 0, 0.4);\n            } \n\n            .light * {\n                scrollbar-width: thin;\n                scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n            }\n            .light *::-webkit-scrollbar {\n                width: 12px;\n            }\n            .light *::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            .light *::-webkit-scrollbar-thumb {\n                background-color: rgba(0, 0, 0, 0.4);\n            }`}refreshIconsStyle(){this.builder.rte.rteIconOptions.querySelector("iframe").contentWindow.document.querySelector("#mainstyle").innerHTML=this.getIconsStyle()}getIcons(){return'\n        <button><i class="icon ion-alert"> </i></button>\n        <button><i class="icon ion-alert-circled"> </i></button>\n        <button><i class="icon ion-android-add"> </i></button>\n        <button><i class="icon ion-android-add-circle"> </i></button>\n        <button><i class="icon ion-android-alarm-clock"> </i></button>\n        <button><i class="icon ion-android-alert"> </i></button>\n        <button><i class="icon ion-android-apps"> </i></button>\n        <button><i class="icon ion-android-archive"> </i></button>\n        <button><i class="icon ion-android-arrow-back"> </i></button>\n        <button><i class="icon ion-android-arrow-down"> </i></button>\n        <button><i class="icon ion-android-arrow-dropdown"> </i></button>\n        <button><i class="icon ion-android-arrow-dropdown-circle"> </i></button>\n        <button><i class="icon ion-android-arrow-dropleft"> </i></button>\n        <button><i class="icon ion-android-arrow-dropleft-circle"> </i></button>\n        <button><i class="icon ion-android-arrow-dropright"> </i></button>\n        <button><i class="icon ion-android-arrow-dropright-circle"> </i></button>\n        <button><i class="icon ion-android-arrow-dropup"> </i></button>\n        <button><i class="icon ion-android-arrow-dropup-circle"> </i></button>\n        <button><i class="icon ion-android-arrow-forward"> </i></button>\n        <button><i class="icon ion-android-arrow-up"> </i></button>\n        <button><i class="icon ion-android-attach"> </i></button>\n        <button><i class="icon ion-android-bar"> </i></button>\n        <button><i class="icon ion-android-bicycle"> </i></button>\n        <button><i class="icon ion-android-boat"> </i></button>\n        <button><i class="icon ion-android-bookmark"> </i></button>\n        <button><i class="icon ion-android-bulb"> </i></button>\n        <button><i class="icon ion-android-bus"> </i></button>\n        <button><i class="icon ion-android-calendar"> </i></button>\n        <button><i class="icon ion-android-call"> </i></button>\n        <button><i class="icon ion-android-camera"> </i></button>\n        <button><i class="icon ion-android-cancel"> </i></button>\n        <button><i class="icon ion-android-car"> </i></button>\n        <button><i class="icon ion-android-cart"> </i></button>\n        <button><i class="icon ion-android-chat"> </i></button>\n        <button><i class="icon ion-android-checkbox"> </i></button>\n        <button><i class="icon ion-android-checkbox-blank"> </i></button>\n        <button><i class="icon ion-android-checkbox-outline"> </i></button>\n        <button><i class="icon ion-android-checkbox-outline-blank"> </i></button>\n        <button><i class="icon ion-android-checkmark-circle"> </i></button>\n        <button><i class="icon ion-android-clipboard"> </i></button>\n        <button><i class="icon ion-android-close"> </i></button>\n        <button><i class="icon ion-android-cloud"> </i></button>\n        <button><i class="icon ion-android-cloud-circle"> </i></button>\n        <button><i class="icon ion-android-cloud-done"> </i></button>\n        <button><i class="icon ion-android-cloud-outline"> </i></button>\n        <button><i class="icon ion-android-color-palette"> </i></button>\n        <button><i class="icon ion-android-compass"> </i></button>\n        <button><i class="icon ion-android-contact"> </i></button>\n        <button><i class="icon ion-android-contacts"> </i></button>\n        <button><i class="icon ion-android-contract"> </i></button>\n        <button><i class="icon ion-android-create"> </i></button>\n        <button><i class="icon ion-android-delete"> </i></button>\n        <button><i class="icon ion-android-desktop"> </i></button>\n        <button><i class="icon ion-android-document"> </i></button>\n        <button><i class="icon ion-android-done"> </i></button>\n        <button><i class="icon ion-android-done-all"> </i></button>\n        <button><i class="icon ion-android-download"> </i></button>\n        <button><i class="icon ion-android-drafts"> </i></button>\n        <button><i class="icon ion-android-exit"> </i></button>\n        <button><i class="icon ion-android-expand"> </i></button>\n        <button><i class="icon ion-android-favorite"> </i></button>\n        <button><i class="icon ion-android-favorite-outline"> </i></button>\n        <button><i class="icon ion-android-film"> </i></button>\n        <button><i class="icon ion-android-folder"> </i></button>\n        <button><i class="icon ion-android-folder-open"> </i></button>\n        <button><i class="icon ion-android-funnel"> </i></button>\n        <button><i class="icon ion-android-globe"> </i></button>\n        <button><i class="icon ion-android-hand"> </i></button>\n        <button><i class="icon ion-android-hangout"> </i></button>\n        <button><i class="icon ion-android-happy"> </i></button>\n        <button><i class="icon ion-android-home"> </i></button>\n        <button><i class="icon ion-android-image"> </i></button>\n        <button><i class="icon ion-android-laptop"> </i></button>\n        <button><i class="icon ion-android-list"> </i></button>\n        <button><i class="icon ion-android-locate"> </i></button>\n        <button><i class="icon ion-android-lock"> </i></button>\n        <button><i class="icon ion-android-mail"> </i></button>\n        <button><i class="icon ion-android-map"> </i></button>\n        <button><i class="icon ion-android-menu"> </i></button>\n        <button><i class="icon ion-android-microphone"> </i></button>\n        <button><i class="icon ion-android-microphone-off"> </i></button>\n        <button><i class="icon ion-android-more-horizontal"> </i></button>\n        <button><i class="icon ion-android-more-vertical"> </i></button>\n        <button><i class="icon ion-android-navigate"> </i></button>\n        <button><i class="icon ion-android-notifications"> </i></button>\n        <button><i class="icon ion-android-notifications-none"> </i></button>\n        <button><i class="icon ion-android-notifications-off"> </i></button>\n        <button><i class="icon ion-android-open"> </i></button>\n        <button><i class="icon ion-android-options"> </i></button>\n        <button><i class="icon ion-android-people"> </i></button>\n        <button><i class="icon ion-android-person"> </i></button>\n        <button><i class="icon ion-android-person-add"> </i></button>\n        <button><i class="icon ion-android-phone-landscape"> </i></button>\n        <button><i class="icon ion-android-phone-portrait"> </i></button>\n        <button><i class="icon ion-android-pin"> </i></button>\n        <button><i class="icon ion-android-plane"> </i></button>\n        <button><i class="icon ion-android-playstore"> </i></button>\n        <button><i class="icon ion-android-print"> </i></button>\n        <button><i class="icon ion-android-radio-button-off"> </i></button>\n        <button><i class="icon ion-android-radio-button-on"> </i></button>\n        <button><i class="icon ion-android-refresh"> </i></button>\n        <button><i class="icon ion-android-remove"> </i></button>\n        <button><i class="icon ion-android-remove-circle"> </i></button>\n        <button><i class="icon ion-android-restaurant"> </i></button>\n        <button><i class="icon ion-android-sad"> </i></button>\n        <button><i class="icon ion-android-search"> </i></button>\n        <button><i class="icon ion-android-send"> </i></button>\n        <button><i class="icon ion-android-settings"> </i></button>\n        <button><i class="icon ion-android-share"> </i></button>\n        <button><i class="icon ion-android-share-alt"> </i></button>\n        <button><i class="icon ion-android-star"> </i></button>\n        <button><i class="icon ion-android-star-half"> </i></button>\n        <button><i class="icon ion-android-star-outline"> </i></button>\n        <button><i class="icon ion-android-stopwatch"> </i></button>\n        <button><i class="icon ion-android-subway"> </i></button>\n        <button><i class="icon ion-android-sunny"> </i></button>\n        <button><i class="icon ion-android-sync"> </i></button>\n        <button><i class="icon ion-android-textsms"> </i></button>\n        <button><i class="icon ion-android-time"> </i></button>\n        <button><i class="icon ion-android-train"> </i></button>\n        <button><i class="icon ion-android-unlock"> </i></button>\n        <button><i class="icon ion-android-upload"> </i></button>\n        <button><i class="icon ion-android-volume-down"> </i></button>\n        <button><i class="icon ion-android-volume-mute"> </i></button>\n        <button><i class="icon ion-android-volume-off"> </i></button>\n        <button><i class="icon ion-android-volume-up"> </i></button>\n        <button><i class="icon ion-android-walk"> </i></button>\n        <button><i class="icon ion-android-warning"> </i></button>\n        <button><i class="icon ion-android-watch"> </i></button>\n        <button><i class="icon ion-android-wifi"> </i></button>\n        <button><i class="icon ion-aperture"> </i></button>\n        <button><i class="icon ion-archive"> </i></button>\n        <button><i class="icon ion-arrow-down-a"> </i></button>\n        <button><i class="icon ion-arrow-down-b"> </i></button>\n        <button><i class="icon ion-arrow-down-c"> </i></button>\n        <button><i class="icon ion-arrow-expand"> </i></button>\n        <button><i class="icon ion-arrow-graph-down-left"> </i></button>\n        <button><i class="icon ion-arrow-graph-down-right"> </i></button>\n        <button><i class="icon ion-arrow-graph-up-left"> </i></button>\n        <button><i class="icon ion-arrow-graph-up-right"> </i></button>\n        <button><i class="icon ion-arrow-left-a"> </i></button>\n        <button><i class="icon ion-arrow-left-b"> </i></button>\n        <button><i class="icon ion-arrow-left-c"> </i></button>\n        <button><i class="icon ion-arrow-move"> </i></button>\n        <button><i class="icon ion-arrow-resize"> </i></button>\n        <button><i class="icon ion-arrow-return-left"> </i></button>\n        <button><i class="icon ion-arrow-return-right"> </i></button>\n        <button><i class="icon ion-arrow-right-a"> </i></button>\n        <button><i class="icon ion-arrow-right-b"> </i></button>\n        <button><i class="icon ion-arrow-right-c"> </i></button>\n        <button><i class="icon ion-arrow-shrink"> </i></button>\n        <button><i class="icon ion-arrow-swap"> </i></button>\n        <button><i class="icon ion-arrow-up-a"> </i></button>\n        <button><i class="icon ion-arrow-up-b"> </i></button>\n        <button><i class="icon ion-arrow-up-c"> </i></button>\n        <button><i class="icon ion-asterisk"> </i></button>\n        <button><i class="icon ion-at"> </i></button>\n        <button><i class="icon ion-backspace"> </i></button>\n        <button><i class="icon ion-backspace-outline"> </i></button>\n        <button><i class="icon ion-bag"> </i></button>\n        <button><i class="icon ion-battery-charging"> </i></button>\n        <button><i class="icon ion-battery-empty"> </i></button>\n        <button><i class="icon ion-battery-full"> </i></button>\n        <button><i class="icon ion-battery-half"> </i></button>\n        <button><i class="icon ion-battery-low"> </i></button>\n        <button><i class="icon ion-beaker"> </i></button>\n        <button><i class="icon ion-beer"> </i></button>\n        <button><i class="icon ion-bluetooth"> </i></button>\n        <button><i class="icon ion-bonfire"> </i></button>\n        <button><i class="icon ion-bookmark"> </i></button>\n        <button><i class="icon ion-bowtie"> </i></button>\n        <button><i class="icon ion-briefcase"> </i></button>\n        <button><i class="icon ion-bug"> </i></button>\n        <button><i class="icon ion-calculator"> </i></button>\n        <button><i class="icon ion-calendar"> </i></button>\n        <button><i class="icon ion-camera"> </i></button>\n        <button><i class="icon ion-card"> </i></button>\n        <button><i class="icon ion-cash"> </i></button>\n        <button><i class="icon ion-chatbox"> </i></button>\n        <button><i class="icon ion-chatbox-working"> </i></button>\n        <button><i class="icon ion-chatboxes"> </i></button>\n        <button><i class="icon ion-chatbubble"> </i></button>\n        <button><i class="icon ion-chatbubble-working"> </i></button>\n        <button><i class="icon ion-chatbubbles"> </i></button>\n        <button><i class="icon ion-checkmark"> </i></button>\n        <button><i class="icon ion-checkmark-circled"> </i></button>\n        <button><i class="icon ion-checkmark-round"> </i></button>\n        <button><i class="icon ion-chevron-down"> </i></button>\n        <button><i class="icon ion-chevron-left"> </i></button>\n        <button><i class="icon ion-chevron-right"> </i></button>\n        <button><i class="icon ion-chevron-up"> </i></button>\n        <button><i class="icon ion-clipboard"> </i></button>\n        <button><i class="icon ion-clock"> </i></button>\n        <button><i class="icon ion-close"> </i></button>\n        <button><i class="icon ion-close-circled"> </i></button>\n        <button><i class="icon ion-close-round"> </i></button>\n        <button><i class="icon ion-closed-captioning"> </i></button>\n        <button><i class="icon ion-cloud"> </i></button>\n        <button><i class="icon ion-code"> </i></button>\n        <button><i class="icon ion-code-download"> </i></button>\n        <button><i class="icon ion-code-working"> </i></button>\n        <button><i class="icon ion-coffee"> </i></button>\n        <button><i class="icon ion-compass"> </i></button>\n        <button><i class="icon ion-compose"> </i></button>\n        <button><i class="icon ion-connection-bars"> </i></button>\n        <button><i class="icon ion-contrast"> </i></button>\n        <button><i class="icon ion-crop"> </i></button>\n        <button><i class="icon ion-cube"> </i></button>\n        <button><i class="icon ion-disc"> </i></button>\n        <button><i class="icon ion-document"> </i></button>\n        <button><i class="icon ion-document-text"> </i></button>\n        <button><i class="icon ion-drag"> </i></button>\n        <button><i class="icon ion-earth"> </i></button>\n        <button><i class="icon ion-easel"> </i></button>\n        <button><i class="icon ion-edit"> </i></button>\n        <button><i class="icon ion-egg"> </i></button>\n        <button><i class="icon ion-eject"> </i></button>\n        <button><i class="icon ion-email"> </i></button>\n        <button><i class="icon ion-email-unread"> </i></button>\n        <button><i class="icon ion-erlenmeyer-flask"> </i></button>\n        <button><i class="icon ion-erlenmeyer-flask-bubbles"> </i></button>\n        <button><i class="icon ion-eye"> </i></button>\n        <button><i class="icon ion-eye-disabled"> </i></button>\n        <button><i class="icon ion-female"> </i></button>\n        <button><i class="icon ion-filing"> </i></button>\n        <button><i class="icon ion-film-marker"> </i></button>\n        <button><i class="icon ion-fireball"> </i></button>\n        <button><i class="icon ion-flag"> </i></button>\n        <button><i class="icon ion-flame"> </i></button>\n        <button><i class="icon ion-flash"> </i></button>\n        <button><i class="icon ion-flash-off"> </i></button>\n        <button><i class="icon ion-folder"> </i></button>\n        <button><i class="icon ion-fork"> </i></button>\n        <button><i class="icon ion-fork-repo"> </i></button>\n        <button><i class="icon ion-forward"> </i></button>\n        <button><i class="icon ion-funnel"> </i></button>\n        <button><i class="icon ion-gear-a"> </i></button>\n        <button><i class="icon ion-gear-b"> </i></button>\n        <button><i class="icon ion-grid"> </i></button>\n        <button><i class="icon ion-hammer"> </i></button>\n        <button><i class="icon ion-happy"> </i></button>\n        <button><i class="icon ion-happy-outline"> </i></button>\n        <button><i class="icon ion-headphone"> </i></button>\n        <button><i class="icon ion-heart"> </i></button>\n        <button><i class="icon ion-heart-broken"> </i></button>\n        <button><i class="icon ion-help"> </i></button>\n        <button><i class="icon ion-help-buoy"> </i></button>\n        <button><i class="icon ion-help-circled"> </i></button>\n        <button><i class="icon ion-home"> </i></button>\n        <button><i class="icon ion-icecream"> </i></button>\n        <button><i class="icon ion-image"> </i></button>\n        <button><i class="icon ion-images"> </i></button>\n        <button><i class="icon ion-information"> </i></button>\n        <button><i class="icon ion-information-circled"> </i></button>\n        <button><i class="icon ion-ionic"> </i></button>\n        <button><i class="icon ion-ios-alarm"> </i></button>\n        <button><i class="icon ion-ios-alarm-outline"> </i></button>\n        <button><i class="icon ion-ios-albums"> </i></button>\n        <button><i class="icon ion-ios-albums-outline"> </i></button>\n        <button><i class="icon ion-ios-americanfootball"> </i></button>\n        <button><i class="icon ion-ios-americanfootball-outline"> </i></button>\n        <button><i class="icon ion-ios-analytics"> </i></button>\n        <button><i class="icon ion-ios-analytics-outline"> </i></button>\n        <button><i class="icon ion-ios-arrow-back"> </i></button>\n        <button><i class="icon ion-ios-arrow-down"> </i></button>\n        <button><i class="icon ion-ios-arrow-forward"> </i></button>\n        <button><i class="icon ion-ios-arrow-left"> </i></button>\n        <button><i class="icon ion-ios-arrow-right"> </i></button>\n        <button><i class="icon ion-ios-arrow-thin-down"> </i></button>\n        <button><i class="icon ion-ios-arrow-thin-left"> </i></button>\n        <button><i class="icon ion-ios-arrow-thin-right"> </i></button>\n        <button><i class="icon ion-ios-arrow-thin-up"> </i></button>\n        <button><i class="icon ion-ios-arrow-up"> </i></button>\n        <button><i class="icon ion-ios-at"> </i></button>\n        <button><i class="icon ion-ios-at-outline"> </i></button>\n        <button><i class="icon ion-ios-barcode"> </i></button>\n        <button><i class="icon ion-ios-barcode-outline"> </i></button>\n        <button><i class="icon ion-ios-baseball"> </i></button>\n        <button><i class="icon ion-ios-baseball-outline"> </i></button>\n        <button><i class="icon ion-ios-basketball"> </i></button>\n        <button><i class="icon ion-ios-basketball-outline"> </i></button>\n        <button><i class="icon ion-ios-bell"> </i></button>\n        <button><i class="icon ion-ios-bell-outline"> </i></button>\n        <button><i class="icon ion-ios-body"> </i></button>\n        <button><i class="icon ion-ios-body-outline"> </i></button>\n        <button><i class="icon ion-ios-bolt"> </i></button>\n        <button><i class="icon ion-ios-bolt-outline"> </i></button>\n        <button><i class="icon ion-ios-book"> </i></button>\n        <button><i class="icon ion-ios-book-outline"> </i></button>\n        <button><i class="icon ion-ios-bookmarks"> </i></button>\n        <button><i class="icon ion-ios-bookmarks-outline"> </i></button>\n        <button><i class="icon ion-ios-box"> </i></button>\n        <button><i class="icon ion-ios-box-outline"> </i></button>\n        <button><i class="icon ion-ios-briefcase"> </i></button>\n        <button><i class="icon ion-ios-briefcase-outline"> </i></button>\n        <button><i class="icon ion-ios-browsers"> </i></button>\n        <button><i class="icon ion-ios-browsers-outline"> </i></button>\n        <button><i class="icon ion-ios-calculator"> </i></button>\n        <button><i class="icon ion-ios-calculator-outline"> </i></button>\n        <button><i class="icon ion-ios-calendar"> </i></button>\n        <button><i class="icon ion-ios-calendar-outline"> </i></button>\n        <button><i class="icon ion-ios-camera"> </i></button>\n        <button><i class="icon ion-ios-camera-outline"> </i></button>\n        <button><i class="icon ion-ios-cart"> </i></button>\n        <button><i class="icon ion-ios-cart-outline"> </i></button>\n        <button><i class="icon ion-ios-chatboxes"> </i></button>\n        <button><i class="icon ion-ios-chatboxes-outline"> </i></button>\n        <button><i class="icon ion-ios-chatbubble"> </i></button>\n        <button><i class="icon ion-ios-chatbubble-outline"> </i></button>\n        <button><i class="icon ion-ios-checkmark"> </i></button>\n        <button><i class="icon ion-ios-checkmark-empty"> </i></button>\n        <button><i class="icon ion-ios-checkmark-outline"> </i></button>\n        <button><i class="icon ion-ios-circle-filled"> </i></button>\n        <button><i class="icon ion-ios-circle-outline"> </i></button>\n        <button><i class="icon ion-ios-clock"> </i></button>\n        <button><i class="icon ion-ios-clock-outline"> </i></button>\n        <button><i class="icon ion-ios-close"> </i></button>\n        <button><i class="icon ion-ios-close-empty"> </i></button>\n        <button><i class="icon ion-ios-close-outline"> </i></button>\n        <button><i class="icon ion-ios-cloud"> </i></button>\n        <button><i class="icon ion-ios-cloud-download"> </i></button>\n        <button><i class="icon ion-ios-cloud-download-outline"> </i></button>\n        <button><i class="icon ion-ios-cloud-outline"> </i></button>\n        <button><i class="icon ion-ios-cloud-upload"> </i></button>\n        <button><i class="icon ion-ios-cloud-upload-outline"> </i></button>\n        <button><i class="icon ion-ios-cloudy"> </i></button>\n        <button><i class="icon ion-ios-cloudy-night"> </i></button>\n        <button><i class="icon ion-ios-cloudy-night-outline"> </i></button>\n        <button><i class="icon ion-ios-cloudy-outline"> </i></button>\n        <button><i class="icon ion-ios-cog"> </i></button>\n        <button><i class="icon ion-ios-cog-outline"> </i></button>\n        <button><i class="icon ion-ios-color-filter"> </i></button>\n        <button><i class="icon ion-ios-color-filter-outline"> </i></button>\n        <button><i class="icon ion-ios-color-wand"> </i></button>\n        <button><i class="icon ion-ios-color-wand-outline"> </i></button>\n        <button><i class="icon ion-ios-compose"> </i></button>\n        <button><i class="icon ion-ios-compose-outline"> </i></button>\n        <button><i class="icon ion-ios-contact"> </i></button>\n        <button><i class="icon ion-ios-contact-outline"> </i></button>\n        <button><i class="icon ion-ios-copy"> </i></button>\n        <button><i class="icon ion-ios-copy-outline"> </i></button>\n        <button><i class="icon ion-ios-crop"> </i></button>\n        <button><i class="icon ion-ios-crop-strong"> </i></button>\n        <button><i class="icon ion-ios-download"> </i></button>\n        <button><i class="icon ion-ios-download-outline"> </i></button>\n        <button><i class="icon ion-ios-drag"> </i></button>\n        <button><i class="icon ion-ios-email"> </i></button>\n        <button><i class="icon ion-ios-email-outline"> </i></button>\n        <button><i class="icon ion-ios-eye"> </i></button>\n        <button><i class="icon ion-ios-eye-outline"> </i></button>\n        <button><i class="icon ion-ios-fastforward"> </i></button>\n        <button><i class="icon ion-ios-fastforward-outline"> </i></button>\n        <button><i class="icon ion-ios-filing"> </i></button>\n        <button><i class="icon ion-ios-filing-outline"> </i></button>\n        <button><i class="icon ion-ios-film"> </i></button>\n        <button><i class="icon ion-ios-film-outline"> </i></button>\n        <button><i class="icon ion-ios-flag"> </i></button>\n        <button><i class="icon ion-ios-flag-outline"> </i></button>\n        <button><i class="icon ion-ios-flame"> </i></button>\n        <button><i class="icon ion-ios-flame-outline"> </i></button>\n        <button><i class="icon ion-ios-flask"> </i></button>\n        <button><i class="icon ion-ios-flask-outline"> </i></button>\n        <button><i class="icon ion-ios-flower"> </i></button>\n        <button><i class="icon ion-ios-flower-outline"> </i></button>\n        <button><i class="icon ion-ios-folder"> </i></button>\n        <button><i class="icon ion-ios-folder-outline"> </i></button>\n        <button><i class="icon ion-ios-football"> </i></button>\n        <button><i class="icon ion-ios-football-outline"> </i></button>\n        <button><i class="icon ion-ios-game-controller-a"> </i></button>\n        <button><i class="icon ion-ios-game-controller-a-outline"> </i></button>\n        <button><i class="icon ion-ios-game-controller-b"> </i></button>\n        <button><i class="icon ion-ios-game-controller-b-outline"> </i></button>\n        <button><i class="icon ion-ios-gear"> </i></button>\n        <button><i class="icon ion-ios-gear-outline"> </i></button>\n        <button><i class="icon ion-ios-glasses"> </i></button>\n        <button><i class="icon ion-ios-glasses-outline"> </i></button>\n        <button><i class="icon ion-ios-grid-view"> </i></button>\n        <button><i class="icon ion-ios-grid-view-outline"> </i></button>\n        <button><i class="icon ion-ios-heart"> </i></button>\n        <button><i class="icon ion-ios-heart-outline"> </i></button>\n        <button><i class="icon ion-ios-help"> </i></button>\n        <button><i class="icon ion-ios-help-empty"> </i></button>\n        <button><i class="icon ion-ios-help-outline"> </i></button>\n        <button><i class="icon ion-ios-home"> </i></button>\n        <button><i class="icon ion-ios-home-outline"> </i></button>\n        <button><i class="icon ion-ios-infinite"> </i></button>\n        <button><i class="icon ion-ios-infinite-outline"> </i></button>\n        <button><i class="icon ion-ios-information"> </i></button>\n        <button><i class="icon ion-ios-information-empty"> </i></button>\n        <button><i class="icon ion-ios-information-outline"> </i></button>\n        <button><i class="icon ion-ios-ionic-outline"> </i></button>\n        <button><i class="icon ion-ios-keypad"> </i></button>\n        <button><i class="icon ion-ios-keypad-outline"> </i></button>\n        <button><i class="icon ion-ios-lightbulb"> </i></button>\n        <button><i class="icon ion-ios-lightbulb-outline"> </i></button>\n        <button><i class="icon ion-ios-list"> </i></button>\n        <button><i class="icon ion-ios-list-outline"> </i></button>\n        <button><i class="icon ion-ios-location"> </i></button>\n        <button><i class="icon ion-ios-location-outline"> </i></button>\n        <button><i class="icon ion-ios-locked"> </i></button>\n        <button><i class="icon ion-ios-locked-outline"> </i></button>\n        <button><i class="icon ion-ios-loop"> </i></button>\n        <button><i class="icon ion-ios-loop-strong"> </i></button>\n        <button><i class="icon ion-ios-medical"> </i></button>\n        <button><i class="icon ion-ios-medical-outline"> </i></button>\n        <button><i class="icon ion-ios-medkit"> </i></button>\n        <button><i class="icon ion-ios-medkit-outline"> </i></button>\n        <button><i class="icon ion-ios-mic"> </i></button>\n        <button><i class="icon ion-ios-mic-off"> </i></button>\n        <button><i class="icon ion-ios-mic-outline"> </i></button>\n        <button><i class="icon ion-ios-minus"> </i></button>\n        <button><i class="icon ion-ios-minus-empty"> </i></button>\n        <button><i class="icon ion-ios-minus-outline"> </i></button>\n        <button><i class="icon ion-ios-monitor"> </i></button>\n        <button><i class="icon ion-ios-monitor-outline"> </i></button>\n        <button><i class="icon ion-ios-moon"> </i></button>\n        <button><i class="icon ion-ios-moon-outline"> </i></button>\n        <button><i class="icon ion-ios-more"> </i></button>\n        <button><i class="icon ion-ios-more-outline"> </i></button>\n        <button><i class="icon ion-ios-musical-note"> </i></button>\n        <button><i class="icon ion-ios-musical-notes"> </i></button>\n        <button><i class="icon ion-ios-navigate"> </i></button>\n        <button><i class="icon ion-ios-navigate-outline"> </i></button>\n        <button><i class="icon ion-ios-nutrition"> </i></button>\n        <button><i class="icon ion-ios-nutrition-outline"> </i></button>\n        <button><i class="icon ion-ios-paper"> </i></button>\n        <button><i class="icon ion-ios-paper-outline"> </i></button>\n        <button><i class="icon ion-ios-paperplane"> </i></button>\n        <button><i class="icon ion-ios-paperplane-outline"> </i></button>\n        <button><i class="icon ion-ios-partlysunny"> </i></button>\n        <button><i class="icon ion-ios-partlysunny-outline"> </i></button>\n        <button><i class="icon ion-ios-pause"> </i></button>\n        <button><i class="icon ion-ios-pause-outline"> </i></button>\n        <button><i class="icon ion-ios-paw"> </i></button>\n        <button><i class="icon ion-ios-paw-outline"> </i></button>\n        <button><i class="icon ion-ios-people"> </i></button>\n        <button><i class="icon ion-ios-people-outline"> </i></button>\n        <button><i class="icon ion-ios-person"> </i></button>\n        <button><i class="icon ion-ios-person-outline"> </i></button>\n        <button><i class="icon ion-ios-personadd"> </i></button>\n        <button><i class="icon ion-ios-personadd-outline"> </i></button>\n        <button><i class="icon ion-ios-photos"> </i></button>\n        <button><i class="icon ion-ios-photos-outline"> </i></button>\n        <button><i class="icon ion-ios-pie"> </i></button>\n        <button><i class="icon ion-ios-pie-outline"> </i></button>\n        <button><i class="icon ion-ios-pint"> </i></button>\n        <button><i class="icon ion-ios-pint-outline"> </i></button>\n        <button><i class="icon ion-ios-play"> </i></button>\n        <button><i class="icon ion-ios-play-outline"> </i></button>\n        <button><i class="icon ion-ios-plus"> </i></button>\n        <button><i class="icon ion-ios-plus-empty"> </i></button>\n        <button><i class="icon ion-ios-plus-outline"> </i></button>\n        <button><i class="icon ion-ios-pricetag"> </i></button>\n        <button><i class="icon ion-ios-pricetag-outline"> </i></button>\n        <button><i class="icon ion-ios-pricetags"> </i></button>\n        <button><i class="icon ion-ios-pricetags-outline"> </i></button>\n        <button><i class="icon ion-ios-printer"> </i></button>\n        <button><i class="icon ion-ios-printer-outline"> </i></button>\n        <button><i class="icon ion-ios-pulse"> </i></button>\n        <button><i class="icon ion-ios-pulse-strong"> </i></button>\n        <button><i class="icon ion-ios-rainy"> </i></button>\n        <button><i class="icon ion-ios-rainy-outline"> </i></button>\n        <button><i class="icon ion-ios-recording"> </i></button>\n        <button><i class="icon ion-ios-recording-outline"> </i></button>\n        <button><i class="icon ion-ios-redo"> </i></button>\n        <button><i class="icon ion-ios-redo-outline"> </i></button>\n        <button><i class="icon ion-ios-refresh"> </i></button>\n        <button><i class="icon ion-ios-refresh-empty"> </i></button>\n        <button><i class="icon ion-ios-refresh-outline"> </i></button>\n        <button><i class="icon ion-ios-reload"> </i></button>\n        <button><i class="icon ion-ios-reverse-camera"> </i></button>\n        <button><i class="icon ion-ios-reverse-camera-outline"> </i></button>\n        <button><i class="icon ion-ios-rewind"> </i></button>\n        <button><i class="icon ion-ios-rewind-outline"> </i></button>\n        <button><i class="icon ion-ios-rose"> </i></button>\n        <button><i class="icon ion-ios-rose-outline"> </i></button>\n        <button><i class="icon ion-ios-search"> </i></button>\n        <button><i class="icon ion-ios-search-strong"> </i></button>\n        <button><i class="icon ion-ios-settings"> </i></button>\n        <button><i class="icon ion-ios-settings-strong"> </i></button>\n        <button><i class="icon ion-ios-shuffle"> </i></button>\n        <button><i class="icon ion-ios-shuffle-strong"> </i></button>\n        <button><i class="icon ion-ios-skipbackward"> </i></button>\n        <button><i class="icon ion-ios-skipbackward-outline"> </i></button>\n        <button><i class="icon ion-ios-skipforward"> </i></button>\n        <button><i class="icon ion-ios-skipforward-outline"> </i></button>\n        <button><i class="icon ion-ios-snowy"> </i></button>\n        <button><i class="icon ion-ios-speedometer"> </i></button>\n        <button><i class="icon ion-ios-speedometer-outline"> </i></button>\n        <button><i class="icon ion-ios-star"> </i></button>\n        <button><i class="icon ion-ios-star-half"> </i></button>\n        <button><i class="icon ion-ios-star-outline"> </i></button>\n        <button><i class="icon ion-ios-stopwatch"> </i></button>\n        <button><i class="icon ion-ios-stopwatch-outline"> </i></button>\n        <button><i class="icon ion-ios-sunny"> </i></button>\n        <button><i class="icon ion-ios-sunny-outline"> </i></button>\n        <button><i class="icon ion-ios-telephone"> </i></button>\n        <button><i class="icon ion-ios-telephone-outline"> </i></button>\n        <button><i class="icon ion-ios-tennisball"> </i></button>\n        <button><i class="icon ion-ios-tennisball-outline"> </i></button>\n        <button><i class="icon ion-ios-thunderstorm"> </i></button>\n        <button><i class="icon ion-ios-thunderstorm-outline"> </i></button>\n        <button><i class="icon ion-ios-time"> </i></button>\n        <button><i class="icon ion-ios-time-outline"> </i></button>\n        <button><i class="icon ion-ios-timer"> </i></button>\n        <button><i class="icon ion-ios-timer-outline"> </i></button>\n        <button><i class="icon ion-ios-toggle"> </i></button>\n        <button><i class="icon ion-ios-toggle-outline"> </i></button>\n        <button><i class="icon ion-ios-trash"> </i></button>\n        <button><i class="icon ion-ios-trash-outline"> </i></button>\n        <button><i class="icon ion-ios-undo"> </i></button>\n        <button><i class="icon ion-ios-undo-outline"> </i></button>\n        <button><i class="icon ion-ios-unlocked"> </i></button>\n        <button><i class="icon ion-ios-unlocked-outline"> </i></button>\n        <button><i class="icon ion-ios-upload"> </i></button>\n        <button><i class="icon ion-ios-upload-outline"> </i></button>\n        <button><i class="icon ion-ios-videocam"> </i></button>\n        <button><i class="icon ion-ios-videocam-outline"> </i></button>\n        <button><i class="icon ion-ios-volume-high"> </i></button>\n        <button><i class="icon ion-ios-volume-low"> </i></button>\n        <button><i class="icon ion-ios-wineglass"> </i></button>\n        <button><i class="icon ion-ios-wineglass-outline"> </i></button>\n        <button><i class="icon ion-ios-world"> </i></button>\n        <button><i class="icon ion-ios-world-outline"> </i></button>\n        <button><i class="icon ion-ipad"> </i></button>\n        <button><i class="icon ion-iphone"> </i></button>\n        <button><i class="icon ion-ipod"> </i></button>\n        <button><i class="icon ion-jet"> </i></button>\n        <button><i class="icon ion-key"> </i></button>\n        <button><i class="icon ion-knife"> </i></button>\n        <button><i class="icon ion-laptop"> </i></button>\n        <button><i class="icon ion-leaf"> </i></button>\n        <button><i class="icon ion-levels"> </i></button>\n        <button><i class="icon ion-lightbulb"> </i></button>\n        <button><i class="icon ion-link"> </i></button>\n        <button><i class="icon ion-load-a"> </i></button>\n        <button><i class="icon ion-load-b"> </i></button>\n        <button><i class="icon ion-load-c"> </i></button>\n        <button><i class="icon ion-load-d"> </i></button>\n        <button><i class="icon ion-location"> </i></button>\n        <button><i class="icon ion-lock-combination"> </i></button>\n        <button><i class="icon ion-locked"> </i></button>\n        <button><i class="icon ion-log-in"> </i></button>\n        <button><i class="icon ion-log-out"> </i></button>\n        <button><i class="icon ion-loop"> </i></button>\n        <button><i class="icon ion-magnet"> </i></button>\n        <button><i class="icon ion-male"> </i></button>\n        <button><i class="icon ion-man"> </i></button>\n        <button><i class="icon ion-map"> </i></button>\n        <button><i class="icon ion-medkit"> </i></button>\n        <button><i class="icon ion-merge"> </i></button>\n        <button><i class="icon ion-mic-a"> </i></button>\n        <button><i class="icon ion-mic-b"> </i></button>\n        <button><i class="icon ion-mic-c"> </i></button>\n        <button><i class="icon ion-minus"> </i></button>\n        <button><i class="icon ion-minus-circled"> </i></button>\n        <button><i class="icon ion-minus-round"> </i></button>\n        <button><i class="icon ion-model-s"> </i></button>\n        <button><i class="icon ion-monitor"> </i></button>\n        <button><i class="icon ion-more"> </i></button>\n        <button><i class="icon ion-mouse"> </i></button>\n        <button><i class="icon ion-music-note"> </i></button>\n        <button><i class="icon ion-navicon"> </i></button>\n        <button><i class="icon ion-navicon-round"> </i></button>\n        <button><i class="icon ion-navigate"> </i></button>\n        <button><i class="icon ion-network"> </i></button>\n        <button><i class="icon ion-no-smoking"> </i></button>\n        <button><i class="icon ion-nuclear"> </i></button>\n        <button><i class="icon ion-outlet"> </i></button>\n        <button><i class="icon ion-paintbrush"> </i></button>\n        <button><i class="icon ion-paintbucket"> </i></button>\n        <button><i class="icon ion-paper-airplane"> </i></button>\n        <button><i class="icon ion-paperclip"> </i></button>\n        <button><i class="icon ion-pause"> </i></button>\n        <button><i class="icon ion-person"> </i></button>\n        <button><i class="icon ion-person-add"> </i></button>\n        <button><i class="icon ion-person-stalker"> </i></button>\n        <button><i class="icon ion-pie-graph"> </i></button>\n        <button><i class="icon ion-pin"> </i></button>\n        <button><i class="icon ion-pinpoint"> </i></button>\n        <button><i class="icon ion-pizza"> </i></button>\n        <button><i class="icon ion-plane"> </i></button>\n        <button><i class="icon ion-planet"> </i></button>\n        <button><i class="icon ion-play"> </i></button>\n        <button><i class="icon ion-playstation"> </i></button>\n        <button><i class="icon ion-plus"> </i></button>\n        <button><i class="icon ion-plus-circled"> </i></button>\n        <button><i class="icon ion-plus-round"> </i></button>\n        <button><i class="icon ion-podium"> </i></button>\n        <button><i class="icon ion-pound"> </i></button>\n        <button><i class="icon ion-power"> </i></button>\n        <button><i class="icon ion-pricetag"> </i></button>\n        <button><i class="icon ion-pricetags"> </i></button>\n        <button><i class="icon ion-printer"> </i></button>\n        <button><i class="icon ion-pull-request"> </i></button>\n        <button><i class="icon ion-qr-scanner"> </i></button>\n        <button><i class="icon ion-quote"> </i></button>\n        <button><i class="icon ion-radio-waves"> </i></button>\n        <button><i class="icon ion-record"> </i></button>\n        <button><i class="icon ion-refresh"> </i></button>\n        <button><i class="icon ion-reply"> </i></button>\n        <button><i class="icon ion-reply-all"> </i></button>\n        <button><i class="icon ion-ribbon-a"> </i></button>\n        <button><i class="icon ion-ribbon-b"> </i></button>\n        <button><i class="icon ion-sad"> </i></button>\n        <button><i class="icon ion-sad-outline"> </i></button>\n        <button><i class="icon ion-scissors"> </i></button>\n        <button><i class="icon ion-search"> </i></button>\n        <button><i class="icon ion-settings"> </i></button>\n        <button><i class="icon ion-share"> </i></button>\n        <button><i class="icon ion-shuffle"> </i></button>\n        <button><i class="icon ion-skip-backward"> </i></button>\n        <button><i class="icon ion-skip-forward"> </i></button>\n        <button><i class="icon ion-social-android"> </i></button>\n        <button><i class="icon ion-social-android-outline"> </i></button>\n        <button><i class="icon ion-social-angular"> </i></button>\n        <button><i class="icon ion-social-angular-outline"> </i></button>\n        <button><i class="icon ion-social-apple"> </i></button>\n        <button><i class="icon ion-social-apple-outline"> </i></button>\n        <button><i class="icon ion-social-bitcoin"> </i></button>\n        <button><i class="icon ion-social-bitcoin-outline"> </i></button>\n        <button><i class="icon ion-social-buffer"> </i></button>\n        <button><i class="icon ion-social-buffer-outline"> </i></button>\n        <button><i class="icon ion-social-chrome"> </i></button>\n        <button><i class="icon ion-social-chrome-outline"> </i></button>\n        <button><i class="icon ion-social-codepen"> </i></button>\n        <button><i class="icon ion-social-codepen-outline"> </i></button>\n        <button><i class="icon ion-social-css3"> </i></button>\n        <button><i class="icon ion-social-css3-outline"> </i></button>\n        <button><i class="icon ion-social-designernews"> </i></button>\n        <button><i class="icon ion-social-designernews-outline"> </i></button>\n        <button><i class="icon ion-social-dribbble"> </i></button>\n        <button><i class="icon ion-social-dribbble-outline"> </i></button>\n        <button><i class="icon ion-social-dropbox"> </i></button>\n        <button><i class="icon ion-social-dropbox-outline"> </i></button>\n        <button><i class="icon ion-social-euro"> </i></button>\n        <button><i class="icon ion-social-euro-outline"> </i></button>\n        <button><i class="icon ion-social-facebook"> </i></button>\n        <button><i class="icon ion-social-facebook-outline"> </i></button>\n        <button><i class="icon ion-social-foursquare"> </i></button>\n        <button><i class="icon ion-social-foursquare-outline"> </i></button>\n        <button><i class="icon ion-social-freebsd-devil"> </i></button>\n        <button><i class="icon ion-social-github"> </i></button>\n        <button><i class="icon ion-social-github-outline"> </i></button>\n        <button><i class="icon ion-social-google"> </i></button>\n        <button><i class="icon ion-social-google-outline"> </i></button>\n        <button><i class="icon ion-social-googleplus"> </i></button>\n        <button><i class="icon ion-social-googleplus-outline"> </i></button>\n        <button><i class="icon ion-social-hackernews"> </i></button>\n        <button><i class="icon ion-social-hackernews-outline"> </i></button>\n        <button><i class="icon ion-social-html5"> </i></button>\n        <button><i class="icon ion-social-html5-outline"> </i></button>\n        <button><i class="icon ion-social-instagram"> </i></button>\n        <button><i class="icon ion-social-instagram-outline"> </i></button>\n        <button><i class="icon ion-social-javascript"> </i></button>\n        <button><i class="icon ion-social-javascript-outline"> </i></button>\n        <button><i class="icon ion-social-linkedin"> </i></button>\n        <button><i class="icon ion-social-linkedin-outline"> </i></button>\n        <button><i class="icon ion-social-markdown"> </i></button>\n        <button><i class="icon ion-social-nodejs"> </i></button>\n        <button><i class="icon ion-social-octocat"> </i></button>\n        <button><i class="icon ion-social-pinterest"> </i></button>\n        <button><i class="icon ion-social-pinterest-outline"> </i></button>\n        <button><i class="icon ion-social-python"> </i></button>\n        <button><i class="icon ion-social-reddit"> </i></button>\n        <button><i class="icon ion-social-reddit-outline"> </i></button>\n        <button><i class="icon ion-social-rss"> </i></button>\n        <button><i class="icon ion-social-rss-outline"> </i></button>\n        <button><i class="icon ion-social-sass"> </i></button>\n        <button><i class="icon ion-social-skype"> </i></button>\n        <button><i class="icon ion-social-skype-outline"> </i></button>\n        <button><i class="icon ion-social-snapchat"> </i></button>\n        <button><i class="icon ion-social-snapchat-outline"> </i></button>\n        <button><i class="icon ion-social-tumblr"> </i></button>\n        <button><i class="icon ion-social-tumblr-outline"> </i></button>\n        <button><i class="icon ion-social-tux"> </i></button>\n        <button><i class="icon ion-social-twitch"> </i></button>\n        <button><i class="icon ion-social-twitch-outline"> </i></button>\n        <button><i class="icon ion-social-twitter"> </i></button>\n        <button><i class="icon ion-social-twitter-outline"> </i></button>\n        <button><i class="icon ion-social-usd"> </i></button>\n        <button><i class="icon ion-social-usd-outline"> </i></button>\n        <button><i class="icon ion-social-vimeo"> </i></button>\n        <button><i class="icon ion-social-vimeo-outline"> </i></button>\n        <button><i class="icon ion-social-whatsapp"> </i></button>\n        <button><i class="icon ion-social-whatsapp-outline"> </i></button>\n        <button><i class="icon ion-social-windows"> </i></button>\n        <button><i class="icon ion-social-windows-outline"> </i></button>\n        <button><i class="icon ion-social-wordpress"> </i></button>\n        <button><i class="icon ion-social-wordpress-outline"> </i></button>\n        <button><i class="icon ion-social-yahoo"> </i></button>\n        <button><i class="icon ion-social-yahoo-outline"> </i></button>\n        <button><i class="icon ion-social-yen"> </i></button>\n        <button><i class="icon ion-social-yen-outline"> </i></button>\n        <button><i class="icon ion-social-youtube"> </i></button>\n        <button><i class="icon ion-social-youtube-outline"> </i></button>\n        <button><i class="icon ion-soup-can"> </i></button>\n        <button><i class="icon ion-soup-can-outline"> </i></button>\n        <button><i class="icon ion-speakerphone"> </i></button>\n        <button><i class="icon ion-speedometer"> </i></button>\n        <button><i class="icon ion-spoon"> </i></button>\n        <button><i class="icon ion-star"> </i></button>\n        <button><i class="icon ion-stats-bars"> </i></button>\n        <button><i class="icon ion-steam"> </i></button>\n        <button><i class="icon ion-stop"> </i></button>\n        <button><i class="icon ion-thermometer"> </i></button>\n        <button><i class="icon ion-thumbsdown"> </i></button>\n        <button><i class="icon ion-thumbsup"> </i></button>\n        <button><i class="icon ion-toggle"> </i></button>\n        <button><i class="icon ion-toggle-filled"> </i></button>\n        <button><i class="icon ion-transgender"> </i></button>\n        <button><i class="icon ion-trash-a"> </i></button>\n        <button><i class="icon ion-trash-b"> </i></button>\n        <button><i class="icon ion-trophy"> </i></button>\n        <button><i class="icon ion-tshirt"> </i></button>\n        <button><i class="icon ion-tshirt-outline"> </i></button>\n        <button><i class="icon ion-umbrella"> </i></button>\n        <button><i class="icon ion-university"> </i></button>\n        <button><i class="icon ion-unlocked"> </i></button>\n        <button><i class="icon ion-upload"> </i></button>\n        <button><i class="icon ion-usb"> </i></button>\n        <button><i class="icon ion-videocamera"> </i></button>\n        <button><i class="icon ion-volume-high"> </i></button>\n        <button><i class="icon ion-volume-low"> </i></button>\n        <button><i class="icon ion-volume-medium"> </i></button>\n        <button><i class="icon ion-volume-mute"> </i></button>\n        <button><i class="icon ion-wand"> </i></button>\n        <button><i class="icon ion-waterdrop"> </i></button>\n        <button><i class="icon ion-wifi"> </i></button>\n        <button><i class="icon ion-wineglass"> </i></button>\n        <button><i class="icon ion-woman"> </i></button>\n        <button><i class="icon ion-wrench"> </i></button>\n        <button><i class="icon ion-xbox"> </i></button>        \n        '}getIconsHTML(){return`\n        <!DOCTYPE HTML>\n        <html>\n        <head>\n            <meta charset="utf-8">\n            <title>Fonts</title>\n            <meta name="viewport" content="width=device-width, initial-scale=1">\n            <meta name="description" content="">  \n            <link href="${this.builder.assetPath+"ionicons/"}css/ionicons.min.css" rel="stylesheet">\n            <style id="mainstyle">\n                html, body {height:100%}\n                body {overflow:hidden;margin:0;\n                    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n                    font-size:100%; \n                    line-height:1.7;\n                }\n                button {\n                    border: none;\n                    background: transparent;\n                    border-radius: 1px;\n                }\n                #divIcons {display:flex;flex-direction:row;flex-wrap:wrap;margin:0;padding:9px 11px 9px 9px;height:100%;overflow-y:scroll !important;box-sizing:border-box;}\n                #divIcons > button {\n                    width:38px;height:36px;font-size:14px;cursor:pointer;overflow:hidden;\n                    text-align:center;position:relative;\n                    display: flex;\n                    justify-content: center;\n                    align-items: center;\n                    margin: 1px;\n                }                \n                // #divIcons > button:hover {background:#f5f5f5;}\n\n                #divIcons {\n                    background: ${this.builder.styleToolBackground};\n                }\n                #divIcons > button {\n                    color: ${this.builder.styleButtonColor};\n                }\n                #divIcons > button * {\n                    pointer-events: none;\n                }\n                #divIcons > button svg {\n                    fill: ${this.builder.styleButtonSvgFill};\n                }\n\n                #divIcons > button:hover {\n                    background: ${this.builder.styleButtonBackgroundHover};\n                }\n                #divIcons > button:focus {\n                    // outline: ${this.builder.styleOutlineColor} 2px solid;\n                    outline: none;\n                    background: ${this.builder.styleButtonBackgroundHover};\n                }\n\n                .dark #divIcons > button {\n                    opacity: 0.93;\n                }\n\n                /* Scrollbar for toolbar/RTE, not modal */\n\n                .dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(255, 255, 255, 0.3) auto;\n                }\n                .dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .dark *::-webkit-scrollbar-thumb {\n                    background-color:rgba(255, 255, 255, 0.3);\n                } \n\n                .colored-dark * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgb(100, 100, 100) auto;\n                }\n                .colored-dark *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored-dark *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored-dark *::-webkit-scrollbar-thumb {\n                    background-color:rgb(100, 100, 100);\n                } \n\n                .colored * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .colored *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .colored *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .colored *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n\n                .light * {\n                    scrollbar-width: thin;\n                    scrollbar-color: rgba(0, 0, 0, 0.4) auto;\n                }\n                .light *::-webkit-scrollbar {\n                    width: 12px;\n                }\n                .light *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                .light *::-webkit-scrollbar-thumb {\n                    background-color: rgba(0, 0, 0, 0.4);\n                } \n            </style>\n        </head>\n        <body${this.builder.styleDark?' class="dark"':""}${this.builder.styleColored?' class="colored"':""}${this.builder.styleColoredDark?' class="colored-dark"':""}${this.builder.styleLight?' class="light"':""}>\n\n        <div id="divIcons">\n        ${this.getIcons()}\n        </div>\n\n        <script${this.builder.nonce?` nonce="${this.builder.nonce}"`:""}>\n            const setValue = (elm) => {\n                if(!elm.className) elm = elm.childNodes[0];\n                parent._cb.addIcon(elm.className);\n                setTimeout(()=>{\n                    elm.focus();\n\n                },100);\n            }\n\n            let elms = document.querySelectorAll('#divIcons > button');\n            for(var i=0;i<elms.length;i++) {\n                elms[i].addEventListener('click', function(e){\n\n                    setValue(e.target);\n\n                });\n            }\n\n            const handleItemClick = (e) => {\n                e.preventDefault();\n\n                let item = e.target;\n                setValue(item);\n            }\n\n            const handleItemKeyDown = (e) => {\n                e.preventDefault();\n\n                if(e.keyCode === 27) { // escape key\n                    const pop = parent.document.querySelector('.rte-icon-options.active');\n                    if(pop) pop.classList.remove('active');\n                } else if(e.keyCode === 13 || e.keyCode === 32) { // enter or spacebar key\n                    setValue(e.target);\n                } else if ((e.which === 9 && !e.shiftKey)) { // tab key pressed\n                    if(e.target.nextElementSibling) {\n                        e.target.nextElementSibling.focus();\n                    } else {\n                        document.querySelector('#divIcons > button').focus();\n                    }\n                } else if ((e.which === 9 && e.shiftKey)) { // tab key pressed\n                    if(e.target.previousElementSibling) {\n                        e.target.previousElementSibling.focus();\n                    } else {\n                        document.querySelector('#divIcons > button:last-child').focus();\n                    }\n                }\n            }\n            \n            elms = document.querySelectorAll('#divIcons button');\n            elms.forEach(elm=>{\n                elm.addEventListener('keydown', handleItemKeyDown);\n                elm.addEventListener('click', handleItemClick);\n            });\n        <\/script>\n\n        </body>\n        </html>\n                \n        \n        `}addIcon(t){const e=this.dom;if(this.util.restoreSelection(),this.builder.activeIcon){this.builder.uo.saveForUndo();const o=this.builder.opts.fontSizeClassValues;for(var i="",n=0;n<=o.length-1;n++)e.hasClass(this.builder.activeIcon,"size-"+o[n])&&(i="size-"+o[n]);this.builder.activeIcon.className=t+(""!==i?" "+i:""),e.addClass(this.builder.activeIcon,"icon-active"),e.selectElementContents(this.builder.activeIcon),this.util.saveSelection()}else{if(!e.textSelection())return;this.builder.uo.saveForUndo(),this.util.pasteHtmlAtCaret('<i class="'+t+' icon-active"></i>',!0),this.builder.activeIcon=this.builder.doc.querySelector(".icon-active"),e.selectElementContents(this.builder.activeIcon),this.util.saveSelection()}this.builder.opts.onChange(),this.builder.opts.onRender()}clearFont(){this.builder.uo.saveForUndo(),this.applyFont("","","")}applyFont(t,e,i){const n=this.dom;let o;var s=this.builderStuff.querySelector(".is-side.elementstyles");if(n.hasClass(s,"active"))this.builder.uo.saveForUndo(),o=this.builder.inspectedElement,o.style.fontFamily=t,this.builderStuff.querySelector("#inpElmFontFamily").value=t,this.elementStyleEditor.refresh();else{try{let t;this.builder.win.getSelection?(t=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,o=3===t.nodeType?t.parentNode:t,"H1"!==o.tagName&&"H2"!==o.tagName&&"H3"!==o.tagName&&"H4"!==o.tagName&&"H5"!==o.tagName&&"H6"!==o.tagName&&"P"!==o.tagName&&(o=o.parentNode)):this.builder.doc.selection&&(t=this.builder.doc.selection.createRange(),o=this.builder.doc.selection.createRange().parentElement(),"H1"!==o.tagName&&"H2"!==o.tagName&&"H3"!==o.tagName&&"H4"!==o.tagName&&"H5"!==o.tagName&&"H6"!==o.tagName&&"P"!==o.tagName&&(o=o.parentElement()))}catch(t){return}this.builder.uo.saveForUndo();var r=n.getSelected();if(""!==r.trim()&&o.innerText!==r){this.builder.doc.execCommand("fontName",!1,t);for(var l=this.builder.doc.getElementsByTagName("font"),a=0,d=l.length;a<d;++a)l[a].face===t&&(l[a].removeAttribute("face"),l[a].style.fontFamily=t,n.selectElementContents(l[a]))}else""!==r.trim()&&o.innerText,o.style.fontFamily=t}var c=e;c=c?":"+c:"";var u=t.split(",")[0];if("google"===i){var p=!1,h=this.builder.doc.getElementsByTagName("link");for(a=0;a<h.length;a++){var g=h[a].href.toLowerCase();-1!==(g=g.replace(/\+/g," ").replace(/%20/g," ")).indexOf(u.toLowerCase())&&(p=!0)}if(!p){for(var m=o;!n.hasClass(m,"is-builder");)m=m.parentNode;n.appendHtml(m,'<link href="//fonts.googleapis.com/css2?family='+u+c+'" rel="stylesheet" property="stylesheet">')}}if(!this.builder.inspectedElement){if(this.util.saveSelection(),this.builder.isTouchSupport){this.rteTool.querySelector("button").focus()}this.getState()}for(this.builder.opts.onChange(),setTimeout((()=>{this.builder.opts.onChange()}),300),h=this.builder.doc.getElementsByTagName("link"),a=0;a<h.length;a++){if(-1!==(g=h[a].href.toLowerCase()).indexOf("googleapis"))if(-1!==(u=(g=g.replace(/\+/g," ").replace(/%20/g," ")).substr(g.indexOf("family=")+7)).indexOf(":")&&(u=u.split(":")[0]),-1!==u.indexOf("|")&&(u=u.split("|")[0]),this.builder.doc.body.innerHTML.toLowerCase().split(u).length<3){h[a].getAttribute("data-protect")||h[a].setAttribute("data-rel","_del")}}[].forEach.call(this.builder.doc.querySelectorAll('link[data-rel="_del"]'),(function(t){t.parentNode.removeChild(t)}))}setFont(t,e,i,n){const o=this.dom;let s;var r=this.builderStuff.querySelector(".is-side.elementstyles");if(o.hasClass(r,"active"))this.builder.uo.saveForUndo(),s=this.builder.inspectedElement,s.style.fontFamily=t,this.builderStuff.querySelector("#inpElmFontFamily").value=t,this.elementStyleEditor.refresh();else{this.builder.isIE&&this.util.restoreSelection();try{let t;this.builder.win.getSelection?(t=this.builder.win.getSelection().getRangeAt(0).commonAncestorContainer,s=3===t.nodeType?t.parentNode:t,"H1"!==s.tagName&&"H2"!==s.tagName&&"H3"!==s.tagName&&"H4"!==s.tagName&&"H5"!==s.tagName&&"H6"!==s.tagName&&"P"!==s.tagName&&(s=s.parentNode)):this.builder.doc.selection&&(t=this.builder.doc.selection.createRange(),s=this.builder.doc.selection.createRange().parentElement(),"H1"!==s.tagName&&"H2"!==s.tagName&&"H3"!==s.tagName&&"H4"!==s.tagName&&"H5"!==s.tagName&&"H6"!==s.tagName&&"P"!==s.tagName&&(s=s.parentElement()))}catch(t){return}this.builder.uo.saveForUndo();var l=o.getSelected();if(""!==l.trim()&&s.innerText!==l){this.builder.doc.execCommand("fontName",!1,t);for(var a=this.builder.doc.getElementsByTagName("font"),d=0,c=a.length;d<c;++d)a[d].face.replace(/'/g,"")===t.replace(/'/g,"")&&(a[d].removeAttribute("face"),a[d].style.fontFamily=t,o.selectElementContents(a[d]));for(d=0,c=(a=this.builder.doc.querySelectorAll("[face]")).length;d<c;++d){let t=a[d].getAttribute("face");if(-1!==t.indexOf(",")){var u=t.split(",")[0],p=t.split(",")[1];-1!==u.indexOf(" ")&&(t=`'${u}',${p}`)}a[d].style.fontFamily=t,a[d].removeAttribute("face")}}else if(""!==l.trim()&&s.innerText===l){s.style.fontFamily=t;let e=s.querySelectorAll("*");Array.prototype.forEach.call(e,(t=>{""!==t.style.fontFamily&&(t.style.fontFamily="")}))}else s.style.fontFamily=t}var h=e;h=h?":"+h:"";var g="";i&&(g="&display=swap");var m=t.split(",")[0];if(m=m.replace(/'/g,""),"google"===n){let e=!1;if(e=this.checkIfFontCssLinkExists(t),!e){let e=s;for(;!o.hasClass(e,"is-builder");)e=e.parentNode;let i="";if(this.builder.fontPath){const n=t.split(",")[0].toLowerCase().replace(/'/g,"").replace(/"/g,"").replace(/\s/g,"-")+".css";i=this.builder.fontPath+n,o.appendHtml(e,`<link data-name="fontfamily" href="${i}" rel="stylesheet" property="stylesheet">`)}else o.appendHtml(e,'<link href="//fonts.googleapis.com/css2?family='+m+g+h+'" rel="stylesheet" property="stylesheet">')}}if("others"===n){let e=!1;if(e=this.checkIfFontCssLinkExists(t),!e){let e=s;for(;!o.hasClass(e,"is-builder");)e=e.parentNode;let i="";if(this.builder.fontPath){const n=t.split(",")[0].toLowerCase().replace(/'/g,"").replace(/"/g,"").replace(/\s/g,"-")+".css";i=this.builder.fontPath+n,o.appendHtml(e,`<link data-name="fontfamily" href="${i}" rel="stylesheet" property="stylesheet">`)}}}if(!this.builder.inspectedElement){if(this.util.saveSelection(),this.builder.isTouchSupport){this.rteTool.querySelector("button").focus()}this.getState()}this.builder.opts.onChange(),this.cleanupFontCssLink()}cleanupFontCssLink(){const t=[];if(""!==this.builder.opts.page){this.builder.doc.querySelector(this.builder.opts.page).querySelectorAll("*").forEach((function(e){let i=window.getComputedStyle(e).getPropertyValue("font-family");-1===t.indexOf(i)&&t.push(i)}))}else{this.builder.doc.querySelectorAll(this.builder.opts.container).forEach((e=>{e.querySelectorAll("*").forEach((function(e){let i=window.getComputedStyle(e).getPropertyValue("font-family");-1===t.indexOf(i)&&t.push(i)}))}))}let e=this.builder.doc.getElementsByTagName("link");for(let i=0;i<e.length;i++){let n=e[i].href.toLowerCase();if(-1!==n.indexOf("googleapis")){n=n.replace(/\+/g," ").replace(/%20/g," ");let o=n.substr(n.indexOf("family=")+7);-1!==o.indexOf(":")&&(o=o.split(":")[0]),-1!==o.indexOf("|")&&(o=o.split("|")[0]),o=o.replace("&display=swap","");let s=!1;if(t.forEach((t=>{let e=t.split(",")[0].replace(/"/g,"").replace(/'/g,"").toLowerCase();o===e&&(s=!0)})),!s){e[i].getAttribute("data-protect")||e[i].setAttribute("data-rel","_del")}}else if("fontfamily"===e[i].getAttribute("data-name")){let o=!1;if(t.forEach((t=>{const e=t.split(",")[0].replace(/'/g,"").replace(/"/g,"").replace(/\s/g,"-").toLowerCase()+".css";-1===n.toLowerCase().indexOf("/"+e)||(o=!0)})),!o){e[i].getAttribute("data-protect")||e[i].setAttribute("data-rel","_del")}}}[].forEach.call(this.builder.doc.querySelectorAll('link[data-rel="_del"]'),(function(t){t.parentNode.removeChild(t)}))}checkIfFontCssLinkExists(t){let e=!1,i=t.split(",")[0];i=i.replace(/'/g,""),i=i.replace(/"/g,""),i=i.toLowerCase();let n=this.builder.doc.getElementsByTagName("link");for(let t=0;t<n.length;t++){let o=n[t].href.toLowerCase();if(-1!==o.indexOf("googleapis")){if(!this.builder.fontPath){o=o.replace(/\+/g," ").replace(/%20/g," ");let t=o.substr(o.indexOf("family=")+7);-1!==t.indexOf(":")&&(t=t.split(":")[0]),-1!==t.indexOf("|")&&(t=t.split("|")[0]),t=t.replace("&display=swap",""),t===i.toLowerCase()&&(e=!0)}}else if("fontfamily"===n[t].getAttribute("data-name")&&this.builder.fontPath){let t=i.replace(/\s/g,"-").toLowerCase()+".css";-1!==o.toLowerCase().indexOf("/"+t)&&(e=!0)}}return e}positionToolbar(){const t=document.body.clientWidth,e=window.innerHeight;if("left"===this.builder.opts.toolbar||"right"===this.builder.opts.toolbar){let t=this.rteTool.offsetHeight,i=e/2-t/2;this.rteTool.style.left="",this.rteTool.style.top=i+"px",t=this.elementRteTool.offsetHeight,i=e/2-t/2,this.elementRteTool.style.left="",this.elementRteTool.style.top=i+"px"}else{let e=this.rteTool.offsetWidth,i=t/2-e/2;this.rteTool.style.top="",this.rteTool.style.left=i+"px",e=this.elementRteTool.offsetWidth,i=t/2-e/2,this.elementRteTool.style.top="",this.elementRteTool.style.left=i+"px"}}viewZoom(){this.builder.onZoomOpen&&this.builder.onZoomOpen(),this.inpZoomSlider.value=100*this.builder.opts.zoom,document.activeElement&&(this.elmFocus=document.activeElement);const t=this.builderStuff.querySelector(".viewzoom");this.util.showModal(t,!1,(()=>{this.elmFocus&&this.elmFocus.focus()}),!1)}}class jm{constructor(t={},e){this.opts=Object.assign(this,{page:"",container:".container",handler:"saveimage.php",onComplete:function(){},customval:"",stuffPlacement:"#_cbhtml",hiquality:!1},t),this.builder=e;const i=this.builder.dom;this.dom=i,this.count=0;let n=document.querySelector(this.opts.stuffPlacement);n||(n=document.createElement("div"),n.id="_cbhtml",n.className="is-ui",i.appendChild(document.body,n)),this.builderStuff=n}save(){if(""!==this.opts.page){let t=this.builder.doc.querySelector(this.opts.page);this.uploadImages(t)}else{let t=this.builder.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(t,(t=>{this.uploadImages(t)}))}var t=setInterval((()=>{let e=!0;if(""!==this.opts.page){let t=this.builder.doc.querySelector(this.opts.page);e=this.checkImages(t)}else{let t=this.builder.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(t,(t=>{!1===this.checkImages(t)&&(e=!1)}))}e&&(this.opts.onComplete(),window.clearInterval(t))}),2e3)}checkImages(t){const e=t.querySelectorAll("img");let i=!0;return Array.prototype.forEach.call(e,(t=>{let e=t.getAttribute("src");void 0!==e&&!1!==e&&-1!==e.indexOf("base64")&&(i=!1)})),i}uploadImages(t){if(!t)return;const e=t.querySelectorAll("img");Array.prototype.forEach.call(e,(t=>{let e=t.getAttribute("src");if(void 0!==e&&!1!==e&&-1!==e.indexOf("base64"))if(this.opts.onBase64Upload){let i=e;i=i.replace(/^data:image\/(png|jpeg);base64,/,"");let n=t.getAttribute("data-filename");this.opts.onBase64Upload(t,i,n)}else{this.count++;let o=e;if(o=o.replace(/^data:image\/(png|jpeg);base64,/,""),!this.builderStuff.querySelector("#form-"+this.count)){var i='<form id="form-'+this.count+'" target="frame-'+this.count+'" method="post" enctype="multipart/form-data"><input id="hidimg-'+this.count+'" name="hidimg-'+this.count+'" type="hidden" /><input id="hidname-'+this.count+'" name="hidname-'+this.count+'" type="hidden" /><input id="hidtype-'+this.count+'" name="hidtype-'+this.count+'" type="hidden" /><input id="hidcustomval-'+this.count+'" name="hidcustomval-'+this.count+'" type="hidden" /><input name="count" value="'+this.count+'" type="hidden" /><iframe tabindex="0" id="frame-'+this.count+'" name="frame-'+this.count+'" style="width:1px;height:1px;border:none;position:absolute;z-index:-100000;left:-5px;"></iframe></form>';this.builderStuff.insertAdjacentHTML("beforeend",i)}t.setAttribute("id","img-"+this.count),this.builderStuff.querySelector("#hidimg-"+this.count).value=o,this.builderStuff.querySelector("#hidcustomval-"+this.count).value=this.customval;let s=t.getAttribute("data-filename");if(s){let t=s.substr(0,s.lastIndexOf("."))||s;t=t.toLowerCase().replace(/ /g,"-"),this.builderStuff.querySelector("#hidname-"+this.count).value=t}if(this.opts.hiquality)this.builderStuff.querySelector("#hidtype-"+this.count).value="png";else{var n=s.substr(s.lastIndexOf(".")+1);n=n.toLowerCase(),this.builderStuff.querySelector("#hidtype-"+this.count).value="jpg"===n||"jpeg"===n?"jpg":"png"}this.builderStuff.querySelector("#form-"+this.count).setAttribute("action",this.opts.handler+(this.opts.handler.indexOf("?")>=0?"&":"?")+"count="+this.count),this.builderStuff.querySelector("#form-"+this.count).submit()}}))}}const Gm=new o;class Vm{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;let n=i.querySelector(".is-tooltip");if(!n){let t='<div class="is-tooltip"></div>';Gm.appendHtml(i,t),n=i.querySelector(".is-tooltip")}this.tooltip=n}setAll(t){let e;e=t||this.builderStuff;let i=e.querySelectorAll("[data-title]");if(Array.prototype.forEach.call(i,(t=>{this.set(t,0,0)})),this.builder.iframe&&!t){let t=this.builder.contentStuff.querySelectorAll("[data-title]");Array.prototype.forEach.call(t,(t=>{this.set(t,0,0,!0)}))}}set(t,e,i,n){e||(e=0),i||(i=0);let o=this.tooltip;t.addEventListener("mouseover",(s=>{var r=s.relatedTarget;if(this===r||Ym(this,r))return;let l,a,d=window.getComputedStyle(t.parentNode).getPropertyValue("flex-direction"),c=t.getAttribute("data-title");if(o.innerHTML=c,l=t.getBoundingClientRect().top+window.pageYOffset,a=t.getBoundingClientRect().left+window.pageXOffset,n){let e=this.builder.iframe.getBoundingClientRect().top+window.pageYOffset,i=this.builder.iframe.getBoundingClientRect().left+window.pageXOffset;l=t.getBoundingClientRect().top+e,a=t.getBoundingClientRect().left+i}o.style.display="flex",o.style.whiteSpace="nowrap";const u=t.offsetWidth,p=t.offsetHeight;o.style.marginRight="";const h=window.innerWidth;if(o.style.top=l+p+5+e+"px",p<30&&(o.style.top=l+p+2+e+"px"),"column"===d)o.style.top=l+p/2-o.offsetHeight/2+e+"px",o.style.left=a+u+3+i+"px",h-(a+u)<100&&(o.style.left=a-o.offsetWidth-3+i+"px");else{let t=a+u/2-o.offsetWidth/2+i;o.style.left=t+"px";let e=t+o.offsetWidth;if(e>h){let i=e-h;o.style.left=t-i-3+"px",o.offsetHeight>25&&(o.style.marginRight="5px")}t<0&&(o.style.left="3px")}t.hasAttribute("data-tooltip-top")&&(o.style.top=l-o.offsetHeight-3+"px"),t.removeAttribute("title")}),!1),t.addEventListener("mouseout",(e=>{var i=e.relatedTarget;this===i||Ym(this,i)||(t.setAttribute("title",t.getAttribute("data-title")),o.style.display="none")}),!1),t.addEventListener("click",(e=>{var i=e.relatedTarget;this===i||Ym(this,i)||(t.setAttribute("title",t.getAttribute("data-title")),o.style.display="none")}),!1)}set2(t,e,i){e||(e=0),i||(i=0);let n=this.tooltip;t.addEventListener("mouseover",(o=>{var s=o.relatedTarget;if(this===s||Ym(this,s))return;let r=window.getComputedStyle(t.parentNode).getPropertyValue("flex-direction"),l=t.getAttribute("data-title");n.innerHTML=l;const a=t.getBoundingClientRect().top+window.pageYOffset,d=t.getBoundingClientRect().left+window.pageXOffset;n.style.display="flex",n.style.whiteSpace="nowrap";const c=t.offsetWidth,u=t.offsetHeight;n.style.marginRight="";const p=window.innerWidth;if(n.style.top=a+u+5+e+"px",u<30&&(n.style.top=a+u+2+e+"px"),"column"===r)n.style.top=a+u/2-n.offsetHeight/2+e+"px",n.style.left=d+c+3+i+"px",p-(d+c)<100&&(n.style.left=d-n.offsetWidth-3+i+"px");else{let t=d+c/2-n.offsetWidth/2+i;n.style.left=t+"px";let e=t+n.offsetWidth;if(e>p){let i=e-p;n.style.left=t-i-3+"px",n.offsetHeight>25&&(n.style.marginRight="5px")}t<0&&(n.style.left="3px")}t.hasAttribute("data-tooltip-top")&&(n.style.top=a-n.offsetHeight-3+"px"),t.removeAttribute("title")}),!1),t.addEventListener("mouseout",(e=>{var i=e.relatedTarget;this===i||Ym(this,i)||(t.setAttribute("title",t.getAttribute("data-title")),n.style.display="none")}),!1),t.addEventListener("click",(e=>{var i=e.relatedTarget;this===i||Ym(this,i)||(t.setAttribute("title",t.getAttribute("data-title")),n.style.display="none")}),!1)}}function Ym(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}class Xm{constructor(t){this.builder=t,this.arrow=this.builder.lightboxArrow;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n,this.id=this.makeid();let o=`\n\n                <div class="is-lightbox lightbox-edit" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                    <button class="cmd-lightbox-close" title="${e.out("Close")}" type="button">\n                        <svg><use xlink:href="#__${this.id}svgLightboxClose"></use></svg>\n                    </button>\n\n                    <div class="lightbox-content" style="width:100%;">\n                    </div>\n\n                    <button class="cmd-lightbox-prev" title="${e.out("Previous")}" type="button" style="top:50%;left:3px;">\n                        <svg><use xlink:href="#__${this.id}svgLightboxLeft"></use></svg>\n                    </button>\n                    <button class="cmd-lightbox-next" title="${e.out("Next")}" type="button" style="top:50%;left:auto;right:3px">\n                        <svg><use xlink:href="#__${this.id}svgLightboxRight"></use></svg>\n                    </button>\n                </div>\n\n                <svg width="0" height="0" style="position:absolute;display:none;">\n                    <defs>\n                        <symbol viewBox="0 0 24 24" id="__${this.id}svgLightboxClose" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>\n                        </symbol>\n                        <symbol viewBox="0 0 24 24" id="__${this.id}svgLightboxLeft" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                            <polyline points="15 6 9 12 15 18"></polyline>\n                        </symbol>\n                        <symbol viewBox="0 0 24 24" id="__${this.id}svgLightboxRight" stroke-width="0.7" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                            <polyline points="9 6 15 12 9 18"></polyline>\n                        </symbol>\n                    </defs>\n                </svg>\n            `;n.appendHtml(this.builderStuff,o);const s=()=>{let t=document.querySelector(".is-lightbox.lightbox-edit.active");n.removeClass(t,"active");t.querySelector(".cmd-lightbox-close").style.opacity=0,document.body.style.overflowY="",setTimeout((()=>{let e=t.querySelector("iframe");e&&e.setAttribute("src","about:blank");const i=t.querySelector(".lightbox-content");t.querySelector("video")&&(i.innerHTML=""),t.style.display="",this.builder.preserveSelection=!1,this.elmFocus&&this.elmFocus.focus()}),300)},r=()=>{const t=this.getList();let e=document.querySelector(".is-lightbox.lightbox-edit.active"),i=e.getAttribute("data-url");t.forEach((n=>{if(i===n.url){let i;i=(t.indexOf(n)-1)%t.length,-1===i&&(i=t.length-1),this.openThen(t[i]);e.querySelector(".cmd-lightbox-prev").focus()}}))},l=()=>{const t=this.getList();let e=document.querySelector(".is-lightbox.lightbox-edit.active"),i=e.getAttribute("data-url");t.forEach((n=>{if(i===n.url){const i=(t.indexOf(n)+1)%t.length;this.openThen(t[i]);e.querySelector(".cmd-lightbox-next").focus()}}))},a=t=>{27===t.keyCode&&(s(),t.preventDefault()),this.arrow&&(37!==t.which||t.shiftKey||r(),39!==t.which||t.shiftKey||l())};this.builderStuff.querySelectorAll("div.lightbox-edit").forEach((t=>{t.addEventListener("keydown",a);const e=t.querySelector(".cmd-lightbox-close");e.addEventListener("click",(t=>{s(),t.preventDefault(),t.stopImmediatePropagation()})),e.addEventListener("keydown",(t=>{13!==t.keyCode&&32!==t.keyCode||s(),t.preventDefault(),t.stopImmediatePropagation()}));const i=t.querySelector(".cmd-lightbox-prev");i&&i.addEventListener("click",(t=>{r(),t.preventDefault(),t.stopImmediatePropagation()})),i&&i.addEventListener("keydown",(t=>{13!==t.keyCode&&32!==t.keyCode||(r(),t.preventDefault())}));const n=t.querySelector(".cmd-lightbox-next");n&&n.addEventListener("click",(t=>{l(),t.preventDefault(),t.stopImmediatePropagation()})),n&&n.addEventListener("keydown",(t=>{13!==t.keyCode&&32!==t.keyCode||(l(),t.preventDefault())}))}))}openThen(t){"image"===t.type&&(this.programmatically=!0,this.openImage(t.url,t.theme,t.color)),"video"===t.type&&(this.programmatically=!0,this.openVideo(t.url,t.theme,t.color)),"externalvideo"===t.type&&(this.programmatically=!0,this.openExternalVideo(t.url,t.theme,t.color))}openImage(t,e,i){const n=this.dom;if(this.builder.doc.activeElement&&(this.elmFocus=this.builder.doc.activeElement,!this.programmatically)){const t=this.builder.doc.activeElement.closest("[data-gallery]");this.parent=t}this.builder.preserveSelection=!0;let o=document.querySelector(".is-lightbox.lightbox-edit");if(window.frameElement&&!o&&(o=parent.document.querySelector(".is-lightbox.lightbox-edit")),!this.programmatically){const t=this.getList(),e=o.querySelector(".cmd-lightbox-prev");e.style.opacity=0;const i=o.querySelector(".cmd-lightbox-next");i.style.opacity=0,e.style.display="none",i.style.display="none",t.length>1&&this.arrow&&(e.style.display="flex",i.style.display="flex",setTimeout((()=>{o.querySelector(".cmd-lightbox-prev").style.opacity=1;o.querySelector(".cmd-lightbox-next").style.opacity=1}),500));const s=o.querySelector(".cmd-lightbox-close");s.style.opacity=0,setTimeout((()=>{n.addClass(o,"active"),setTimeout((()=>{s.style.opacity=1}),450)}),10)}o.setAttribute("data-url",t),o.classList.remove("lightbox-video"),o.classList.remove("lightbox-externalvideo"),o.classList.add("lightbox-image"),i&&(o.style.backgroundColor=i);const s=o.querySelector(".lightbox-content");this.programmatically?(s.style.transition="all 200ms ease",s.style.opacity="0",setTimeout((()=>{s.innerHTML=`<img src="${t}">`,s.style.opacity="1"}),200)):s.innerHTML=`<img src="${t}">`,"light"===e?(n.addClass(o,"light"),n.removeClass(o,"dark")):(n.addClass(o,"dark"),n.removeClass(o,"light")),o.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),o.focus({preventScroll:!0}),this.programmatically=!1}openVideo(t,e,i){const n=this.dom;if(this.builder.doc.activeElement&&(this.elmFocus=this.builder.doc.activeElement,!this.programmatically)){const t=this.builder.doc.activeElement.closest("[data-gallery]");this.parent=t}this.builder.preserveSelection=!0;let o=document.querySelector(".is-lightbox.lightbox-edit");if(window.frameElement&&!o&&(o=parent.document.querySelector(".is-lightbox.lightbox-edit")),!this.programmatically){const t=this.getList(),e=o.querySelector(".cmd-lightbox-prev");e.style.opacity=0;const i=o.querySelector(".cmd-lightbox-next");i.style.opacity=0,e.style.display="none",i.style.display="none",t.length>1&&this.arrow&&(e.style.display="flex",i.style.display="flex",setTimeout((()=>{o.querySelector(".cmd-lightbox-prev").style.opacity=1;o.querySelector(".cmd-lightbox-next").style.opacity=1}),500));const s=o.querySelector(".cmd-lightbox-close");s.style.opacity=0,setTimeout((()=>{n.addClass(o,"active"),setTimeout((()=>{s.style.opacity=1}),450)}),10)}o.setAttribute("data-url",t),o.classList.add("lightbox-video"),o.classList.remove("lightbox-externalvideo"),o.classList.remove("lightbox-image"),i&&(o.style.backgroundColor=i);const s=o.querySelector(".lightbox-content");this.programmatically?(s.style.transition="all 200ms ease",s.style.opacity="0",setTimeout((()=>{s.innerHTML=`<video playsinline controls autoplay width="100%">\n                    <source src="${t}" type="video/mp4">\n                </video>`,s.style.opacity="1"}),200)):s.innerHTML=`<video playsinline controls autoplay width="100%">\n                <source src="${t}" type="video/mp4">\n            </video>`,"light"===e?(n.addClass(o,"light"),n.removeClass(o,"dark")):(n.addClass(o,"dark"),n.removeClass(o,"light")),o.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),o.focus({preventScroll:!0}),this.programmatically=!1}openExternalVideo(t,e,i){const n=this.dom;if(this.builder.doc.activeElement&&(this.elmFocus=this.builder.doc.activeElement,!this.programmatically)){const t=this.builder.doc.activeElement.closest("[data-gallery]");this.parent=t}this.builder.preserveSelection=!0;let o=document.querySelector(".is-lightbox.lightbox-edit");if(window.frameElement&&!o&&(o=parent.document.querySelector(".is-lightbox.lightbox-edit")),!this.programmatically){const t=this.getList(),e=o.querySelector(".cmd-lightbox-prev");e.style.opacity=0;const i=o.querySelector(".cmd-lightbox-next");i.style.opacity=0,e.style.display="none",i.style.display="none",t.length>1&&this.arrow&&(e.style.display="flex",i.style.display="flex",setTimeout((()=>{o.querySelector(".cmd-lightbox-prev").style.opacity=1;o.querySelector(".cmd-lightbox-next").style.opacity=1}),500));const s=o.querySelector(".cmd-lightbox-close");s.style.opacity=0,setTimeout((()=>{n.addClass(o,"active"),setTimeout((()=>{s.style.opacity=1}),450)}),10)}o.setAttribute("data-url",t),o.classList.remove("lightbox-video"),o.classList.add("lightbox-externalvideo"),o.classList.remove("lightbox-image"),i&&(o.style.backgroundColor=i),"light"===e?(n.addClass(o,"light"),n.removeClass(o,"dark")):(n.addClass(o,"dark"),n.removeClass(o,"light"));const s=o.querySelector(".lightbox-content");if(this.programmatically)s.style.transition="all 200ms ease",s.style.opacity="0",setTimeout((()=>{s.innerHTML='<div class="embed-responsive embed-responsive-16by9" style="width:100%;">\n                    <iframe width="560" height="315" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n                </div>',s.style.opacity="1";const e=o.querySelector("iframe");""!==(t=this.getIframeVideoUrl(t))&&e.setAttribute("src",t)}),200);else{s.innerHTML='<div class="embed-responsive embed-responsive-16by9" style="width:100%;">\n                <iframe width="560" height="315" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n            </div>';const e=o.querySelector("iframe");""!==(t=this.getIframeVideoUrl(t))&&e.setAttribute("src",t)}o.style.display="flex",window.frameElement||(document.body.style.overflowY="hidden"),o.focus({preventScroll:!0}),this.programmatically=!1}getIframeVideoUrl(t){let e=t.match(/^.*(?:https?:)?(?:\/\/)?(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/\S*?[^\w\s-])((?!videoseries)[\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/),i=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)\/?/.exec(t);if(null===e&&null===i||-1!==t.indexOf("player.vimeo.com")||-1!==t.indexOf("youtube.com/embed/")||-1!==t.indexOf("youtube-nocookie.com/embed/"))-1!==t.indexOf("youtube-nocookie.com/embed/")&&-1===t.indexOf("?")&&(t+="?rel=0&autoplay=1&color=white");else{if(null!==e){t="https://www.youtube-nocookie.com/embed/"+e[1]+"?rel=0&autoplay=1&color=white"}if(null!==i&&i.length>=7){t="https://player.vimeo.com/video/"+i[6]}}return t}makeid(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<2;i++)t+=e.charAt(Math.floor(Math.random()*e.length));let i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let t=0;t<5;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return t+i}getList(){const t=[];let e=this.builder.doc.querySelectorAll(".block-click,.button-click,.is-lightbox");return this.parent&&(e=this.parent.querySelectorAll(".block-click,.button-click,.is-lightbox")),e.forEach((e=>{if(!this.parent&&e.closest("[data-gallery"))return;let i,n;"a"===e.tagName.toLowerCase()?(i=e.getAttribute("href"),n=i.split(".").pop().split("?")[0].split("#")[0]):e.getAttribute("data-modal-url")&&(i=e.getAttribute("data-modal-url"),n=i.split(".").pop().split("?")[0].split("#")[0]);let o=e.getAttribute("data-modal-theme");o||(o="light");const s=e.getAttribute("data-modal-color");i&&("jpg"===n||"jpeg"===n||"png"===n||"gif"===n||"webm"===n||"webp"===n?t.push({type:"image",url:i,theme:o,color:s}):"mp4"===n?t.push({type:"video",url:i,theme:"dark",color:s}):-1===i.toLowerCase().indexOf("youtube.com")&&-1===i.toLowerCase().indexOf("youtube-nocookie.com")&&-1===i.toLowerCase().indexOf("vimeo.com")||t.push({type:"externalvideo",url:i,theme:"dark",color:s})),e.getAttribute("data-modal-image")?(i=e.getAttribute("data-modal-image"),t.push({type:"image",url:i,theme:o,color:s})):e.getAttribute("data-modal-video")?(i=e.getAttribute("data-modal-video"),t.push({type:"video",url:i,theme:"dark",color:s})):e.getAttribute("data-modal-externalvideo")&&(i=e.getAttribute("data-modal-externalvideo"),t.push({type:"externalvideo",url:i,theme:"dark",color:s}))})),t}}class Zm{constructor(t){this.builder=t;const e=this.builder.util;this.util=e;const i=this.builder.dom;this.dom=i;const n=this.builder.builderStuff;this.builderStuff=n;let o=n.querySelector(".is-modal.shortcuts");if(!o){let t=`<div class="is-modal shortcuts" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content">\n                <div class="is-modal-bar is-draggable">${e.out("Shortcuts")}</div>\n\n                <table>\n                    <tr>\n                        <td class="shortcut-title" colspan="2">${e.out("Basic")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Copy")}</td><td>⌘C</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Cut")}</td><td>⌘X</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Paste")}</td><td>⌘V</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Undo")}</td><td>⌘Z</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Redo")}</td><td>⌘Shift+Z</td>\n                    </tr>\n\n                    <tr>\n                        <td class="shortcut-title" colspan="2">${e.out("Editing")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Bold")}</td><td>⌘B</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Italic")}</td><td>⌘I</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Underline")}</td><td>⌘U</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Strikethrough")}</td><td>⌘S</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Indent")}</td><td>⌘]</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Outdent")}</td><td>⌘[</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Insert Link")}</td><td>⌘K</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Insert Image")}</td><td>⌘P</td>\n                    </tr>\n\n                    <tr>\n                        <td class="shortcut-title" colspan="2">${e.out("Navigation")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Show shortcut info")}</td><td>⌘/</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Navigate to the next control")}</td><td>${e.out("Tab")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Navigate to the previous control")}</td><td>${e.out("Shift")}+${e.out("Tab")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Select control that has focus")}<br></td><td>${e.out("Enter")} ${e.out("or")} ${e.out("Spacebar")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Select option that has focus (eg. checkbox)")}<br></td><td>${e.out("Spacebar")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Move up in selection list or menu")}</td><td>${e.out("Up arrow")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Move down in selection list or menu")}</td><td>${e.out("Down arrow")}</td>\n                    </tr>\n                    <tr>\n                        <td>${e.out("Close modal or popup")}</td><td>${e.out("Esc")}</td>\n                    </tr>\n                </table>\n            \n            </div>\n            </div>\n            `;i.appendHtml(n,t),o=n.querySelector(".is-modal.shortcuts");let s=o.querySelector(".is-modal-close");i.addEventListener(s,"click",(()=>{i.removeClass(o,"active")}))}this.shortcutModal=o}open(){this.builder.util.showModal(this.shortcutModal,!1)}}const Km=new o;class Qm{constructor(){const t=()=>{let t=document.querySelectorAll(".is-tabs-more");Array.prototype.forEach.call(t,(t=>{t.style.display="none",t.setAttribute("aria-expanded",!1)})),document.removeEventListener("click",e)},e=e=>{e.target.closest(".is-tab-more")||e.target.closest("[data-menu]")||t()},i=i=>{const n=i.parentNode.getAttribute("data-group"),o=i.getAttribute("data-menu");if(o){document.addEventListener("click",e),i.setAttribute("aria-expanded",!0),document.querySelector("#"+o).style.display="block";let t=document.querySelector('.is-tabs-more[data-group="'+n+'"] > li.active');if(t)t.focus();else{document.querySelector('.is-tabs-more[data-group="'+n+'"]').focus()}return!1}if(Km.hasClass(i,"active"))return!1;const s=i.getAttribute("data-content");if(!s)return!1;let r=document.querySelectorAll('.is-tabs[data-group="'+n+'"] > a');Array.prototype.forEach.call(r,(t=>{Km.removeClass(t,"active")})),r=document.querySelectorAll('.is-tabs-more[data-group="'+n+'"] > li'),Array.prototype.forEach.call(r,(t=>{Km.removeClass(t,"active")})),Km.addClass(i,"active");let l=document.querySelectorAll('.is-tab-content[data-group="'+n+'"]');Array.prototype.forEach.call(l,(t=>{t.style.display="none",Km.removeClass(t,"active")}));const a=document.querySelector("#"+s);return a.style.display="flex",Km.addClass(a,"active"),document.querySelector(".is-tabs-more").style.display="none",t(),this.setupTabKey(a),!1};let n=document.querySelectorAll(".is-tabs a");Array.prototype.forEach.call(n,(t=>{t.addEventListener("keydown",(e=>{if(e.preventDefault(),39===e.which&&e.target.nextElementSibling)e.target.nextElementSibling.focus();else if(37===e.which&&e.target.previousElementSibling)e.target.previousElementSibling.focus();else if(13===e.keyCode||32===e.keyCode)i(e.target);else if(9===e.which&&!e.shiftKey){let e=[];const i=t.parentNode.getAttribute("data-group");if(t.parentNode.parentNode.querySelector('.is-tab-content[data-group="'+i+'"].active').querySelectorAll('.is-tabs.active, a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]').forEach((t=>{e.push(t)})),0===e.length)return;e[0].focus()}})),t.addEventListener("click",(t=>{t.preventDefault(),i(t.target)}))}));const o=document.querySelectorAll(".is-tabs-more");Array.prototype.forEach.call(o,(e=>{e.addEventListener("keydown",(i=>{i.preventDefault(),40===i.keyCode&&i.target.nextElementSibling?e.querySelector("li").focus():27===i.keyCode&&t()}))})),n=document.querySelectorAll(".is-tabs-more li"),Array.prototype.forEach.call(n,(e=>{e.addEventListener("keydown",(n=>{if(n.preventDefault(),n.stopImmediatePropagation(),38===n.keyCode&&n.target.previousElementSibling)n.target.previousElementSibling.focus();else if(40===n.keyCode&&n.target.nextElementSibling)n.target.nextElementSibling.focus();else if(27===n.keyCode)t();else if((13===n.keyCode||32===n.keyCode)&&(i(n.target),n.target.closest(".is-tabs-more"))){const t=e.parentNode.getAttribute("id"),i=document.querySelector('.is-tabs a[data-menu="'+t+'"]');i&&i.focus()}})),e.addEventListener("click",(t=>{if(t.preventDefault(),i(t.target),t.target.closest(".is-tabs-more")){const t=e.parentNode.getAttribute("id"),i=document.querySelector('.is-tabs a[data-menu="'+t+'"]');i&&i.focus()}}))}))}setupTabKey(t){let e=[];if(t.querySelectorAll('.is-tabs.active, a[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]').forEach((t=>{e.push(t)})),0===e.length)return;let i=e[0];e[e.length-1].addEventListener("keydown",(e=>{if(9===e.which&&!e.shiftKey){e.preventDefault();let i=t.getAttribute("id");const n=document.querySelector('li[data-content="'+i+'"],a[data-content="'+i+'"]');if(n.closest(".is-tabs-more")){i=n.parentNode.getAttribute("id");const t=document.querySelector('.is-tabs a[data-menu="'+i+'"]');t&&t.focus()}else n.focus()}})),i.addEventListener("keydown",(e=>{if(9===e.which&&e.shiftKey){e.preventDefault();let i=t.getAttribute("id");const n=document.querySelector('li[data-content="'+i+'"],a[data-content="'+i+'"]');if(n.closest(".is-tabs-more")){i=n.parentNode.getAttribute("id");const t=document.querySelector('.is-tabs a[data-menu="'+i+'"]');t&&t.focus()}else n.focus()}}))}}class Jm{constructor(t={}){this.opts=Object.assign(this,{treshholds:13,minWidth:50,minHeight:50,adj:4,onResize:function(){},resizeHeight:!1},t);const e=this.pane,i=e.closest(".is-builder");let n=this.getScale(i);if(!n){const t=i.closest(".is-wrapper");n=this.getScale(t)}const o=this.minWidth,s=this.minHeight,r=this.treshholds,l=this.adj;let a,d,c,u,p,h,g,m=null,f=!1;const b=t=>{p=this.pane.getBoundingClientRect(),h=t.clientX-p.left,g=t.clientY-p.top,u=g<r,c=h<r,a=h>=p.width-r,d=g>=p.height-r},v=t=>{if(b(t),t.target.closest(".glide__arrows"))return!1;const e=a||d||u||c;m={x:h,y:g,cx:t.clientX,cy:t.clientY,w:p.width,h:p.height,isResizing:e,onTopEdge:u,onLeftEdge:c,onRightEdge:a,onBottomEdge:d}},y=t=>{v(t)},x=t=>{v(t.touches[0])};let w;function S(t){if(b(t),w=t,f=!0,m&&m.isResizing)return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1}const _=t=>{S(t.touches[0])},C=t=>{let e=!!m&&m.isResizing;b(t),m=null,e&&this.resizeEnd&&this.resizeEnd()},k=t=>{0==t.touches.length&&C(t.changedTouches[0])};this.onMouseDown=y,this.onMove=S,this.onUp=C,this.onTouchDown=x,this.onTouchMove=_,this.onTouchEnd=k,e.addEventListener("mousedown",y),e.ownerDocument.addEventListener("mousemove",S),e.ownerDocument.addEventListener("mouseup",C),e.addEventListener("touchstart",x),e.ownerDocument.addEventListener("touchmove",_),e.ownerDocument.addEventListener("touchend",k);const E=()=>{if(requestAnimationFrame(E),f)if(f=!1,m&&m.isResizing){let t,i;if(this.resizeHeight&&m.onBottomEdge&&(i=Math.max(g/n,s)+l,e.style.height=i+"px"),m.onRightEdge){let i=Math.max(w.clientX-m.cx+m.w,o);i>o&&(t=i/n,e.style.width=t+"px")}if(m.onLeftEdge){let i=Math.max(m.cx-w.clientX+m.w,o);i>o&&(t=i/n,e.style.width=t+"px")}this.onResize(t,i)}else a&&d?this.resizeHeight&&(e.style.cursor="nwse-resize"):d&&c?this.resizeHeight&&(e.style.cursor="nesw-resize"):a||c?e.style.cursor="ew-resize":d?this.resizeHeight&&(e.style.cursor="ns-resize"):e.style.cursor=""};E()}getScale(t){let e=window.getComputedStyle(t).transform;if("none"===e)return!1;let i=e.split("(")[1];i=i.split(")")[0],i=i.split(",");let n=i[0],o=i[1];return Math.sqrt(n*n+o*o)}destroy(){const t=this.pane;t.removeEventListener("mousedown",this.onMouseDown),t.ownerDocument.removeEventListener("mousemove",this.onMove),t.ownerDocument.removeEventListener("mouseup",this.onUp),t.removeEventListener("touchstart",this.onTouchDown),t.ownerDocument.removeEventListener("touchmove",this.onTouchMove),t.ownerDocument.removeEventListener("touchend",this.onTouchEnd),t.style.cursor=""}}class tf{constructor(t,e,i={}){this.opts=Object.assign(this,{filterSiblingClass:"is-row-tool"},i),this.builder=e,this.element=t}enable(){const t=this.element,e=t.parentNode;this.resize=new Jm({pane:t,resizeHeight:this.builder.resizeHeight,onResize:(i,n)=>{this.builder.util.hideControls();let o=1;if(Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&o++})),i){t.style.flex="none",t.style.width=`${i}px`;const n=(()=>{let i=0;return Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&(i+=e.offsetWidth)})),e.offsetWidth-i})();parseInt(t.style.width)>n?(Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&2===o&&(e.getAttribute("data-module")||(e.style.width="100%",e.style.flex=""))})),1===o&&(t.style.width="100%")):Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&""===e.style.width&&(e.getAttribute("data-module")||(e.style.width="100%"),e.style.flex="")}))}n&&(t.style.height=`${n}px`,t.style.minHeight="")},resizeEnd:()=>{let i=1;if(Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&i++})),t.style.width){t.style.width=t.offsetWidth+"px";let n=parseInt(t.style.width)/e.offsetWidth*100;const o=(()=>{let i=0;return Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e.classList.contains("row-tool")||e!==t&&(i+=e.offsetWidth)})),e.offsetWidth-i})();parseInt(t.style.width)>o&&Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&2===i&&(e.getAttribute("data-module")||(e.style.width="100%",e.style.flex=""))}));let s=0,r=0;Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||(e===t?r=e.offsetWidth:s+=e.offsetWidth)}));let l=e.offsetWidth-s;r>l&&(n=l/e.offsetWidth*100),t.style.width=n+"%",Array.from(t.parentNode.children).map((t=>{if(!t.classList.contains("is-row-tool")&&!t.classList.contains("is-rowadd-tool")&&!t.classList.contains("is-col-tool")&&t.getAttribute("data-module")){let i=t.offsetWidth/e.offsetWidth*100;t.style.width=i+"%",t.style.flex="none",this.builder.util.refreshModuleLayout(t)}}))}t.style.height&&(t.style.minHeight=t.style.height,t.style.height="",Array.from(t.parentNode.children).map((e=>{e.classList.contains("is-row-tool")||e.classList.contains("is-rowadd-tool")||e.classList.contains("is-col-tool")||e!==t&&(e.style.height="",e.style.minHeight="")}))),this.builder.opts.onChange()}})}destroy(){this.resize.destroy()}}class ef{constructor(t){this.builder=t;const e=t.util,i=`<div class="is-tool is-column-tool">\n            <button type="button" tabindex="-1" title="${e.out("Add")}" class="cell-add"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            <button type="button" tabindex="-1" title="${e.out("More")}" class="cell-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n            <button type="button" tabindex="-1" title="${e.out("Delete")}" class="cell-remove"><svg class="is-icon-flex" style="margin-left:-1px"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n        </div>\n        <div class="is-tool is-element-tool">\n            <button type="button" tabindex="-1" title="${e.out("Add")}" class="elm-add"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            <button type="button" tabindex="-1" title="${e.out("More")}" class="elm-more"><svg class="is-icon-flex"><use xlink:href="#ion-more"></use></svg></button>\n            <button type="button" tabindex="-1" title="${e.out("Delete")}" class="elm-remove"><svg class="is-icon-flex" style="margin-left:-1px"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            <button type="button" tabindex="-1" title="${e.out("Settings")}" class="elm-settings"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n\n        <div id="divButtonTool" class="is-tool">\n            <button title="${e.out("Edit Button")}" data-title="${e.out("Edit Button")}" class="button-edit"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-android-create"></use></svg></button>\n            <button title="${e.out("Duplicate")}" data-title="${e.out("Duplicate")}" class="button-duplicate"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n            <button title="${e.out("Delete")}" data-title="${e.out("Delete")}" class="button-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n        </div>\n        <div class="is-tool is-code-tool">\n            <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        <div id="divLinkTool" class="is-tool">\n            <button title="${e.out("Edit Button")}" data-title="${e.out("Edit Button")}" class="link-button-edit" style="display:none;"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-android-create"></use></svg></button>\n            <button title="${e.out("Link")}" data-title="${e.out("Link")}" class="link-edit"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-link"></use></svg></button>\n            <button title="${e.out("Duplicate")}" data-title="${e.out("Duplicate")}" class="link-duplicate"><svg class="is-icon-flex" style="width:11px;height:11px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n            <button title="${e.out("Delete")}" data-title="${e.out("Delete")}" class="link-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n        </div>\n        <div class="is-tool is-iframe-tool">\n            <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        <div class="is-tool is-module-tool">\n            <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        <div id="divSpacerTool" class="is-tool is-spacer-tool">\n            <button title="${e.out("Decrease")}" data-value="-"><svg class="is-icon-flex"><use xlink:href="#ion-ios-minus-empty"></use></svg></button>\n            <button title="${e.out("Increase")}" data-value="+" style="border-left: none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n        </div>\n        <div class="is-tool is-table-tool">\n            <button title="${e.out("Settings")}" style="width:40px;height:40px;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        <div class="is-tool is-video-tool">\n            <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:40px;height:40px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        <div class="is-tool is-audio-tool">\n            <button title="${e.out("Settings")}" data-title="${e.out("Settings")}" style="width:37px;height:37px;background:none;"><svg class="is-icon-flex"><use xlink:href="#ion-ios-gear"></use></svg></button>\n        </div>\n        \n\n        <div class="is-locked-indicator">\n            <svg class="is-icon-flex"><use xlink:href="#icon-lock"></use></svg>\n        </div>\n\n        <svg width="0" height="0" style="position:absolute;display:none;">\n            <defs>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-left"><path d="M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-right"><path d="M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-plus-outline"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z"></path><path d="M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-image"><path d="M368 224c26.5 0 48-21.5 48-48s-21.5-48-48-48-48 21.5-48 48 21.5 48 48 48z"></path><path d="M452 64H60c-15.6 0-28 12.7-28 28.3v327.4c0 15.6 12.4 28.3 28 28.3h392c15.6 0 28-12.7 28-28.3V92.3c0-15.6-12.4-28.3-28-28.3zM348.9 261.7c-3-3.5-7.6-6.2-12.8-6.2-5.1 0-8.7 2.4-12.8 5.7L304.6 277c-3.9 2.8-7 4.7-11.5 4.7-4.3 0-8.2-1.6-11-4.1-1-.9-2.8-2.6-4.3-4.1L224 215.3c-4-4.6-10-7.5-16.7-7.5-6.7 0-12.9 3.3-16.8 7.8L64 368.2V107.7c1-6.8 6.3-11.7 13.1-11.7h357.7c6.9 0 12.5 5.1 12.9 12l.3 260.4-99.1-106.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-photos-outline"><path d="M96 128v320h384V128H96zm368 304H112V144h352v288z"></path><path d="M32 64v320h48v-16H48V80h352v32h16V64z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-settings-strong"><path d="M32 376h283.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32h-91.35c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32M32 240h91.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32H196.65c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32M32 104h283.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32h-91.35c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-settings"><path d="M352 104c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM352 376c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM160 240c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM207.32 248H480v16H207.32c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM112 256c0 2.727.24 5.396.68 8H32v-16h80.68a47.955 47.955 0 0 0-.68 8zM399.32 384H480v16h-80.68c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM304 392c0 2.727.24 5.396.68 8H32v-16h272.68a47.955 47.955 0 0 0-.68 8zM399.32 112H480v16h-80.68c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM304.68 112c-.439 2.604-.68 5.273-.68 8s.24 5.396.68 8H32v-16h272.68z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-options"><path d="M32 384h272v32H32zM400 384h80v32h-80zM384 447.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path><g><path d="M32 240h80v32H32zM208 240h272v32H208zM192 303.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path></g><g><path d="M32 96h272v32H32zM400 96h80v32h-80zM384 159.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-list-number"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-1043.45,1024 C-1039.25,946.283 -1023.18,878.648 -995.249,821.096 C-967.313,763.544 -912.806,711.242 -831.728,664.192 L-710.742,594.247 C-656.55,562.74 -618.532,535.854 -596.687,513.589 C-562.24,478.722 -545.016,438.813 -545.016,393.863 C-545.016,341.352 -560.769,299.658 -592.276,268.781 C-623.783,237.904 -665.792,222.466 -718.304,222.466 C-796.02,222.466 -849.792,251.873 -879.619,310.685 C-895.582,342.192 -904.404,385.882 -906.084,441.754 L-1021.4,441.754 C-1020.14,363.197 -1005.65,299.133 -977.92,249.562 C-928.769,162.183 -842.02,118.494 -717.673,118.494 C-614.331,118.494 -538.82,146.43 -491.139,202.302 C-443.459,258.174 -419.619,320.347 -419.619,388.822 C-419.619,461.078 -445.034,522.831 -495.865,574.082 C-525.272,603.909 -577.993,640.037 -654.03,682.466 L-740.358,730.356 C-781.527,753.041 -813.874,774.676 -837.399,795.26 C-879.408,831.808 -905.874,872.347 -916.797,916.877 L-424.03,916.877 L-424.03,1024 L-1043.45,1024 Z "  /><path d="M-922.391,-764.384 L-922.391,-851.343 C-840.474,-859.324 -783.341,-872.662 -750.994,-891.356 C-718.647,-910.05 -694.492,-954.265 -678.529,-1024 L-589.049,-1024 L-589.049,-125.425 L-710.035,-125.425 L-710.035,-764.384 L-922.391,-764.384 Z "  /><path d="M-198.618,-510.942 L-198.618,-667.156 L1004.57,-667.156 L1004.57,-510.942 L-198.618,-510.942 Z "  /><path d="M-198.618,78.1071 L-198.618,-78.1071 L1004.57,-78.1071 L1004.57,78.1071 L-198.618,78.1071 Z "  /><path d="M-179.185,649.354 L-179.185,493.14 L1024,493.14 L1024,649.354 L-179.185,649.354 Z "  /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-list-bullet"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-379.801,-514.33 L-379.801,-670.545 L914.662,-670.545 L914.662,-514.33 L-379.801,-514.33 Z "  /><path d="M-379.801,78.1071 L-379.801,-78.1071 L914.662,-78.1071 L914.662,78.1071 L-379.801,78.1071 Z "  /><path d="M-379.801,670.545 L-379.801,514.33 L914.662,514.33 L914.662,670.545 L-379.801,670.545 Z "  /><path d="M-929.642,-469.441 L-929.642,-715.434 L-669.092,-715.434 L-669.092,-469.441 L-929.642,-469.441 Z "  /><path d="M-929.642,127.109 L-929.642,-118.885 L-669.092,-118.885 L-669.092,127.109 L-929.642,127.109 Z "  /><path d="M-929.642,715.434 L-929.642,469.441 L-669.092,469.441 L-669.092,715.434 L-929.642,715.434 Z "  /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-clean">\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                    <path d="M75.0013,893.849 L-1030.73,900.993 L-32.1518,-880.838 L1009.54,-880.838 L75.0013,893.849 Z " fill="currentColor" />\n                    <path d="M-30.8571,780.685 L-845.2,787.828 L-508.893,193.749 L305.26,194.963 L-30.8571,780.685 Z " fill="#ffffff" fill-opacity="1.00" />\n                </g>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-location"><path d="M256 64c-65.9 0-119.3 53.7-119.3 120 0 114.6 119.3 264 119.3 264s119.3-149.4 119.3-264c0-66.3-53.4-120-119.3-120zm0 178.2c-31.2 0-56.4-25.4-56.4-56.7 0-31.3 25.3-56.8 56.4-56.8 31.2 0 56.4 25.4 56.4 56.8 0 31.3-25.2 56.7-56.4 56.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-film-outline"><path d="M0 360h400v-336h-400v336zM72 40v48h-56v-48h56zM72 104v48h-56v-48h56zM72 168v48h-56v-48h56zM72 232v48h-56v-48h56zM72 296v48h-56v-48h56zM312 40v144h-224v-144h224zM312 200v144h-224v-144h224zM384 40v48h-56v-48h56zM384 104v48h-56v-48h56zM384 168v48h-56v-48\n                h56zM384 232v48h-56v-48h56zM384 296v48h-56v-48h56z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-social-youtube-outline"><path d="M265 96c65.3 0 118.7 1.1 168.1 3.3h1.4c23.1 0 42 22 42 49.1v1.1l.1 1.1c2.3 34 3.4 69.3 3.4 104.9.1 35.6-1.1 70.9-3.4 104.9l-.1 1.1v1.1c0 13.8-4.7 26.6-13.4 36.1-7.8 8.6-18 13.4-28.6 13.4h-1.6c-52.9 2.5-108.8 3.8-166.4 3.8h-10.6.1-10.9c-57.8 0-113.7-1.3-166.2-3.7h-1.6c-10.6 0-20.7-4.8-28.5-13.4-8.6-9.5-13.4-22.3-13.4-36.1v-1.1l-.1-1.1c-2.4-34.1-3.5-69.4-3.3-104.7v-.2c-.1-35.3 1-70.5 3.3-104.6l.1-1.1v-1.1c0-27.2 18.8-49.3 41.9-49.3h1.4c49.5-2.3 102.9-3.3 168.2-3.3H265m0-32.2h-18c-57.6 0-114.2.8-169.6 3.3-40.8 0-73.9 36.3-73.9 81.3C1 184.4-.1 220 0 255.7c-.1 35.7.9 71.3 3.4 107 0 45 33.1 81.6 73.9 81.6 54.8 2.6 110.7 3.8 167.8 3.8h21.6c57.1 0 113-1.2 167.9-3.8 40.9 0 74-36.6 74-81.6 2.4-35.7 3.5-71.4 3.4-107.1.1-35.7-1-71.3-3.4-107.1 0-45-33.1-81.1-74-81.1C379.2 64.8 322.7 64 265 64z"></path><path d="M207 353.8V157.4l145 98.2-145 98.2z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-play"><path d="M128 96v320l256-160L128 96z"></path></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-full"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-770.219,-115.563 L-770.219,-271.777 L770.219,-271.777 L770.219,-115.563 L-770.219,-115.563 Z " /><path d="M-770.219,303.503 L-770.219,147.288 L770.219,147.288 L770.219,303.503 L-770.219,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-center"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-552.286,-107.697 L-552.286,-263.911 L552.286,-263.911 L552.286,-107.697 L-552.286,-107.697 Z " /><path d="M-467.355,319.234 L-467.355,163.02 L466.34,163.02 L466.34,319.234 L-467.355,319.234 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-left"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-770.219,-115.563 L-770.219,-271.777 L482.839,-271.777 L482.839,-115.563 L-770.219,-115.563 Z " /><path d="M-770.219,303.503 L-770.219,147.288 L122.787,147.288 L122.787,303.503 L-770.219,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-right"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-483.346,-118.081 L-483.346,-274.295 L769.712,-274.295 L769.712,-118.081 L-483.346,-118.081 Z " /><path d="M-123.871,303.503 L-123.871,147.288 L769.136,147.288 L769.136,303.503 L-123.871,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-indent"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-829.04,-514.33 L-829.04,-670.545 L808.959,-670.545 L808.959,-514.33 L-829.04,-514.33 Z " /><path d="M-829.04,670.545 L-829.04,514.33 L808.959,514.33 L808.959,670.545 L-829.04,670.545 Z " /><path d="M-254.279,-110.244 L-254.279,-266.458 L808.959,-266.458 L808.959,-110.244 L-254.279,-110.244 Z " /><path d="M-254.279,266.458 L-254.279,110.244 L808.959,110.244 L808.959,266.458 L-254.279,266.458 Z " /><path d="M-829.04,-195.117 L-490.958,-1.03508e-14 L-829.04,195.117 L-829.04,-195.117 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-outdent"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-829.04,-514.33 L-829.04,-670.545 L808.959,-670.545 L808.959,-514.33 L-829.04,-514.33 Z " /><path d="M-829.04,670.545 L-829.04,514.33 L808.959,514.33 L808.959,670.545 L-829.04,670.545 Z " /><path d="M-829.04,-110.244 L-829.04,-266.458 L234.198,-266.458 L234.198,-110.244 L-829.04,-110.244 Z " /><path d="M-829.04,266.458 L-829.04,110.244 L234.198,110.244 L234.198,266.458 L-829.04,266.458 Z " /><path d="M808.959,-195.117 L470.877,-1.03508e-14 L808.959,195.117 L808.959,-195.117 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-table"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-660.783,660.783 L660.783,660.783 L660.783,-660.783 L-660.783,-660.783 L-660.783,660.783 Z " fill="none" stroke-width="75.82" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /><path d="M-37.9645,698.933 L37.9645,698.933 L37.9645,-698.569 L-37.9645,-698.569 L-37.9645,698.933 Z " fill="currentColor" fill-opacity="1.00" stroke-width="0.25" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /><path d="M-698.933,-37.7825 L-698.933,38.1465 L698.569,38.1465 L698.569,-37.7825 L-698.933,-37.7825 Z " fill="currentColor" fill-opacity="1.00" stroke-width="0.25" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-happy"><path d="M256 48C140.563 48 48 141.6 48 256s92.563 208 208 208 208-93.6 208-208S370.401 48 256 48zm0 374.4c-91.518 0-166.404-74.883-166.404-166.4 0-91.518 74.887-166.4 166.404-166.4S422.404 164.482 422.404 256 347.518 422.4 256 422.4zm72.8-187.2c17.683 0 31.201-13.518 31.201-31.2s-13.519-31.2-31.201-31.2c-17.682 0-31.2 13.518-31.2 31.2s13.518 31.2 31.2 31.2zm-145.6 0c17.682 0 31.2-13.518 31.2-31.2s-13.519-31.2-31.2-31.2c-17.683 0-31.201 13.518-31.201 31.2s13.519 31.2 31.201 31.2zM256 370.4c48.883 0 89.436-30.164 106.081-72.801H149.919C166.564 340.236 207.117 370.4 256 370.4z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-create"><path d="M64 368v80h80l235.727-235.729-79.999-79.998L64 368zm377.602-217.602c8.531-8.531 8.531-21.334 0-29.865l-50.135-50.135c-8.531-8.531-21.334-8.531-29.865 0l-39.468 39.469 79.999 79.998 39.469-39.467z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-minus-empty"><path d="M384 265H128v-17h256v17z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-eye"><path d="M256 128c-81.9 0-145.7 48.8-224 128 67.4 67.7 124 128 224 128 99.9 0 173.4-76.4 224-126.6C428.2 198.6 354.8 128 256 128zm0 219.3c-49.4 0-89.6-41-89.6-91.3 0-50.4 40.2-91.3 89.6-91.3s89.6 41 89.6 91.3c0 50.4-40.2 91.3-89.6 91.3z"></path><path d="M256 224c0-7.9 2.9-15.1 7.6-20.7-2.5-.4-5-.6-7.6-.6-28.8 0-52.3 23.9-52.3 53.3s23.5 53.3 52.3 53.3 52.3-23.9 52.3-53.3c0-2.3-.2-4.6-.4-6.9-5.5 4.3-12.3 6.9-19.8 6.9-17.8 0-32.1-14.3-32.1-32z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-reply"><path d="M448 400s-36.8-208-224-208v-80L64 256l160 134.4v-92.3c101.6 0 171 8.9 224 101.9z"></path></symbol>\n            \n            <symbol viewBox="0 0 512 512" id="ion-wrench"><path d="M461.9 114.9l-56.5 56.7-55.1-10-9.9-55.1 56.5-56.7c-12.7-12.7-30.8-18.5-44.2-17.8-13.5.7-42.3 8.3-64.6 32-21.6 22.8-44.3 65.3-24.2 112.5 2.4 5.7 5.1 13.2-2.9 21.2-8.1 8-215 202.8-215 202.8-19.4 16.7-18 47.6-.1 65.6 18.2 17.9 48.9 19 65.6-.3 0 0 193.2-205.8 202.7-215.1 8.5-8.3 16.1-5.5 21.2-2.9 35.6 18.4 86.3 2.4 112.6-23.9 26.3-26.3 31.1-51.7 31.9-64.7.8-12.9-3.7-30-18-44.3zM91.3 443.2c-6.3 6.2-16.5 6.2-22.7 0-6.2-6.3-6.2-16.5 0-22.7 6.3-6.2 16.5-6.2 22.7 0 6.2 6.3 6.2 16.5 0 22.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-more"><path d="M113.7 304C86.2 304 64 282.6 64 256c0-26.5 22.2-48 49.7-48 27.6 0 49.8 21.5 49.8 48 0 26.6-22.2 48-49.8 48zM256 304c-27.5 0-49.8-21.4-49.8-48 0-26.5 22.3-48 49.8-48 27.5 0 49.7 21.5 49.7 48 0 26.6-22.2 48-49.7 48zM398.2 304c-27.5 0-49.8-21.4-49.8-48 0-26.5 22.2-48 49.8-48 27.5 0 49.8 21.5 49.8 48 0 26.6-22.2 48-49.8 48z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-code-working"><circle cx="184.166" cy="256.166" r="24"></circle><circle cx="256.166" cy="256.166" r="24"></circle><circle cx="328.166" cy="256.166" r="24"></circle><g><path d="M168 392a23.929 23.929 0 0 1-16.971-7.029l-112-112c-9.373-9.373-9.373-24.569 0-33.941l112-112c9.373-9.372 24.568-9.372 33.941 0 9.371 9.372 9.371 24.568 0 33.941L89.941 256l95.029 95.029c9.371 9.372 9.371 24.568 0 33.941A23.925 23.925 0 0 1 168 392zM344 392a23.929 23.929 0 0 0 16.971-7.029l112-112c9.373-9.373 9.373-24.569 0-33.941l-112-112c-9.373-9.372-24.568-9.372-33.941 0-9.371 9.372-9.371 24.568 0 33.941L422.059 256l-95.029 95.029c-9.371 9.372-9.371 24.568 0 33.941A23.925 23.925 0 0 0 344 392z"></path></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-gear"><path d="M416.349 256.046c-.001-21.013 13.143-38.948 31.651-46.062a196.302 196.302 0 0 0-23.664-57.139 49.423 49.423 0 0 1-20.082 4.254c-12.621 0-25.238-4.811-34.871-14.442-14.863-14.863-18.248-36.846-10.18-54.97A196.274 196.274 0 0 0 302.074 64C294.971 82.529 277.027 95.69 256 95.69c-21.025 0-38.969-13.161-46.073-31.69a196.243 196.243 0 0 0-57.128 23.688c8.068 18.122 4.683 40.104-10.181 54.97-9.631 9.631-22.25 14.443-34.871 14.443a49.429 49.429 0 0 1-20.083-4.255A196.273 196.273 0 0 0 64 209.984c18.509 7.112 31.652 25.049 31.652 46.062 0 21.008-13.132 38.936-31.63 46.054a196.318 196.318 0 0 0 23.692 57.128 49.428 49.428 0 0 1 20.032-4.232c12.622 0 25.239 4.812 34.871 14.443 14.841 14.841 18.239 36.781 10.215 54.889a196.257 196.257 0 0 0 57.13 23.673c7.128-18.479 25.046-31.596 46.038-31.596 20.992 0 38.91 13.115 46.037 31.596a196.234 196.234 0 0 0 57.132-23.675c-8.023-18.106-4.626-40.046 10.216-54.887 9.629-9.632 22.248-14.444 34.868-14.444 6.836 0 13.67 1.411 20.033 4.233a196.318 196.318 0 0 0 23.692-57.128c-18.498-7.119-31.629-25.048-31.629-46.054zM256.9 335.9c-44.3 0-80-35.9-80-80 0-44.101 35.7-80 80-80 44.299 0 80 35.899 80 80 0 44.1-35.701 80-80 80z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-arrow-expand"><path d="M274 209.7l63.9-63.8L288 96h128v128l-49.9-49.9-63.8 63.9zM274 302.3l63.9 63.8L288 416h128V288l-49.9 49.9-63.8-63.9zM238 302.3l-63.9 63.8L224 416H96V288l49.9 49.9 63.8-63.9zM238 209.7l-63.9-63.8L224 96H96v128l49.9-49.9 63.8 63.9z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-expand"><path d="M396.795 396.8H320V448h128V320h-51.205zM396.8 115.205V192H448V64H320v51.205zM115.205 115.2H192V64H64v128h51.205zM115.2 396.795V320H64v128h128v-51.205z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-arrow-move"><path d="M480 256l-96-96v76H276V128h76l-96-96-96 96h76v108H128v-76l-96 96 96 96v-76h108v108h-76l96 96 96-96h-76.2l-.4-108.5 108.6.3V352z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-drag"><path d="M0 144h512v32H0zM0 240h512v32H0zM0 336h512v32H0z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-link"><path d="M74.6 256c0-38.3 31.1-69.4 69.4-69.4h88V144h-88c-61.8 0-112 50.2-112 112s50.2 112 112 112h88v-42.6h-88c-38.3 0-69.4-31.1-69.4-69.4zm85.4 22h192v-44H160v44zm208-134h-88v42.6h88c38.3 0 69.4 31.1 69.4 69.4s-31.1 69.4-69.4 69.4h-88V368h88c61.8 0 112-50.2 112-112s-50.2-112-112-112z"/></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-contrast"><path d="M256 32C132.3 32 32 132.3 32 256s100.3 224 224 224 224-100.3 224-224S379.7 32 256 32zm135.8 359.8C355.5 428 307 448 256 448V64c51 0 99.5 20 135.8 56.2C428 156.5 448 204.7 448 256c0 51.3-20 99.5-56.2 135.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-plus-empty"><path d="M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-up"><path d="M349.7 189.8c-3.1 3.1-8 3-11.3 0L264 123.4V408c0 4.4-3.6 8-8 8s-8-3.6-8-8V123.4l-74.4 66.3c-3.4 2.9-8.1 3.2-11.2.1-3.1-3.1-3.3-8.5-.1-11.4 0 0 87-79.2 88-80s2.8-2.4 5.7-2.4 4.9 1.6 5.7 2.4 88 80 88 80c1.5 1.5 2.3 3.6 2.3 5.7s-.8 4.1-2.3 5.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-down"><path d="M349.7 322.2c-3.1-3.1-8-3-11.3 0L264 388.6V104c0-4.4-3.6-8-8-8s-8 3.6-8 8v284.6l-74.4-66.3c-3.4-2.9-8.1-3.2-11.2-.1-3.1 3.1-3.3 8.5-.1 11.4 0 0 87 79.2 88 80s2.8 2.4 5.7 2.4 4.9-1.6 5.7-2.4 88-80 88-80c1.5-1.5 2.3-3.6 2.3-5.7s-.8-4.1-2.3-5.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-left"><path d="M189.8 349.7c3.1-3.1 3-8 0-11.3L123.4 264H408c4.4 0 8-3.6 8-8s-3.6-8-8-8H123.4l66.3-74.4c2.9-3.4 3.2-8.1.1-11.2-3.1-3.1-8.5-3.3-11.4-.1 0 0-79.2 87-80 88S96 253.1 96 256s1.6 4.9 2.4 5.7 80 88 80 88c1.5 1.5 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-right"><path d="M322.2 349.7c-3.1-3.1-3-8 0-11.3l66.4-74.4H104c-4.4 0-8-3.6-8-8s3.6-8 8-8h284.6l-66.3-74.4c-2.9-3.4-3.2-8.1-.1-11.2 3.1-3.1 8.5-3.3 11.4-.1 0 0 79.2 87 80 88s2.4 2.8 2.4 5.7-1.6 4.9-2.4 5.7-80 88-80 88c-1.5 1.5-3.6 2.3-5.7 2.3s-4.1-.8-5.7-2.3z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-close-empty"><path d="M340.2 160l-84.4 84.3-84-83.9-11.8 11.8 84 83.8-84 83.9 11.8 11.7 84-83.8 84.4 84.2 11.8-11.7-84.4-84.3 84.4-84.2z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-more-vertical"><path d="M296 136c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0 240c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0-120c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-quote"><path d="M192 64c-40.646 0-72.483 11.229-94.627 33.373C75.229 119.517 64 151.354 64 192v256h160V192h-96c0-23.056 4.922-39.666 14.627-49.373C152.334 132.922 168.944 128 192 128M416 64c-40.646 0-72.483 11.229-94.627 33.373C299.229 119.517 288 151.354 288 192v256h160V192h-96c0-23.056 4.922-39.666 14.627-49.373C376.334 132.922 392.944 128 416 128"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-code"><path d="M168 392a23.929 23.929 0 0 1-16.971-7.029l-112-112c-9.373-9.373-9.373-24.569 0-33.941l112-112c9.373-9.372 24.568-9.372 33.941 0 9.371 9.372 9.371 24.568 0 33.941L89.941 256l95.029 95.029c9.371 9.373 9.371 24.568 0 33.941A23.925 23.925 0 0 1 168 392zM344 392a23.929 23.929 0 0 0 16.971-7.029l112-112c9.373-9.373 9.373-24.569 0-33.941l-112-112c-9.373-9.372-24.568-9.372-33.941 0-9.371 9.372-9.371 24.568 0 33.941L422.059 256l-95.029 95.029c-9.371 9.373-9.371 24.568 0 33.941A23.925 23.925 0 0 0 344 392z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-camera"><path d="M430.4 147h-67.5l-40.4-40.8s-.2-.2-.3-.2l-.2-.2c-6-6-14.1-9.8-23.3-9.8h-84c-9.8 0-18.5 4.2-24.6 10.9v.1l-39.5 40h-69C63 147 48 161.6 48 180.2v202.1c0 18.6 15 33.7 33.6 33.7h348.8c18.5 0 33.6-15.1 33.6-33.7V180.2c0-18.6-15.1-33.2-33.6-33.2zM256 365.5c-50.9 0-92.4-41.6-92.4-92.6 0-51.1 41.5-92.6 92.4-92.6 51 0 92.4 41.5 92.4 92.6 0 51-41.4 92.6-92.4 92.6zm168.1-165c-7.7 0-14-6.3-14-14.1s6.3-14.1 14-14.1 14 6.3 14 14.1-6.3 14.1-14 14.1z"></path><path d="M256 202.9c-38.6 0-69.8 31.3-69.8 70 0 38.6 31.2 70 69.8 70 38.5 0 69.8-31.3 69.8-70s-31.3-70-69.8-70z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-move"><path d="M475.9 246.2l-79.4-79.4c-5.4-5.4-14.2-5.4-19.6 0l-.2.2c-5.4 5.4-5.4 14.2 0 19.6l54.9 54.9-161.8.5.5-161.8 54.9 54.9c5.4 5.4 14.2 5.4 19.6 0l.2-.2c5.4-5.4 5.4-14.2 0-19.6l-79.4-79.4c-5.4-5.4-14.2-5.4-19.6 0l-79.4 79.4c-5.4 5.4-5.4 14.2 0 19.6l.2.2c5.4 5.4 14.2 5.4 19.6 0l54.9-54.9.5 161.8-161.8-.5 54.9-54.9c5.4-5.4 5.4-14.2 0-19.6l-.2-.2c-5.4-5.4-14.2-5.4-19.6 0l-79.4 79.4c-5.4 5.4-5.4 14.2 0 19.6l79.4 79.4c5.4 5.4 14.2 5.4 19.6 0l.2-.2c5.4-5.4 5.4-14.2 0-19.6L80 270.5l161.8-.5-.5 161.8-54.9-54.9c-5.4-5.4-14.2-5.4-19.6 0l-.2.2c-5.4 5.4-5.4 14.2 0 19.6l79.4 79.4c5.4 5.4 14.2 5.4 19.6 0l79.4-79.4c5.4-5.4 5.4-14.2 0-19.6l-.2-.2c-5.4-5.4-14.2-5.4-19.6 0l-54.9 54.9-.5-161.8 161.8.5-54.9 54.9c-5.4 5.4-5.4 14.2 0 19.6l.2.2c5.4 5.4 14.2 5.4 19.6 0l79.4-79.4c5.5-5.4 5.5-14.2 0-19.6z"/></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-ok">\n                <rect x="0" y="0" width="2048.00" height="2048.00" fill="none" />\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                <path d="M330.323,493.628 L330.323,398.406 L-330.323,398.406 L-330.323,493.628 L330.323,493.628 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M230.718,468.568 L328.59,468.568 L328.59,-599.718 L230.718,-599.718 L230.718,468.568 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M-300.714,376.053 L-373.748,449.088 L-68.5805,754.255 L4.45387,681.221 L-300.714,376.053 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M-9.9476e-14,216.241 L-73.0344,143.207 L-378.202,448.375 L-305.168,521.409 L-9.9476e-14,216.241 Z " fill="currentColor" fill-opacity="1.00" />\n                </g>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-grid"><path d="M160 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path><g><path d="M160 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path></g><g><path d="M160 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-gear-b"><path d="M448 294.4v-76.8h-42.8c-3.4-14.4-8.9-28-16.1-40.5l29.8-29.7-54.3-54.3-29.1 29.1c-12.6-7.7-26.4-13.5-41.1-17.3V64h-76.8v40.9c-14.7 3.8-28.5 9.7-41.1 17.3l-29.1-29.1-54.3 54.3 29.8 29.7c-7.2 12.5-12.6 26.1-16.1 40.5H64v76.8h44.1c3.8 13.7 9.5 26.6 16.7 38.6l-31.7 31.7 54.3 54.3 32.3-32.3c11.7 6.8 24.5 11.9 37.9 15.4v46h76.8v-46c13.5-3.5 26.2-8.6 37.9-15.4l32.3 32.3 54.3-54.3-31.6-31.7c7.2-11.9 12.9-24.8 16.7-38.6h44zm-192 15.4c-29.7 0-53.7-24.1-53.7-53.8s24-53.8 53.7-53.8 53.8 24.1 53.8 53.8-24.1 53.8-53.8 53.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-grid-view-outline"><path d="M448 192v-16H336V64h-16v112H192V64h-16v112H64v16h112v128H64v16h112v112h16V336h128v112h16V336h112v-16H336V192h112zM320 320H192V192h128v128z"></path></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-increase"><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M852.574,595.004 L852.574,507.837 L-852.574,507.837 L-852.574,595.004 L852.574,595.004 Z " /><path d="M852.574,224.232 L852.574,137.066 L-852.574,137.066 L-852.574,224.232 L852.574,224.232 Z " /><path d="M852.574,-134.971 L852.574,-222.138 L-852.574,-222.138 L-852.574,-134.971 L852.574,-134.971 Z " /><path d="M852.574,-505.743 L852.574,-592.909 L-852.574,-592.909 L-852.574,-505.743 L852.574,-505.743 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-decrease"><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M509.832,595.004 L509.832,507.837 L-509.832,507.837 L-509.832,595.004 L509.832,595.004 Z " /><path d="M509.832,224.232 L509.832,137.066 L-509.832,137.066 L-509.832,224.232 L509.832,224.232 Z " /><path d="M509.832,-136.947 L509.832,-224.113 L-509.832,-224.113 L-509.832,-136.947 L509.832,-136.947 Z " /><path d="M509.832,-505.743 L509.832,-592.909 L-509.832,-592.909 L-509.832,-505.743 L509.832,-505.743 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-strike">\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                <path d="M298.298,-653.766 C292.151,-624.873 284.005,-605.663 273.862,-596.135 C263.719,-586.607 250.656,-581.842 234.673,-581.842 C220.535,-581.842 196.253,-589.526 161.828,-604.895 C87.4454,-637.475 17.0588,-653.766 -49.3321,-653.766 C-155.68,-653.766 -243.28,-621.339 -312.129,-556.485 C-380.979,-491.631 -415.404,-414.328 -415.404,-324.578 C-415.404,-272.94 -403.724,-225.606 -380.364,-182.575 C-357.005,-139.544 -322.733,-100.201 -277.551,-64.5467 C-232.368,-28.8923 -156.295,18.903 -49.3321,78.8392 C57.631,138.775 123.1,177.964 147.074,196.406 C182.729,223.455 209.008,252.654 225.913,284.005 C242.819,315.357 251.271,346.401 251.271,377.137 C251.271,432.463 228.987,480.412 184.419,520.984 C139.851,561.556 79.1465,581.842 2.30524,581.842 C-64.0856,581.842 -125.098,567.089 -180.731,537.582 C-236.364,508.075 -277.704,471.037 -304.753,426.469 C-331.801,381.901 -353.316,314.742 -369.299,224.991 L-403.417,224.991 L-403.417,653.766 L-369.299,653.766 C-364.996,624.873 -358.388,605.817 -349.474,596.596 C-340.561,587.375 -328.42,582.764 -313.051,582.764 C-297.068,582.764 -259.109,592.446 -199.173,611.81 C-139.236,631.174 -99.74,642.393 -80.6834,645.467 C-48.7174,651 -14.5998,653.766 21.6692,653.766 C137.239,653.766 231.753,619.495 305.214,550.952 C378.674,482.41 415.404,400.804 415.404,306.136 C415.404,256.343 403.878,208.701 380.826,163.211 C357.773,117.721 324.885,78.2244 282.161,44.7216 C239.438,11.2188 159.676,-36.8838 42.8774,-99.5863 C-100.355,-176.428 -191.027,-237.901 -229.141,-284.005 C-255.574,-315.357 -268.791,-350.089 -268.791,-388.202 C-268.791,-437.995 -247.89,-482.41 -206.088,-521.445 C-164.287,-560.48 -111.42,-579.998 -47.4879,-579.998 C9.06727,-579.998 63.7783,-565.552 116.645,-536.66 C169.512,-507.767 210.238,-468.732 238.823,-419.554 C267.408,-370.375 287.233,-304.292 298.298,-221.303 L332.415,-221.303 L332.415,-653.766 L298.298,-653.766 Z " fill="currentColor" fill-opacity="1.00" /><path d="M-530.954,-41.4477 L-530.954,41.4477 L530.954,41.4477 L530.954,-41.4477 L-530.954,-41.4477 Z " fill="currentColor" fill-opacity="1.00" /></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-undo"><path d="M447.9 368.2c0-16.8 3.6-83.1-48.7-135.7-35.2-35.4-80.3-53.4-143.3-56.2V96L64 224l192 128v-79.8c40 1.1 62.4 9.1 86.7 20 30.9 13.8 55.3 44 75.8 76.6l19.2 31.2H448c0-10.1-.1-22.9-.1-31.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-redo"><path d="M64 400h10.3l19.2-31.2c20.5-32.7 44.9-62.8 75.8-76.6 24.4-10.9 46.7-18.9 86.7-20V352l192-128L256 96v80.3c-63 2.8-108.1 20.7-143.3 56.2C60.4 285.2 64 351.5 64 368.2c.1 8.9 0 21.7 0 31.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-arrow-dropdown"><path d="M128 192l128 128 128-128z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-social-twitter"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z"></path></symbol>\n            <symbol viewBox="0 0 24 24" id="icon-zoom-in" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <circle cx="10" cy="10" r="7"></circle>\n                <line x1="7" y1="10" x2="13" y2="10"></line>\n                <line x1="10" y1="7" x2="10" y2="13"></line>\n                <line x1="21" y1="21" x2="15" y2="15"></line>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-contract"><path d="M64 371.2h76.795V448H192V320H64v51.2zm76.795-230.4H64V192h128V64h-51.205v76.8zM320 448h51.2v-76.8H448V320H320v128zm51.2-307.2V64H320v128h128v-51.2h-76.8z"></path></symbol>\n            \n            <symbol viewBox="0 0 24 24" id="icon-lock-off" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                <line x1="3" y1="3" x2="21" y2="21" />\n                <path d="M19 19a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h4m4 0h2a2 2 0 0 1 2 2v2" />\n                <circle cx="12" cy="16" r="1" />\n                <path d="M8 11v-3m.712 -3.278a4 4 0 0 1 7.288 2.278v4" />\n            </symbol>\n            <symbol viewBox="0 0 24 24" id="icon-lock" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                <rect x="5" y="11" width="14" height="10" rx="2" />\n                <circle cx="12" cy="16" r="1" />\n                <path d="M8 11v-4a4 4 0 0 1 8 0v4" />\n            </symbol>\n            <symbol viewBox="0 0 24 24" id="icon-code" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z"/>\n                <polyline points="7 8 3 12 7 16" />\n                <polyline points="17 8 21 12 17 16" />\n                <line x1="14" y1="4" x2="10" y2="20" />\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-cloud-upload-outline">\n                <path d="M193.3 260.4l-11.6-11.6 74.5-74.3 74.5 74.3-11.7 11.6-54.6-54.6v241.8h-16.5V205.8z"/>\n                <path d="M399.3 183.6c0-1.2.2-2.4.2-3.6 0-64.3-52.8-116.4-116.8-116.4-46.1 0-85.8 27.1-104.4 66.3-8.1-4.1-17.1-6.4-26.8-6.4-29.6 0-54.1 23.6-58.9 52C57.4 187.6 32 222.2 32 261.8c0 49.7 40.1 90.2 89.6 90.2H213v-16h-90.6c-40.9 0-74.2-33.5-74.2-74.6 0-31.8 20.2-61.2 50.2-71.6l8.4-2.9 1.5-8.8c3.6-21.6 22.1-39.3 43.9-39.3 6.9 0 13.7 1.6 19.9 4.8l13.5 6.8 6.5-13.7c16.6-34.9 52.1-57.4 90.4-57.4 55.3 0 100.9 43.3 100.9 98.9 0 13.3-.2 20.3-.2 20.3l15.2.1c36.6.5 65.6 33.4 65.6 70.3 0 36.8-29.8 66.9-66.5 67.1H297v16h101c45 0 82-37.3 82-82.8s-35.5-85.5-80.7-85.6z"/>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-volume-medium">\n                <path d="M270 407.7V104.4L175.3 192H71v128h104.3zm56.3-52.1c20.5-27.8 32.8-62.3 32.8-99.6 0-37.4-12.3-71.8-32.8-99.6l-20.4 15.3c17.4 23.6 27.8 52.7 27.8 84.3 0 31.6-10.4 60.7-27.8 84.3l20.4 15.3zm66.5 46c30-40.7 48-91 48-145.6s-18-104.9-48-145.6l-20.4 15.3c26.9 36.4 43 81.4 43 130.3 0 48.9-16.1 93.8-43 130.3l20.4 15.3z"/>\n            </symbol>\n            </defs>\n        </svg>\n\n\n        <div class="is-locked-indicator">\n            <svg class="is-icon-flex"><use xlink:href="#icon-lock"></use></svg>\n        </div>\n        `;t.contentStuff.insertAdjacentHTML("afterbegin",i);t.contentStuff.insertAdjacentHTML("afterbegin",'\n        <style>\n            \n\n\n        /* General */\n\n        body {\n            overflow-x: hidden !important;\n        }\n\n        svg {\n            overflow: hidden;\n            vertical-align: middle;\n            pointer-events: none;\n        }\n        [contenteditable] svg {\n            pointer-events: initial;\n        }\n\n        .is-icon-flex {\n            width: 16px;\n            height: 16px;\n        }\n\n        a:focus,\n        button:focus {\n            outline:none; \n        }\n\n        .transition1 { \n            transition: all ease 0.1s; \n        }\n\n        /* Editable Area */\n\n        .is-builder {\n            transition: all ease 0.3s;\n            transform-origin: top;\n        }\n        .is-builder > div > div:focus {\n            outline: none;\n        }\n        .is-builder .is-subblock:focus {\n            outline: none;\n        }\n        .is-builder > div {\n            position: relative;\n            transition: none;\n            margin-left: 0;\n            margin-right: 0;\n            width: auto;\n        }\n        .is-builder[gridoutline] > div > div {\n            outline: 1px solid rgba(132, 132, 132, 0.27);\n            outline-offset: 1px;\n        }\n        .is-builder > div > div.cell-active:not([data-protected]) {\n            outline: 1px solid #00da89;\n        }\n        .is-builder .row-active:not([data-protected]) {\n            outline: 1px solid #00da89;\n            z-index: 1;\n        }\n        .is-builder .row-active:not([data-protected]).row-outline {\n            outline: 1px solid rgba(132, 132, 132, 0.2);\n        }\n        .is-builder .row-active:not([data-protected]):not(.row-outline) > div.cell-active {\n            outline: none;\n        }\n\n        .is-builder table.default td {\n            border: transparent 1px dashed;\n        }\n        .is-builder .cell-active .elm-active:not(button) {\n            background: rgba(200, 200, 201, 0.11);\n        }\n        .is-builder .cell-active table.elm-active {\n            background-color: transparent;\n        }\n        .is-builder .cell-active table.default td {\n            border: #cccccc 1px dashed;\n        }\n        .is-builder .cell-active hr {\n            cursor: pointer;\n        }\n        .is-builder .cell-active[data-html] {\n            background-color: rgba(200, 200, 201, 0.11);\n        }\n        .is-builder .cell-active .icon-active {\n            background-color: rgba(200, 200, 201, 0.4);\n        }\n        .is-builder .elm-inspected {\n            animation-name: elm-inspected-anim;\n            animation-duration: 0.6s;\n            outline: 1px solid #ffb84a !important;\n        }\n        .is-builder .elm-inspected .elm-active {\n            background: none;\n        }\n        @keyframes elm-inspected-anim {\n            0% {\n                transform: scale(1);\n            }\n            50% {\n                transform: scale(0.97);\n            }\n            100% {\n                transform: scale(1);\n            }\n        }\n\n\n        @media (min-width: 640px) {\n            .is-builder > div {\n                display:flex\n            }\n        }\n\n        /* sortable */\n        .sortable-drag {\n            background: transparent;\n            outline:none !important;\n        }\n        .sortable-drag * {\n            opacity:0;\n        }\n        \n        .sortable-ghost {\n            background: rgba(0, 0, 0 , 0.03);\n            width: 100%;\n            outline: none !important;\n        }\n        .sortable-ghost * {\n            outline: none !important;\n        }\n        .sortable-ghost .is-row-tool {\n            display:none !important;\n        }\n        \n        .sortable-drag::before {\n            content: \' \';\n            width: 100%;\n            height: 100%;\n            position: absolute;\n            top: 0; left:0;\n            background: rgba(0, 0, 0 , 0.03);\n            transform-origin: top left;\n        }\n\n        /* Moveable (Image resizer) */\n        .moveable-control {\n            border: none !important; \n            width: 7px !important; \n            height: 7px !important; \n            margin-top: -3px !important; \n            margin-left: -3px !important;  \n            background: #2196f3 !important;\n        }\n        .moveable-control.moveable-origin {\n            display: none !important;\n        }\n        .moveable-direction.moveable-s, .moveable-direction.moveable-n { \n            display:none !important; \n        }\n        .moveable-direction.moveable-e, .moveable-direction.moveable-w { \n            display:none !important; \n        }\n        .moveable-line { \n            display:none !important; \n        }\n\n        /* Tool */\n        .is-tool.is-video-tool,\n        .is-tool.is-audio-tool,\n        .is-tool.is-iframe-tool {\n            background: rgba(0, 0, 0, 0.15);\n            border: transparent 1px solid;\n        }\n        .is-tool.is-video-tool > div,\n        .is-tool.is-audio-tool > div,\n        .is-tool.is-iframe-tool > div,\n        .is-tool.is-video-tool > button,\n        .is-tool.is-audio-tool > button,\n        .is-tool.is-iframe-tool > button {\n            background: transparent;\n        }\n        .is-tool.is-video-tool svg,\n        .is-tool.is-audio-tool svg,\n        .is-tool.is-iframe-tool svg {\n            fill: #fff;\n        }\n\n\n        .is-tool.is-spacer-tool,\n        .is-tool.is-table-tool,\n        .is-tool.is-code-tool,\n        .is-tool.is-module-tool,\n        .is-tool#divLinkTool,\n        .is-tool#divButtonTool,\n        .is-tool#divSvgTool { \n            border: none;\n            background: none;\n        }\n\n        .is-tool.is-spacer-tool > button,\n        .is-tool.is-table-tool > button,\n        .is-tool.is-code-tool > button,\n        .is-tool.is-module-tool > button,\n        .is-tool#divLinkTool > button,\n        .is-tool#divButtonTool > button,\n        .is-tool#divSvgTool > button { \n            width: 30px;\n            height: 30px;\n            background: rgba(240, 240, 240, 0.9);\n        }\n\n        .is-tool.is-spacer-tool > button svg,\n        .is-tool.is-table-tool > button svg,\n        .is-tool.is-code-tool > button svg,\n        .is-tool.is-module-tool > button svg,\n        .is-tool#divLinkTool > button svg,\n        .is-tool#divButtonTool > button svg,\n        .is-tool#divSvgTool > button svg {\n            fill: #111;\n        }\n\n        .is-tool.is-table-tool:hover {\n            z-index:10001 !important\n        }\n\n\n        .dot {\n            height: 7px;\n            width: 7px;\n            border-radius: 50%;\n            display: inline-block;\n            margin: 25px 2px 0;\n            animation: jump 1.5s linear infinite;\n        }\n        @keyframes jump {\n            0%, 100% {transform: translateY(0px);}\n            20% {transform: translateY(-10px);}\n            40% {transform: translateY(0px);}\n        }\n        .dot:nth-of-type(2) {\n            animation-delay: 0.2s;\n        }\n        .dot:nth-of-type(3) {\n            animation-delay: 0.4s;\n        }\n\n        /* Lock Indicator */\n\n        .is-locked-indicator {\n            display: none;\n            width: 28px;\n            height: 28px;\n            position: absolute;\n            align-items: center;\n            justify-content: center;\n            background: rgba(243, 243, 243, 0.9);\n            border-radius: 500px;\n            pointer-events: none;\n        }\n\n        /* Tools */\n        .is-tool {\n            position: absolute;\n            top: 0;\n            left: 0;\n            display: none;\n            z-index: 10001;\n            box-sizing: border-box;\n            padding: 0;\n            outline: none;\n           \n        } \n        .is-tool:hover { \n            z-index:10003; \n        }\n        .is-tool.active { \n            display:flex; \n        }\n        .is-tool button {\n            width:100%; height: 25px;\n            background-color:transparent;\n            border: none;\n            cursor: pointer;\n            user-select: none;\n            -moz-user-select: none;\n            -khtml-user-select: none;\n            -webkit-user-select: none;\n            -o-user-select: none; \n    \n           \n            color: #000;\n            display: inline-block;\n            box-sizing:border-box;\n            margin: 0;\n            padding: 0;\n            font-family: sans-serif;\n            letter-spacing: 1px;\n            font-size: 12px;\n            font-weight: 300;\n            text-transform: uppercase;\n            text-align: center;  \n            line-height: unset;\n            position: relative;\n            border-radius: 1px;\n            transition: all ease 0.3s; \n        }\n        .is-tool button:focus {\n            outline: none !important;\n            outline-offset: 0;\n        }\n        .is-tool svg {\n            fill: #000;\n        }\n\n        /* is-element-tool */\n\n        .is-tool.is-element-tool {\n            background: rgba(243, 243, 243, 0.9);\n        } \n        .is-tool.is-element-tool button {\n            width: 25px; \n            height: 25px;\n            background: transparent;\n        }\n        .is-tool.is-element-tool svg {\n            width: 14px;\n            height: 14px;\n            fill: #111;\n        }\n        .is-tool.is-element-tool .elm-more svg {\n            width: 11px;\n            height: 11px;\n        }\n        .is-tool.is-element-tool .elm-settings { display: none; }\n\n        /* is-column-tool */\n\n        .is-tool.is-column-tool {\n            flex-direction: row;\n            margin-top: 0px;\n        }\n        .is-tool.is-column-tool button {\n            width: 25px; \n            height: 25px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .is-tool.is-column-tool .cell-add {background: #0fcc52;}\n        .is-tool.is-column-tool .cell-more {background: rgba(216, 200, 6, 0.9);}\n        .is-tool.is-column-tool .cell-remove {background: rgba(255, 85, 4, 0.9);} \n        .is-tool.is-column-tool svg {\n            width: 23px;\n            height:23px;\n            fill: #fff;\n        }\n        .is-tool.is-column-tool .cell-more svg {width:14px;height:14px;}\n\n        /* is-row-tool */\n        \n        .is-tool.is-row-tool {\n            flex-direction: column;\n            width: auto;\n            left: auto;\n            right: -40px;\n        }\n        .is-tool.is-row-tool button {\n            width: 25px; \n            height: 25px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .is-tool.is-row-tool svg {\n            fill: #fff;\n        }\n        .is-tool.is-row-tool .row-handle {\n            display: flex;\n            height: 25px;\n            justify-content: center;\n            align-items: center;\n            background: #169af7;\n            \n        }\n        .is-tool.is-row-tool .row-handle svg { \n            width: 13px; height: 13px; \n        }\n        .is-tool.is-row-tool .row-grideditor {\n            background: rgba(216, 200, 6, 0.9);\n        }\n        .is-tool.is-row-tool .row-grideditor svg {\n            width: 14px; height: 14px; margin-top: -1px;\n        }\n        .is-tool.is-row-tool .row-more {\n            background: rgba(216, 200, 6, 0.9);\n        }\n        .is-tool.is-row-tool .row-more svg {\n            width: 14px; height: 14px;\n        }\n        .is-tool.is-row-tool .row-remove {\n            background: rgba(255, 85, 4, 0.9);\n        }  \n        .is-tool.is-row-tool .row-remove svg {\n            width: 23px; height: 23px;\n        }\n        .row-outline .is-row-tool, \n        .row-active .is-row-tool {\n            display:flex;\n        }\n\n\n        .row-outline .is-rowadd-tool, \n        .row-active .is-rowadd-tool {\n            display:block;\n        }\n        .is-tool.is-row-tool .row-grideditor {\n            display:none;\n        }\n\n        /* is-rowadd-tool */\n\n        .is-rowadd-tool {\n            display: none;\n            position: absolute;\n            bottom: -1px;\n            left: -20px;\n            width: calc(100% + 40px);\n            height: 1px;\n            border: none;\n            border-bottom: 1px solid rgb(255, 183, 132);\n            z-index: 1;\n            background: transparent;\n            transition:none;\n        }\n        .is-rowadd-tool button {\n            position:absolute;\n            top: -9px;\n            left:calc(50% - 10px);\n            border:  1px solid rgb(255, 142, 62);\n            border-radius: 500px;\n            height:auto;\n        }\n        .row-outline .is-rowadd-tool, \n        .row-active .is-rowadd-tool {\n            display:block;\n        }\n\n        .row-add-initial {\n            width: 100%;\n            height: 120px;\n            font-family: sans-serif;\n            font-size: 12px;\n            text-transform: uppercase;\n            letter-spacing: 1px;\n            justify-content: center;\n            align-items: center;\n            color:#333;\n            border: 1px dashed rgba(169, 169, 169, 0.8);\n            background: rgba(255, 255, 255, 0.5);\n            cursor: pointer;\n            transition: all ease 0.3s;\n            outline: none !important;\n        }\n        .row-add-initial:hover {\n            background: rgba(248, 248, 248, 0.35);\n        }\n        .row-add-initial:focus {\n            outline:none;\n        }\n        .row-add-initial span {\n            text-transform: none;\n            display: block;\n            margin-top: 5px;\n            font-size: 13px;\n            opacity: 0.5;\n            color: #333;\n        }\n        .is-builder .row-active.row-add-initial {\n            outline:none;\n        }\n\n        /* is-col-tool */\n\n        .row-active .is-col-tool {\n            display: flex;\n        }\n        .is-builder[rowoutline] .row-active .is-col-tool {\n            display: none;\n        }\n        .is-builder[hidecolumntool] .row-active .is-col-tool {\n            display: none;\n        }\n        \n\n        .is-tool.is-col-tool {\n            flex-direction: row;\n            margin-top: 0px;\n            margin-left: -1px;\n        }\n        .is-tool.is-col-tool button {\n            width: 25px;\n            height: 25px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .is-tool.is-col-tool .cell-add {\n            background: #0fcc52;\n        }\n        .is-tool.is-col-tool .cell-more {\n            background: rgba(216, 200, 6, 0.9);\n        }\n        .is-tool.is-col-tool .cell-remove {\n            background: rgba(255, 85, 4, 0.9);\n        }\n        .is-tool.is-col-tool svg {\n            width: 23px;\n            height: 23px;\n            fill: #fff !important;\n        }\n        .is-tool.is-col-tool .cell-more svg {\n            width: 14px;\n            height: 14px;\n        }\n\n        \n        .is-builder[gray] .is-tool.is-col-tool {\n            background: rgba(243, 243, 243, 0.9);\n            flex-direction: row;\n            margin-top: -2px;\n        }\n        .is-builder[gray] .is-tool.is-col-tool button {\n            width: 27px;\n            height: 27px;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-add {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-more {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-remove {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool svg {\n            width: 18px;\n            height: 18px;\n            fill: #000 !important;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-more svg {\n            width: 12px;\n            height: 12px;\n        }\n\n\n        .is-builder[gridoutline] > div > div {\n            outline: 1px solid rgba(132, 132, 132, 0.27);\n            outline-offset: 1px;\n        }\n\n\n        \n\n        /* Preferences */\n\n        #_cbhtml[gray] .is-tool.is-column-tool {\n            background: rgba(243, 243, 243, 0.9);\n            flex-direction: row;\n            margin-top: -2px;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool button {\n            width: 27px;\n            height: 27px;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool .cell-add {\n            background: transparent;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool .cell-more {\n            background: transparent;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool .cell-remove {\n            background: transparent;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool svg {\n            width: 18px;\n            height: 18px;\n            fill: #000;\n        }\n        #_cbhtml[gray] .is-tool.is-column-tool .cell-more svg {\n            width: 12px;\n            height: 12px;\n        }\n\n\n\n        .is-builder[gray] .is-tool.is-row-tool {\n            background: rgba(243, 243, 243, 0.9);\n        }\n        .is-builder[gray] .is-tool.is-row-tool button {\n            width: 27px;\n            height: 27px;\n        }\n        .is-builder[gray] .is-tool.is-row-tool svg {\n            fill: #000;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-handle {\n            display: flex;\n            height: 27px;\n            justify-content: center;\n            align-items: center;\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-handle svg {\n            width: 11px;\n            height: 11px;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-grideditor {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-grideditor svg {\n            width: 13px;\n            height: 13px;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-more {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-more svg {\n            width: 12px;\n            height: 12px;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-remove {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-row-tool .row-remove svg {\n            width: 19px;\n            height: 19px;\n        }\n\n\n\n        .is-builder[gray] .is-rowadd-tool {\n            border-bottom: 1px solid rgba(222, 222, 222, 0.32);\n        }\n        .is-builder[gray] .is-rowadd-tool button {\n            border: 1px solid rgba(0, 0, 0, 0.13);\n        }\n\n\n        /* Preferences */\n\n        .is-tool.is-row-tool .row-grideditor {\n            display: none;\n        }\n        \n        .is-builder {\n            /*\n            &[grideditor] {\n                & > div > div.cell-active {\n                    outline: $ui-grideditor-cell-outline-active;\n                } \n                .row-active {\n                    outline: $ui-grideditor-row-outline-active;\n                    z-index: 1;\n                } \n                .row-active.row-outline {\n                    outline: $ui-grideditor-rowoutline-row-outline-active;\n                } \n            }\n            */\n        }\n        .is-builder[minimal] .is-tool.is-row-tool .row-grideditor {\n            display: block;\n        }\n        .is-builder[minimal] .is-tool.is-row-tool .row-more {\n            display: none;\n        }\n        .is-builder[clean] .is-tool.is-row-tool {\n            background: rgba(243, 243, 243, 0.9);\n            outline: none;\n        }\n        .is-builder[clean] .is-tool.is-row-tool .row-grideditor {\n            display: block;\n            background: transparent;\n        }\n        .is-builder[clean] .is-tool.is-row-tool .row-grideditor svg {\n            fill: #000;\n            width: 13px;\n            height: 13px;\n            margin-left: -1px;\n        }\n        .is-builder[clean] .is-tool.is-row-tool .row-more {\n            display: none;\n        }\n        .is-builder[clean] .is-tool.is-row-tool .row-handle {\n            display: none;\n        }\n        .is-builder[clean] .is-tool.is-row-tool .row-remove {\n            display: none;\n        }\n        .is-builder[clean] .row-outline {\n            outline: none;\n        }\n        .is-builder[clean] .cell-active {\n            outline: none;\n        }\n        .is-builder[clean] .row-active:not([data-protected]) {\n            outline: 1px solid rgba(132, 132, 132, 0.2);\n        }\n        .is-builder[leftrowtool] .is-tool.is-row-tool {\n            right: auto;\n            left: -40px;\n        }\n        .is-builder.builder-active > div:not(.row-active) {\n            border-right: 120px rgba(0, 0, 0, 0) solid;\n            margin-right: -120px;\n        }\n        .is-builder[leftrowtool].builder-active > div:not(.row-active) {\n            border-left: 120px rgba(0, 0, 0, 0) solid;\n            margin-left: -120px;\n        }\n        .is-builder[rowoutline] .row-outline {\n            outline: none;\n        }\n        .is-builder[rowoutline] .cell-active {\n            outline: none !important; /* ADDED IMPORTANT */\n        }\n        .is-builder[rowoutline] .row-active:not([data-protected]) {\n            outline: 1px solid #00da89;\n        }\n        .is-builder[grayoutline] .row-outline {\n            outline: none;\n        }\n        .is-builder[grayoutline] .cell-active:not([data-protected]) {\n            outline: 1px solid rgba(132, 132, 132, 0.1);\n        }\n        .is-builder[grayoutline] .row-active:not([data-protected]) {\n            outline: 1px solid rgba(132, 132, 132, 0.2);\n        }\n        .is-builder[rowoutline][grayoutline] .row-outline {\n            outline: none;\n        }\n        .is-builder[rowoutline][grayoutline] .cell-active {\n            outline: none;\n        }\n        .is-builder[rowoutline][grayoutline] .row-active:not([data-protected]) {\n            outline: 1px solid rgba(132, 132, 132, 0.2);\n        }\n        .is-builder[hideoutline] .row-outline {\n            outline: none !important;\n        }\n        .is-builder[hideoutline] .cell-active {\n            outline: none !important;\n        }\n        .is-builder[hideoutline] .row-active {\n            outline: none !important;\n        }\n        .is-builder[hideoutline] .row-active.row-outline {\n            outline: none !important;\n        }\n        .is-builder[hidesnippetaddtool] .row-outline .is-rowadd-tool,\n        .is-builder[hidesnippetaddtool] .row-active .is-rowadd-tool {\n            display: none;\n        }\n        .is-builder[hideelementhighlight] .elm-active {\n            background-color: transparent !important; /* ADDED IMPORTANT */\n        }\n        \n        #_cbhtml[minimal] .is-tool.is-column-tool .cell-more {\n            display: none;\n        }\n        #_cbhtml[clean] .is-tool.is-column-tool {\n            display: none;\n        }\n        #_cbhtml[hidecolumntool] .is-tool.is-column-tool {\n            display: none;\n        }\n        #_cbhtml[hideelementtool] .is-tool.is-element-tool {\n            display: none !important;\n        }\n        #_cbhtml .is-element-tool .elm-settings {\n            display: none;\n        }\n        #_cbhtml[emailmode] .is-element-tool .elm-add,\n        #_cbhtml[emailmode] .is-element-tool .elm-more,\n        #_cbhtml[emailmode] .is-element-tool .elm-remove {\n            display: none !important;\n        }\n        #_cbhtml[emailmode] .is-element-tool .elm-settings {\n            display: block;\n        }\n\n\n\n\n\n        .is-builder.builder-active > div:not(.row-active) { \n            border-right: 120px rgba(0,0,0,0) solid;\n            margin-right: -120px;\n        }\n        .is-builder[leftrowtool].builder-active > div:not(.row-active) { \n            border-left: 120px rgba(0,0,0,0) solid;\n            margin-left: -120px;\n        }\n\n\n\n\n        /* Prevent css framework overide (Materialize) */\n        .is-ui [type="checkbox"]:not(:checked), .is-ui [type="checkbox"]:checked {\n            position: unset !important;\n        }\n        .is-ui input[type=range] {\n            border: none;\n        }\n        .is-ui form {\n            background: unset;\n            margin: unset;\n            padding: unset;\n            border: unset;\n        }\n        .is-ui svg {\n            max-width: unset;\n        }\n        \n        /* Prevent css framework overide (Tailwind) */\n        .is-ui svg {\n            display: initial !important;\n        }\n        .is-section-tool svg,\n        .is-row-tool svg,\n        .is-col-tool svg {\n            display: initial !important;\n        }\n        \n        /* Make slider block resizable */\n        .is-builder > div > div[data-module=slider-builder].cell-active {\n            padding: 0 2px 4px !important;\n            z-index: 1 !important;\n        }\n        \n        \n        </style>\n        ')}}class nf{constructor(t){this.builder=t;const e=this.builder.util;this.util=e;const i=this.builder.builderStuff,n=this.builder.dom;this.dom=n,this.id=this.builder.util.makeId();const o=`\n        <div class="is-modal mediasource" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n            <div class="is-modal-content" style="max-width:550px;">\n\n                <label for="inpMediaSource" style="display:block">${e.out("Source")}:</label>\n                <div class="image-src">\n                    <input id="inpMediaSource" class="input-src" type="text">\n                    <button title="${e.out("Select")}" class="input-select" style="flex:none;">\n                        ${this.builder.opts.selectIcon}\n                    </button>\n                    <div class="input-upload" style="position: relative; flex: 0 0 auto;box-shadow: rgba(0, 0, 0, 0.32) 0px 3px 6px -6px;">\n                        <form class="form-upload-larger" target="frameTarget${this.id}" method="post" action="${this.builder.opts.largerImageHandler}" enctype="multipart/form-data" style="position:absolute;display:flex;justify-content: center;align-items: center;top:0;left:0;width:100%;height:100%;">\n                            <input name="hidRefId" class="input-ref-id" type="hidden" value="">\n                            <svg class="is-icon-flex" style="width:18px;height:18px;"><use xlink:href="#ion-ios-cloud-upload-outline"></use></svg>\n                            <input title="${e.out("Select")}" name="fileImage" class="input-file-select" type="file" accept="image/*,video/mp4" style="position:absolute;top:-30px;left:0;width:100%;height:80px;opacity: 0;cursor: pointer;">\n                        </form>\n                        <iframe tabIndex="0" id="frameTarget${this.id}" name="frameTarget${this.id}" src="about:blank" style="width:1px;height:1px;position:absolute;top:0;right:-100000px"></iframe>\n                    </div>\n                </div>\n\n                <div style="text-align:right;margin-top:20px;">\n                    <button title="${e.out("Cancel")}" class="input-cancel classic-secondary">${e.out("Cancel")}</button>\n                    <button title="${e.out("Ok")}" class="input-ok classic-primary">${e.out("Ok")}</button>\n                </div>\n\n            </div>\n        </div>\n        `;n.appendHtml(i,o);const s=document.querySelector(".mediasource");if(this.modalMediaSelect=s,""!==this.builder.opts.largerImageHandler||this.builder.opts.onLargerImageUpload||(s.querySelector(".input-upload").style.display="none"),this.builder.opts.onImageSelectClick||""!==this.builder.opts.imageselect||(s.querySelector(".input-select").style.display="none"),this.builder.opts.onImageSelectClick||this.builder.opts.imageselect||this.builder.opts.onFileSelectClick||this.builder.opts.fileselect){const t=s.querySelector(".input-src"),e=s.querySelector(".input-select");e&&n.addEventListener(e,"click",(()=>{let i=this.builder.targetAssetType,n=t,o=e;if("media"===i&&(this.builder.opts.onMediaSelectClick||this.builder.opts.onImageSelectClick))this.builder.opts.onMediaSelectClick?this.builder.opts.onMediaSelectClick({targetInput:n,theTrigger:o}):this.builder.opts.onImageSelectClick({targetInput:n,theTrigger:o});else if("video"===i&&this.builder.opts.onVideoSelectClick)this.builder.opts.onVideoSelectClick({targetInput:n,theTrigger:o});else if("image"===i&&this.builder.opts.onImageSelectClick)this.builder.opts.onImageSelectClick({targetInput:n,theTrigger:o});else if("audio"===i&&this.builder.opts.onAudioSelectClick)this.builder.opts.onAudioSelectClick({targetInput:n,theTrigger:o});else if("all"===i&&this.builder.opts.onFileSelectClick)this.builder.opts.onFileSelectClick({targetInput:n,theTrigger:o});else{let n,o;"media"===i?(o=this.builder.builderStuff.querySelector(".is-modal.mediaselect"),n=o.querySelector("iframe"),"about:blank"===n.src&&(this.builder.opts.mediaSelect?n.src=this.builder.opts.mediaSelect:this.builder.opts.imageSelect&&(n.src=this.builder.opts.imageSelect))):"video"===i?(o=this.builder.builderStuff.querySelector(".is-modal.videoselect"),n=o.querySelector("iframe"),"about:blank"===n.src&&(n.src=this.builder.opts.videoSelect)):"image"===i?(o=this.builder.builderStuff.querySelector(".is-modal.imageselect"),n=o.querySelector("iframe"),"about:blank"===n.src&&(n.src=this.builder.opts.imageSelect)):"audio"===i?(o=this.builder.builderStuff.querySelector(".is-modal.audioselect"),n=o.querySelector("iframe"),"about:blank"===n.src&&(n.src=this.builder.opts.audioSelect)):"all"===i&&(o=this.builder.builderStuff.querySelector(".is-modal.fileselect"),n=o.querySelector("iframe"),"about:blank"===n.src&&(n.src=this.builder.opts.fileSelect)),this.builder.util.showModal(o,!1,(()=>{e.removeAttribute("data-focus"),e.focus()})),e.setAttribute("data-focus",!0),this.builder.targetInput=t,this.builder.targetCallback=null}}))}let r=s.querySelector(".input-file-select"),l=s.querySelector(".form-upload-larger");n.addEventListener(r,"change",(t=>{let e=r;for(;"form"!==e.nodeName.toLowerCase();)e=e.parentNode;let i=e;n.addClass(i,"please-wait"),s.querySelector(".input-ref-id").value=this.builder.opts.customval;let o=this.builder.targetAssetType;"media"===o&&this.builder.opts.onMediaUpload?this.builder.opts.onMediaUpload(t):"video"===o&&this.builder.opts.onVideoUpload?this.builder.opts.onVideoUpload(t):"image"===o&&this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):"audio"===o&&this.builder.opts.onAudioUpload?this.builder.opts.onAudioUpload(t):"all"===o&&this.builder.opts.onFileUpload?this.builder.opts.onFileUpload(t):this.builder.opts.onLargerImageUpload?this.builder.opts.onLargerImageUpload(t):("media"===o?l.setAttribute("action",this.builder.opts.mediaHandler):"video"===o?l.setAttribute("action",this.builder.opts.videoHandler):"image"===o?l.setAttribute("action",this.builder.opts.largerImageHandler):"audio"===o?l.setAttribute("action",this.builder.opts.audioHandler):"all"===o&&(l.setAttribute("action",this.builder.opts.fileHandler),this.builder.opts.fileHandler||l.setAttribute("action",this.builder.opts.mediaHandler)),i.submit()),r.value=""}));const a=s.querySelector(".input-ok");n.addEventListener(a,"click",(()=>{const t=s.querySelector(".input-src").value;this.builder.mediaSelectedCallback&&this.builder.mediaSelectedCallback(t),this.builder.hideModal(s)}));const d=s.querySelector(".input-cancel");n.addEventListener(d,"click",(()=>{this.builder.hideModal(s)}))}openMediaPicker(t,e,i,n){this.builder.targetAssetType=e;const o=this.modalMediaSelect;let s=o.querySelector(".input-file-select");"all"===e?s.setAttribute("accept","*"):"media"===e?s.setAttribute("accept","image/*,video/mp4"):"video"===e?s.setAttribute("accept","video/mp4"):"image"===e?s.setAttribute("accept","image/*"):"audio"===e&&s.setAttribute("accept","audio/mp3");o.querySelector(".input-src").value=t,this.builder.mediaSelectedCallback=i,o.style.zIndex="10005",this.util.showModal(o,!1,(()=>{n&&(n.removeAttribute("data-focus"),n.focus())})),n&&n.setAttribute("data-focus",!0)}}class of{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;this.dom=n}getVisibility(t,e){return"xs"===e?!t.classList.contains("xs-hidden"):"sm"===e?!t.classList.contains("sm-hidden"):"md"===e?!t.classList.contains("md-hidden"):""===e?!t.classList.contains("desktop-hidden"):void 0}setVisibility(t,e,i){"xs"===i&&(t?e.classList.remove("xs-hidden"):e.classList.add("xs-hidden")),"sm"===i&&(t?e.classList.remove("sm-hidden"):e.classList.add("sm-hidden")),"md"===i&&(t?e.classList.remove("md-hidden"):e.classList.add("md-hidden")),""===i&&(t?e.classList.remove("desktop-hidden"):e.classList.add("desktop-hidden"))}readTarget(t){const e=t.querySelector(".input-device.on"),i=e.getAttribute("data-value");return""===i&&this.builder.livePreview.resizePreview(1920),"md"===i&&this.builder.livePreview.resizePreview(1024),"sm"===i&&this.builder.livePreview.resizePreview(768),"xs"===i&&this.builder.livePreview.resizePreview(375),e.getAttribute("data-value")}showVisibility(t,e){e?(t.querySelector(".input-visible").classList.add("on"),t.querySelector(".input-hidden").classList.remove("on")):(t.querySelector(".input-visible").classList.remove("on"),t.querySelector(".input-hidden").classList.add("on"))}}class sf{constructor(t){this.builder=t;const e=this.builder.util,i=this.builder.builderStuff;this.util=e,this.builderStuff=i;const n=this.builder.dom;if(this.dom=n,!i.querySelector(".content-preview")){let t=`\n            <style>\n            .is-modal.content-preview {\n                transition: all 0.1s ease;\n            }\n            .is-modal.content-preview > div > div {\n                transition: all 0.1s ease;\n            }\n            .is-modal.content-preview .is-modal-refresh,\n            .is-modal.content-preview .is-modal-device,\n            .is-modal.content-preview .is-modal-close {\n                background:transparent !important;\n                width:32px !important;\n                height:32px !important;\n                position:absolute !important;\n                box-shadow:none !important;\n            }\n            .is-modal.content-preview .is-modal-device {\n                top:2px;\n                left:2px;\n            }\n            .is-modal.content-preview .is-modal-refresh {\n                top:2px;\n                right:34px;\n            }\n            .is-modal.content-preview .is-modal-close {\n                top:2px;\n                right:2px;\n            }\n    \n            .is-screen-1920 { \n                width: 576px !important;\n                height: 332px !important; \n            }\n            .is-screen-1440 { \n                width: 431px !important; \n                height: 258px !important; \n            }\n            .is-screen-768 { \n                width: 245px !important;\n                height: 363px !important;\n            }\n            .is-screen-1024 { \n                width: 328px !important;\n                height: 281px !important;\n            }\n            .is-screen-375 { \n                width: 167px !important; \n                height: 332px !important;\n            }\n    \n            .is-screen-1920 .preview-screen {\n                width: 1920px;height: 992px;transform: scale(0.3);\n            }\n            .is-screen-1440 .preview-screen {\n                width: 1440px;height: 744px;transform: scale(0.3);\n            }\n            .is-screen-768 .preview-screen {\n                width: 768px;height: 1024px;transform: scale(0.32);\n            }\n            .is-screen-1024 .preview-screen {\n                width: 1024px;height: 768px;transform: scale(0.32);\n            }\n            .is-screen-375 .preview-screen {\n                width: 375px;height: 667px;transform: scale(0.446);\n            }\n            .is-screen-375 .is-modal-bar > span {\n                display: none;\n            }\n    \n            .content-preview:focus-within {\n                z-index:100021 !important\n            }\n            </style>\n            <div style="z-index:10004;${this.builder.previewStyle}" class="is-modal is-modal-content content-preview is-screen-1920" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n                <div class="is-modal-bar is-draggable" draggable=""> \n                    <span>${e.out("Live Preview")}</span>\n                    <button class="is-modal-device" tabindex="-1" style="user-select:none;cursor:default">\n                        \n                    </button>\n                    <button class="is-modal-refresh" tabindex="-1" title="${e.out("Reload")}">\n                        <svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#icon-reload"></use></svg>\n                    </button>\n                    <button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">\n                        <svg class="is-icon-flex" style="width:23px;height:23px;"><use xlink:href="#ion-ios-close-empty"></use></svg>\n                    </button>\n                </div>\n                <div style="position:relative;position:absolute;top:0;left:0;width:100%;height:100%;border-top:transparent 35px solid;">\n                    <div class="preview-screen" style="padding:0;position: absolute;top: 0;left: 0;box-sizing: border-box;transform-origin: top left;">\n                        <iframe src="about:blank" style="box-sizing:border-box;width: 100%;height: 100%;position:absolute;"></iframe>\n                    </div>\n                </div>\n                <div style="position:absolute;left:3px;bottom:3px;border-radius:3px;display:flex;overflow:hidden;">\n                    <button class="is-modal-size" tabindex="-1" title="${e.out("Screen Sizes")}" style="width:30px;height:30px;">\n                        <svg class="is-icon-flex" style="width:23px;height:23px;"><use xlink:href="#icon-devices"></use></svg>\n                    </button>\n                </div>\n            </div>\n            `;n.appendHtml(i,t);const o=i.querySelector(".is-modal.content-preview");this.modal=o;o.querySelector(".is-modal-close").addEventListener("click",(()=>{this.closePreview()}));o.querySelector(".is-modal-size").addEventListener("click",(()=>{o.classList.contains("is-screen-1920")?this.resizePreview(1440):o.classList.contains("is-screen-1440")?this.resizePreview(1024):o.classList.contains("is-screen-1024")?this.resizePreview(768):o.classList.contains("is-screen-768")?this.resizePreview(375):o.classList.contains("is-screen-375")&&this.resizePreview(1920)}));o.querySelector(".is-modal-refresh").addEventListener("click",(()=>{this.previewRefresh(!1,!0)}));let s=this.builder.settings.onChange;this.builder.settings.onChange=()=>{s.call(this),this.builder.doc.querySelector(".is-wrapper")||this.previewRefresh()}}}resizePreview(t){let e=this.modal,i=this.util;e.classList.remove("is-screen-1920"),e.classList.remove("is-screen-1440"),e.classList.remove("is-screen-1920"),e.classList.remove("is-screen-1024"),e.classList.remove("is-screen-768"),e.classList.remove("is-screen-375");const n=e.querySelector(".is-modal-device"),o=e.querySelector(".preview-screen");o.style.transition="none",o.style.opacity="0",1440===t?(e.classList.add("is-screen-1440"),localStorage.setItem("_livepreviewscreen","is-screen-1440"),n.setAttribute("title",i.out("Laptop")),n.innerHTML='<svg class="is-icon-flex" style="width:18px;height:18px"><use xlink:href="#icon-device-laptop"></use></svg>'):1024===t?(e.classList.add("is-screen-1024"),n.setAttribute("title",i.out("Tablet (Landscape)")),localStorage.setItem("_livepreviewscreen","is-screen-1024"),n.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>'):768===t?(e.classList.add("is-screen-768"),localStorage.setItem("_livepreviewscreen","is-screen-768"),n.setAttribute("title",i.out("Tablet (Portrait)")),n.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>'):375===t?(e.classList.add("is-screen-375"),localStorage.setItem("_livepreviewscreen","is-screen-375"),n.setAttribute("title",i.out("Mobile")),n.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-mobile"></use></svg>'):1920===t&&(e.classList.add("is-screen-1920"),localStorage.setItem("_livepreviewscreen","is-screen-1920"),n.setAttribute("title",i.out("Desktop")),n.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-desktop"></use></svg>'),this.previewRefresh(!0),setTimeout((()=>{o.style.opacity="",o.style.transition=""}),100)}previewRefresh(t,e){if(this.modal.classList.contains("active")){this.builder.onPreviewOpen&&this.builder.onPreviewOpen();const i=this.modal.querySelector("iframe");if(this.builder.doc.querySelector(".is-wrapper")){this.builder.count||(this.builder.count=0),this.builder.count++;let t=this.builder.livePreviewAlwaysReload;if(this.builder.count===this.builder.livePreviewReloadEvery&&(this.builder.livePreviewAlwaysReload=!0,this.builder.count=0),this.builder.livePreviewAlwaysReload||e)i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else{let t=i.contentDocument||i.contentWindow.document;if(t)if(t.body)if(""===t.body.innerHTML)i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else{let e=localStorage.getItem("preview-html"),i=t.querySelector(".is-wrapper"),n=this.builder.doc.createRange();i.innerHTML="",i.appendChild(n.createContextualFragment(e));let o=t.querySelectorAll("link"),s=this.builder.doc.getElementsByTagName("link");Array.from(s).map((e=>{let i=e.href.toLowerCase();if(-1!==i.indexOf("/basetype-")||-1!==i.indexOf("/type-")){let n=!1;if(o.forEach((t=>{let e=t.href.toLowerCase();e&&(-1===e.indexOf("/basetype-")&&-1===e.indexOf("/type-")||i===e&&(n=!0))})),!n){const i=e.cloneNode(!0);t.head.appendChild(i)}}})),o.forEach((e=>{let i=e.href.toLowerCase();if(-1!==i.indexOf("/basetype-")||-1!==i.indexOf("/type-")){let n=!1;Array.from(s).map((t=>{let e=t.href.toLowerCase();e&&(-1===e.indexOf("/basetype-")&&-1===e.indexOf("/type-")||i===e&&(n=!0))})),n||t.head.removeChild(e)}})),o=t.querySelectorAll("script"),o.forEach((e=>{let i=e.getAttribute("src");if(i&&(-1!==i.indexOf("box-flex.js")||-1!==i.indexOf("box.js"))){e.parentElement.removeChild(e);let n=document.createElement("script");n.setAttribute("src",i),t.body.appendChild(n)}}))}else i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3)}this.builder.livePreviewAlwaysReload=t}else if(this.builder.previewURL)if(this.builder.livePreviewAlwaysReload)i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else{let t=i.contentDocument||i.contentWindow.document;if(t)if(t.body)if(""===t.body.innerHTML)i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else{let e=this.builder.html(),n=t.querySelector(".container");if(n||(n=t.querySelector(".is-container")),n){let t=this.builder.doc.createRange();n.innerHTML="",n.appendChild(t.createContextualFragment(e))}else i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3)}else i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3);else i.src=this.builder.previewURL+"?"+Math.floor(Date.now()/1e3)}else try{this.writeHtml(i)}catch(t){}i.onload=()=>{this.builder.onPreviewContentLoad&&!t&&this.builder.onPreviewContentLoad(),i.contentWindow.document.addEventListener("click",(()=>{i.focus()}))}}}openPreview(){if(this.modal.classList.contains("active"))return;const t=this.util,e=this.modal;if(e.classList.add("active"),null!=localStorage.getItem("_livepreviewscreen")){e.classList.remove("is-screen-1920"),e.classList.remove("is-screen-1440"),e.classList.remove("is-screen-1024"),e.classList.remove("is-screen-768"),e.classList.remove("is-screen-375"),e.classList.add(localStorage.getItem("_livepreviewscreen"));const i=e.querySelector(".is-modal-device");e.classList.contains("is-screen-1920")?(i.setAttribute("title",t.out("Desktop")),i.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-desktop"></use></svg>'):e.classList.contains("is-screen-1440")?(i.setAttribute("title",t.out("Laptop")),i.innerHTML='<svg class="is-icon-flex" style="width:18px;height:18px"><use xlink:href="#icon-device-laptop"></use></svg>'):e.classList.contains("is-screen-1024")?(i.setAttribute("title",t.out("Tablet (Landscape)")),i.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px;transform:rotate(-90deg)"><use xlink:href="#icon-device-tablet"></use></svg>'):e.classList.contains("is-screen-768")?(i.setAttribute("title",t.out("Tablet (Portrait)")),i.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-tablet"></use></svg>'):e.classList.contains("is-screen-375")&&(i.setAttribute("title",t.out("Mobile")),i.innerHTML='<svg class="is-icon-flex" style="width:16px;height:16px"><use xlink:href="#icon-device-mobile"></use></svg>')}this.previewRefresh(),localStorage.setItem("_livepreview","1")}closePreview(){this.modal.classList.remove("active"),this.builder.onPreviewClose&&this.builder.onPreviewClose(),localStorage.removeItem("_livepreview")}writeHtml(t){let e=this.builder.doc,i="",n=e.querySelectorAll("base[href]");n.length>0&&(i='<base href="'+n[0].href+'" />');let o="",s=e.querySelectorAll("link[href]");for(let t=0;t<s.length;t++)-1!=s[t].href.indexOf(".css")&&-1==s[t].href.indexOf("contentbox.css")&&-1==s[t].href.indexOf("contentbuilder.css")&&(o+='<link href="'+s[t].href+'" rel="stylesheet">');let r="",l=e.head.querySelectorAll("script[src]");for(let t=0;t<l.length;t++)-1!=l[t].src.indexOf(".js")&&-1==l[t].src.indexOf("_next/")&&-1==l[t].src.indexOf("static/js/")&&-1==l[t].src.indexOf("src/")&&-1==l[t].src.indexOf("index")&&-1==l[t].src.indexOf("contentbox.js")&&-1==l[t].src.indexOf("contentbox.min.js")&&-1==l[t].src.indexOf("contentbuilder.js")&&-1==l[t].src.indexOf("contentbuilder.min.js")&&-1==l[t].src.indexOf("plugin.js")&&-1==l[t].src.indexOf("config.js")&&-1==l[t].src.indexOf("en.js")&&-1==l[t].src.indexOf("rangy")&&-1==l[t].src.indexOf("monaco-editor")&&-1==l[t].src.indexOf("minimalist-blocks")&&(r+='<script src="'+l[t].src+'"><\/script>');let a="";l=e.body.querySelectorAll("script[src]");for(let t=0;t<l.length;t++)-1!=l[t].src.indexOf(".js")&&-1==l[t].src.indexOf("_next/")&&-1==l[t].src.indexOf("static/js/")&&-1==l[t].src.indexOf("src/")&&-1==l[t].src.indexOf("index")&&-1==l[t].src.indexOf("contentbox.js")&&-1==l[t].src.indexOf("contentbox.min.js")&&-1==l[t].src.indexOf("contentbuilder.js")&&-1==l[t].src.indexOf("contentbuilder.min.js")&&-1==l[t].src.indexOf("plugin.js")&&-1==l[t].src.indexOf("config.js")&&-1==l[t].src.indexOf("en.js")&&-1==l[t].src.indexOf("rangy")&&-1==l[t].src.indexOf("monaco-editor")&&-1==l[t].src.indexOf("minimalist-blocks")&&(a+='<script src="'+l[t].src+'"><\/script>');let d="800px",c=window.getComputedStyle(e.querySelector(".is-builder")).getPropertyValue("max-width");isNaN(parseInt(c))||(d=c);let u=this.builder.html();e=t.contentWindow.document,e.open(),e.write("<html><head>"+i+'<meta charset="utf-8"><title></title><style>#_cbhtml > *:not(.is-lightbox) {display:none}</style>'+o+(this.builder.useLightbox?'<link href="'+this.builder.assetPath+'scripts/lightbox/lightbox.css" rel="stylesheet">':"")+"<style>.slider-image { display:block !important; }.container {margin:35px auto 0; max-width: "+d+'; width:100%; padding:0 20px; box-sizing: border-box;}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"><\/script>'+r+'</head><body><div class="container preview">'+u+"</div>"+a+(this.builder.useLightbox?'<script src="'+this.builder.assetPath+'scripts/lightbox/lightbox.js"><\/script><script>window.lightbox.init();<\/script>':"")+"</body></html>"),e.close()}}class rf{constructor(t={}){let e,i,s={page:"",container:".container",row:"",cols:[],colequal:[],colsizes:[],imageQuality:.92,elementSelection:!0,paste:"text",snippetJSON:{snippets:[]},onPreviewOpen:()=>{let t=this.html();localStorage.setItem("preview-html",t)},previewStyle:"top:auto;bottom:50px;left:50px;right:auto;",livePreviewOpen:!1,livePreviewAlwaysReload:!1,livePreviewReloadEvery:30,scriptPath:"",plugins:[],pluginPath:"/assets/cbox/contentbuilder/",disableConfig:!1,modulePath:"assets/modules/",assetPath:"assets/",fontAssetPath:"assets/fonts/",snippetData:"assets/minimalist-blocks/snippetlist.html",snippetUrl:"assets/minimalist-blocks/content.js",snippetPath:"assets/minimalist-blocks/",snippetPathReplace:[],snippetCategories:[[120,"Basic"],[118,"Article"],[101,"Headline"],[119,"Buttons"],[102,"Photos"],[103,"Profile"],[116,"Contact"],[104,"Products"],[105,"Features"],[106,"Process"],[107,"Pricing"],[108,"Skills"],[109,"Achievements"],[110,"Quotes"],[111,"Partners"],[112,"As Featured On"],[113,"Page Not Found"],[114,"Coming Soon"],[115,"Help, FAQ"]],defaultSnippetCategory:120,snippetHandle:!0,sidePanel:"right",snippetList:"#divSnippetList",onRender:function(){},onChange:function(){},largerImageHandler:"",imageHandler:"",fileHandler:"",mediaHandler:"",videoHandler:"",audioHandler:"",colors:["#ff8f00","#ef6c00","#d84315","#c62828","#58362f","#37474f","#353535","#f9a825","#9e9d24","#558b2f","#ad1457","#6a1b9a","#4527a0","#616161","#00b8c9","#009666","#2e7d32","#0277bd","#1565c0","#283593","#9e9e9e"],builderMode:"",rowTool:"right",rowcolOutline:!0,columnTool:!0,outlineMode:"",toolStyle:"",outlineStyle:"",snippetAddTool:!0,elementTool:!0,elementHighlight:!0,columnHtmlEditor:!0,rowHtmlEditor:!0,htmlSyntaxHighlighting:!0,snippetOpen:!1,toolbar:"top",toolbarDisplay:"auto",shortenHTML:!0,resizeHeight:!1,snippetsSidebarDisplay:"auto",imageEmbed:!0,imageselect:"",fileselect:"",imageSelect:"",fileSelect:"",videoSelect:"",audioSelect:"",mediaSelect:"",selectIcon:'<svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#icon-folder"></use></svg>',otherSelect:"",otherSelectCaption:"Select Document",otherSelectIcon:'<svg class="is-icon-flex" style="width:16px;height:16px;"><use xlink:href="#icon-list-search"></use></svg>',imageSelectWidth:"1024px",imageSelectHeight:"80vh",fileSelectWidth:"1024px",fileSelectHeight:"80vh",videoSelectWidth:"1024px",videoSelectHeight:"80vh",audioSelectWidth:"1024px",audioSelectHeight:"80vh",mediaSelectWidth:"1024px",mediaSelectHeight:"80vh",otherSelectWidth:"1024px",otherSelectHeight:"80vh",assetRefresh:!1,customTags:[],buttons:["bold","italic","underline","formatting","color","align","textsettings","createLink","tags","|","undo","redo","zoom","livepreview","more"],buttonsMore:["icon","image","|","list","font","formatPara","|","html","preferences"],elementButtons:["left","center","right","full","undo","redo","zoom","livepreview","more"],elementButtonsMore:["|","html","preferences"],iconButtons:["icon","color","textsettings","createLink","|","undo","redo","zoom","livepreview","more"],iconButtonsMore:["|","html","preferences"],lang:[],checkLang:!1,clearPreferences:!1,toolbarAddSnippetButton:!1,animateModal:!0,defaultFontSizes:[16,17,18,19,24,32,48,76,96,120,200,300],fontSizeClassValues:[12,14,15,16,17,18,19,21,24,28,32,35,38,42,46,48,50,54,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,256,260,264,268,272,276,280,284,288,292,296,300,304,308,312,316,320,324,328,332,336,340,344,348,352,356,360,364,368,372,376,380,384,388,392,396,400],gradientcolors:[["linear-gradient(0deg, rgb(255, 57, 25), rgb(249, 168, 37))"],["linear-gradient(0deg, rgb(255, 57, 25), rgb(255, 104, 15))"],["linear-gradient(0deg, #FF5722, #FF9800)"],["linear-gradient(0deg, #613ca2, rgb(110, 123, 217))"],["linear-gradient(0deg, rgb(65, 70, 206), rgb(236, 78, 130))"],["linear-gradient(0deg, rgb(0, 150, 102), rgb(90, 103, 197))"],["linear-gradient(30deg, rgb(249, 119, 148), rgb(98, 58, 162))"],["linear-gradient(0deg, rgb(223, 70, 137), rgb(90, 103, 197))"],["linear-gradient(0deg, rgb(40, 53, 147), rgb(90, 103, 197))"],["linear-gradient(0deg, rgb(21, 101, 192), rgb(52, 169, 239))"],["linear-gradient(0deg, rgb(32, 149, 219), rgb(139, 109, 230))"],["linear-gradient(0deg, rgb(90, 103, 197), rgb(0, 184, 201))"],["linear-gradient(0deg, rgb(0, 184, 201), rgb(253, 187, 45))"],["linear-gradient(0deg, rgb(255, 208, 100), rgb(239, 98, 159))"],["linear-gradient(0deg, rgb(0, 214, 223), rgb(130, 162, 253))"],["linear-gradient(0deg, rgb(50, 234, 251), rgb(248, 247, 126))"],["linear-gradient(0deg, rgb(141, 221, 255), rgb(255, 227, 255))"],["linear-gradient(0deg, rgb(255, 170, 170), rgb(255, 255, 200))"],["linear-gradient(0deg, rgb(239, 239, 239), rgb(252, 252, 252))"]],elementEditor:!0,customval:"",moduleConfig:[],elementAnimate:!1,framework:"",cellFormat:"",rowFormat:"",emailMode:!1,absolutePath:!1,emailSnippetCategories:[[1,"Logo"],[14,"Call to Action"],[2,"Title"],[3,"Title, Subtitle"],[4,"Info, Title"],[7,"Paragraph"],[6,"Heading"],[8,"Buttons"],[9,"Callouts"],[10,"Images + Caption"],[12,"Images"],[13,"List"],[15,"Pricing"],[16,"Quotes"],[17,"Profile"],[18,"Contact Info"],[19,"Footer"],[20,"Separator"]],defaultEmailSnippetCategory:14,undoRedoStyles:!1,maxEmbedImageWidth:1600,zoom:1,useLightbox:!1,lightboxArrow:!0,imageRenameOnEdit:!0,disableAutoEmbedVideo:!1,sectionTemplate:'\n            <div class="is-section is-box is-section-100 type-poppins">\n                <div class="is-overlay"></div>\n                <div class="is-boxes">\n                    <div class="is-box-centered">\n                        <div class="is-container is-content-900 v2 size-18 leading-14">\n                            [%CONTENT%]\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',colHeight:[300,350,400,450,500,550,600,650,700],cssClasses:{fontWeight:{thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black",defaultBold:"font-semibold",defaultNormal:"font-light"},fontStyle:{italic:"italic",normal:"not-italic"},textDecoration:{underline:"underline",linethrough:"line-through",normal:"no-underline"},textTransform:{uppercase:"uppercase",lowercase:"lowercase",capitalize:"capitalize",normal:"normal-case"},tracking:{tracking__100:"tracking--100",tracking__075:"tracking--75",tracking__050:"tracking-tighter",tracking__025:"tracking-tight",tracking_000:"tracking-normal",tracking_025:"tracking-wide",tracking_050:"tracking-wider",tracking_075:"tracking-75",tracking_100:"tracking-widest",tracking_125:"tracking-125",tracking_150:"tracking-150",tracking_175:"tracking-175",tracking_200:"tracking-200",tracking_225:"tracking-225",tracking_250:"tracking-250",tracking_275:"tracking-275",tracking_300:"tracking-300",tracking_325:"tracking-325",tracking_350:"tracking-350",tracking_375:"tracking-375",tracking_400:"tracking-400",tracking_425:"tracking-425",tracking_450:"tracking-450",tracking_475:"tracking-475",tracking_500:"tracking-500"},leading:{leading_5:"leading-05",leading_6:"leading-06",leading_7:"leading-07",leading_8:"leading-08",leading_9:"leading-09",leading_10:"leading-none",leading_11:"leading-11",leading_12:"leading-12",leading_125:"leading-tight",leading_13:"leading-13",leading_1375:"leading-snug",leading_14:"leading-14",leading_15:"leading-normal",leading_16:"leading-16",leading_1625:"leading-relaxed",leading_17:"leading-17",leading_18:"leading-18",leading_19:"leading-19",leading_20:"leading-loose",leading_21:"leading-21",leading_22:"leading-22",leading_23:"leading-23",leading_24:"leading-24",leading_25:"leading-25",leading_26:"leading-26",leading_27:"leading-27",leading_28:"leading-28",leading_29:"leading-29",leading_30:"leading-30"},opacity:{opacity_0:"opacity-0",opacity_2:"opacity-2",opacity_4:"opacity-4",opacity_5:"opacity-5",opacity_6:"opacity-6",opacity_8:"opacity-8",opacity_10:"opacity-10",opacity_12:"opacity-12",opacity_15:"opacity-15",opacity_20:"opacity-20",opacity_25:"opacity-25",opacity_30:"opacity-30",opacity_35:"opacity-35",opacity_40:"opacity-40",opacity_45:"opacity-45",opacity_50:"opacity-50",opacity_55:"opacity-55",opacity_60:"opacity-60",opacity_65:"opacity-65",opacity_70:"opacity-70",opacity_75:"opacity-75",opacity_80:"opacity-80",opacity_85:"opacity-85",opacity_90:"opacity-90",opacity_95:"opacity-95",opacity_100:"opacity-100"},padding:{all:{p_0:"p-0",p_1:"p-1",p_2:"p-2",p_3:"p-3",p_4:"p-4",p_5:"p-5",p_6:"p-6",p_7:"p-7",p_8:"p-8",p_9:"p-9",p_10:"p-10",p_11:"p-11",p_12:"p-12",p_14:"p-14",p_16:"p-16",p_20:"p-20"},x:{px_0:"px-0",px_1:"px-1",px_2:"px-2",px_3:"px-3",px_4:"px-4",px_5:"px-5",px_6:"px-6",px_7:"px-7",px_8:"px-8",px_9:"px-9",px_10:"px-10",px_11:"px-11",px_12:"px-12",px_14:"px-14",px_16:"px-16",px_20:"px-20"},y:{py_0:"py-0",py_1:"py-1",py_2:"py-2",py_3:"py-3",py_4:"py-4",py_5:"py-5",py_6:"py-6",py_7:"py-7",py_8:"py-8",py_9:"py-9",py_10:"py-10",py_11:"py-11",py_12:"py-12",py_14:"py-14",py_16:"py-16",py_20:"py-20"},top:{pt_0:"pt-0",pt_1:"pt-1",pt_2:"pt-2",pt_3:"pt-3",pt_4:"pt-4",pt_5:"pt-5",pt_6:"pt-6",pt_7:"pt-7",pt_8:"pt-8",pt_9:"pt-9",pt_10:"pt-10",pt_11:"pt-11",pt_12:"pt-12",pt_14:"pt-14",pt_16:"pt-16",pt_20:"pt-20"},right:{pr_0:"pr-0",pr_1:"pr-1",pr_2:"pr-2",pr_3:"pr-3",pr_4:"pr-4",pr_5:"pr-5",pr_6:"pr-6",pr_7:"pr-7",pr_8:"pr-8",pr_9:"pr-9",pr_10:"pr-10",pr_11:"pr-11",pr_12:"pr-12",pr_14:"pr-14",pr_16:"pr-16",pr_20:"pr-20"},bottom:{pb_0:"pb-0",pb_1:"pb-1",pb_2:"pb-2",pb_3:"pb-3",pb_4:"pb-4",pb_5:"pb-5",pb_6:"pb-6",pb_7:"pb-7",pb_8:"pb-8",pb_9:"pb-9",pb_10:"pb-10",pb_11:"pb-11",pb_12:"pb-12",pb_14:"pb-14",pb_16:"pb-16",pb_20:"pb-20"},left:{pl_0:"pl-0",pl_1:"pl-1",pl_2:"pl-2",pl_3:"pl-3",pl_4:"pl-4",pl_5:"pl-5",pl_6:"pl-6",pl_7:"pl-7",pl_8:"pl-8",pl_9:"pl-9",pl_10:"pl-10",pl_11:"pl-11",pl_12:"pl-12",pl_14:"pl-14",pl_16:"pl-16",pl_20:"pl-20"}},extend:{superscript:"sup",subscript:"sub"},textAlign:{left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"},display:{flex:"flex",block:"block",inline:"inline",inline_block:"inline-block"},flexDirection:{row:"flex-row",column:"flex-col",row_reverse:"flex-row-reverse",column_reverse:"flex-col-reverse"},flexWrap:{wrap:"flex-wrap",nowrap:"flex-nowrap",wrap_reverse:"flex-wrap-reverse"},justifyContent:{start:"justify-start",end:"justify-end",center:"justify-center",between:"justify-between",around:"justify-around",evenly:"justify-evenly"},alignItems:{start:"items-start",end:"items-end",center:"items-center",baseline:"items-baseline",stretch:"items-stretch"}},useCssClasses:!0,useButtonPlugin:!1,enableDragResize:!0,simpleTextSettings:!1,enableColumnsPerLine:!0};if(this.opts=Object.assign(this,s,t),window.data_basic&&(this.opts.snippetJSON=window.data_basic,""===this.opts.snippetPath&&(this.opts.snippetPath=window._snippets_path)),this.opts.snippetDisplay&&("auto"===this.opts.snippetDisplay?this.opts.snippetsSidebarDisplay="auto":this.opts.snippetsSidebarDisplay="always"),""===this.opts.scriptPath&&(this.opts.scriptPath=this.currentScriptPath()),window._txt&&(this.opts.lang=window._txt),this.settings=this.opts,""!==this.opts.imageSelect?this.opts.imageselect=this.opts.imageSelect:""!==this.opts.imageselect&&(this.opts.imageSelect=this.opts.imageselect),""!==this.opts.fileSelect?this.opts.fileselect=this.opts.fileSelect:""!==this.opts.fileselect&&(this.opts.fileSelect=this.opts.fileselect),""!==this.opts.videoSelect?this.opts.videoselect=this.opts.videoSelect:""!==this.opts.videoselect&&(this.opts.videoSelect=this.opts.videoselect),this.opts.onImageUpload||this.opts.onLargerImageUpload||(this.opts.onImageUpload=this.opts.onMediaUpload),this.opts.imageHandler||this.opts.largerImageHandler||(this.opts.imageHandler=this.opts.mediaHandler),""!==this.opts.imageHandler&&(this.opts.largerImageHandler=this.opts.imageHandler),this.opts.onImageUpload&&(this.opts.onLargerImageUpload=this.opts.onImageUpload),this.opts.emailMode&&(this.useButtonPlugin=!0),!this.useButtonPlugin){let t=this.plugins.filter((t=>"buttoneditor"!==t.name));this.plugins=[...t]}if("bootstrap"===this.opts.framework?(this.opts.row="row",this.opts.cols=["col-md-1","col-md-2","col-md-3","col-md-4","col-md-5","col-md-6","col-md-7","col-md-8","col-md-9","col-md-10","col-md-11","col-md-12"],this.opts.colequal=[],this.opts.colsizes=[]):"tailwind"===this.opts.framework?(this.opts.row="flex flex-col md:flex-row",this.opts.cols=["w-full md:w-1/12 px-4","w-full md:w-2/12 px-4","w-full md:w-3/12 px-4","w-full md:w-4/12 px-4","w-full md:w-5/12 px-4","w-full md:w-6/12 px-4","w-full md:w-7/12 px-4","w-full md:w-8/12 px-4","w-full md:w-9/12 px-4","w-full md:w-10/12 px-4","w-full md:w-11/12 px-4","w-full px-4"],this.opts.colequal=[],this.opts.colsizes=[]):"foundation"===this.opts.framework?(this.opts.row="row",this.opts.cols=["large-1 columns","large-2 columns","large-3 columns","large-4 columns","large-5 columns","large-6 columns","large-7 columns","large-8 columns","large-9 columns","large-10 columns","large-11 columns","large-12 columns"],this.opts.colequal=[],this.opts.colsizes=[]):"material"===this.opts.framework?(this.opts.row="mdl-grid",this.opts.cols=["mdl-cell mdl-cell--1-col","mdl-cell mdl-cell--2-col","mdl-cell mdl-cell--3-col","mdl-cell mdl-cell--4-col","mdl-cell mdl-cell--5-col","mdl-cell mdl-cell--6-col","mdl-cell mdl-cell--7-col","mdl-cell mdl-cell--8-col","mdl-cell mdl-cell--9-col","mdl-cell mdl-cell--10-col","mdl-cell mdl-cell--11-col","mdl-cell mdl-cell--12-col"],this.opts.colequal=[],this.opts.colsizes=[]):"uikit"===this.opts.framework?(this.opts.row="",this.opts.cols=[],this.opts.colequal=[],this.opts.colsizes=[],this.opts.cellFormat='<div class="uk-width-1-1"></div>',this.opts.rowFormat='<div class="uk-grid"></div>'):""!==this.opts.row&&this.opts.cols.length>0||""===this.opts.cellFormat&&""===this.opts.rowFormat&&(this.opts.row="row",this.opts.cols=["column twelfth","column eleventh","column tenth","column ninth","column eighth","column seventh","column sixth","column fifth","column fourth","column third","column half","column two-third","column two-fourth","column two-fifth","column two-sixth","column full"],this.opts.colequal=[["column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth","column twelfth"],["column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh","column eleventh"],["column tenth","column tenth","column tenth","column tenth","column tenth","column tenth","column tenth","column tenth","column tenth","column tenth"],["column ninth","column ninth","column ninth","column ninth","column ninth","column ninth","column ninth","column ninth","column ninth"],["column eighth","column eighth","column eighth","column eighth","column eighth","column eighth","column eighth","column eighth"],["column seventh","column seventh","column seventh","column seventh","column seventh","column seventh","column seventh"],["column sixth","column sixth","column sixth","column sixth","column sixth","column sixth"],["column fifth","column fifth","column fifth","column fifth","column fifth"],["column fourth","column fourth","column fourth","column fourth"],["column third","column third","column third"],["column half","column half"]],this.opts.colsizes=[[["column third","column third","column third"],["column half","column fourth","column fourth"]],[["column sixth","column two-sixth"],["column fifth","column two-fifth"],["column fourth","column two-fourth"],["column third","column two-third"],["column half","column half"],["column two-third","column third"],["column two-fourth","column fourth"],["column two-fifth","column fifth"],["column two-sixth","column sixth"]]]),this.sortableObjects=[],this.iframe){e=this.iframe.contentWindow;let t=this.iframe.contentDocument||this.iframe.contentWindow.document;i=t,this.iframeDocument=t}else e=window,i=document;this.win=e,this.doc=i,this.doc.body.classList.add("data-editor");const r=new o(this);this.dom=r;const l=new n(this);this.util=l,this.pageTemplate||(this.pageTemplate=l.getPageTemplate(this.framework));const a=new of(this);if(this.responsive=a,this.iframe){let t=i.querySelector(".content-stuff");t||(t=document.createElement("div"),t.className="content-stuff is-ui",t.id="_cbhtml",i.body.appendChild(t)),this.contentStuff=t,this.stuff=new ef(this)}this.isTouchSupport=l.isTouchSupport(),this.isIE=l.detectIE(),this.opts.clearPreferences&&l.clearPreferences(),this.uoTm=null,this.uo=new Ai(this),this.cbDom=r,this.autoclean=!1,this.filesAdded="",this.opts.emailMode&&this.applyStyle("emailmode",".is-builder > div {display: block}");let d=document.querySelector("#_cbhtml");var c;d||(d=this.dom.createElement("div"),d.id="_cbhtml",d.className="is-ui",this.dom.appendChild(document.body,d)),this.builderStuff=d,(c=this).dom.appendHtml(c.builderStuff,'<svg width="0" height="0" style="position:absolute;display:none;">\n        <defs>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-left"><path d="M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-right"><path d="M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-plus-outline"><path d="M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm0 398.7c-105.1 0-190.7-85.5-190.7-190.7S150.9 65.3 256 65.3 446.7 150.9 446.7 256 361.1 446.7 256 446.7z"></path><path d="M264.1 128h-16.8v119.9H128v16.8h119.3V384h16.8V264.7H384v-16.8H264.1z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-image"><path d="M368 224c26.5 0 48-21.5 48-48s-21.5-48-48-48-48 21.5-48 48 21.5 48 48 48z"></path><path d="M452 64H60c-15.6 0-28 12.7-28 28.3v327.4c0 15.6 12.4 28.3 28 28.3h392c15.6 0 28-12.7 28-28.3V92.3c0-15.6-12.4-28.3-28-28.3zM348.9 261.7c-3-3.5-7.6-6.2-12.8-6.2-5.1 0-8.7 2.4-12.8 5.7L304.6 277c-3.9 2.8-7 4.7-11.5 4.7-4.3 0-8.2-1.6-11-4.1-1-.9-2.8-2.6-4.3-4.1L224 215.3c-4-4.6-10-7.5-16.7-7.5-6.7 0-12.9 3.3-16.8 7.8L64 368.2V107.7c1-6.8 6.3-11.7 13.1-11.7h357.7c6.9 0 12.5 5.1 12.9 12l.3 260.4-99.1-106.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-photos-outline"><path d="M96 128v320h384V128H96zm368 304H112V144h352v288z"></path><path d="M32 64v320h48v-16H48V80h352v32h16V64z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-settings-strong"><path d="M32 376h283.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32h-91.35c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32M32 240h91.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32H196.65c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32M32 104h283.35c6.186-14.112 20.281-24 36.65-24s30.465 9.888 36.65 24H480v32h-91.35c-6.186 14.112-20.281 24-36.65 24s-30.465-9.888-36.65-24H32"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-settings"><path d="M352 104c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM352 376c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM160 240c8.837 0 16 7.163 16 16s-7.163 16-16 16-16-7.163-16-16 7.163-16 16-16m0-16c-17.645 0-32 14.355-32 32s14.355 32 32 32 32-14.355 32-32-14.355-32-32-32zM207.32 248H480v16H207.32c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM112 256c0 2.727.24 5.396.68 8H32v-16h80.68a47.955 47.955 0 0 0-.68 8zM399.32 384H480v16h-80.68c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM304 392c0 2.727.24 5.396.68 8H32v-16h272.68a47.955 47.955 0 0 0-.68 8zM399.32 112H480v16h-80.68c.439-2.604.68-5.273.68-8s-.24-5.396-.68-8zM304.68 112c-.439 2.604-.68 5.273-.68 8s.24 5.396.68 8H32v-16h272.68z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-options"><path d="M32 384h272v32H32zM400 384h80v32h-80zM384 447.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path><g><path d="M32 240h80v32H32zM208 240h272v32H208zM192 303.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path></g><g><path d="M32 96h272v32H32zM400 96h80v32h-80zM384 159.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"></path></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-list-number"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-1043.45,1024 C-1039.25,946.283 -1023.18,878.648 -995.249,821.096 C-967.313,763.544 -912.806,711.242 -831.728,664.192 L-710.742,594.247 C-656.55,562.74 -618.532,535.854 -596.687,513.589 C-562.24,478.722 -545.016,438.813 -545.016,393.863 C-545.016,341.352 -560.769,299.658 -592.276,268.781 C-623.783,237.904 -665.792,222.466 -718.304,222.466 C-796.02,222.466 -849.792,251.873 -879.619,310.685 C-895.582,342.192 -904.404,385.882 -906.084,441.754 L-1021.4,441.754 C-1020.14,363.197 -1005.65,299.133 -977.92,249.562 C-928.769,162.183 -842.02,118.494 -717.673,118.494 C-614.331,118.494 -538.82,146.43 -491.139,202.302 C-443.459,258.174 -419.619,320.347 -419.619,388.822 C-419.619,461.078 -445.034,522.831 -495.865,574.082 C-525.272,603.909 -577.993,640.037 -654.03,682.466 L-740.358,730.356 C-781.527,753.041 -813.874,774.676 -837.399,795.26 C-879.408,831.808 -905.874,872.347 -916.797,916.877 L-424.03,916.877 L-424.03,1024 L-1043.45,1024 Z "  /><path d="M-922.391,-764.384 L-922.391,-851.343 C-840.474,-859.324 -783.341,-872.662 -750.994,-891.356 C-718.647,-910.05 -694.492,-954.265 -678.529,-1024 L-589.049,-1024 L-589.049,-125.425 L-710.035,-125.425 L-710.035,-764.384 L-922.391,-764.384 Z "  /><path d="M-198.618,-510.942 L-198.618,-667.156 L1004.57,-667.156 L1004.57,-510.942 L-198.618,-510.942 Z "  /><path d="M-198.618,78.1071 L-198.618,-78.1071 L1004.57,-78.1071 L1004.57,78.1071 L-198.618,78.1071 Z "  /><path d="M-179.185,649.354 L-179.185,493.14 L1024,493.14 L1024,649.354 L-179.185,649.354 Z "  /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-list-bullet"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-379.801,-514.33 L-379.801,-670.545 L914.662,-670.545 L914.662,-514.33 L-379.801,-514.33 Z "  /><path d="M-379.801,78.1071 L-379.801,-78.1071 L914.662,-78.1071 L914.662,78.1071 L-379.801,78.1071 Z "  /><path d="M-379.801,670.545 L-379.801,514.33 L914.662,514.33 L914.662,670.545 L-379.801,670.545 Z "  /><path d="M-929.642,-469.441 L-929.642,-715.434 L-669.092,-715.434 L-669.092,-469.441 L-929.642,-469.441 Z "  /><path d="M-929.642,127.109 L-929.642,-118.885 L-669.092,-118.885 L-669.092,127.109 L-929.642,127.109 Z "  /><path d="M-929.642,715.434 L-929.642,469.441 L-669.092,469.441 L-669.092,715.434 L-929.642,715.434 Z "  /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-clean">\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                    <path d="M75.0013,893.849 L-1030.73,900.993 L-32.1518,-880.838 L1009.54,-880.838 L75.0013,893.849 Z " fill="currentColor" />\n                    <path d="M-30.8571,780.685 L-845.2,787.828 L-508.893,193.749 L305.26,194.963 L-30.8571,780.685 Z " fill="#ffffff" fill-opacity="1.00" />\n                </g>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-location"><path d="M256 64c-65.9 0-119.3 53.7-119.3 120 0 114.6 119.3 264 119.3 264s119.3-149.4 119.3-264c0-66.3-53.4-120-119.3-120zm0 178.2c-31.2 0-56.4-25.4-56.4-56.7 0-31.3 25.3-56.8 56.4-56.8 31.2 0 56.4 25.4 56.4 56.8 0 31.3-25.2 56.7-56.4 56.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-film-outline"><path d="M0 360h400v-336h-400v336zM72 40v48h-56v-48h56zM72 104v48h-56v-48h56zM72 168v48h-56v-48h56zM72 232v48h-56v-48h56zM72 296v48h-56v-48h56zM312 40v144h-224v-144h224zM312 200v144h-224v-144h224zM384 40v48h-56v-48h56zM384 104v48h-56v-48h56zM384 168v48h-56v-48\n                h56zM384 232v48h-56v-48h56zM384 296v48h-56v-48h56z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-social-youtube-outline"><path d="M265 96c65.3 0 118.7 1.1 168.1 3.3h1.4c23.1 0 42 22 42 49.1v1.1l.1 1.1c2.3 34 3.4 69.3 3.4 104.9.1 35.6-1.1 70.9-3.4 104.9l-.1 1.1v1.1c0 13.8-4.7 26.6-13.4 36.1-7.8 8.6-18 13.4-28.6 13.4h-1.6c-52.9 2.5-108.8 3.8-166.4 3.8h-10.6.1-10.9c-57.8 0-113.7-1.3-166.2-3.7h-1.6c-10.6 0-20.7-4.8-28.5-13.4-8.6-9.5-13.4-22.3-13.4-36.1v-1.1l-.1-1.1c-2.4-34.1-3.5-69.4-3.3-104.7v-.2c-.1-35.3 1-70.5 3.3-104.6l.1-1.1v-1.1c0-27.2 18.8-49.3 41.9-49.3h1.4c49.5-2.3 102.9-3.3 168.2-3.3H265m0-32.2h-18c-57.6 0-114.2.8-169.6 3.3-40.8 0-73.9 36.3-73.9 81.3C1 184.4-.1 220 0 255.7c-.1 35.7.9 71.3 3.4 107 0 45 33.1 81.6 73.9 81.6 54.8 2.6 110.7 3.8 167.8 3.8h21.6c57.1 0 113-1.2 167.9-3.8 40.9 0 74-36.6 74-81.6 2.4-35.7 3.5-71.4 3.4-107.1.1-35.7-1-71.3-3.4-107.1 0-45-33.1-81.1-74-81.1C379.2 64.8 322.7 64 265 64z"></path><path d="M207 353.8V157.4l145 98.2-145 98.2z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-play"><path d="M128 96v320l256-160L128 96z"></path></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-full"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-770.219,-115.563 L-770.219,-271.777 L770.219,-271.777 L770.219,-115.563 L-770.219,-115.563 Z " /><path d="M-770.219,303.503 L-770.219,147.288 L770.219,147.288 L770.219,303.503 L-770.219,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-center"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-552.286,-107.697 L-552.286,-263.911 L552.286,-263.911 L552.286,-107.697 L-552.286,-107.697 Z " /><path d="M-467.355,319.234 L-467.355,163.02 L466.34,163.02 L466.34,319.234 L-467.355,319.234 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-left"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-770.219,-115.563 L-770.219,-271.777 L482.839,-271.777 L482.839,-115.563 L-770.219,-115.563 Z " /><path d="M-770.219,303.503 L-770.219,147.288 L122.787,147.288 L122.787,303.503 L-770.219,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-align-right"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-770.727,738.299 L-770.727,582.085 L769.712,582.085 L769.712,738.299 L-770.727,738.299 Z " /><path d="M-770.727,-534.628 L-770.727,-690.842 L769.712,-690.842 L769.712,-534.628 L-770.727,-534.628 Z " /><path d="M-483.346,-118.081 L-483.346,-274.295 L769.712,-274.295 L769.712,-118.081 L-483.346,-118.081 Z " /><path d="M-123.871,303.503 L-123.871,147.288 L769.136,147.288 L769.136,303.503 L-123.871,303.503 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-indent"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-829.04,-514.33 L-829.04,-670.545 L808.959,-670.545 L808.959,-514.33 L-829.04,-514.33 Z " /><path d="M-829.04,670.545 L-829.04,514.33 L808.959,514.33 L808.959,670.545 L-829.04,670.545 Z " /><path d="M-254.279,-110.244 L-254.279,-266.458 L808.959,-266.458 L808.959,-110.244 L-254.279,-110.244 Z " /><path d="M-254.279,266.458 L-254.279,110.244 L808.959,110.244 L808.959,266.458 L-254.279,266.458 Z " /><path d="M-829.04,-195.117 L-490.958,-1.03508e-14 L-829.04,195.117 L-829.04,-195.117 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-outdent"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-829.04,-514.33 L-829.04,-670.545 L808.959,-670.545 L808.959,-514.33 L-829.04,-514.33 Z " /><path d="M-829.04,670.545 L-829.04,514.33 L808.959,514.33 L808.959,670.545 L-829.04,670.545 Z " /><path d="M-829.04,-110.244 L-829.04,-266.458 L234.198,-266.458 L234.198,-110.244 L-829.04,-110.244 Z " /><path d="M-829.04,266.458 L-829.04,110.244 L234.198,110.244 L234.198,266.458 L-829.04,266.458 Z " /><path d="M808.959,-195.117 L470.877,-1.03508e-14 L808.959,195.117 L808.959,-195.117 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-table"><rect x="0" y="0" width="2048.00" height="2048.00" fill="none" /><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M-660.783,660.783 L660.783,660.783 L660.783,-660.783 L-660.783,-660.783 L-660.783,660.783 Z " fill="none" stroke-width="75.82" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /><path d="M-37.9645,698.933 L37.9645,698.933 L37.9645,-698.569 L-37.9645,-698.569 L-37.9645,698.933 Z " fill="currentColor" fill-opacity="1.00" stroke-width="0.25" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /><path d="M-698.933,-37.7825 L-698.933,38.1465 L698.569,38.1465 L698.569,-37.7825 L-698.933,-37.7825 Z " fill="currentColor" fill-opacity="1.00" stroke-width="0.25" stroke="currentColor" stroke-linecap="square" stroke-linejoin="miter" /></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-happy"><path d="M256 48C140.563 48 48 141.6 48 256s92.563 208 208 208 208-93.6 208-208S370.401 48 256 48zm0 374.4c-91.518 0-166.404-74.883-166.404-166.4 0-91.518 74.887-166.4 166.404-166.4S422.404 164.482 422.404 256 347.518 422.4 256 422.4zm72.8-187.2c17.683 0 31.201-13.518 31.201-31.2s-13.519-31.2-31.201-31.2c-17.682 0-31.2 13.518-31.2 31.2s13.518 31.2 31.2 31.2zm-145.6 0c17.682 0 31.2-13.518 31.2-31.2s-13.519-31.2-31.2-31.2c-17.683 0-31.201 13.518-31.201 31.2s13.519 31.2 31.201 31.2zM256 370.4c48.883 0 89.436-30.164 106.081-72.801H149.919C166.564 340.236 207.117 370.4 256 370.4z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-create"><path d="M64 368v80h80l235.727-235.729-79.999-79.998L64 368zm377.602-217.602c8.531-8.531 8.531-21.334 0-29.865l-50.135-50.135c-8.531-8.531-21.334-8.531-29.865 0l-39.468 39.469 79.999 79.998 39.469-39.467z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-minus-empty"><path d="M384 265H128v-17h256v17z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-eye"><path d="M256 128c-81.9 0-145.7 48.8-224 128 67.4 67.7 124 128 224 128 99.9 0 173.4-76.4 224-126.6C428.2 198.6 354.8 128 256 128zm0 219.3c-49.4 0-89.6-41-89.6-91.3 0-50.4 40.2-91.3 89.6-91.3s89.6 41 89.6 91.3c0 50.4-40.2 91.3-89.6 91.3z"></path><path d="M256 224c0-7.9 2.9-15.1 7.6-20.7-2.5-.4-5-.6-7.6-.6-28.8 0-52.3 23.9-52.3 53.3s23.5 53.3 52.3 53.3 52.3-23.9 52.3-53.3c0-2.3-.2-4.6-.4-6.9-5.5 4.3-12.3 6.9-19.8 6.9-17.8 0-32.1-14.3-32.1-32z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-reply"><path d="M448 400s-36.8-208-224-208v-80L64 256l160 134.4v-92.3c101.6 0 171 8.9 224 101.9z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-folder-outline">\n                <path d="M457 96H215c-2.791 0-4.271-.585-6.094-2.408l-22.501-22.501-.168-.162C181.365 66.333 177.361 64 169 64H57c-13.785 0-25 10.317-25 23v336c0 13.317 11.683 25 25 25h400c12.683 0 23-11.215 23-25V119c0-13.327-9.673-23-23-23zM57 80h112c3.497 0 3.737.189 6.175 2.488l22.417 22.418c4.84 4.84 10.372 7.094 17.408 7.094h242c4.448 0 7 2.552 7 7v42.376a23.885 23.885 0 0 0-8-1.376H56c-2.805 0-5.496.488-8 1.376V87c0-4.323 4.672-7 9-7zm407 343c0 4.328-2.677 9-7 9H57c-4.458 0-9-4.542-9-9V184c0-4.411 3.589-8 8-8h400c4.411 0 8 3.589 8 8v239z"/>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-cloud-outline">\n                <path d="M399.3 232.8c0-1.2.2-2.4.2-3.6 0-64.3-52.8-117.2-116.8-117.2-46.1 0-85.8 27.9-104.4 67-8.1-4.1-17.1-6.4-26.8-6.4-29.6 0-54.1 23.7-58.9 52C57.4 236.8 32 268.8 32 308.4c0 49.8 40.1 91.6 89.6 91.6H398c45 0 82-38.9 82-84.3 0-45.6-35.4-82.8-80.7-82.9zm-1.8 150.8l-3.2.4H122.4c-40.9 0-74.2-34.9-74.2-76.1 0-31.9 20.2-58.4 50.2-68.8l8.4-3 1.5-8.8c3.6-21.6 22.1-39.3 43.9-39.3 6.9 0 13.7 1.6 19.9 4.8l13.5 6.8 6.5-13.7c16.6-34.9 52.1-58.2 90.4-58.2 55.3 0 100.9 44.1 100.9 99.7 0 13.3-.2 20.3-.2 20.3l15.2.1c36.7.5 65.6 30.5 65.6 67.4 0 36.9-29.8 68.2-66.5 68.4z"/>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-wrench"><path d="M461.9 114.9l-56.5 56.7-55.1-10-9.9-55.1 56.5-56.7c-12.7-12.7-30.8-18.5-44.2-17.8-13.5.7-42.3 8.3-64.6 32-21.6 22.8-44.3 65.3-24.2 112.5 2.4 5.7 5.1 13.2-2.9 21.2-8.1 8-215 202.8-215 202.8-19.4 16.7-18 47.6-.1 65.6 18.2 17.9 48.9 19 65.6-.3 0 0 193.2-205.8 202.7-215.1 8.5-8.3 16.1-5.5 21.2-2.9 35.6 18.4 86.3 2.4 112.6-23.9 26.3-26.3 31.1-51.7 31.9-64.7.8-12.9-3.7-30-18-44.3zM91.3 443.2c-6.3 6.2-16.5 6.2-22.7 0-6.2-6.3-6.2-16.5 0-22.7 6.3-6.2 16.5-6.2 22.7 0 6.2 6.3 6.2 16.5 0 22.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-more"><path d="M113.7 304C86.2 304 64 282.6 64 256c0-26.5 22.2-48 49.7-48 27.6 0 49.8 21.5 49.8 48 0 26.6-22.2 48-49.8 48zM256 304c-27.5 0-49.8-21.4-49.8-48 0-26.5 22.3-48 49.8-48 27.5 0 49.7 21.5 49.7 48 0 26.6-22.2 48-49.7 48zM398.2 304c-27.5 0-49.8-21.4-49.8-48 0-26.5 22.2-48 49.8-48 27.5 0 49.8 21.5 49.8 48 0 26.6-22.2 48-49.8 48z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-code-working"><circle cx="184.166" cy="256.166" r="24"></circle><circle cx="256.166" cy="256.166" r="24"></circle><circle cx="328.166" cy="256.166" r="24"></circle><g><path d="M168 392a23.929 23.929 0 0 1-16.971-7.029l-112-112c-9.373-9.373-9.373-24.569 0-33.941l112-112c9.373-9.372 24.568-9.372 33.941 0 9.371 9.372 9.371 24.568 0 33.941L89.941 256l95.029 95.029c9.371 9.372 9.371 24.568 0 33.941A23.925 23.925 0 0 1 168 392zM344 392a23.929 23.929 0 0 0 16.971-7.029l112-112c9.373-9.373 9.373-24.569 0-33.941l-112-112c-9.373-9.372-24.568-9.372-33.941 0-9.371 9.372-9.371 24.568 0 33.941L422.059 256l-95.029 95.029c-9.371 9.372-9.371 24.568 0 33.941A23.925 23.925 0 0 0 344 392z"></path></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-gear"><path d="M416.349 256.046c-.001-21.013 13.143-38.948 31.651-46.062a196.302 196.302 0 0 0-23.664-57.139 49.423 49.423 0 0 1-20.082 4.254c-12.621 0-25.238-4.811-34.871-14.442-14.863-14.863-18.248-36.846-10.18-54.97A196.274 196.274 0 0 0 302.074 64C294.971 82.529 277.027 95.69 256 95.69c-21.025 0-38.969-13.161-46.073-31.69a196.243 196.243 0 0 0-57.128 23.688c8.068 18.122 4.683 40.104-10.181 54.97-9.631 9.631-22.25 14.443-34.871 14.443a49.429 49.429 0 0 1-20.083-4.255A196.273 196.273 0 0 0 64 209.984c18.509 7.112 31.652 25.049 31.652 46.062 0 21.008-13.132 38.936-31.63 46.054a196.318 196.318 0 0 0 23.692 57.128 49.428 49.428 0 0 1 20.032-4.232c12.622 0 25.239 4.812 34.871 14.443 14.841 14.841 18.239 36.781 10.215 54.889a196.257 196.257 0 0 0 57.13 23.673c7.128-18.479 25.046-31.596 46.038-31.596 20.992 0 38.91 13.115 46.037 31.596a196.234 196.234 0 0 0 57.132-23.675c-8.023-18.106-4.626-40.046 10.216-54.887 9.629-9.632 22.248-14.444 34.868-14.444 6.836 0 13.67 1.411 20.033 4.233a196.318 196.318 0 0 0 23.692-57.128c-18.498-7.119-31.629-25.048-31.629-46.054zM256.9 335.9c-44.3 0-80-35.9-80-80 0-44.101 35.7-80 80-80 44.299 0 80 35.899 80 80 0 44.1-35.701 80-80 80z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-arrow-expand"><path d="M274 209.7l63.9-63.8L288 96h128v128l-49.9-49.9-63.8 63.9zM274 302.3l63.9 63.8L288 416h128V288l-49.9 49.9-63.8-63.9zM238 302.3l-63.9 63.8L224 416H96V288l49.9 49.9 63.8-63.9zM238 209.7l-63.9-63.8L224 96H96v128l49.9-49.9 63.8 63.9z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-expand"><path d="M396.795 396.8H320V448h128V320h-51.205zM396.8 115.205V192H448V64H320v51.205zM115.205 115.2H192V64H64v128h51.205zM115.2 396.795V320H64v128h128v-51.205z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-arrow-move"><path d="M480 256l-96-96v76H276V128h76l-96-96-96 96h76v108H128v-76l-96 96 96 96v-76h108v108h-76l96 96 96-96h-76.2l-.4-108.5 108.6.3V352z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-drag"><path d="M0 144h512v32H0zM0 240h512v32H0zM0 336h512v32H0z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-link"><path d="M74.6 256c0-38.3 31.1-69.4 69.4-69.4h88V144h-88c-61.8 0-112 50.2-112 112s50.2 112 112 112h88v-42.6h-88c-38.3 0-69.4-31.1-69.4-69.4zm85.4 22h192v-44H160v44zm208-134h-88v42.6h88c38.3 0 69.4 31.1 69.4 69.4s-31.1 69.4-69.4 69.4h-88V368h88c61.8 0 112-50.2 112-112s-50.2-112-112-112z"/></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-contrast"><path d="M256 32C132.3 32 32 132.3 32 256s100.3 224 224 224 224-100.3 224-224S379.7 32 256 32zm135.8 359.8C355.5 428 307 448 256 448V64c51 0 99.5 20 135.8 56.2C428 156.5 448 204.7 448 256c0 51.3-20 99.5-56.2 135.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-plus-empty"><path d="M384 265H264v119h-17V265H128v-17h119V128h17v120h120v17z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-up"><path d="M349.7 189.8c-3.1 3.1-8 3-11.3 0L264 123.4V408c0 4.4-3.6 8-8 8s-8-3.6-8-8V123.4l-74.4 66.3c-3.4 2.9-8.1 3.2-11.2.1-3.1-3.1-3.3-8.5-.1-11.4 0 0 87-79.2 88-80s2.8-2.4 5.7-2.4 4.9 1.6 5.7 2.4 88 80 88 80c1.5 1.5 2.3 3.6 2.3 5.7s-.8 4.1-2.3 5.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-down"><path d="M349.7 322.2c-3.1-3.1-8-3-11.3 0L264 388.6V104c0-4.4-3.6-8-8-8s-8 3.6-8 8v284.6l-74.4-66.3c-3.4-2.9-8.1-3.2-11.2-.1-3.1 3.1-3.3 8.5-.1 11.4 0 0 87 79.2 88 80s2.8 2.4 5.7 2.4 4.9-1.6 5.7-2.4 88-80 88-80c1.5-1.5 2.3-3.6 2.3-5.7s-.8-4.1-2.3-5.7z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-left"><path d="M189.8 349.7c3.1-3.1 3-8 0-11.3L123.4 264H408c4.4 0 8-3.6 8-8s-3.6-8-8-8H123.4l66.3-74.4c2.9-3.4 3.2-8.1.1-11.2-3.1-3.1-8.5-3.3-11.4-.1 0 0-79.2 87-80 88S96 253.1 96 256s1.6 4.9 2.4 5.7 80 88 80 88c1.5 1.5 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-arrow-thin-right"><path d="M322.2 349.7c-3.1-3.1-3-8 0-11.3l66.4-74.4H104c-4.4 0-8-3.6-8-8s3.6-8 8-8h284.6l-66.3-74.4c-2.9-3.4-3.2-8.1-.1-11.2 3.1-3.1 8.5-3.3 11.4-.1 0 0 79.2 87 80 88s2.4 2.8 2.4 5.7-1.6 4.9-2.4 5.7-80 88-80 88c-1.5 1.5-3.6 2.3-5.7 2.3s-4.1-.8-5.7-2.3z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-close-empty"><path d="M340.2 160l-84.4 84.3-84-83.9-11.8 11.8 84 83.8-84 83.9 11.8 11.7 84-83.8 84.4 84.2 11.8-11.7-84.4-84.3 84.4-84.2z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-more-vertical"><path d="M296 136c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0 240c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40zm0-120c0-22.002-17.998-40-40-40s-40 17.998-40 40 17.998 40 40 40 40-17.998 40-40z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-quote"><path d="M192 64c-40.646 0-72.483 11.229-94.627 33.373C75.229 119.517 64 151.354 64 192v256h160V192h-96c0-23.056 4.922-39.666 14.627-49.373C152.334 132.922 168.944 128 192 128M416 64c-40.646 0-72.483 11.229-94.627 33.373C299.229 119.517 288 151.354 288 192v256h160V192h-96c0-23.056 4.922-39.666 14.627-49.373C376.334 132.922 392.944 128 416 128"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-code"><path d="M168 392a23.929 23.929 0 0 1-16.971-7.029l-112-112c-9.373-9.373-9.373-24.569 0-33.941l112-112c9.373-9.372 24.568-9.372 33.941 0 9.371 9.372 9.371 24.568 0 33.941L89.941 256l95.029 95.029c9.371 9.373 9.371 24.568 0 33.941A23.925 23.925 0 0 1 168 392zM344 392a23.929 23.929 0 0 0 16.971-7.029l112-112c9.373-9.373 9.373-24.569 0-33.941l-112-112c-9.373-9.372-24.568-9.372-33.941 0-9.371 9.372-9.371 24.568 0 33.941L422.059 256l-95.029 95.029c-9.371 9.373-9.371 24.568 0 33.941A23.925 23.925 0 0 0 344 392z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-camera"><path d="M430.4 147h-67.5l-40.4-40.8s-.2-.2-.3-.2l-.2-.2c-6-6-14.1-9.8-23.3-9.8h-84c-9.8 0-18.5 4.2-24.6 10.9v.1l-39.5 40h-69C63 147 48 161.6 48 180.2v202.1c0 18.6 15 33.7 33.6 33.7h348.8c18.5 0 33.6-15.1 33.6-33.7V180.2c0-18.6-15.1-33.2-33.6-33.2zM256 365.5c-50.9 0-92.4-41.6-92.4-92.6 0-51.1 41.5-92.6 92.4-92.6 51 0 92.4 41.5 92.4 92.6 0 51-41.4 92.6-92.4 92.6zm168.1-165c-7.7 0-14-6.3-14-14.1s6.3-14.1 14-14.1 14 6.3 14 14.1-6.3 14.1-14 14.1z"></path><path d="M256 202.9c-38.6 0-69.8 31.3-69.8 70 0 38.6 31.2 70 69.8 70 38.5 0 69.8-31.3 69.8-70s-31.3-70-69.8-70z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-move"><path d="M475.9 246.2l-79.4-79.4c-5.4-5.4-14.2-5.4-19.6 0l-.2.2c-5.4 5.4-5.4 14.2 0 19.6l54.9 54.9-161.8.5.5-161.8 54.9 54.9c5.4 5.4 14.2 5.4 19.6 0l.2-.2c5.4-5.4 5.4-14.2 0-19.6l-79.4-79.4c-5.4-5.4-14.2-5.4-19.6 0l-79.4 79.4c-5.4 5.4-5.4 14.2 0 19.6l.2.2c5.4 5.4 14.2 5.4 19.6 0l54.9-54.9.5 161.8-161.8-.5 54.9-54.9c5.4-5.4 5.4-14.2 0-19.6l-.2-.2c-5.4-5.4-14.2-5.4-19.6 0l-79.4 79.4c-5.4 5.4-5.4 14.2 0 19.6l79.4 79.4c5.4 5.4 14.2 5.4 19.6 0l.2-.2c5.4-5.4 5.4-14.2 0-19.6L80 270.5l161.8-.5-.5 161.8-54.9-54.9c-5.4-5.4-14.2-5.4-19.6 0l-.2.2c-5.4 5.4-5.4 14.2 0 19.6l79.4 79.4c5.4 5.4 14.2 5.4 19.6 0l79.4-79.4c5.4-5.4 5.4-14.2 0-19.6l-.2-.2c-5.4-5.4-14.2-5.4-19.6 0l-54.9 54.9-.5-161.8 161.8.5-54.9 54.9c-5.4 5.4-5.4 14.2 0 19.6l.2.2c5.4 5.4 14.2 5.4 19.6 0l79.4-79.4c5.5-5.4 5.5-14.2 0-19.6z"/></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-ok">\n                <rect x="0" y="0" width="2048.00" height="2048.00" fill="none" />\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                <path d="M330.323,493.628 L330.323,398.406 L-330.323,398.406 L-330.323,493.628 L330.323,493.628 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M230.718,468.568 L328.59,468.568 L328.59,-599.718 L230.718,-599.718 L230.718,468.568 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M-300.714,376.053 L-373.748,449.088 L-68.5805,754.255 L4.45387,681.221 L-300.714,376.053 Z " fill="currentColor" fill-opacity="1.00" />\n                <path d="M-9.9476e-14,216.241 L-73.0344,143.207 L-378.202,448.375 L-305.168,521.409 L-9.9476e-14,216.241 Z " fill="currentColor" fill-opacity="1.00" />\n                </g>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-grid"><path d="M160 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 153.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path><g><path d="M160 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 281.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path></g><g><path d="M160 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM288 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5zM416 409.3c0 3.7-3 6.7-6.7 6.7h-50.5c-3.7 0-6.7-3-6.7-6.7v-50.5c0-3.7 3-6.7 6.7-6.7h50.5c3.7 0 6.7 3 6.7 6.7v50.5z"></path></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-gear-b"><path d="M448 294.4v-76.8h-42.8c-3.4-14.4-8.9-28-16.1-40.5l29.8-29.7-54.3-54.3-29.1 29.1c-12.6-7.7-26.4-13.5-41.1-17.3V64h-76.8v40.9c-14.7 3.8-28.5 9.7-41.1 17.3l-29.1-29.1-54.3 54.3 29.8 29.7c-7.2 12.5-12.6 26.1-16.1 40.5H64v76.8h44.1c3.8 13.7 9.5 26.6 16.7 38.6l-31.7 31.7 54.3 54.3 32.3-32.3c11.7 6.8 24.5 11.9 37.9 15.4v46h76.8v-46c13.5-3.5 26.2-8.6 37.9-15.4l32.3 32.3 54.3-54.3-31.6-31.7c7.2-11.9 12.9-24.8 16.7-38.6h44zm-192 15.4c-29.7 0-53.7-24.1-53.7-53.8s24-53.8 53.7-53.8 53.8 24.1 53.8 53.8-24.1 53.8-53.8 53.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-grid-view-outline"><path d="M448 192v-16H336V64h-16v112H192V64h-16v112H64v16h112v128H64v16h112v112h16V336h128v112h16V336h112v-16H336V192h112zM320 320H192V192h128v128z"></path></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-increase"><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M852.574,595.004 L852.574,507.837 L-852.574,507.837 L-852.574,595.004 L852.574,595.004 Z " /><path d="M852.574,224.232 L852.574,137.066 L-852.574,137.066 L-852.574,224.232 L852.574,224.232 Z " /><path d="M852.574,-134.971 L852.574,-222.138 L-852.574,-222.138 L-852.574,-134.971 L852.574,-134.971 Z " /><path d="M852.574,-505.743 L852.574,-592.909 L-852.574,-592.909 L-852.574,-505.743 L852.574,-505.743 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-decrease"><g transform="matrix(1,0,0,1,1024.0,1024.0)"><path d="M509.832,595.004 L509.832,507.837 L-509.832,507.837 L-509.832,595.004 L509.832,595.004 Z " /><path d="M509.832,224.232 L509.832,137.066 L-509.832,137.066 L-509.832,224.232 L509.832,224.232 Z " /><path d="M509.832,-136.947 L509.832,-224.113 L-509.832,-224.113 L-509.832,-136.947 L509.832,-136.947 Z " /><path d="M509.832,-505.743 L509.832,-592.909 L-509.832,-592.909 L-509.832,-505.743 L509.832,-505.743 Z " /></g></symbol>\n            <symbol viewBox="0 0 2048.0 2048.0" id="icon-strike">\n                <g transform="matrix(1,0,0,1,1024.0,1024.0)">\n                <path d="M298.298,-653.766 C292.151,-624.873 284.005,-605.663 273.862,-596.135 C263.719,-586.607 250.656,-581.842 234.673,-581.842 C220.535,-581.842 196.253,-589.526 161.828,-604.895 C87.4454,-637.475 17.0588,-653.766 -49.3321,-653.766 C-155.68,-653.766 -243.28,-621.339 -312.129,-556.485 C-380.979,-491.631 -415.404,-414.328 -415.404,-324.578 C-415.404,-272.94 -403.724,-225.606 -380.364,-182.575 C-357.005,-139.544 -322.733,-100.201 -277.551,-64.5467 C-232.368,-28.8923 -156.295,18.903 -49.3321,78.8392 C57.631,138.775 123.1,177.964 147.074,196.406 C182.729,223.455 209.008,252.654 225.913,284.005 C242.819,315.357 251.271,346.401 251.271,377.137 C251.271,432.463 228.987,480.412 184.419,520.984 C139.851,561.556 79.1465,581.842 2.30524,581.842 C-64.0856,581.842 -125.098,567.089 -180.731,537.582 C-236.364,508.075 -277.704,471.037 -304.753,426.469 C-331.801,381.901 -353.316,314.742 -369.299,224.991 L-403.417,224.991 L-403.417,653.766 L-369.299,653.766 C-364.996,624.873 -358.388,605.817 -349.474,596.596 C-340.561,587.375 -328.42,582.764 -313.051,582.764 C-297.068,582.764 -259.109,592.446 -199.173,611.81 C-139.236,631.174 -99.74,642.393 -80.6834,645.467 C-48.7174,651 -14.5998,653.766 21.6692,653.766 C137.239,653.766 231.753,619.495 305.214,550.952 C378.674,482.41 415.404,400.804 415.404,306.136 C415.404,256.343 403.878,208.701 380.826,163.211 C357.773,117.721 324.885,78.2244 282.161,44.7216 C239.438,11.2188 159.676,-36.8838 42.8774,-99.5863 C-100.355,-176.428 -191.027,-237.901 -229.141,-284.005 C-255.574,-315.357 -268.791,-350.089 -268.791,-388.202 C-268.791,-437.995 -247.89,-482.41 -206.088,-521.445 C-164.287,-560.48 -111.42,-579.998 -47.4879,-579.998 C9.06727,-579.998 63.7783,-565.552 116.645,-536.66 C169.512,-507.767 210.238,-468.732 238.823,-419.554 C267.408,-370.375 287.233,-304.292 298.298,-221.303 L332.415,-221.303 L332.415,-653.766 L298.298,-653.766 Z " fill="currentColor" fill-opacity="1.00" /><path d="M-530.954,-41.4477 L-530.954,41.4477 L530.954,41.4477 L530.954,-41.4477 L-530.954,-41.4477 Z " fill="currentColor" fill-opacity="1.00" /></g></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-undo"><path d="M447.9 368.2c0-16.8 3.6-83.1-48.7-135.7-35.2-35.4-80.3-53.4-143.3-56.2V96L64 224l192 128v-79.8c40 1.1 62.4 9.1 86.7 20 30.9 13.8 55.3 44 75.8 76.6l19.2 31.2H448c0-10.1-.1-22.9-.1-31.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-redo"><path d="M64 400h10.3l19.2-31.2c20.5-32.7 44.9-62.8 75.8-76.6 24.4-10.9 46.7-18.9 86.7-20V352l192-128L256 96v80.3c-63 2.8-108.1 20.7-143.3 56.2C60.4 285.2 64 351.5 64 368.2c.1 8.9 0 21.7 0 31.8z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-arrow-dropdown"><path d="M128 192l128 128 128-128z"></path></symbol>\n            <symbol viewBox="0 0 512 512" id="ion-social-twitter"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z"></path></symbol>\n            <symbol viewBox="0 0 24 24" id="icon-zoom-in" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <circle cx="10" cy="10" r="7"></circle>\n                <line x1="7" y1="10" x2="13" y2="10"></line>\n                <line x1="10" y1="7" x2="10" y2="13"></line>\n                <line x1="21" y1="21" x2="15" y2="15"></line>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-android-contract"><path d="M64 371.2h76.795V448H192V320H64v51.2zm76.795-230.4H64V192h128V64h-51.205v76.8zM320 448h51.2v-76.8H448V320H320v128zm51.2-307.2V64H320v128h128v-51.2h-76.8z"></path></symbol>\n            \n            <symbol viewBox="0 0 24 24" id="icon-lock-off" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                <line x1="3" y1="3" x2="21" y2="21" />\n                <path d="M19 19a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h4m4 0h2a2 2 0 0 1 2 2v2" />\n                <circle cx="12" cy="16" r="1" />\n                <path d="M8 11v-3m.712 -3.278a4 4 0 0 1 7.288 2.278v4" />\n            </symbol>\n            <symbol viewBox="0 0 24 24" id="icon-lock" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                <rect x="5" y="11" width="14" height="10" rx="2" />\n                <circle cx="12" cy="16" r="1" />\n                <path d="M8 11v-4a4 4 0 0 1 8 0v4" />\n            </symbol>\n            <symbol viewBox="0 0 24 24" id="icon-code" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z"/>\n                <polyline points="7 8 3 12 7 16" />\n                <polyline points="17 8 21 12 17 16" />\n                <line x1="14" y1="4" x2="10" y2="20" />\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-ios-cloud-upload-outline">\n                <path d="M193.3 260.4l-11.6-11.6 74.5-74.3 74.5 74.3-11.7 11.6-54.6-54.6v241.8h-16.5V205.8z"/>\n                <path d="M399.3 183.6c0-1.2.2-2.4.2-3.6 0-64.3-52.8-116.4-116.8-116.4-46.1 0-85.8 27.1-104.4 66.3-8.1-4.1-17.1-6.4-26.8-6.4-29.6 0-54.1 23.6-58.9 52C57.4 187.6 32 222.2 32 261.8c0 49.7 40.1 90.2 89.6 90.2H213v-16h-90.6c-40.9 0-74.2-33.5-74.2-74.6 0-31.8 20.2-61.2 50.2-71.6l8.4-2.9 1.5-8.8c3.6-21.6 22.1-39.3 43.9-39.3 6.9 0 13.7 1.6 19.9 4.8l13.5 6.8 6.5-13.7c16.6-34.9 52.1-57.4 90.4-57.4 55.3 0 100.9 43.3 100.9 98.9 0 13.3-.2 20.3-.2 20.3l15.2.1c36.6.5 65.6 33.4 65.6 70.3 0 36.8-29.8 66.9-66.5 67.1H297v16h101c45 0 82-37.3 82-82.8s-35.5-85.5-80.7-85.6z"/>\n            </symbol>\n            <symbol viewBox="0 0 512 512" id="ion-volume-medium">\n                <path d="M270 407.7V104.4L175.3 192H71v128h104.3zm56.3-52.1c20.5-27.8 32.8-62.3 32.8-99.6 0-37.4-12.3-71.8-32.8-99.6l-20.4 15.3c17.4 23.6 27.8 52.7 27.8 84.3 0 31.6-10.4 60.7-27.8 84.3l20.4 15.3zm66.5 46c30-40.7 48-91 48-145.6s-18-104.9-48-145.6l-20.4 15.3c26.9 36.4 43 81.4 43 130.3 0 48.9-16.1 93.8-43 130.3l20.4 15.3z"/>\n            </symbol>\n\n            <symbol id="icon-list-search" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M15 15m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path>\n                <path d="M18.5 18.5l2.5 2.5"></path>\n                <path d="M4 6h16"></path>\n                <path d="M4 12h4"></path>\n                <path d="M4 18h4"></path>\n            </symbol>\n            <symbol id="icon-folder" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"></path>\n            </symbol>\n            <symbol id="icon-folder-media" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"></path>\n\n                <path d="M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"></path>\n                <path d="M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"></path>\n                <path d="M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"></path>\n            </symbol>\n\n            <symbol id="icon-reload" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1.002 7.935 1.007 9.425 4.747"></path>\n                <path d="M20 4v5h-5"></path>\n            </symbol>\n            <symbol id="icon-devices" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <rect x="13" y="8" width="8" height="12" rx="1"></rect>\n                <path d="M18 8v-3a1 1 0 0 0 -1 -1h-13a1 1 0 0 0 -1 1v12a1 1 0 0 0 1 1h9"></path>\n                <line x1="16" y1="9" x2="18" y2="9"></line>\n            </symbol>  \n            <symbol id="icon-device-desktop" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <rect x="3" y="4" width="18" height="12" rx="1"></rect>\n                <line x1="7" y1="20" x2="17" y2="20"></line>\n                <line x1="9" y1="16" x2="9" y2="20"></line>\n                <line x1="15" y1="16" x2="15" y2="20"></line>\n            </symbol>\n            <symbol id="icon-device-mobile" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <rect x="6" y="3" width="12" height="18" rx="2"></rect>\n                <line x1="11" y1="4" x2="13" y2="4"></line>\n                <line x1="12" y1="17" x2="12" y2="17.01"></line>\n            </symbol>\n            <symbol id="icon-device-laptop" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <line x1="3" y1="19" x2="21" y2="19"></line>\n                <rect x="5" y="6" width="14" height="10" rx="1"></rect>\n            </symbol>\n            <symbol id="icon-device-tablet" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <rect x="5" y="3" width="14" height="18" rx="1"></rect>\n                <circle cx="12" cy="17" r="1"></circle>\n            </symbol>\n\n            <symbol id="icon-eye" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0m13 0c-2.667 4.667 -6 7 -10 7s-7.333 -2.333 -10 -7c2.667 -4.667 6 -7 10 -7s7.333 2.333 10 7"></path>\n            </symbol>\n            <symbol id="icon-eye-off" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M9.88 9.878a3 3 0 1 0 4.243 4.242m.581 -3.42a3.012 3.012 0 0 0 -1.45 -1.426m-3.877 -3.913a9.469 9.469 0 0 1 2.623 -.361c4 0 7.333 2.333 10 7c-.778 1.362 -1.613 2.524 -2.504 3.489m-2.138 1.859c-1.629 1.101 -3.415 1.652 -5.358 1.652c-4 0 -7.333 -2.333 -10 -7c1.374 -2.404 2.924 -4.189 4.652 -5.354m-3.652 -3.646l18 18"></path>\n            </symbol>\n\n            <symbol id="icon-download" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n                <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>\n                <path d="M7 11l5 5l5 -5"></path>\n                <path d="M12 4l0 12"></path>\n            </symbol>\n\n            </defs>\n        </svg>'),this.preferences=new Hm(this),(t=>{const e=t.util,i=t.builderStuff,n=new Ti(t),o=new Ei(t),s=t.dom;let r="";t.opts.rowHtmlEditor&&(r=`<button tabindex="-1" title="${e.out("HTML")}" class="row-html">\n            <svg class="is-icon-flex" style="margin-right:-3px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-right"></use></svg>\n        </button>`);let l="";t.opts.columnHtmlEditor&&(l=`<button tabindex="-1" title="${e.out("HTML")}" class="cell-html">\n            <svg class="is-icon-flex" style="margin-right:-3px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-left"></use></svg><svg class="is-icon-flex" style="margin-left:-2px;width:12px;height:12px;"><use xlink:href="#ion-ios-arrow-right"></use></svg>\n        </button>`);const a=`<div class="is-modal is-modal-content grideditor" tabindex="-1" role="dialog" aria-modal="true" aria-hidden="true">\n        <div class="is-modal-bar is-draggable">\n            <button class="is-modal-close" tabindex="-1" title="${e.out("Close")}">&#10005;</button>\n        </div>\n        <div style="padding:13px 0 5px 18px;font-size:10px;text-transform:uppercase;letter-spacing:1px;">${e.out("Row")}</div>\n        <div style="display:flex;flex-flow:wrap;">\n            <button tabindex="-1" title="${e.out("Add")}" class="row-add"><svg class="is-icon-flex" style="width:19px;height:19px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Duplicate")}" class="row-duplicate" style="display: block;"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Up")}" class="row-up" style="display: block;"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Down")}" class="row-down" style="display: block;"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></button>\n            ${r}\n            <button tabindex="-1" title="${e.out("Delete")}" class="row-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n        </div>\n        <div style="padding:8px 0 5px 18px;font-size:11px;text-transform:uppercase;letter-spacing:1px;">${e.out("Column")}</div>\n        <div style="display:flex;flex-flow:wrap;">\n            <button tabindex="-1" title="${e.out("Add")}" class="cell-add"><svg class="is-icon-flex" style="width:19px;height:19px;"><use xlink:href="#ion-ios-plus-empty"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Duplicate")}" class="cell-duplicate"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-photos-outline"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Up")}" class="cell-up"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-up"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Down")}" class="cell-down"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-down"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Left")}" class="cell-prev"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-left"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Move Right")}" class="cell-next"><svg class="is-icon-flex" style="width:15px;height:15px;"><use xlink:href="#ion-ios-arrow-thin-right"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Increase")}" class="cell-increase"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-increase"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Decrease")}" class="cell-decrease"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#icon-decrease"></use></svg></button>\n            ${l}\n            <button tabindex="-1" title="${e.out("Delete")}" class="cell-remove"><svg class="is-icon-flex" style="width:20px;height:20px;"><use xlink:href="#ion-ios-close-empty"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Lock")}" class="cell-locking"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#icon-lock"></use></svg></button>\n            <button tabindex="-1" title="${e.out("Column Settings")}" class="cell-settings"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-gear"></use></svg></button>\n               \n            <div class="is-separator">\n                <button tabindex="-1" title="${e.out("Outline")}" class="grid-outline"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-grid-view-outline"></use></svg></button>\n                \x3c!--<button tabindex="-1" title="${e.out("Element Tool")}" class="cell-elmtool"><svg class="is-icon-flex" style="width:12px;height:12px;"><use xlink:href="#ion-ios-gear"></use></svg></button>--\x3e\n            </div>\n        </div>\n    </div>`;s.appendHtml(i,a),new zi({selector:".is-draggable"});const d=document.querySelector(".grideditor");document.addEventListener("click",(t=>{var e=(t=t||window.event).target||t.srcElement;if(s.hasClass(d,"active")){let t=s.parentsHasClass(e,"is-builder"),i=s.parentsHasClass(e,"grideditor"),n=s.parentsHasClass(e,"is-modal"),o=s.parentsHasClass(e,"is-pop"),r=s.parentsHasClass(e,"rte-grideditor")||s.hasClass(e,"rte-grideditor");if(t||i||n||o||r)return void(d.style.display="");d.style.display="none"}}),!1);let c=d.querySelector(".is-modal-close");s.addEventListener(c,"click",(()=>{s.removeClass(d,"active");const e=t.doc.querySelectorAll(t.opts.container);Array.prototype.forEach.call(e,(t=>{t.removeAttribute("grideditor")}))}));const u=d.querySelector(".grid-outline");s.addEventListener(u,"click",(()=>{const e=t.doc.querySelectorAll(t.opts.container);Array.prototype.forEach.call(e,(t=>{t.hasAttribute("gridoutline")?(t.removeAttribute("gridoutline"),s.removeClass(u,"on")):(t.setAttribute("gridoutline",""),s.addClass(u,"on"))}))}));const p=qi(t),h=d.querySelector(".cell-add");s.addEventListener(h,"click",(()=>{p.querySelector(".is-pop-tabs").style.display="flex";const t=h.getBoundingClientRect().top+window.pageYOffset,i=h.getBoundingClientRect().left+window.pageXOffset;e.showPop(p,!1,h);const n=p.offsetWidth;p.style.top=t+"px",p.style.left=i-n-8+"px",s.removeClass(p,"arrow-bottom"),s.removeClass(p,"arrow-left"),s.removeClass(p,"arrow-top"),s.removeClass(p,"center"),s.removeClass(p,"left"),s.addClass(p,"arrow-right"),s.addClass(p,"right"),"left"===p.querySelector(".active").getAttribute("data-value")?p.setAttribute("data-mode","cell-left"):p.setAttribute("data-mode","cell-right")})),c=d.querySelector(".cell-prev"),s.addEventListener(c,"click",(()=>{n.moveColumnPrevious(),e.clearControls()})),c=d.querySelector(".cell-next"),s.addEventListener(c,"click",(()=>{n.moveColumnNext(),e.clearControls()})),c=d.querySelector(".cell-increase"),s.addEventListener(c,"click",(()=>{n.increaseColumn(),e.clearControls()})),c=d.querySelector(".cell-decrease"),s.addEventListener(c,"click",(()=>{n.decreaseColumn(),e.clearControls()})),c=d.querySelector(".cell-up"),s.addEventListener(c,"click",(()=>{n.moveColumnUp(),e.clearControls()})),c=d.querySelector(".cell-down"),s.addEventListener(c,"click",(()=>{n.moveColumnDown(),e.clearControls()})),c=d.querySelector(".cell-duplicate"),s.addEventListener(c,"click",(()=>{n.duplicateColumn(),e.clearControls()})),c=d.querySelector(".cell-remove"),s.addEventListener(c,"click",(()=>{n.removeColumn(),e.clearControls()}));const g=d.querySelector(".cell-html");g&&s.addEventListener(g,"click",(()=>{e.cellSelected()&&o.view("cell",!1,g)}));const m=d.querySelector(".cell-settings");m&&s.addEventListener(m,"click",(()=>{const i=e.cellSelected();if(!i)return;t.colTool.readCellStyles(i),e.saveSelection();const n=document.querySelector(".is-modal.columnsettings");e.showModal(n,!1,(()=>{"flex"===t.builderStuff.querySelector(".is-rte-tool").style.display&&(e.restoreSelection(),m.removeAttribute("data-focus"),m.focus())})),m.setAttribute("data-focus",!0)}));const f=d.querySelector(".cell-locking");f&&s.addEventListener(f,"click",(i=>{let n=e.cellSelected();n&&(n.hasAttribute("data-noedit")?(n.removeAttribute("data-noedit"),n.contentEditable=!0,s.removeClass(f,"on")):(n.setAttribute("data-noedit",""),n.contentEditable=!1,s.addClass(f,"on"),e.clearActiveElement(!0)),t.colTool.showHideLockIndicator(n),t.element.applyBehavior(n),i.preventDefault())}));const b=d.querySelector(".row-add");s.addEventListener(b,"click",(()=>{p.querySelector(".is-pop-tabs").style.display="none";const t=b.getBoundingClientRect().top+window.pageYOffset,i=b.getBoundingClientRect().left+window.pageXOffset;e.showPop(p,!1,b);const n=p.offsetWidth;p.style.top=t+"px",p.style.left=i-n-8+"px",s.removeClass(p,"arrow-bottom"),s.removeClass(p,"arrow-left"),s.removeClass(p,"arrow-top"),s.removeClass(p,"center"),s.removeClass(p,"left"),s.addClass(p,"arrow-right"),s.addClass(p,"right"),p.setAttribute("data-mode","row")})),c=d.querySelector(".row-up"),s.addEventListener(c,"click",(()=>{n.moveRowUp(),e.clearControls()})),c=d.querySelector(".row-down"),s.addEventListener(c,"click",(()=>{n.moveRowDown(),e.clearControls()})),c=d.querySelector(".row-duplicate"),s.addEventListener(c,"click",(()=>{n.duplicateRow(),e.clearControls()})),c=d.querySelector(".row-remove"),s.addEventListener(c,"click",(()=>{n.removeRow(),e.clearControls()}));const v=d.querySelector(".row-html");v&&s.addEventListener(v,"click",(()=>{e.cellSelected()&&o.view("row",!1,v)}))})(this),this.preview=!1;const u=this.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(u,(t=>{this.dom.hasClass(t,"preview")&&(this.preview=!0)})),this.preview||this.opts.snippetJSON.snippets.length>0&&Vo(this),this.colTool=new am(this),this._rowTool=new rm(this),this.livePreview=new sf(this),this.mediaPicker=new nf(this);var p=this.opts.onChange;if(this.opts.onChange=()=>{var t=p.apply(this,arguments);return this.activeCol&&this.util.repositionColumnTool(),this.elmTool.repositionElementTool(!0),this.element.image.imageTool.style.display="",this.element.module.moduleTool.style.display="",this.colTool.lockIndicator.style.display="",t},this.elmTool=new zm(this),this.element=new zg(this),this.rte=new Wm(this),this.tooltip=new Vm(this),this.lightbox=new Xm(this),this.preview||this.applyBehavior(),!this.preview)if(this.opts.plugins.length>0)this.loadPlugins();else if(void 0===this.opts.scriptPath&&""===this.opts.pluginPath);else if(!this.opts.disableConfig){let t=this.opts.scriptPath+"config.js";""!==this.opts.pluginPath&&(t=this.opts.pluginPath+"config.js"),this.loadScript(t).then((()=>{this.opts.plugins.length>0&&this.loadPlugins()}),(()=>{console.log("Fail to load config")}))}this.tabs=new Qm,this.colorPicker=new Fg({lang:this.opts.lang,colors:this.opts.colors}),this.colorClassPicker=new Um({lang:this.opts.lang}),this.ShortcutInfo=new Zm(this),this.iframe&&(this.win.addEventListener("scroll",this.doWindowScroll=()=>{this.util.hidePops()}),this.win.addEventListener("resize",this.doWindowResize=()=>{this.util.clearActiveCell(),this.util.clearControls()})),document.addEventListener("click",this.doDocumentClick=t=>{let e,i=(t=t||window.event).target||t.srcElement;if(!i)return;i.parentNode&&(e=this.dom.hasClass(i.parentNode,"is-builder"));let n=this.dom.hasClass(i,"is-builder"),o=!1,s=!1,r=!1,a=!1,d=!1,c=!1,u=!1,p=!1,h=!1,g=!1,m=!1,f=!1,b=!1,v=!1,y=!1,x=i;for(;x&&x.tagName&&"BODY"!==x.tagName&&"HTML"!==x.tagName;){if(this.dom.hasClass(x,"is-builder")&&(o=!0),this.dom.hasClass(x,"is-subblock")&&(v=!0),this.dom.hasClass(x,"is-modal")&&(s=!0),(this.dom.hasClass(x,"is-side")||this.dom.hasClass(x,"is-sidebar"))&&(r=!0),this.dom.hasClass(x,"is-pop")&&(a=!0),this.dom.hasClass(x,"is-tool")&&(d=!0),(this.dom.hasClass(x,"is-rte-tool")||this.dom.hasClass(x,"is-elementrte-tool"))&&(c=!0),this.dom.hasClass(x,"is-rte-pop")&&(u=!0),this.dom.hasClass(x,"row-add-initial")&&(p=!0),(this.dom.hasClass(x,"sl-wrapper")||this.dom.hasClass(x,"sl-overlay")||this.dom.hasClass(x,"sl-close"))&&(h=!0),(this.dom.hasClass(x,"is-selectbox")||this.dom.hasClass(x,"is-selectbox-options"))&&(g=!0),this.opts.specialElementClasses)for(let t=0;t<this.opts.specialElementClasses.length;t++)this.dom.hasClass(x,this.opts.specialElementClasses[t])&&(y=!0);"divImageTool"===x.id&&(m=!0),"divImageResizer"===x.id&&(f=!0),this.preserveSelection&&(b=!0),x=x.parentNode}if(!g){let t=document.querySelectorAll(".is-selectbox-options");Array.prototype.forEach.call(t,(t=>{t.style.display="none"}))}let w=!1,S=document.querySelector("#divImageResizer");if(S&&"1"===S.getAttribute("data-resized")&&(w=!0),!w){if(!(s||h||m||f||"img"===i.tagName.toLowerCase())){document.querySelector("#divImageTool").style.display="";let t=document.querySelector("#divImageResizer");t.style.display="none",t.style.top="-10px",t.style.left="-10px",t.style.width="1px",t.style.height="1px",this.moveable&&(this.moveable.updateRect(),document.querySelector(".moveable-control-box").style.display="none")}if(!(o||v||s||r||a||d||c||u||p||h||b||y)||e&&!p||n){if(!this.dom.getSelected()){document.querySelector(".is-modal.active:not(.is-modal-content)")||(l.clearActiveCell(),l.clearControls(),"auto"!==this.toolbarDisplay&&this.rte.showDefaultToolbar())}this.element.hyperlink.buttonEditor.hide()}if(this.activeLinkButton||this.activeButton||i.closest(".buttoneditor")||i.closest(".link-button-edit")||i.closest(".is-modal")||this.element.hyperlink.buttonEditor.hide(),!a&&!this.dom.parentsHasId(i,"_cbhtml")){const t=document.querySelectorAll(".is-pop");Array.prototype.forEach.call(t,(t=>{this.dom.parentsHasId(t,"_cbhtml")||(t.style.display="")}))}}}),this.iframe&&this.doc.addEventListener("click",this.doDocumentClick),this.doc.addEventListener("mousedown",this.doDocumentMousedown=t=>{var e=(t=t||window.event).target||t.srcElement;this.dom.parentsHasClass(e,"row-handle")&&l.clearControls()}),document.addEventListener("keydown",this.doDocumentKeydown=t=>{90===t.which&&(t.ctrlKey||t.metaKey)&&(t.shiftKey?this.uo.doRedo():t.altKey||this.uo.doUndo()),89===t.which&&t.ctrlKey&&(t.altKey||this.uo.doRedo());(t.ctrlKey||t.metaKey)&&191===t.which&&this.ShortcutInfo.open()}),this.iframe&&this.doc.addEventListener("keydown",this.doDocumentKeydown),document.body.addEventListener("mscontrolselect",(function(t){t.preventDefault()})),window._cb=this,window.applyLargerImage=this.applyLargerImage.bind(this),window.returnUrl=this.returnUrl.bind(this),window.selectFile=this.selectFile.bind(this),window.selectImage=this.selectImage.bind(this),window.selectVideo=this.selectVideo.bind(this),window.selectAsset=this.selectAsset.bind(this),window.assetType=this.assetType.bind(this),window.hideModal=this.hideModal.bind(this),setTimeout((()=>{(null!=localStorage.getItem("_livepreview")||this.opts.livePreviewOpen)&&this.openPreview()}),300)}static run(t={}){return new rf(t)}setZoom(){if(""!==this.opts.page){const t=this.doc.querySelector(this.opts.page);t.style.transform=`scale(${this.opts.zoom})`,this.setZoomOnControl(t)}else{this.doc.querySelectorAll(this.opts.container).forEach((t=>{let e=!1;t.style.transform||(e=!0),e&&(t.style.transition="none"),t.style.transform=`scale(${this.opts.zoom})`,e&&setTimeout((()=>{t.style.transition=""}),300),this.setZoomOnControl(t)}))}}backwardCompatible(){this.builderStuff.querySelector('style[data-rel="css-new"]')||this.builderStuff.insertAdjacentHTML("afterbegin",'\n            <style data-rel="css-new">\n                \n        .row-active .is-col-tool {\n            display: flex;\n        }\n        .is-builder[rowoutline] .row-active .is-col-tool {\n            display: none;\n        }\n        .is-builder[hidecolumntool] .row-active .is-col-tool {\n            display: none;\n        }\n\n        .is-tool.is-col-tool {\n            flex-direction: row;\n            margin-top: 0px;\n            margin-left: -1px;\n        }\n        .is-tool.is-col-tool button {\n            width: 25px;\n            height: 25px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        .is-tool.is-col-tool .cell-add {\n            background: #0fcc52;\n        }\n        .is-tool.is-col-tool .cell-more {\n            background: rgba(216, 200, 6, 0.9);\n        }\n        .is-tool.is-col-tool .cell-remove {\n            background: rgba(255, 85, 4, 0.9);\n        }\n        .is-tool.is-col-tool svg {\n            width: 23px;\n            height: 23px;\n            fill: #fff  !important;\n        }\n        .is-tool.is-col-tool .cell-more svg {\n            width: 14px;\n            height: 14px;\n        }\n\n\n        .is-builder[gray] .is-tool.is-col-tool {\n            background: rgba(243, 243, 243, 0.9);\n            flex-direction: row;\n            top:-3px;\n            margin-top: 0px;\n            margin-left: -1px;\n        }\n        .is-builder[gray] .is-tool.is-col-tool button {\n            width: 27px;\n            height: 27px;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-add {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-more {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-remove {\n            background: transparent;\n        }\n        .is-builder[gray] .is-tool.is-col-tool svg {\n            width: 18px;\n            height: 18px;\n            fill: #000 !important;\n        }\n        .is-builder[gray] .is-tool.is-col-tool .cell-more svg {\n            width: 12px;\n            height: 12px;\n        }\n\n\n        .is-col-tool svg {\n            display: initial !important;\n        }\n        \n        \n            </style>\n            ')}setZoomOnControl(t){t.querySelectorAll(".is-row-tool").forEach((t=>{t.style.transform=`scale(${1/this.opts.zoom})`,t.style.transformOrigin="top"}));t.querySelectorAll(".is-col-tool").forEach((t=>{t.style.transform=`scale(${1/this.opts.zoom})`,t.style.transformOrigin="top left",t.style.marginTop=-27/this.opts.zoom+"px"}));t.querySelectorAll(".is-rowadd-tool button").forEach((t=>{t.style.transform=`scale(${1/this.opts.zoom})`}))}setZoomOnArea(){if(""!==this.opts.page){this.doc.querySelector(this.opts.page).style.transform=`scale(${this.opts.zoom})`}else{this.doc.querySelectorAll(this.opts.container).forEach((t=>{let e=!1;t.style.transform||(e=!0),e&&(t.style.transition="none"),t.style.transform=`scale(${this.opts.zoom})`,e&&setTimeout((()=>{t.style.transition=""}),300)}))}}applyBehavior(){null!==localStorage.getItem("_zoom")&&(this.opts.zoom=localStorage.getItem("_zoom")),this.rte.rteZoomSlider.value=100*this.opts.zoom;const t=this.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(t,(t=>{this.applyBehaviorOn(t),this.contentReformatOn(t)})),this.opts.onRender(),this.setZoomOnArea()}contentReformatOn(t){this.opts.useCssClasses&&this.dom.contentReformat(t,this.opts.cssClasses)}applyBehaviorOn(t){const e=this.util;if(this.opts.absolutePath){let e=t.querySelectorAll("a");Array.prototype.forEach.call(e,(t=>{let e=t.href;t.setAttribute("href",e)}));let i=t.querySelectorAll("img");Array.prototype.forEach.call(i,(t=>{let e=t.src;t.setAttribute("src",e)}))}this.dom.addClass(t,"is-builder"),this.preferences.initBuilder(t);if(this.dom.elementChildren(t).forEach((t=>{if(this.dom.hasClass(t,"row-add-initial"))return;(t.style.marginLeft||t.style.marginRight)&&(t.style.border="none"),this._rowTool.render(t);new lm(this).render(t);this.dom.elementChildren(t).forEach((t=>{if(this.dom.hasClass(t,"is-row-tool")||this.dom.hasClass(t,"is-col-tool")||this.dom.hasClass(t,"is-rowadd-tool"))return;"readonly"===t.getAttribute("data-mode")&&(t.setAttribute("data-noedit",""),t.removeAttribute("data-mode")),"readonly-protected"===t.getAttribute("data-mode")&&(t.setAttribute("data-protected",""),t.removeAttribute("data-mode"));let e=!1;t.hasAttribute("data-noedit")&&(e=!0);let i=!1;t.hasAttribute("data-protected")&&(i=!0);let n=!1;if(t.hasAttribute("data-html")&&(n=!0),!n&&!e&&!i){const e=t.innerText.trim();(t.querySelectorAll("p,h1,h2,h3,h4,h5,h6,table,ul,ol,pre,blockquote,code,figcaption,label,legend,button,a,span").length>0||""!==e)&&(t.contentEditable=!0)}this.element.applyBehavior(t),t.getAttribute("data-click")||(t.addEventListener("click",this.handleCellClick.bind(this,t)),t.addEventListener("keydown",this.handleCellKeypress.bind(this)),t.addEventListener("keydown",this.handleCellKeydown.bind(this,t)),t.addEventListener("keyup",this.handleCellKeyup.bind(this,t)),t.addEventListener("paste",this.handleCellPaste.bind(this)),t.setAttribute("data-click",!0))}))})),!t.getAttribute("data-sort")&&!t.hasAttribute("nogrid")){let i=new Co(t,{scroll:!0,group:"shared",animation:300,handle:".row-handle",sort:!0,onChoose:()=>{let t;if(""!==this.opts.page){const e=this.doc.querySelector(this.opts.page);t=this.dom.getScale(e)}else{const e=this.doc.querySelector(".is-builder");t=this.dom.getScale(e)}const e=`\n                    <style id="css-scale">\n                        .sortable-drag::before {\n                            transform: scale(${t});\n                        }\n                    </style>\n                    `;if(this.iframe){const t=this.contentStuff.querySelector("#css-scale");t&&t.parentNode.removeChild(t),this.contentStuff.insertAdjacentHTML("afterbegin",e)}else{const t=this.builderStuff.querySelector("#css-scale");t&&t.parentNode.removeChild(t),this.builderStuff.insertAdjacentHTML("afterbegin",e)}this.sectionDropSetup()},onStart:()=>{this.uo.saveForUndo(),this.elmTool.hide()},onEnd:()=>{this.util.checkEmpty(),this.sortableOnPage&&this.sortableOnPage.destroy()},onAdd:i=>{var n=i.item;if(n.getAttribute("data-id")){let i=n.getAttribute("data-id");const g=this.opts.snippetJSON.snippets.filter((t=>t.id+""===i&&t));var o,s=g[0].html,r=g[0].noedit;o=-1===s.indexOf('"row'),this.opts.emailMode&&(o=!1);var l=this.opts.row,a=this.opts.cols;if(""!==l&&12===a.length&&(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=s.replace(new RegExp("row clearfix","g"),"row")).replace(new RegExp('"row',"g"),'"'+l)).replace(new RegExp("column full","g"),a[11])).replace(new RegExp("column half","g"),a[5])).replace(new RegExp("column third","g"),a[3])).replace(new RegExp("column fourth","g"),a[2])).replace(new RegExp("column fifth","g"),a[1])).replace(new RegExp("column sixth","g"),a[1])).replace(new RegExp("column two-third","g"),a[7])).replace(new RegExp("column two-fourth","g"),a[8])).replace(new RegExp("column two-fifth","g"),a[9])).replace(new RegExp("column two-sixth","g"),a[9])),s=s.replace(/{id}/g,e.makeId()),this.opts.onAdd&&(s=this.opts.onAdd(s)),this.opts.snippetPathReplace.length>0&&""!==this.opts.snippetPathReplace[0]){var d=new RegExp(this.opts.snippetPathReplace[0],"g");s=s.replace(d,this.opts.snippetPathReplace[1]);var c=this.opts.snippetPathReplace[0].replace(/\//g,"%2F"),u=this.opts.snippetPathReplace[1].replace(/\//g,"%2F"),p=new RegExp(c,"g");s=s.replace(p,u)}if(o)s=`<div class="${this.opts.row}"><div class="${this.opts.cols[this.opts.cols.length-1]}"${r?" data-noedit":""}>${s}</div></div>`,n.removeAttribute("draggable"),this.dom.removeClass(n,"snippet-item"),n.outerHTML=s;else{let t=this.dom.createElement("div");t.innerHTML=s;let i=t.querySelectorAll("[data-html]");Array.prototype.forEach.call(i,(t=>{s=(s=(s=decodeURIComponent(t.getAttribute("data-html"))).replace(/{id}/g,e.makeId())).replace(/<script>/g,""+(this.nonce?`<script nonce="${this.nonce}">`:"<script>"));for(var i=1;i<=20;i++)s=s.replace("[%HTML"+i+"%]",void 0===t.getAttribute("data-html-"+i)?"":decodeURIComponent(t.getAttribute("data-html-"+i)));t.innerHTML=s})),s=t.innerHTML,n.removeAttribute("draggable"),this.dom.removeClass(n,"snippet-item"),n.innerHTML="";var h=document.createRange();h.setStart(n,0),n.appendChild(h.createContextualFragment(s)),n.outerHTML=n.innerHTML}this.applyBehaviorOn(t),this.opts.onChange(),this.opts.onRender(),this.elmTool.hide()}}});this.sortableObjects.push(i),t.setAttribute("data-sort",!0)}const i=t.querySelectorAll('a[role="button"]');Array.prototype.forEach.call(i,(e=>{e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.parentNode===t&&(e.outerHTML=`\n                        <div style="white-space: nowrap;">\n                            ${e.outerHTML}\n                        </div>\n                        `)}));const n=t.querySelectorAll(".is-subblock");Array.prototype.forEach.call(n,(t=>{t.contentEditable=!0})),this.util.checkEmptyOn(t),this.setZoomOnControl(t)}html(t){const e=this.util,i=new Ei(this);if(t);else{const i=this.doc.querySelectorAll(this.opts.container);if(i.length>1){const n=e.cellSelected();t=n?n.parentNode.parentNode:i[0]}else t=i[0];if(""!==this.opts.page){const e=this.doc.querySelector(this.opts.page);e&&(t=e)}}this.cleanHtmlFormatting=!0;let n=i.readHtml(t);return this.cleanHtmlFormatting=!1,n}viewHtmlNormal(){new Ei(this).viewHtmlExternal()}readHtml(t,e,i){return new Ei(this).readHtml(t,e,i)}fromViewToActual(t){return new Ei(this).fromViewToActual(t)}colorpicker(t,e){return new Fg({onPick:t,color:e,colors:this.opts.colors,animateModal:this.opts.animateModal,elementToAnimate:this.opts.container,lang:this.opts.lang})}gradientpicker(){return new em({gradientcolors:this.opts.gradientcolors,colors:this.opts.colors,animateModal:this.opts.animateModal,elementToAnimate:this.opts.container,lang:this.opts.lang})}simpleColorPicker(t,e){return this.colorClassPicker.open(t,e)}destroy(){if(this.doc.body.classList.remove("data-editor"),document.removeEventListener("click",this.doDocumentClick,!1),document.removeEventListener("keydown",this.doDocumentKeydown,!1),document.removeEventListener("mousedown",this.doDocumentMousedown,!1),document.removeEventListener("click",this.doRteClick,!1),this.doc.removeEventListener("click",this.doHideSnippetHandler,!1),this.iframe&&(this.doc.removeEventListener("click",this.doDocumentClick,!1),this.doc.removeEventListener("keydown",this.doDocumentKeydown,!1),this.doc.removeEventListener("mousedown",this.doDocumentMousedown,!1),this.doc.removeEventListener("click",this.doRteClick,!1),this.win.removeEventListener("scroll",this.doWindowScroll,!1),this.win.removeEventListener("resize",this.doWindowResize,!1)),this.util.clearControls(),!this.util.builderStuff())return;const t=new Ei(this);if(""!==this.opts.page){const t=this.doc.querySelector(this.opts.page);t&&(t.style.transform="")}else{this.doc.querySelectorAll(this.opts.container).forEach((t=>{t.style.transform=""}))}const e=this.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(e,(e=>{let i=t.readHtml(e,!1),n=this.doc.createRange();e.innerHTML="",e.appendChild(n.createContextualFragment(i))})),Array.prototype.forEach.call(e,(t=>{t.removeAttribute("data-sort"),this.dom.removeClass(t,"is-builder")})),Array.prototype.forEach.call(this.sortableObjects,(t=>{try{t.destroy()}catch(t){}})),this.moveable.destroy(),this.builderStuff.parentNode.removeChild(this.builderStuff),this.builderStuff=null,this.iframe&&(this.contentStuff.parentNode.removeChild(this.contentStuff),this.contentStuff=null)}saveImages(t,e,i){new jm({page:this.opts.page,container:this.opts.container,customval:this.opts.customval,handler:t,onComplete:e,onBase64Upload:i||null},this).save()}clearFont(){this.rte.clearFont()}applyFont(t,e,i){this.rte.applyFont(t,e,i)}setFont(t,e,i,n){this.rte.setFont(t,e,i,n)}addIcon(t){this.rte.addIcon(t)}applyLargerImage(t){let e=document.querySelectorAll(".form-upload-larger");Array.prototype.forEach.call(e,(e=>{this.dom.hasClass(e,"please-wait")&&(this.dom.removeClass(e,"please-wait"),e.parentNode.parentNode.querySelector('input[type="text"]').value=t,e.parentNode.parentNode.querySelector('input[type="file"]').value="")}))}returnUrl(t){let e=document.querySelectorAll(".form-upload-larger");Array.prototype.forEach.call(e,(e=>{this.dom.hasClass(e,"please-wait")&&(this.dom.removeClass(e,"please-wait"),e.parentNode.parentNode.querySelector('input[type="text"]').value=t,e.parentNode.parentNode.querySelector('input[type="file"]').value="")})),this.opts.assetRefresh=!0}openMediaPicker(t,e="media",i,n){this.mediaPicker.openMediaPicker(t,e,i,n)}openImagePicker(t,e,i){this.colTool.openImagePicker(t,e,i)}openImageAdjust(t,e,i){2===this.opts.imageAdjust?this.colTool.openImageAdjust2(t,e):this.colTool.openImageAdjust(t,e,i)}selectFile(t){this.selectAsset(t)}selectImage(t){this.selectAsset(t)}selectVideo(t){this.selectAsset(t)}selectAsset(t){let e=t.split(".").pop().split("?")[0].split("#")[0];e=e.toLowerCase();let i=!1;if("all"===this.targetAssetType?i=!0:"media"===this.targetAssetType?"jpg"===e||"jpeg"===e||"png"===e||"gif"===e||"webm"===e||"webp"===e||"mp4"===e?i=!0:alert(this.util.out("Please select an image or video file.")):"image"===this.targetAssetType?"jpg"===e||"jpeg"===e||"png"===e||"gif"===e||"webm"===e||"webp"===e?i=!0:alert(this.util.out("Please select an image file.")):"video"===this.targetAssetType?"mp4"===e?i=!0:alert(this.util.out("Please select an mp4 file.")):"audio"===this.targetAssetType&&("mp3"===e?i=!0:alert(this.util.out("Please select an mp3 file."))),i){this.targetInput.value=t,"inpCellLinkSource"===this.targetInput.id&&this.targetCallback();let e=document.querySelector(".is-modal.videoselect.active");e&&this.hideModal(e),e=document.querySelector(".is-modal.imageselect.active"),e&&this.hideModal(e),e=document.querySelector(".is-modal.fileselect.active"),e&&this.hideModal(e),e=document.querySelector(".is-modal.audioselect.active"),e&&this.hideModal(e),e=document.querySelector(".is-modal.mediaselect.active"),e&&this.hideModal(e),e=document.querySelector(".is-modal.otherselect.active"),e&&this.hideModal(e)}}assetType(){return this.targetAssetType}renderSelectAsset(t,e,i){const n="inp_"+this.util.makeId();t.insertAdjacentHTML("afterend",`<input type="hidden" id="${n}">`);const o=t.parentNode.querySelector(`#${n}`);t.addEventListener("click",(()=>{this.openAsset(o,e,t)}));let s=t=>this.util.out(t);const r=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");Object.defineProperty(o,"value",{get:r.get,set:function(t){let n=t.substring(t.lastIndexOf("/")+1).split(".").pop();n=n.toLowerCase();let o=!1;"all"===e?o=!0:"media"===e?"jpg"===n||"jpeg"===n||"png"===n||"gif"===n||"webm"===n||"webp"===n||"mp4"===n?o=!0:alert(s("Please select an image or video file.")):"video"===e?"mp4"===n?o=!0:alert(s("Please select an mp4 file.")):"image"===e?"jpg"===n||"jpeg"===n||"png"===n||"gif"===n||"webm"===n||"webp"===n?o=!0:alert(s("Please select an image file.")):"audio"===e&&("mp3"===n?o=!0:alert(s("Please select an mp3 file."))),o&&i&&i(t),r.set.call(this,t)}})}openOther(t,e,i){if(this.opts.onOtherSelectClick)this.opts.onOtherSelectClick({targetInput:t,theTrigger:i});else{let i,n=this.builderStuff.querySelector(".is-modal.otherselect");i=n.querySelector("iframe"),"about:blank"===i.src&&(i.src=this.opts.otherSelect),this.util.showModal(n),this.targetInput=t,this.targetCallback=null,this.targetAssetType=e}}openAsset(t,e,i){if("media"===e&&(this.opts.onMediaSelectClick||this.opts.onImageSelectClick))this.opts.onMediaSelectClick?this.opts.onMediaSelectClick({targetInput:t,theTrigger:i}):this.opts.onImageSelectClick({targetInput:t,theTrigger:i});else if("video"===e&&this.opts.onVideoSelectClick)this.opts.onVideoSelectClick({targetInput:t,theTrigger:i});else if("image"===e&&this.opts.onImageSelectClick)this.opts.onImageSelectClick({targetInput:t,theTrigger:i});else if("audio"===e&&this.opts.onAudioSelectClick)this.opts.onAudioSelectClick({targetInput:t,theTrigger:i});else if("all"===e&&this.opts.onFileSelectClick)this.opts.onFileSelectClick({targetInput:t,theTrigger:i});else{let i,n;"media"===e?(n=this.builderStuff.querySelector(".is-modal.mediaselect"),i=n.querySelector("iframe"),"about:blank"===i.src&&(this.opts.mediaSelect?i.src=this.opts.mediaSelect:this.opts.imageSelect&&(i.src=this.opts.imageSelect))):"video"===e?(n=this.builderStuff.querySelector(".is-modal.videoselect"),i=n.querySelector("iframe"),"about:blank"===i.src&&(i.src=this.opts.videoSelect)):"image"===e?(n=this.builderStuff.querySelector(".is-modal.imageselect"),i=n.querySelector("iframe"),"about:blank"===i.src&&(i.src=this.opts.imageSelect)):"audio"===e?(n=this.builderStuff.querySelector(".is-modal.audioselect"),i=n.querySelector("iframe"),"about:blank"===i.src&&(i.src=this.opts.audioSelect)):"all"===e&&(n=this.builderStuff.querySelector(".is-modal.fileselect"),i=n.querySelector("iframe"),"about:blank"===i.src&&(i.src=this.opts.fileSelect)),this.util.showModal(n),this.targetInput=t,this.targetCallback=null,this.targetAssetType=e}}LightenDarkenColor(t,e){return this.util.LightenDarkenColor(t,e)}pickColor(t,e){new Fg({colors:this.opts.colors,animateModal:!1,lang:this.opts.lang}).open(t,e)}addSnippet(t,e,i){this.util.addSnippet(t,e,i)}viewSnippets(){this.rte.viewSnippets()}saveForUndo(t){this.uo.saveForUndo(t)}download(t={}){this.export(t,!0)}export(t={},e=!1){let i=this.pageTemplate,n="";this.makeAbsolute=!0,this.shortenOutput=e;let o=this.html();if(this.makeAbsolute=!1,this.shortenOutput=!1,n=i.replace("[%CONTENT%]",o),t.replace&&t.replace.forEach((t=>{n=n.replaceAll(`${t[0]}`,t[1])})),t.path)n=n.replaceAll("[%PATH%]",t.path);else{let t;t=location.href.substring(0,location.href.lastIndexOf("/")),n=n.replaceAll("[%PATH%]",t)}n=this.beautify(n);const s=document.createElement("a");s.href=window.URL.createObjectURL(new Blob([n],{type:"text/plain"})),s.download="page.html",s.click()}beautify(t){return new Ei(this).beautify(t)}openPreview(){this.livePreview.openPreview()}closePreview(){this.livePreview.closePreview()}getActiveModule(){return document.querySelector("[data-module-active]")}getModuleSettings(){let t=document.querySelector("[data-module-active]");return decodeURIComponent(t.getAttribute("data-settings"))}setModuleHtml(t){document.querySelector("#hidContentModuleCode").value=t}setModuleSettings(t){document.querySelector("#hidContentModuleSettings").value=t}makeId(){return this.util.makeId()}setTooltip(t){this.tooltip.setAll(t)}loadPlugins(){if(!this.builderStuff)return;if(void 0===this.opts.scriptPath&&""===this.opts.pluginPath)return;if(this.numOfPlugins=0,"string"==typeof this.opts.plugins[0])return void this.loadPluginsOldWay();const t=this.builderStuff.querySelector(".is-rte-tool"),e=this.builderStuff.querySelector(".rte-more-options"),i=this.builderStuff.querySelector(".is-elementrte-tool"),n=this.builderStuff.querySelector(".elementrte-more-options");let o;for(o=this.opts.plugins.length-1;o>=0;o--){const s=this.opts.plugins[o].name,r=this.opts.plugins[o].showInMainToolbar,l=this.opts.plugins[o].showInElementToolbar;let a=!1;(t.querySelector('[data-plugin="'+s+'"]')||e.querySelector('[data-plugin="'+s+'"]'))&&(a=!0);let d=!1;if((i.querySelector('[data-plugin="'+s+'"]')||n.querySelector('[data-plugin="'+s+'"]'))&&(d=!0),r&&!a){e.querySelectorAll("div:not(.rte-separator)").forEach((t=>{t.insertAdjacentHTML("afterbegin",'<button style="width:46px;" title="button not found" data-plugin="'+s+'"></button>')}))}l&&!d&&n.querySelector("div").insertAdjacentHTML("afterbegin",'<button style="width:46px;" title="button not found" data-plugin="'+s+'"></button>')}for(o=0;o<this.opts.plugins.length;o++){const t=this.opts.plugins[o].name;let e=this.opts.scriptPath+"plugins/"+t+"/plugin.js";""!==this.opts.pluginPath&&(e=this.opts.pluginPath+"plugins/"+t+"/plugin.js"),this.loadScript(e).then((()=>{this.numOfPlugins++,this.numOfPlugins===this.opts.plugins.length&&(this.opts.onPluginsLoaded&&this.opts.onPluginsLoaded(),this.tooltip.setAll(),new zi({selector:".is-draggable"}))}))}}loadPluginsOldWay(){const t=this.builderStuff.querySelector(".is-rte-tool"),e=this.builderStuff.querySelector(".rte-more-options"),i=this.builderStuff.querySelector(".is-elementrte-tool"),n=this.builderStuff.querySelector(".elementrte-more-options");let o;for(o=this.opts.plugins.length-1;o>=0;o--){const s=this.opts.plugins[o];let r=!1;(t.querySelector('[data-plugin="'+s+'"]')||e.querySelector('[data-plugin="'+s+'"]'))&&(r=!0);let l=!1;(i.querySelector('[data-plugin="'+s+'"]')||n.querySelector('[data-plugin="'+s+'"]'))&&(l=!0),r||e.querySelector("div").insertAdjacentHTML("afterbegin",'<button style="width:46px;" title="button not found" data-plugin="'+this.opts.plugins[o]+'"></button>'),l||n.querySelector("div").insertAdjacentHTML("afterbegin",'<button style="width:46px;" title="button not found" data-plugin="'+this.opts.plugins[o]+'"></button>')}for(o=0;o<this.opts.plugins.length;o++){let t=this.opts.scriptPath+"plugins/"+this.opts.plugins[o]+"/plugin.js";""!==this.opts.pluginPath&&(t=this.opts.pluginPath+"plugins/"+this.opts.plugins[o]+"/plugin.js"),this.loadScript(t).then((()=>{if(this.numOfPlugins++,this.numOfPlugins===this.opts.plugins.length){let t=e.querySelectorAll("[data-plugin]");Array.prototype.forEach.call(t,(t=>{t.outerHTML=""})),t=n.querySelectorAll("[data-plugin]"),Array.prototype.forEach.call(t,(t=>{t.outerHTML=""})),this.opts.onPluginsLoaded&&this.opts.onPluginsLoaded(),this.tooltip.setAll(),new zi({selector:".is-draggable"})}}))}}addHtml(t){this.dom.appendHtml(this.builderStuff,t)}addCss(t){this.dom.appendHtml(document.head,t)}addButton_OLD(t,e,i,n){if(!this.builderStuff)return;const o=this.builderStuff.querySelector(".is-rte-tool"),s=this.builderStuff.querySelector(".rte-more-options");var r=!1;if(o.querySelector('[data-plugin="'+t+'"]')?o.querySelector('[data-plugin="'+t+'"]').outerHTML=e:s.querySelector('[data-plugin="'+t+'"]')&&(s.querySelector('[data-plugin="'+t+'"]').outerHTML=e,r=!0),!o.querySelector(".rte-more")&&r){o.insertAdjacentHTML("beforeend",`<button title="${this.util.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let t=this.rteTool.querySelector("button.rte-more");t&&this.dom.addEventListener(t,"click",(()=>{this.rte.showRteMore()}))}let l=o.querySelector(i);l=l||s.querySelector(i),l&&(l.setAttribute("data-title",l.getAttribute("title")),this.dom.addEventListener(l,"click",(t=>{n(t)})))}addButton(t,e,i,n){if(!this.builderStuff)return;const o=this.builderStuff.querySelector(".is-rte-tool"),s=this.builderStuff.querySelector(".rte-more-options");var r=!1;s.querySelector('[data-plugin="'+t+'"]')&&(r=!0);if(this.builderStuff.querySelectorAll('[data-plugin="'+t+'"]').forEach((t=>{t.outerHTML=e})),!o.querySelector(".rte-more")&&r){o.insertAdjacentHTML("beforeend",`<button title="${this.util.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let t=this.rteTool.querySelector("button.rte-more");t&&this.dom.addEventListener(t,"click",(()=>{this.rte.showRteMore()}))}let l=o.querySelectorAll(i);l.forEach((t=>{t.setAttribute("data-title",t.getAttribute("title")),this.dom.addEventListener(t,"click",(t=>{n(t)}))})),l=s.querySelectorAll(i),l.forEach((t=>{t.setAttribute("data-title",t.getAttribute("title")),this.dom.addEventListener(t,"click",(t=>{n(t)}))}))}addButton2(t,e,i,n){if(!this.builderStuff)return;const o=this.builderStuff.querySelector(".is-elementrte-tool"),s=this.builderStuff.querySelector(".elementrte-more-options");var r=!1;if(o.querySelector('[data-plugin="'+t+'"]')?o.querySelector('[data-plugin="'+t+'"]').outerHTML=e:s.querySelector('[data-plugin="'+t+'"]')&&(s.querySelector('[data-plugin="'+t+'"]').outerHTML=e,r=!0),!o.querySelector(".rte-more")&&r){o.insertAdjacentHTML("beforeend",`<button title="${this.util.out("More")}" class="rte-more"><svg class="is-icon-flex" style="width:13px;height:13px;"><use xlink:href="#ion-more"></use></svg></button>`);let t=this.elementRteTool.querySelector("button.rte-more");t&&this.dom.addEventListener(t,"click",(()=>{this.rte.showElementRteMore()}))}let l=o.querySelector(i);l=l||s.querySelector(i),l&&(l.setAttribute("data-title",l.getAttribute("title")),this.dom.addEventListener(l,"click",(t=>{n(t)})))}showModal(t,e,i,n){this.util.showModal(t,e,i,n)}hideModal(t){this.util._hideModal(t)}draggable(t){new zi({selector:t})}createModal(t,e,i,n,o){let s=this.builderStuff.querySelector(e);return s||(this.builderStuff.appendChild(t),s=this.builderStuff.querySelector(e)),this.showModal(s,i,n,o),new zi({selector:".is-draggable"}),s}getIcons(){return this.rte.getIcons()}showSidePanel(t){let e=this.builderStuff.querySelectorAll(".is-side");Array.prototype.forEach.call(e,(t=>{this.dom.removeClass(t,"active")})),this.dom.addClass(t,"active")}hideSidePanel(t){this.dom.removeClass(t,"active")}getScriptPath(){return this.opts.scriptPath}getSnippetPath(){return this.opts.snippetPath}out(t){return this.util.out(t)}undo(){this.uo.doUndo()}redo(){this.uo.doRedo()}getScope(){let t;const e=this.doc.querySelectorAll(this.opts.container);if(e.length>1){const i=this.util.cellSelected();t=i?i.parentNode.parentNode:e[0]}else t=e[0];if(""!==this.opts.page){const e=this.doc.querySelector(this.opts.page);e&&(t=e)}return t}pasteHtmlAtCaret(t,e){this.util.pasteHtmlAtCaret(t,e)}getScript(t,e){this.loadScript(t).then((()=>{e&&e()}),(()=>{console.log("Fail to load config")}))}getScripts(t,e){let i=0;this.loadScript(t[i]).then((()=>{i=this._helper1(i,t,e)}))}_helper1(t,e,i){if(++t<e.length){return this.loadScript(e[t]).then((()=>{t=this._helper1(t,e,i)})),t}i&&i()}includeJs(t,e){-1===this.filesAdded.indexOf("["+t+"]")?(this.getScript(t,e),this.filesAdded+="["+t+"]"):e&&e()}includeCss(t){if(-1===this.filesAdded.indexOf("["+t+"]")){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e),this.filesAdded+="["+t+"]"}}applyStyle(t,e){if(-1===this.filesAdded.indexOf("["+t+"]")){var i=document.createElement("style");i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),this.filesAdded+="["+t+"]"}}viewHtml(t){new Ei(this).view("full",t)}viewPreferences(){this.preferences.view()}viewConfig(){this.preferences.view()}viewZoom(){this.rte.viewZoom()}loadSnippets(t){if(this.preview)return;if(document.querySelector(this.opts.snippetList))return;if(this.isScriptAlreadyIncluded(t))return;const e=document.createElement("script");e.src=t,e.async=!0,e.onload=()=>{this.opts.snippetJSON=window.data_basic,""===this.opts.snippetPath&&(this.opts.snippetPath=window._snippets_path),this.opts.snippetJSON.snippets.length>0&&Vo(this)},document.body.appendChild(e)}isScriptAlreadyIncluded(t){const e=document.getElementsByTagName("script");for(let i=0;i<e.length;i++)if(e[i].getAttribute("src")===t)return!0;return!1}loadHtml(t,e){const i=this.util;if(e);else{const t=this.doc.querySelectorAll(this.opts.container);if(t.length>1){const n=i.cellSelected();e=n?n.parentNode.parentNode:t[0]}else e=t[0];if(""!==this.opts.page){const t=this.doc.querySelector(this.opts.page);t&&(e=t)}}let n=this.doc.createRange();e.innerHTML="",e.appendChild(n.createContextualFragment(t)),this.applyBehavior(),this.opts.onChange(),this.opts.onRender(),null!=localStorage.getItem("_livepreview")&&this.livePreview.openPreview()}loadHTML(t){this.loadHtml(t)}setUIColor(t,e){let i=document.querySelector("[data-cb-color]");if(i&&i.setAttribute("data-cb-del",""),e){var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.setAttribute("data-cb-color",""),n.addEventListener("load",(()=>{i=document.querySelector("[data-cb-del]"),i&&i.parentNode.removeChild(i),"dark"===t&&(this.dom.removeClass(document.body,"colored"),this.dom.removeClass(document.body,"colored-dark"),this.dom.removeClass(document.body,"light"),this.dom.addClass(document.body,"dark")),"colored"===t&&(this.dom.removeClass(document.body,"dark"),this.dom.removeClass(document.body,"colored-dark"),this.dom.removeClass(document.body,"light"),this.dom.addClass(document.body,"colored")),"colored-dark"===t&&(this.dom.removeClass(document.body,"dark"),this.dom.removeClass(document.body,"colored"),this.dom.removeClass(document.body,"light"),this.dom.addClass(document.body,"colored-dark")),""===t&&(this.dom.removeClass(document.body,"dark"),this.dom.removeClass(document.body,"colored-dark"),this.dom.removeClass(document.body,"colored"),this.dom.removeClass(document.body,"light")),"light"===t&&(this.dom.removeClass(document.body,"dark"),this.dom.removeClass(document.body,"colored-dark"),this.dom.removeClass(document.body,"colored"),this.dom.addClass(document.body,"light"));const e=this.util;setTimeout((()=>{e.getUIStyles(),this.setUIColorRefresh(),this.opts.onThemeChange&&this.opts.onThemeChange()}),300)})),document.head.appendChild(n)}else{i=document.querySelector("[data-cb-del]"),i&&i.parentNode.removeChild(i),""===t&&(this.dom.removeClass(document.body,"dark"),this.dom.removeClass(document.body,"colored-dark"),this.dom.removeClass(document.body,"colored"),this.dom.removeClass(document.body,"light"));const e=this.util;setTimeout((()=>{e.getUIStyles(),this.setUIColorRefresh(),this.opts.onThemeChange&&this.opts.onThemeChange()}),1e3)}}setUIColorRefresh(){const t=this.util;if(!this.rte||!this.element)return void setTimeout((()=>{this.setUIColorRefresh()}),600);let e=this.rte.rteFontFamilyOptions.querySelector("iframe").contentWindow.document;let i=this.builderStuff.querySelector(".is-modal.pickfontfamily").querySelector("iframe").contentWindow.document,n=this.rte.rteIconOptions.querySelector("iframe").contentWindow.document;""===e.body.innerHTML?(e.open(),this.opts.emailMode?e.write(t.getFontFamilyEmail()):e.write(t.getFontFamilyHTML()),e.close()):this.util.refreshFontFamilyStyle1(),""===i.body.innerHTML?(i.open(),this.opts.emailMode?i.write(t.getFontFamilyEmail(!0)):i.write(t.getFontFamilyHTML(!0)),i.close()):this.util.refreshFontFamilyStyle2(),""===n.body.innerHTML?(n.open(),n.write(this.rte.getIconsHTML()),n.close()):this.rte.refreshIconsStyle(),this.builderStuff.querySelector(".snippets").querySelector("iframe").src="about:blank";let o=document.querySelector(".is-modal.videoselect"),s=document.querySelector(".is-modal.imageselect"),r=document.querySelector(".is-modal.fileselect"),l=document.querySelector(".is-modal.otherselect"),a=o.querySelector("iframe"),d=s.querySelector("iframe"),c=r.querySelector("iframe"),u=l.querySelector("iframe");a.contentWindow.applyParentStyles&&a.contentWindow.applyParentStyles(),d.contentWindow.applyParentStyles&&d.contentWindow.applyParentStyles(),c.contentWindow.applyParentStyles&&c.contentWindow.applyParentStyles(),u.contentWindow.applyParentStyles&&u.contentWindow.applyParentStyles()}openMedia(t){let e="",i=t.getAttribute("data-modal-theme");i||(i="light");const n=t.getAttribute("data-modal-color");if(t.getAttribute("data-modal-url")){e=t.getAttribute("data-modal-url");let o=e.split(".").pop().split("?")[0].split("#")[0];if("jpg"===o||"jpeg"===o||"png"===o||"gif"===o||"webm"===o||"webp"===o)this.lightbox.openImage(e,i,n);else if("mp4"===o)this.lightbox.openVideo(e,"dark",n);else if(-1!==e.toLowerCase().indexOf("youtube.com")||-1!==e.toLowerCase().indexOf("youtube-nocookie.com")||-1!==e.toLowerCase().indexOf("vimeo.com"))this.lightbox.openExternalVideo(e,"dark",n);else{if(0===e.indexOf("#"));else{if(!window.confirm(this.util.out("Do you really want to leave?")))return!1}window.location.href=e}}else t.getAttribute("data-modal-image")&&(e=t.getAttribute("data-modal-image"),this.lightbox.openImage(e,i,n)),t.getAttribute("data-modal-video")&&(e=t.getAttribute("data-modal-video"),this.lightbox.openVideo(e,"dark",n)),t.getAttribute("data-modal-externalvideo")&&(e=t.getAttribute("data-modal-externalvideo"),this.lightbox.openExternalVideo(e,"dark",n))}lightboxOpen(t){this.useLightbox&&(t.hasAttribute("data-noedit")||t.hasAttribute("data-protected"))&&this.dom.hasClass(t,"block-click")&&this.openMedia(t)}handleCellClick(t,e){this.cleanEditing&&(t.parentNode.querySelector(".is-row-tool").style.display="",t.parentNode.querySelector(".is-col-tool").style.display=""),this.lightboxOpen(t);this.util.clearActiveCell(),this.activeCol=t;let i=e.target;this.dom.addClass(t,"cell-active");let n=t.parentNode;this.dom.addClass(n,"row-active");const o=this.doc.querySelectorAll(this.opts.container);Array.prototype.forEach.call(o,(t=>{this.dom.removeClass(t,"builder-active")})),this.dom.addClass(n.parentNode,"builder-active"),this.dom.addClass(this.doc.body,"content-edit"),n.childElementCount-2==1||this.dom.addClass(n,"row-outline"),this.opts.onContentClick&&this.opts.onContentClick(e),this.element.click(t,e),this.colTool.click(t),this.elmTool.click(t,e),this.rte.click(t,e);const s=document.querySelector(".grideditor.active");if(s){const e=s.querySelector(".cell-locking");t.hasAttribute("data-noedit")?this.dom.addClass(e,"on"):this.dom.removeClass(e,"on")}let r=this.dom.getParentElement(i,"a");if(("a"===i.tagName.toLowerCase()||r)&&(t.hasAttribute("data-noedit")||t.hasAttribute("data-protected"))){if("true"===t.getAttribute("contenteditable"))return e.preventDefault(),!1;if("a"===i.tagName.toLowerCase()&&(r=i),this.useLightbox&&this.dom.hasClass(r,"is-lightbox")){let t=r.getAttribute("href");if(!t)return e.preventDefault(),!1;let n=t.split(".").pop().split("?")[0].split("#")[0],o=r.getAttribute("data-modal-theme");o||(o="light");const s=i.getAttribute("data-modal-color");if("jpg"===n||"jpeg"===n||"png"===n||"gif"===n||"webm"===n||"webp"===n)return this.lightbox.openImage(t,o,s),e.preventDefault(),!1;if("mp4"===n)return this.lightbox.openVideo(t,"dark",s),e.preventDefault(),!1;if(-1!==t.toLowerCase().indexOf("youtube.com")||-1!==t.toLowerCase().indexOf("youtube-nocookie.com")||-1!==t.toLowerCase().indexOf("vimeo.com"))return this.lightbox.openExternalVideo(t,"dark",s),e.preventDefault(),!1;if(0===t.indexOf("#"));else{if(!window.confirm(this.util.out("Do you really want to leave?")))return e.preventDefault(),!1}}else{let t=r.getAttribute("href");if(!t)return e.preventDefault(),!1;if(0===t.indexOf("#"));else{if(!window.confirm(this.util.out("Do you really want to leave?")))return e.preventDefault(),!1}}}if(1===t.childElementCount){let e=t.children[0];e&&this.dom.hasClass(e,"spacer")&&(t.contentEditable=!1)}this.colTool.showHideLockIndicator(t);const l=n.querySelector(".is-rowadd-tool").querySelector("button");l.style.marginTop="";const a=Array.from(n.parentNode.children).filter((t=>"div"===t.nodeName.toLowerCase()));if(a&&a.length>0){if(n===a[a.length-1]){const t=n.closest(".is-section");if(t){const e=this.dom.getElementOffset(t);let i=e.top+e.height;const o=this.dom.getElementOffset(n);i-(o.top+o.height)<19&&(l.style.marginTop="-14px")}}}this.opts.enableDragResize&&(this.resize&&this.resize.destroy(),t.classList.contains("noresize")||(this.resize=new tf(t,this),this.resize.enable()))}handleCellKeypress(t){t.ctrlKey||t.metaKey||(null===this.uoTm?(this.uo.saveForUndo(),this.uoTm=setTimeout((()=>{this.uoTm=null}),1e3)):(clearTimeout(this.uoTm),this.uoTm=setTimeout((()=>{this.uoTm=null}),1e3)))}handleCellKeydown(t,e){this.oriLen=t.textContent.length;let i=t.querySelectorAll("span");if(Array.prototype.forEach.call(i,(t=>{t.setAttribute("data-keep","")})),(e.ctrlKey||e.metaKey)&&86===e.which&&this.handleCellPaste(),this.opts.elementSelection&&!this.emailMode&&(e.ctrlKey||e.metaKey)&&65===e.which){let t;try{this.win.getSelection?t=this.win.getSelection().getRangeAt(0).commonAncestorContainer.parentNode:this.doc.selection&&(t=this.doc.selection.createRange().parentElement()),this.dom.hasClass(t.parentNode.parentNode,"is-builder")||this.dom.selectElementContents(t),e.preventDefault()}catch(e){}}if(46===e.keyCode){let t;try{if(window.getSelection?t=window.getSelection().getRangeAt(0).commonAncestorContainer:document.selection&&(t=document.selection.createRange()),"<br>"===t.innerHTML){t.nextElementSibling&&(t.parentNode.removeChild(t),e.preventDefault())}}catch(e){}}if(8===e.keyCode){let t;try{if(window.getSelection?t=window.getSelection().getRangeAt(0).commonAncestorContainer:document.selection&&(t=document.selection.createRange()),""===t.textContent){t.previousElementSibling||e.preventDefault()}}catch(e){}}if(9===e.which&&!e.shiftKey){const t=this.activeCol;if(t)if(t.nextElementSibling&&t.nextElementSibling.hasAttribute("data-click")){const i=t.nextElementSibling;i&&i.click();let n=window.getSelection(),o=this.createRange(i,{count:0});o&&(o.collapse(!1),n.removeAllRanges(),n.addRange(o)),i.firstElementChild&&setTimeout((()=>{i.firstElementChild.click()}),200),e.preventDefault()}else if(t.parentNode.nextElementSibling){const i=t.parentNode.nextElementSibling;if(i){const t=i.firstElementChild;t&&t.click();let n=window.getSelection(),o=this.createRange(t,{count:0});o&&(o.collapse(!1),n.removeAllRanges(),n.addRange(o)),t.firstElementChild&&setTimeout((()=>{t.firstElementChild.click()}),200),e.preventDefault()}}}if(9===e.which&&e.shiftKey){const t=this.activeCol;if(t)if(t.previousElementSibling&&t.previousElementSibling.hasAttribute("data-click")){const i=t.previousElementSibling;i&&i.click(),i.firstElementChild&&i.firstElementChild.click();let n=window.getSelection(),o=this.createRange(i,{count:0});o&&(o.collapse(!1),n.removeAllRanges(),n.addRange(o)),i.firstElementChild&&setTimeout((()=>{i.firstElementChild.click()}),200),e.preventDefault()}else if(t.parentNode.previousElementSibling){const i=t.parentNode.previousElementSibling.querySelectorAll("[data-click]");if(i.length>0){const t=i[i.length-1];t&&t.click(),t.firstElementChild&&t.firstElementChild.click();let n=window.getSelection(),o=this.createRange(t,{count:0});o&&(o.collapse(!1),n.removeAllRanges(),n.addRange(o)),t.firstElementChild&&setTimeout((()=>{t.firstElementChild.click()}),200),e.preventDefault()}}}const n=()=>{let e=t.querySelectorAll("span");Array.prototype.forEach.call(e,(t=>{t.setAttribute("data-keep","")}))},o=e.ctrlKey||e.metaKey;if(o&&66===e.which&&this.opts.useCssClasses&&(this.dom.execCommandToggle("fontWeight","",this.opts.cssClasses),this.opts.onChange(),e.preventDefault(),n()),o&&73===e.which&&this.opts.useCssClasses&&(this.dom.execCommandToggle("fontStyle","",this.opts.cssClasses),this.opts.onChange(),e.preventDefault(),n()),o&&85===e.which&&this.opts.useCssClasses&&(this.dom.execCommandToggle("textUnderline","",this.opts.cssClasses),this.opts.onChange(),e.preventDefault(),n()),o&&83===e.which&&this.opts.useCssClasses&&(this.dom.execCommandToggle("textLinethrough","",this.opts.cssClasses),this.opts.onChange(),e.preventDefault(),n()),o&&221===e.which&&(e.preventDefault(),document.execCommand("indent",!1,null),this.opts.onChange(),e.preventDefault(),n()),o&&219===e.which&&(e.preventDefault(),document.execCommand("outdent",!1,null),this.opts.onChange(),e.preventDefault(),n()),o&&75===e.which&&(this.element.hyperlink.createLink(),e.preventDefault()),o&&80===e.which&&(e.preventDefault(),this.rte.insertImage()),(46===e.which||8===e.which)&&this.activeIcon){if("a"===this.activeIcon.parentNode.tagName.toLowerCase()&&1===this.activeIcon.parentNode.children.length||1===this.activeIcon.parentNode.children.length){let t=this.activeIcon.parentNode,e=t.parentNode;t.parentNode.removeChild(t);this.builderStuff.querySelector("#divLinkTool").style.display="";this.builderStuff.querySelector(".is-element-tool").style.display="",e&&""===e.innerHTML.trim()&&e.parentNode.removeChild(e)}else this.activeIcon.parentNode.removeChild(this.activeIcon);e.preventDefault()}this.cleanEditing&&(this.colTool.columnTool.classList.remove("active"),t.parentNode.querySelector(".is-row-tool").style.display="none",t.parentNode.querySelector(".is-col-tool").style.display="none")}createRange(t,e,i){if(i||((i=document.createRange()).selectNode(t),i.setStart(t,0)),0===e.count)i.setEnd(t,e.count);else if(t&&e.count>0)if(t.nodeType===Node.TEXT_NODE)t.textContent.length<e.count?e.count-=t.textContent.length:(i.setEnd(t,e.count),e.count=0);else for(var n=0;n<t.childNodes.length&&(i=this.createRange(t.childNodes[n],e,i),0!==e.count);n++);return i}handleCellFocus(t){const e=this.activeCol;e?t!==e&&(t.firstElementChild?t.firstElementChild.click():t.click()):t.firstElementChild?t.firstElementChild.click():t.click()}handleCellKeyup(t,e){this.dom.textSelection()&&("38"===e.keyCode||"40"===e.keyCode||"37"===e.keyCode||"39"===e.keyCode)&&this.util.saveSelection();let i=t.querySelectorAll("span");var n;Array.prototype.forEach.call(i,(t=>{t.hasAttribute("data-keep")||(t.outerHTML=t.innerHTML)}));try{this.win.getSelection?n=this.win.getSelection().getRangeAt(0).commonAncestorContainer.parentNode:this.doc.selection&&(n=this.doc.selection.createRange().parentElement())}catch(e){return}if(13===e.keyCode&&!e.shiftKey){"p"!==n.tagName.toLowerCase()&&"div"!==n.tagName.toLowerCase()||this.doc.execCommand("formatBlock",!1,"<p>");let e=t.querySelectorAll("[data-keep]");Array.prototype.forEach.call(e,(t=>{t.removeAttribute("data-keep")}))}this.oriLen!==t.textContent.length&&this.typing(),this.elmTool.hide()}typing(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.opts.onChange()}),2e3)}handleCellPaste(){this.uo.saveForUndo();const t=this.util;t.saveSelection();let e=this.doc.querySelector("#idContentWord");var i,n;e&&e.parentNode.removeChild(e),this.win.getSelection?i=3===(n=this.win.getSelection().getRangeAt(0).commonAncestorContainer).nodeType?n.parentNode:n:this.doc.selection&&(n=this.doc.selection.createRange(),i=this.doc.selection.createRange().parentElement());const o='<div style="position:absolute;z-index:-1000;top:'+(i.getBoundingClientRect().top+this.win.pageYOffset)+'px;left:-1000px;width:100px;height:100px;overflow:auto;" name="idContentWord" id="idContentWord" contenteditable="true"></div>';this.iframe?this.dom.appendHtml(this.contentStuff,o):this.dom.appendHtml(this.builderStuff,o),e=this.doc.querySelector("#idContentWord"),e.focus(),setTimeout((()=>{try{var e="";let u=this.doc.querySelector("#idContentWord");var i=!1,n=u.innerText;if(!this.opts.disableAutoEmbedVideo){var o=/^http[s]?:\/\/(((www.youtube.com\/watch\?(feature=player_detailpage&)?)v=)|(youtu.be\/))([^#&?]*)/.exec(n),s=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)\/?/.exec(n);if(null!==o||null!==s){if(null!==o&&o.length>=7)n="https://www.youtube.com/embed/"+o[6]+"?rel=0";if(null!==s&&s.length>=7)n="https://player.vimeo.com/video/"+s[6];e='<div class="embed-responsive embed-responsive-16by9"><iframe tabindex="0" width="560" height="315" src="'+n+'" frameborder="0" allowfullscreen=""></iframe></div>',i=!0}}if(!i)if("text"===this.opts.paste){let t=u.querySelectorAll("p,h1,h2,h3,h4,h5,h6");Array.prototype.forEach.call(t,(t=>{t.innerHTML=t.innerHTML+" "})),0===(e=(e=(e=u.innerHTML).replace(/(<([^>]+)>)/gi,"<br>")).replace(/(<br\s*\/?>){3,}/gi,"<br>")).indexOf("<br>")&&(e=e.substring(4)),"<br>"===e.substring(e.length-4)&&(e=e.substring(0,e.length-4)),e=e.trim()}else{e=u.innerHTML,e="html"===this.opts.paste?t.cleanHTML(e,!1):t.cleanHTML(e,!0),u.innerHTML=e;let i=u.querySelectorAll("li");Array.prototype.forEach.call(i,(t=>{t.style.whiteSpace="";const e=t.childNodes;let i=e.length;for(;i--;)"P"===e[i].tagName&&(e[i].outerHTML=e[i].innerHTML)})),e=u.innerHTML}u=this.doc.querySelector("#idContentWord"),u&&u.parentNode.removeChild(u),t.restoreSelection();var r=this.win.getSelection(),l=r.getRangeAt(0);l.extractContents(),l.collapse(!0);var a=l.createContextualFragment(e),d=a.lastChild;if(l.insertNode(a),this.activeCol){this.activeCol.querySelectorAll("h1:empty,h2:empty,h3:empty,h4:empty,h5:empty,h6:empty,p:empty").forEach((t=>{t.remove()}));let t=this.activeCol.querySelector("p.elm-active,h1.elm-active,h2.elm-active,h3.elm-active,h4.elm-active,h5.elm-active,h6.elm-active");if(t){if(t.querySelectorAll("p,h1,h2,h3,h4,h5,h6").length>0){let e=t.nextElementSibling;if(Array.from(t.childNodes).filter((t=>3===t.nodeType&&t.textContent.trim().length>1)).forEach((t=>{const e=document.createElement("p");t.after(e),e.appendChild(t)})),t.firstElementChild&&1===t.childNodes.length&&"SPAN"===t.firstElementChild.tagName){t.outerHTML=t.firstElementChild.innerHTML,this.activeCol.querySelectorAll("*:empty").forEach((t=>{t.remove()})),e?this.dom.moveCursorToElement(e.previousElementSibling):this.dom.moveCursorToElement(this.activeCol);let i=this.doc.querySelector(".builder-active");return i&&this.applyBehaviorOn(i),this.opts.onChange(),void this.opts.onRender()}t.outerHTML=t.innerHTML,this.activeCol.find("h1:empty,h2:empty,h3:empty,h4:empty,h5:empty,h6:empty,p:empty").remove(),e?this.dom.moveCursorToElement(e.previousElementSibling):this.dom.moveCursorToElement(this.activeCol);let i=this.doc.querySelector(".builder-active");return i&&this.applyBehaviorOn(i),this.opts.onChange(),void this.opts.onRender()}}}l.setStartAfter(d),l.setEndAfter(d),l.collapse(!1);var c=l.commonAncestorContainer;if(c&&c.parentNode)try{c.parentNode.normalize()}catch(t){}r.removeAllRanges(),r.addRange(l);let p=this.doc.querySelector(".builder-active");p&&this.applyBehaviorOn(p),this.opts.onChange(),this.opts.onRender()}catch(t){let e=this.doc.querySelector("#idContentWord");e&&e.parentNode.removeChild(e)}}),800)}cellSelected(){return this.util.cellSelected()}loadScript(t,e,i=!0,n=!0){return new Promise(((o,s)=>{let r=document.createElement("script");const l=e||document.getElementsByTagName("script")[0];function a(t,e){(e||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=null,r.onreadystatechange=null,r=void 0,e?s():o())}r.async=i,r.defer=n,r.onload=a,r.onreadystatechange=a,r.src=t,l.parentNode.insertBefore(r,l)}))}currentScriptPath(){let t,e;for(var i=document.getElementsByTagName("script"),n=0;n<i.length;n++){var o=i[n].src;t="contentbuilder.js",o.indexOf(t)>-1&&(e=o.substring(0,o.indexOf(t))),t="contentbuilder.min.js",o.indexOf(t)>-1&&(e=o.substring(0,o.indexOf(t)))}return e}sectionDropSetup(){if(this.page){if(".is-wrapper"!==this.page)return;const t=this.doc.querySelector(this.page);this.sortableOnPage=new Co(t,{scroll:!0,group:"shared",direction:"vertical",animation:150,sort:!0,onAdd:t=>{var e=t.item;if(e.querySelector(".is-col-tool")){let t=e.querySelector(".is-row-tool"),i=e.querySelector(".is-col-tool"),n=e.querySelector(".is-rowadd-tool");e.removeChild(t),e.removeChild(i),e.removeChild(n);let o=e.querySelectorAll("[data-click]");return o.forEach((t=>{t.removeAttribute("data-click")})),e.removeAttribute("draggable"),e.classList.remove("row-active"),e.classList.remove("row-outline"),o=e.querySelectorAll(".cell-active"),o.forEach((t=>{t.classList.remove("cell-active")})),o=e.querySelectorAll("*"),o.forEach((t=>{t.style.cursor=""})),e.outerHTML=this.settings.sectionTemplate.replace("[%CONTENT%]",e.outerHTML),void(this.opts.onSectionAdd&&this.opts.onSectionAdd())}if(e.getAttribute("data-id")){let t=e.getAttribute("data-id");const p=this.opts.snippetJSON.snippets.filter((e=>e.id+""===t&&e));var i,n=p[0].html,o=p[0].noedit;i=-1===n.indexOf('"row'),this.opts.emailMode&&(i=!1);var s=this.opts.row,r=this.opts.cols;if(""!==s&&12===r.length&&(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(new RegExp("row clearfix","g"),"row")).replace(new RegExp('"row',"g"),'"'+s)).replace(new RegExp("column full","g"),r[11])).replace(new RegExp("column half","g"),r[5])).replace(new RegExp("column third","g"),r[3])).replace(new RegExp("column fourth","g"),r[2])).replace(new RegExp("column fifth","g"),r[1])).replace(new RegExp("column sixth","g"),r[1])).replace(new RegExp("column two-third","g"),r[7])).replace(new RegExp("column two-fourth","g"),r[8])).replace(new RegExp("column two-fifth","g"),r[9])).replace(new RegExp("column two-sixth","g"),r[9])),n=n.replace(/{id}/g,this.util.makeId()),this.opts.onAdd&&(n=this.opts.onAdd(n)),this.opts.snippetPathReplace.length>0&&""!==this.opts.snippetPathReplace[0]){var l=new RegExp(this.opts.snippetPathReplace[0],"g");n=n.replace(l,this.opts.snippetPathReplace[1]);var a=this.opts.snippetPathReplace[0].replace(/\//g,"%2F"),d=this.opts.snippetPathReplace[1].replace(/\//g,"%2F"),c=new RegExp(a,"g");n=n.replace(c,d)}if(i)n=`<div class="${this.opts.row}"><div class="${this.opts.cols[this.opts.cols.length-1]}"${o?" data-noedit":""}>${n}</div></div>`,e.removeAttribute("draggable"),this.dom.removeClass(e,"snippet-item"),e.outerHTML=this.settings.sectionTemplate.replace("[%CONTENT%]",n);else{let t=this.dom.createElement("div");t.innerHTML=n;let i=t.querySelectorAll("[data-html]");Array.prototype.forEach.call(i,(t=>{n=(n=(n=decodeURIComponent(t.getAttribute("data-html"))).replace(/{id}/g,this.util.makeId())).replace(/<script>/g,""+(this.nonce?`<script nonce="${this.nonce}">`:"<script>"));for(var e=1;e<=20;e++)n=n.replace("[%HTML"+e+"%]",void 0===t.getAttribute("data-html-"+e)?"":decodeURIComponent(t.getAttribute("data-html-"+e)));t.innerHTML=n})),n=t.innerHTML,e.removeAttribute("draggable"),this.dom.removeClass(e,"snippet-item"),e.innerHTML="";var u=document.createRange();u.setStart(e,0),e.appendChild(u.createContextualFragment(n)),e.outerHTML=this.settings.sectionTemplate.replace("[%CONTENT%]",e.innerHTML)}this.opts.onSectionAdd&&this.opts.onSectionAdd(),this.opts.onChange(),this.opts.onRender()}this.sortableOnPage.destroy()}})}}}return rf}();
